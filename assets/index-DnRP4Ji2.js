function tS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function nS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var L_={exports:{}},Ma={},F_={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ms=Symbol.for("react.element"),rS=Symbol.for("react.portal"),iS=Symbol.for("react.fragment"),oS=Symbol.for("react.strict_mode"),sS=Symbol.for("react.profiler"),lS=Symbol.for("react.provider"),aS=Symbol.for("react.context"),uS=Symbol.for("react.forward_ref"),cS=Symbol.for("react.suspense"),dS=Symbol.for("react.memo"),fS=Symbol.for("react.lazy"),kp=Symbol.iterator;function hS(t){return t===null||typeof t!="object"?null:(t=kp&&t[kp]||t["@@iterator"],typeof t=="function"?t:null)}var U_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O_=Object.assign,B_={};function Wi(t,e,n){this.props=t,this.context=e,this.refs=B_,this.updater=n||U_}Wi.prototype.isReactComponent={};Wi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function q_(){}q_.prototype=Wi.prototype;function zd(t,e,n){this.props=t,this.context=e,this.refs=B_,this.updater=n||U_}var $d=zd.prototype=new q_;$d.constructor=zd;O_($d,Wi.prototype);$d.isPureReactComponent=!0;var Dp=Array.isArray,G_=Object.prototype.hasOwnProperty,Wd={current:null},b_={key:!0,ref:!0,__self:!0,__source:!0};function H_(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)G_.call(e,r)&&!b_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ms,type:t,key:o,ref:s,props:i,_owner:Wd.current}}function pS(t,e){return{$$typeof:Ms,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ms}function mS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vp=/\/+/g;function Vu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mS(""+t.key):e.toString(36)}function Il(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ms:case rS:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Vu(s,0):r,Dp(i)?(n="",t!=null&&(n=t.replace(Vp,"$&/")+"/"),Il(i,e,n,"",function(d){return d})):i!=null&&(Jd(i)&&(i=pS(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Vp,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Dp(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+Vu(o,l);s+=Il(o,e,n,u,i)}else if(u=hS(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+Vu(o,l++),s+=Il(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function el(t,e,n){if(t==null)return t;var r=[],i=0;return Il(t,r,"","",function(o){return e.call(n,o,i++)}),r}function gS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},Cl={transition:null},yS={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:Cl,ReactCurrentOwner:Wd};function z_(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:el,forEach:function(t,e,n){el(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return el(t,function(){e++}),e},toArray:function(t){return el(t,function(e){return e})||[]},only:function(t){if(!Jd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Wi;ne.Fragment=iS;ne.Profiler=sS;ne.PureComponent=zd;ne.StrictMode=oS;ne.Suspense=cS;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yS;ne.act=z_;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=O_({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Wd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)G_.call(e,u)&&!b_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ms,type:t.type,key:i,ref:o,props:r,_owner:s}};ne.createContext=function(t){return t={$$typeof:aS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lS,_context:t},t.Consumer=t};ne.createElement=H_;ne.createFactory=function(t){var e=H_.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:uS,render:t}};ne.isValidElement=Jd;ne.lazy=function(t){return{$$typeof:fS,_payload:{_status:-1,_result:t},_init:gS}};ne.memo=function(t,e){return{$$typeof:dS,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=Cl.transition;Cl.transition={};try{t()}finally{Cl.transition=e}};ne.unstable_act=z_;ne.useCallback=function(t,e){return ft.current.useCallback(t,e)};ne.useContext=function(t){return ft.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};ne.useEffect=function(t,e){return ft.current.useEffect(t,e)};ne.useId=function(){return ft.current.useId()};ne.useImperativeHandle=function(t,e,n){return ft.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return ft.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return ft.current.useReducer(t,e,n)};ne.useRef=function(t){return ft.current.useRef(t)};ne.useState=function(t){return ft.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return ft.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return ft.current.useTransition()};ne.version="18.3.1";F_.exports=ne;var b=F_.exports;const $_=nS(b),_S=tS({__proto__:null,default:$_},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vS=b,ES=Symbol.for("react.element"),TS=Symbol.for("react.fragment"),IS=Object.prototype.hasOwnProperty,CS=vS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SS={key:!0,ref:!0,__self:!0,__source:!0};function W_(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)IS.call(e,r)&&!SS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ES,type:t,key:o,ref:s,props:i,_owner:CS.current}}Ma.Fragment=TS;Ma.jsx=W_;Ma.jsxs=W_;L_.exports=Ma;var P=L_.exports,gc={},J_={exports:{}},At={},K_={exports:{}},Q_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,X){var ee=$.length;$.push(X);e:for(;0<ee;){var ve=ee-1>>>1,Re=$[ve];if(0<i(Re,X))$[ve]=X,$[ee]=Re,ee=ve;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var X=$[0],ee=$.pop();if(ee!==X){$[0]=ee;e:for(var ve=0,Re=$.length,gr=Re>>>1;ve<gr;){var Pt=2*(ve+1)-1,yr=$[Pt],Ot=Pt+1,Pn=$[Ot];if(0>i(yr,ee))Ot<Re&&0>i(Pn,yr)?($[ve]=Pn,$[Ot]=ee,ve=Ot):($[ve]=yr,$[Pt]=ee,ve=Pt);else if(Ot<Re&&0>i(Pn,ee))$[ve]=Pn,$[Ot]=ee,ve=Ot;else break e}}return X}function i($,X){var ee=$.sortIndex-X.sortIndex;return ee!==0?ee:$.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],d=[],h=1,p=null,m=3,_=!1,w=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C($){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=$)r(d),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(d)}}function V($){if(x=!1,C($),!w)if(n(u)!==null)w=!0,lt(U);else{var X=n(d);X!==null&&cn(V,X.startTime-$)}}function U($,X){w=!1,x&&(x=!1,I(T),T=-1),_=!0;var ee=m;try{for(C(X),p=n(u);p!==null&&(!(p.expirationTime>X)||$&&!M());){var ve=p.callback;if(typeof ve=="function"){p.callback=null,m=p.priorityLevel;var Re=ve(p.expirationTime<=X);X=t.unstable_now(),typeof Re=="function"?p.callback=Re:p===n(u)&&r(u),C(X)}else r(u);p=n(u)}if(p!==null)var gr=!0;else{var Pt=n(d);Pt!==null&&cn(V,Pt.startTime-X),gr=!1}return gr}finally{p=null,m=ee,_=!1}}var O=!1,A=null,T=-1,S=5,R=-1;function M(){return!(t.unstable_now()-R<S)}function D(){if(A!==null){var $=t.unstable_now();R=$;var X=!0;try{X=A(!0,$)}finally{X?N():(O=!1,A=null)}}else O=!1}var N;if(typeof E=="function")N=function(){E(D)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Rt=xe.port2;xe.port1.onmessage=D,N=function(){Rt.postMessage(null)}}else N=function(){k(D,0)};function lt($){A=$,O||(O=!0,N())}function cn($,X){T=k(function(){$(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){w||_||(w=!0,lt(U))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var ee=m;m=X;try{return $()}finally{m=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ee=m;m=$;try{return X()}finally{m=ee}},t.unstable_scheduleCallback=function($,X,ee){var ve=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ve+ee:ve):ee=ve,$){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=ee+Re,$={id:h++,callback:X,priorityLevel:$,startTime:ee,expirationTime:Re,sortIndex:-1},ee>ve?($.sortIndex=ee,e(d,$),n(u)===null&&$===n(d)&&(x?(I(T),T=-1):x=!0,cn(V,ee-ve))):($.sortIndex=Re,e(u,$),w||_||(w=!0,lt(U))),$},t.unstable_shouldYield=M,t.unstable_wrapCallback=function($){var X=m;return function(){var ee=m;m=X;try{return $.apply(this,arguments)}finally{m=ee}}}})(Q_);K_.exports=Q_;var AS=K_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS=b,St=AS;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y_=new Set,jo={};function br(t,e){Di(t,e),Di(t+"Capture",e)}function Di(t,e){for(jo[t]=e,t=0;t<e.length;t++)Y_.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=Object.prototype.hasOwnProperty,RS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lp={},Fp={};function PS(t){return yc.call(Fp,t)?!0:yc.call(Lp,t)?!1:RS.test(t)?Fp[t]=!0:(Lp[t]=!0,!1)}function NS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xS(t,e,n,r){if(e===null||typeof e>"u"||NS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ht(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qe[t]=new ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qe[e]=new ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qe[t]=new ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qe[t]=new ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qe[t]=new ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qe[t]=new ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qe[t]=new ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qe[t]=new ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qe[t]=new ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Kd=/[\-:]([a-z])/g;function Qd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Kd,Qd);Qe[e]=new ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Kd,Qd);Qe[e]=new ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Kd,Qd);Qe[e]=new ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qe[t]=new ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qe[t]=new ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yd(t,e,n,r){var i=Qe.hasOwnProperty(e)?Qe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xS(e,n,i,r)&&(n=null),r||i===null?PS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var An=wS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tl=Symbol.for("react.element"),li=Symbol.for("react.portal"),ai=Symbol.for("react.fragment"),Xd=Symbol.for("react.strict_mode"),_c=Symbol.for("react.profiler"),X_=Symbol.for("react.provider"),Z_=Symbol.for("react.context"),Zd=Symbol.for("react.forward_ref"),vc=Symbol.for("react.suspense"),Ec=Symbol.for("react.suspense_list"),jd=Symbol.for("react.memo"),Fn=Symbol.for("react.lazy"),j_=Symbol.for("react.offscreen"),Up=Symbol.iterator;function To(t){return t===null||typeof t!="object"?null:(t=Up&&t[Up]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,Lu;function xo(t){if(Lu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lu=e&&e[1]||""}return`
`+Lu+t}var Fu=!1;function Uu(t,e){if(!t||Fu)return"";Fu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{Fu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xo(t):""}function MS(t){switch(t.tag){case 5:return xo(t.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 2:case 15:return t=Uu(t.type,!1),t;case 11:return t=Uu(t.type.render,!1),t;case 1:return t=Uu(t.type,!0),t;default:return""}}function Tc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ai:return"Fragment";case li:return"Portal";case _c:return"Profiler";case Xd:return"StrictMode";case vc:return"Suspense";case Ec:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Z_:return(t.displayName||"Context")+".Consumer";case X_:return(t._context.displayName||"Context")+".Provider";case Zd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jd:return e=t.displayName||null,e!==null?e:Tc(t.type)||"Memo";case Fn:e=t._payload,t=t._init;try{return Tc(t(e))}catch{}}return null}function kS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tc(e);case 8:return e===Xd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ev(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DS(t){var e=ev(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nl(t){t._valueTracker||(t._valueTracker=DS(t))}function tv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ev(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ic(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Op(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nv(t,e){e=e.checked,e!=null&&Yd(t,"checked",e,!1)}function Cc(t,e){nv(t,e);var n=ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sc(t,e.type,ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sc(t,e,n){(e!=="number"||bl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mo=Array.isArray;function Ei(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ir(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ac(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Mo(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ir(n)}}function rv(t,e){var n=ir(e.value),r=ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rl,ov=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rl=rl||document.createElement("div"),rl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function es(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VS=["Webkit","ms","Moz","O"];Object.keys(Oo).forEach(function(t){VS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Oo[e]=Oo[t]})});function sv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Oo.hasOwnProperty(t)&&Oo[t]?(""+e).trim():e+"px"}function lv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var LS=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rc(t,e){if(e){if(LS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Pc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nc=null;function ef(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xc=null,Ti=null,Ii=null;function bp(t){if(t=Vs(t)){if(typeof xc!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Fa(e),xc(t.stateNode,t.type,e))}}function av(t){Ti?Ii?Ii.push(t):Ii=[t]:Ti=t}function uv(){if(Ti){var t=Ti,e=Ii;if(Ii=Ti=null,bp(t),e)for(t=0;t<e.length;t++)bp(e[t])}}function cv(t,e){return t(e)}function dv(){}var Ou=!1;function fv(t,e,n){if(Ou)return t(e,n);Ou=!0;try{return cv(t,e,n)}finally{Ou=!1,(Ti!==null||Ii!==null)&&(dv(),uv())}}function ts(t,e){var n=t.stateNode;if(n===null)return null;var r=Fa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Mc=!1;if(yn)try{var Io={};Object.defineProperty(Io,"passive",{get:function(){Mc=!0}}),window.addEventListener("test",Io,Io),window.removeEventListener("test",Io,Io)}catch{Mc=!1}function FS(t,e,n,r,i,o,s,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Bo=!1,Hl=null,zl=!1,kc=null,US={onError:function(t){Bo=!0,Hl=t}};function OS(t,e,n,r,i,o,s,l,u){Bo=!1,Hl=null,FS.apply(US,arguments)}function BS(t,e,n,r,i,o,s,l,u){if(OS.apply(this,arguments),Bo){if(Bo){var d=Hl;Bo=!1,Hl=null}else throw Error(G(198));zl||(zl=!0,kc=d)}}function Hr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hp(t){if(Hr(t)!==t)throw Error(G(188))}function qS(t){var e=t.alternate;if(!e){if(e=Hr(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Hp(i),t;if(o===r)return Hp(i),e;o=o.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function pv(t){return t=qS(t),t!==null?mv(t):null}function mv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mv(t);if(e!==null)return e;t=t.sibling}return null}var gv=St.unstable_scheduleCallback,zp=St.unstable_cancelCallback,GS=St.unstable_shouldYield,bS=St.unstable_requestPaint,Ne=St.unstable_now,HS=St.unstable_getCurrentPriorityLevel,tf=St.unstable_ImmediatePriority,yv=St.unstable_UserBlockingPriority,$l=St.unstable_NormalPriority,zS=St.unstable_LowPriority,_v=St.unstable_IdlePriority,ka=null,tn=null;function $S(t){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(ka,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:KS,WS=Math.log,JS=Math.LN2;function KS(t){return t>>>=0,t===0?32:31-(WS(t)/JS|0)|0}var il=64,ol=4194304;function ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=ko(l):(o&=s,o!==0&&(r=ko(o)))}else s=n&~i,s!==0?r=ko(s):o!==0&&(r=ko(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zt(e),i=1<<n,r|=t[n],e&=~i;return r}function QS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-zt(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=QS(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Dc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vv(){var t=il;return il<<=1,!(il&4194240)&&(il=64),t}function Bu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ks(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=n}function XS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function nf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ce=0;function Ev(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tv,rf,Iv,Cv,Sv,Vc=!1,sl=[],$n=null,Wn=null,Jn=null,ns=new Map,rs=new Map,On=[],ZS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $p(t,e){switch(t){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":ns.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(e.pointerId)}}function Co(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Vs(e),e!==null&&rf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jS(t,e,n,r,i){switch(e){case"focusin":return $n=Co($n,t,e,n,r,i),!0;case"dragenter":return Wn=Co(Wn,t,e,n,r,i),!0;case"mouseover":return Jn=Co(Jn,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ns.set(o,Co(ns.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,rs.set(o,Co(rs.get(o)||null,t,e,n,r,i)),!0}return!1}function Av(t){var e=wr(t.target);if(e!==null){var n=Hr(e);if(n!==null){if(e=n.tag,e===13){if(e=hv(n),e!==null){t.blockedOn=e,Sv(t.priority,function(){Iv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nc=r,n.target.dispatchEvent(r),Nc=null}else return e=Vs(n),e!==null&&rf(e),t.blockedOn=n,!1;e.shift()}return!0}function Wp(t,e,n){Sl(t)&&n.delete(e)}function eA(){Vc=!1,$n!==null&&Sl($n)&&($n=null),Wn!==null&&Sl(Wn)&&(Wn=null),Jn!==null&&Sl(Jn)&&(Jn=null),ns.forEach(Wp),rs.forEach(Wp)}function So(t,e){t.blockedOn===e&&(t.blockedOn=null,Vc||(Vc=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,eA)))}function is(t){function e(i){return So(i,t)}if(0<sl.length){So(sl[0],t);for(var n=1;n<sl.length;n++){var r=sl[n];r.blockedOn===t&&(r.blockedOn=null)}}for($n!==null&&So($n,t),Wn!==null&&So(Wn,t),Jn!==null&&So(Jn,t),ns.forEach(e),rs.forEach(e),n=0;n<On.length;n++)r=On[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<On.length&&(n=On[0],n.blockedOn===null);)Av(n),n.blockedOn===null&&On.shift()}var Ci=An.ReactCurrentBatchConfig,Jl=!0;function tA(t,e,n,r){var i=ce,o=Ci.transition;Ci.transition=null;try{ce=1,of(t,e,n,r)}finally{ce=i,Ci.transition=o}}function nA(t,e,n,r){var i=ce,o=Ci.transition;Ci.transition=null;try{ce=4,of(t,e,n,r)}finally{ce=i,Ci.transition=o}}function of(t,e,n,r){if(Jl){var i=Lc(t,e,n,r);if(i===null)Qu(t,e,r,Kl,n),$p(t,r);else if(jS(i,t,e,n,r))r.stopPropagation();else if($p(t,r),e&4&&-1<ZS.indexOf(t)){for(;i!==null;){var o=Vs(i);if(o!==null&&Tv(o),o=Lc(t,e,n,r),o===null&&Qu(t,e,r,Kl,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Qu(t,e,r,null,n)}}var Kl=null;function Lc(t,e,n,r){if(Kl=null,t=ef(r),t=wr(t),t!==null)if(e=Hr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kl=t,null}function wv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HS()){case tf:return 1;case yv:return 4;case $l:case zS:return 16;case _v:return 536870912;default:return 16}default:return 16}}var qn=null,sf=null,Al=null;function Rv(){if(Al)return Al;var t,e=sf,n=e.length,r,i="value"in qn?qn.value:qn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Al=i.slice(t,1<r?1-r:void 0)}function wl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ll(){return!0}function Jp(){return!1}function wt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ll:Jp,this.isPropagationStopped=Jp,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),e}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lf=wt(Ji),Ds=Ce({},Ji,{view:0,detail:0}),rA=wt(Ds),qu,Gu,Ao,Da=Ce({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:af,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ao&&(Ao&&t.type==="mousemove"?(qu=t.screenX-Ao.screenX,Gu=t.screenY-Ao.screenY):Gu=qu=0,Ao=t),qu)},movementY:function(t){return"movementY"in t?t.movementY:Gu}}),Kp=wt(Da),iA=Ce({},Da,{dataTransfer:0}),oA=wt(iA),sA=Ce({},Ds,{relatedTarget:0}),bu=wt(sA),lA=Ce({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),aA=wt(lA),uA=Ce({},Ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cA=wt(uA),dA=Ce({},Ji,{data:0}),Qp=wt(dA),fA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pA[t])?!!e[t]:!1}function af(){return mA}var gA=Ce({},Ds,{key:function(t){if(t.key){var e=fA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:af,charCode:function(t){return t.type==="keypress"?wl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yA=wt(gA),_A=Ce({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yp=wt(_A),vA=Ce({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:af}),EA=wt(vA),TA=Ce({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),IA=wt(TA),CA=Ce({},Da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SA=wt(CA),AA=[9,13,27,32],uf=yn&&"CompositionEvent"in window,qo=null;yn&&"documentMode"in document&&(qo=document.documentMode);var wA=yn&&"TextEvent"in window&&!qo,Pv=yn&&(!uf||qo&&8<qo&&11>=qo),Xp=" ",Zp=!1;function Nv(t,e){switch(t){case"keyup":return AA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ui=!1;function RA(t,e){switch(t){case"compositionend":return xv(e);case"keypress":return e.which!==32?null:(Zp=!0,Xp);case"textInput":return t=e.data,t===Xp&&Zp?null:t;default:return null}}function PA(t,e){if(ui)return t==="compositionend"||!uf&&Nv(t,e)?(t=Rv(),Al=sf=qn=null,ui=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pv&&e.locale!=="ko"?null:e.data;default:return null}}var NA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NA[t.type]:e==="textarea"}function Mv(t,e,n,r){av(r),e=Ql(e,"onChange"),0<e.length&&(n=new lf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Go=null,os=null;function xA(t){bv(t,0)}function Va(t){var e=fi(t);if(tv(e))return t}function MA(t,e){if(t==="change")return e}var kv=!1;if(yn){var Hu;if(yn){var zu="oninput"in document;if(!zu){var em=document.createElement("div");em.setAttribute("oninput","return;"),zu=typeof em.oninput=="function"}Hu=zu}else Hu=!1;kv=Hu&&(!document.documentMode||9<document.documentMode)}function tm(){Go&&(Go.detachEvent("onpropertychange",Dv),os=Go=null)}function Dv(t){if(t.propertyName==="value"&&Va(os)){var e=[];Mv(e,os,t,ef(t)),fv(xA,e)}}function kA(t,e,n){t==="focusin"?(tm(),Go=e,os=n,Go.attachEvent("onpropertychange",Dv)):t==="focusout"&&tm()}function DA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Va(os)}function VA(t,e){if(t==="click")return Va(e)}function LA(t,e){if(t==="input"||t==="change")return Va(e)}function FA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wt=typeof Object.is=="function"?Object.is:FA;function ss(t,e){if(Wt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yc.call(e,i)||!Wt(t[i],e[i]))return!1}return!0}function nm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rm(t,e){var n=nm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nm(n)}}function Vv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lv(){for(var t=window,e=bl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bl(t.document)}return e}function cf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UA(t){var e=Lv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Vv(n.ownerDocument.documentElement,n)){if(r!==null&&cf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=rm(n,o);var s=rm(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OA=yn&&"documentMode"in document&&11>=document.documentMode,ci=null,Fc=null,bo=null,Uc=!1;function im(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uc||ci==null||ci!==bl(r)||(r=ci,"selectionStart"in r&&cf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bo&&ss(bo,r)||(bo=r,r=Ql(Fc,"onSelect"),0<r.length&&(e=new lf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ci)))}function al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var di={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},$u={},Fv={};yn&&(Fv=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function La(t){if($u[t])return $u[t];if(!di[t])return t;var e=di[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Fv)return $u[t]=e[n];return t}var Uv=La("animationend"),Ov=La("animationiteration"),Bv=La("animationstart"),qv=La("transitionend"),Gv=new Map,om="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(t,e){Gv.set(t,e),br(e,[t])}for(var Wu=0;Wu<om.length;Wu++){var Ju=om[Wu],BA=Ju.toLowerCase(),qA=Ju[0].toUpperCase()+Ju.slice(1);fr(BA,"on"+qA)}fr(Uv,"onAnimationEnd");fr(Ov,"onAnimationIteration");fr(Bv,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(qv,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));br("onBeforeInput",["compositionend","keypress","textInput","paste"]);br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function sm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,BS(r,e,void 0,t),t.currentTarget=null}function bv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;sm(i,l,d),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,d=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;sm(i,l,d),o=u}}}if(zl)throw t=kc,zl=!1,kc=null,t}function me(t,e){var n=e[bc];n===void 0&&(n=e[bc]=new Set);var r=t+"__bubble";n.has(r)||(Hv(e,t,2,!1),n.add(r))}function Ku(t,e,n){var r=0;e&&(r|=4),Hv(n,t,r,e)}var ul="_reactListening"+Math.random().toString(36).slice(2);function ls(t){if(!t[ul]){t[ul]=!0,Y_.forEach(function(n){n!=="selectionchange"&&(GA.has(n)||Ku(n,!1,t),Ku(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ul]||(e[ul]=!0,Ku("selectionchange",!1,e))}}function Hv(t,e,n,r){switch(wv(e)){case 1:var i=tA;break;case 4:i=nA;break;default:i=of}n=i.bind(null,e,n,t),i=void 0,!Mc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Qu(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=wr(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}fv(function(){var d=o,h=ef(n),p=[];e:{var m=Gv.get(t);if(m!==void 0){var _=lf,w=t;switch(t){case"keypress":if(wl(n)===0)break e;case"keydown":case"keyup":_=yA;break;case"focusin":w="focus",_=bu;break;case"focusout":w="blur",_=bu;break;case"beforeblur":case"afterblur":_=bu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=oA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=EA;break;case Uv:case Ov:case Bv:_=aA;break;case qv:_=IA;break;case"scroll":_=rA;break;case"wheel":_=SA;break;case"copy":case"cut":case"paste":_=cA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Yp}var x=(e&4)!==0,k=!x&&t==="scroll",I=x?m!==null?m+"Capture":null:m;x=[];for(var E=d,C;E!==null;){C=E;var V=C.stateNode;if(C.tag===5&&V!==null&&(C=V,I!==null&&(V=ts(E,I),V!=null&&x.push(as(E,V,C)))),k)break;E=E.return}0<x.length&&(m=new _(m,w,null,n,h),p.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==Nc&&(w=n.relatedTarget||n.fromElement)&&(wr(w)||w[_n]))break e;if((_||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,_?(w=n.relatedTarget||n.toElement,_=d,w=w?wr(w):null,w!==null&&(k=Hr(w),w!==k||w.tag!==5&&w.tag!==6)&&(w=null)):(_=null,w=d),_!==w)){if(x=Kp,V="onMouseLeave",I="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=Yp,V="onPointerLeave",I="onPointerEnter",E="pointer"),k=_==null?m:fi(_),C=w==null?m:fi(w),m=new x(V,E+"leave",_,n,h),m.target=k,m.relatedTarget=C,V=null,wr(h)===d&&(x=new x(I,E+"enter",w,n,h),x.target=C,x.relatedTarget=k,V=x),k=V,_&&w)t:{for(x=_,I=w,E=0,C=x;C;C=ni(C))E++;for(C=0,V=I;V;V=ni(V))C++;for(;0<E-C;)x=ni(x),E--;for(;0<C-E;)I=ni(I),C--;for(;E--;){if(x===I||I!==null&&x===I.alternate)break t;x=ni(x),I=ni(I)}x=null}else x=null;_!==null&&lm(p,m,_,x,!1),w!==null&&k!==null&&lm(p,k,w,x,!0)}}e:{if(m=d?fi(d):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var U=MA;else if(jp(m))if(kv)U=LA;else{U=DA;var O=kA}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(U=VA);if(U&&(U=U(t,d))){Mv(p,U,n,h);break e}O&&O(t,m,d),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&Sc(m,"number",m.value)}switch(O=d?fi(d):window,t){case"focusin":(jp(O)||O.contentEditable==="true")&&(ci=O,Fc=d,bo=null);break;case"focusout":bo=Fc=ci=null;break;case"mousedown":Uc=!0;break;case"contextmenu":case"mouseup":case"dragend":Uc=!1,im(p,n,h);break;case"selectionchange":if(OA)break;case"keydown":case"keyup":im(p,n,h)}var A;if(uf)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ui?Nv(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Pv&&n.locale!=="ko"&&(ui||T!=="onCompositionStart"?T==="onCompositionEnd"&&ui&&(A=Rv()):(qn=h,sf="value"in qn?qn.value:qn.textContent,ui=!0)),O=Ql(d,T),0<O.length&&(T=new Qp(T,t,null,n,h),p.push({event:T,listeners:O}),A?T.data=A:(A=xv(n),A!==null&&(T.data=A)))),(A=wA?RA(t,n):PA(t,n))&&(d=Ql(d,"onBeforeInput"),0<d.length&&(h=new Qp("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=A))}bv(p,e)})}function as(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ql(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ts(t,n),o!=null&&r.unshift(as(t,o,i)),o=ts(t,e),o!=null&&r.push(as(t,o,i))),t=t.return}return r}function ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lm(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,i?(u=ts(n,o),u!=null&&s.unshift(as(n,u,l))):i||(u=ts(n,o),u!=null&&s.push(as(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var bA=/\r\n?/g,HA=/\u0000|\uFFFD/g;function am(t){return(typeof t=="string"?t:""+t).replace(bA,`
`).replace(HA,"")}function cl(t,e,n){if(e=am(e),am(t)!==e&&n)throw Error(G(425))}function Yl(){}var Oc=null,Bc=null;function qc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gc=typeof setTimeout=="function"?setTimeout:void 0,zA=typeof clearTimeout=="function"?clearTimeout:void 0,um=typeof Promise=="function"?Promise:void 0,$A=typeof queueMicrotask=="function"?queueMicrotask:typeof um<"u"?function(t){return um.resolve(null).then(t).catch(WA)}:Gc;function WA(t){setTimeout(function(){throw t})}function Yu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),is(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);is(e)}function Kn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),en="__reactFiber$"+Ki,us="__reactProps$"+Ki,_n="__reactContainer$"+Ki,bc="__reactEvents$"+Ki,JA="__reactListeners$"+Ki,KA="__reactHandles$"+Ki;function wr(t){var e=t[en];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_n]||n[en]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cm(t);t!==null;){if(n=t[en])return n;t=cm(t)}return e}t=n,n=t.parentNode}return null}function Vs(t){return t=t[en]||t[_n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Fa(t){return t[us]||null}var Hc=[],hi=-1;function hr(t){return{current:t}}function _e(t){0>hi||(t.current=Hc[hi],Hc[hi]=null,hi--)}function he(t,e){hi++,Hc[hi]=t.current,t.current=e}var or={},st=hr(or),yt=hr(!1),Vr=or;function Vi(t,e){var n=t.type.contextTypes;if(!n)return or;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _t(t){return t=t.childContextTypes,t!=null}function Xl(){_e(yt),_e(st)}function dm(t,e,n){if(st.current!==or)throw Error(G(168));he(st,e),he(yt,n)}function zv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,kS(t)||"Unknown",i));return Ce({},n,r)}function Zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||or,Vr=st.current,he(st,t),he(yt,yt.current),!0}function fm(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=zv(t,e,Vr),r.__reactInternalMemoizedMergedChildContext=t,_e(yt),_e(st),he(st,t)):_e(yt),he(yt,n)}var hn=null,Ua=!1,Xu=!1;function $v(t){hn===null?hn=[t]:hn.push(t)}function QA(t){Ua=!0,$v(t)}function pr(){if(!Xu&&hn!==null){Xu=!0;var t=0,e=ce;try{var n=hn;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hn=null,Ua=!1}catch(i){throw hn!==null&&(hn=hn.slice(t+1)),gv(tf,pr),i}finally{ce=e,Xu=!1}}return null}var pi=[],mi=0,jl=null,ea=0,Nt=[],xt=0,Lr=null,pn=1,mn="";function Cr(t,e){pi[mi++]=ea,pi[mi++]=jl,jl=t,ea=e}function Wv(t,e,n){Nt[xt++]=pn,Nt[xt++]=mn,Nt[xt++]=Lr,Lr=t;var r=pn;t=mn;var i=32-zt(r)-1;r&=~(1<<i),n+=1;var o=32-zt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,pn=1<<32-zt(e)+i|n<<i|r,mn=o+t}else pn=1<<o|n<<i|r,mn=t}function df(t){t.return!==null&&(Cr(t,1),Wv(t,1,0))}function ff(t){for(;t===jl;)jl=pi[--mi],pi[mi]=null,ea=pi[--mi],pi[mi]=null;for(;t===Lr;)Lr=Nt[--xt],Nt[xt]=null,mn=Nt[--xt],Nt[xt]=null,pn=Nt[--xt],Nt[xt]=null}var Ct=null,It=null,Ee=!1,bt=null;function Jv(t,e){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,It=Kn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Lr!==null?{id:pn,overflow:mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ct=t,It=null,!0):!1;default:return!1}}function zc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $c(t){if(Ee){var e=It;if(e){var n=e;if(!hm(t,e)){if(zc(t))throw Error(G(418));e=Kn(n.nextSibling);var r=Ct;e&&hm(t,e)?Jv(r,n):(t.flags=t.flags&-4097|2,Ee=!1,Ct=t)}}else{if(zc(t))throw Error(G(418));t.flags=t.flags&-4097|2,Ee=!1,Ct=t}}}function pm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function dl(t){if(t!==Ct)return!1;if(!Ee)return pm(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qc(t.type,t.memoizedProps)),e&&(e=It)){if(zc(t))throw Kv(),Error(G(418));for(;e;)Jv(t,e),e=Kn(e.nextSibling)}if(pm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=Kn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=Ct?Kn(t.stateNode.nextSibling):null;return!0}function Kv(){for(var t=It;t;)t=Kn(t.nextSibling)}function Li(){It=Ct=null,Ee=!1}function hf(t){bt===null?bt=[t]:bt.push(t)}var YA=An.ReactCurrentBatchConfig;function wo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function fl(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mm(t){var e=t._init;return e(t._payload)}function Qv(t){function e(I,E){if(t){var C=I.deletions;C===null?(I.deletions=[E],I.flags|=16):C.push(E)}}function n(I,E){if(!t)return null;for(;E!==null;)e(I,E),E=E.sibling;return null}function r(I,E){for(I=new Map;E!==null;)E.key!==null?I.set(E.key,E):I.set(E.index,E),E=E.sibling;return I}function i(I,E){return I=Zn(I,E),I.index=0,I.sibling=null,I}function o(I,E,C){return I.index=C,t?(C=I.alternate,C!==null?(C=C.index,C<E?(I.flags|=2,E):C):(I.flags|=2,E)):(I.flags|=1048576,E)}function s(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,E,C,V){return E===null||E.tag!==6?(E=ic(C,I.mode,V),E.return=I,E):(E=i(E,C),E.return=I,E)}function u(I,E,C,V){var U=C.type;return U===ai?h(I,E,C.props.children,V,C.key):E!==null&&(E.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Fn&&mm(U)===E.type)?(V=i(E,C.props),V.ref=wo(I,E,C),V.return=I,V):(V=Dl(C.type,C.key,C.props,null,I.mode,V),V.ref=wo(I,E,C),V.return=I,V)}function d(I,E,C,V){return E===null||E.tag!==4||E.stateNode.containerInfo!==C.containerInfo||E.stateNode.implementation!==C.implementation?(E=oc(C,I.mode,V),E.return=I,E):(E=i(E,C.children||[]),E.return=I,E)}function h(I,E,C,V,U){return E===null||E.tag!==7?(E=Mr(C,I.mode,V,U),E.return=I,E):(E=i(E,C),E.return=I,E)}function p(I,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return E=ic(""+E,I.mode,C),E.return=I,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case tl:return C=Dl(E.type,E.key,E.props,null,I.mode,C),C.ref=wo(I,null,E),C.return=I,C;case li:return E=oc(E,I.mode,C),E.return=I,E;case Fn:var V=E._init;return p(I,V(E._payload),C)}if(Mo(E)||To(E))return E=Mr(E,I.mode,C,null),E.return=I,E;fl(I,E)}return null}function m(I,E,C,V){var U=E!==null?E.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return U!==null?null:l(I,E,""+C,V);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case tl:return C.key===U?u(I,E,C,V):null;case li:return C.key===U?d(I,E,C,V):null;case Fn:return U=C._init,m(I,E,U(C._payload),V)}if(Mo(C)||To(C))return U!==null?null:h(I,E,C,V,null);fl(I,C)}return null}function _(I,E,C,V,U){if(typeof V=="string"&&V!==""||typeof V=="number")return I=I.get(C)||null,l(E,I,""+V,U);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case tl:return I=I.get(V.key===null?C:V.key)||null,u(E,I,V,U);case li:return I=I.get(V.key===null?C:V.key)||null,d(E,I,V,U);case Fn:var O=V._init;return _(I,E,C,O(V._payload),U)}if(Mo(V)||To(V))return I=I.get(C)||null,h(E,I,V,U,null);fl(E,V)}return null}function w(I,E,C,V){for(var U=null,O=null,A=E,T=E=0,S=null;A!==null&&T<C.length;T++){A.index>T?(S=A,A=null):S=A.sibling;var R=m(I,A,C[T],V);if(R===null){A===null&&(A=S);break}t&&A&&R.alternate===null&&e(I,A),E=o(R,E,T),O===null?U=R:O.sibling=R,O=R,A=S}if(T===C.length)return n(I,A),Ee&&Cr(I,T),U;if(A===null){for(;T<C.length;T++)A=p(I,C[T],V),A!==null&&(E=o(A,E,T),O===null?U=A:O.sibling=A,O=A);return Ee&&Cr(I,T),U}for(A=r(I,A);T<C.length;T++)S=_(A,I,T,C[T],V),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?T:S.key),E=o(S,E,T),O===null?U=S:O.sibling=S,O=S);return t&&A.forEach(function(M){return e(I,M)}),Ee&&Cr(I,T),U}function x(I,E,C,V){var U=To(C);if(typeof U!="function")throw Error(G(150));if(C=U.call(C),C==null)throw Error(G(151));for(var O=U=null,A=E,T=E=0,S=null,R=C.next();A!==null&&!R.done;T++,R=C.next()){A.index>T?(S=A,A=null):S=A.sibling;var M=m(I,A,R.value,V);if(M===null){A===null&&(A=S);break}t&&A&&M.alternate===null&&e(I,A),E=o(M,E,T),O===null?U=M:O.sibling=M,O=M,A=S}if(R.done)return n(I,A),Ee&&Cr(I,T),U;if(A===null){for(;!R.done;T++,R=C.next())R=p(I,R.value,V),R!==null&&(E=o(R,E,T),O===null?U=R:O.sibling=R,O=R);return Ee&&Cr(I,T),U}for(A=r(I,A);!R.done;T++,R=C.next())R=_(A,I,T,R.value,V),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?T:R.key),E=o(R,E,T),O===null?U=R:O.sibling=R,O=R);return t&&A.forEach(function(D){return e(I,D)}),Ee&&Cr(I,T),U}function k(I,E,C,V){if(typeof C=="object"&&C!==null&&C.type===ai&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case tl:e:{for(var U=C.key,O=E;O!==null;){if(O.key===U){if(U=C.type,U===ai){if(O.tag===7){n(I,O.sibling),E=i(O,C.props.children),E.return=I,I=E;break e}}else if(O.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Fn&&mm(U)===O.type){n(I,O.sibling),E=i(O,C.props),E.ref=wo(I,O,C),E.return=I,I=E;break e}n(I,O);break}else e(I,O);O=O.sibling}C.type===ai?(E=Mr(C.props.children,I.mode,V,C.key),E.return=I,I=E):(V=Dl(C.type,C.key,C.props,null,I.mode,V),V.ref=wo(I,E,C),V.return=I,I=V)}return s(I);case li:e:{for(O=C.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===C.containerInfo&&E.stateNode.implementation===C.implementation){n(I,E.sibling),E=i(E,C.children||[]),E.return=I,I=E;break e}else{n(I,E);break}else e(I,E);E=E.sibling}E=oc(C,I.mode,V),E.return=I,I=E}return s(I);case Fn:return O=C._init,k(I,E,O(C._payload),V)}if(Mo(C))return w(I,E,C,V);if(To(C))return x(I,E,C,V);fl(I,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,E!==null&&E.tag===6?(n(I,E.sibling),E=i(E,C),E.return=I,I=E):(n(I,E),E=ic(C,I.mode,V),E.return=I,I=E),s(I)):n(I,E)}return k}var Fi=Qv(!0),Yv=Qv(!1),ta=hr(null),na=null,gi=null,pf=null;function mf(){pf=gi=na=null}function gf(t){var e=ta.current;_e(ta),t._currentValue=e}function Wc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Si(t,e){na=t,pf=gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gt=!0),t.firstContext=null)}function Ft(t){var e=t._currentValue;if(pf!==t)if(t={context:t,memoizedValue:e,next:null},gi===null){if(na===null)throw Error(G(308));gi=t,na.dependencies={lanes:0,firstContext:t}}else gi=gi.next=t;return e}var Rr=null;function yf(t){Rr===null?Rr=[t]:Rr.push(t)}function Xv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,yf(e)):(n.next=i.next,i.next=n),e.interleaved=n,vn(t,r)}function vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Un=!1;function _f(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vn(t,n)}return i=r.interleaved,i===null?(e.next=e,yf(r)):(e.next=i.next,i.next=e),r.interleaved=e,vn(t,n)}function Rl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nf(t,n)}}function gm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ra(t,e,n,r){var i=t.updateQueue;Un=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,s===null?o=d:s.next=d,s=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==s&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;s=0,h=d=u=null,l=o;do{var m=l.lane,_=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,x=l;switch(m=e,_=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){p=w.call(_,p,m);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,m=typeof w=="function"?w.call(_,p,m):w,m==null)break e;p=Ce({},p,m);break e;case 2:Un=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else _={eventTime:_,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=_,u=p):h=h.next=_,s|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ur|=s,t.lanes=s,t.memoizedState=p}}function ym(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var Ls={},nn=hr(Ls),cs=hr(Ls),ds=hr(Ls);function Pr(t){if(t===Ls)throw Error(G(174));return t}function vf(t,e){switch(he(ds,e),he(cs,t),he(nn,Ls),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wc(e,t)}_e(nn),he(nn,e)}function Ui(){_e(nn),_e(cs),_e(ds)}function jv(t){Pr(ds.current);var e=Pr(nn.current),n=wc(e,t.type);e!==n&&(he(cs,t),he(nn,n))}function Ef(t){cs.current===t&&(_e(nn),_e(cs))}var Te=hr(0);function ia(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zu=[];function Tf(){for(var t=0;t<Zu.length;t++)Zu[t]._workInProgressVersionPrimary=null;Zu.length=0}var Pl=An.ReactCurrentDispatcher,ju=An.ReactCurrentBatchConfig,Fr=0,Ie=null,Ue=null,He=null,oa=!1,Ho=!1,fs=0,XA=0;function Ze(){throw Error(G(321))}function If(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wt(t[n],e[n]))return!1;return!0}function Cf(t,e,n,r,i,o){if(Fr=o,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pl.current=t===null||t.memoizedState===null?tw:nw,t=n(r,i),Ho){o=0;do{if(Ho=!1,fs=0,25<=o)throw Error(G(301));o+=1,He=Ue=null,e.updateQueue=null,Pl.current=rw,t=n(r,i)}while(Ho)}if(Pl.current=sa,e=Ue!==null&&Ue.next!==null,Fr=0,He=Ue=Ie=null,oa=!1,e)throw Error(G(300));return t}function Sf(){var t=fs!==0;return fs=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ie.memoizedState=He=t:He=He.next=t,He}function Ut(){if(Ue===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=He===null?Ie.memoizedState:He.next;if(e!==null)He=e,Ue=t;else{if(t===null)throw Error(G(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},He===null?Ie.memoizedState=He=t:He=He.next=t}return He}function hs(t,e){return typeof e=="function"?e(t):e}function ec(t){var e=Ut(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=Ue,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,d=o;do{var h=d.lane;if((Fr&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,s=r):u=u.next=p,Ie.lanes|=h,Ur|=h}d=d.next}while(d!==null&&d!==o);u===null?s=r:u.next=l,Wt(r,e.memoizedState)||(gt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ie.lanes|=o,Ur|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function tc(t){var e=Ut(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Wt(o,e.memoizedState)||(gt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function eE(){}function tE(t,e){var n=Ie,r=Ut(),i=e(),o=!Wt(r.memoizedState,i);if(o&&(r.memoizedState=i,gt=!0),r=r.queue,Af(iE.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,ps(9,rE.bind(null,n,r,i,e),void 0,null),ze===null)throw Error(G(349));Fr&30||nE(n,e,i)}return i}function nE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rE(t,e,n,r){e.value=n,e.getSnapshot=r,oE(e)&&sE(t)}function iE(t,e,n){return n(function(){oE(e)&&sE(t)})}function oE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wt(t,n)}catch{return!0}}function sE(t){var e=vn(t,1);e!==null&&$t(e,t,1,-1)}function _m(t){var e=Zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:t},e.queue=t,t=t.dispatch=ew.bind(null,Ie,t),[e.memoizedState,t]}function ps(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lE(){return Ut().memoizedState}function Nl(t,e,n,r){var i=Zt();Ie.flags|=t,i.memoizedState=ps(1|e,n,void 0,r===void 0?null:r)}function Oa(t,e,n,r){var i=Ut();r=r===void 0?null:r;var o=void 0;if(Ue!==null){var s=Ue.memoizedState;if(o=s.destroy,r!==null&&If(r,s.deps)){i.memoizedState=ps(e,n,o,r);return}}Ie.flags|=t,i.memoizedState=ps(1|e,n,o,r)}function vm(t,e){return Nl(8390656,8,t,e)}function Af(t,e){return Oa(2048,8,t,e)}function aE(t,e){return Oa(4,2,t,e)}function uE(t,e){return Oa(4,4,t,e)}function cE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dE(t,e,n){return n=n!=null?n.concat([t]):null,Oa(4,4,cE.bind(null,e,t),n)}function wf(){}function fE(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&If(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hE(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&If(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pE(t,e,n){return Fr&21?(Wt(n,e)||(n=vv(),Ie.lanes|=n,Ur|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gt=!0),t.memoizedState=n)}function ZA(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=ju.transition;ju.transition={};try{t(!1),e()}finally{ce=n,ju.transition=r}}function mE(){return Ut().memoizedState}function jA(t,e,n){var r=Xn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gE(t))yE(e,n);else if(n=Xv(t,e,n,r),n!==null){var i=dt();$t(n,t,r,i),_E(n,e,r)}}function ew(t,e,n){var r=Xn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gE(t))yE(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,Wt(l,s)){var u=e.interleaved;u===null?(i.next=i,yf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Xv(t,e,i,r),n!==null&&(i=dt(),$t(n,t,r,i),_E(n,e,r))}}function gE(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function yE(t,e){Ho=oa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _E(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nf(t,n)}}var sa={readContext:Ft,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},tw={readContext:Ft,useCallback:function(t,e){return Zt().memoizedState=[t,e===void 0?null:e],t},useContext:Ft,useEffect:vm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nl(4194308,4,cE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nl(4,2,t,e)},useMemo:function(t,e){var n=Zt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jA.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=Zt();return t={current:t},e.memoizedState=t},useState:_m,useDebugValue:wf,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=_m(!1),e=t[0];return t=ZA.bind(null,t[1]),Zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,i=Zt();if(Ee){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),ze===null)throw Error(G(349));Fr&30||nE(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,vm(iE.bind(null,r,o,t),[t]),r.flags|=2048,ps(9,rE.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Zt(),e=ze.identifierPrefix;if(Ee){var n=mn,r=pn;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nw={readContext:Ft,useCallback:fE,useContext:Ft,useEffect:Af,useImperativeHandle:dE,useInsertionEffect:aE,useLayoutEffect:uE,useMemo:hE,useReducer:ec,useRef:lE,useState:function(){return ec(hs)},useDebugValue:wf,useDeferredValue:function(t){var e=Ut();return pE(e,Ue.memoizedState,t)},useTransition:function(){var t=ec(hs)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:eE,useSyncExternalStore:tE,useId:mE,unstable_isNewReconciler:!1},rw={readContext:Ft,useCallback:fE,useContext:Ft,useEffect:Af,useImperativeHandle:dE,useInsertionEffect:aE,useLayoutEffect:uE,useMemo:hE,useReducer:tc,useRef:lE,useState:function(){return tc(hs)},useDebugValue:wf,useDeferredValue:function(t){var e=Ut();return Ue===null?e.memoizedState=t:pE(e,Ue.memoizedState,t)},useTransition:function(){var t=tc(hs)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:eE,useSyncExternalStore:tE,useId:mE,unstable_isNewReconciler:!1};function qt(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ba={isMounted:function(t){return(t=t._reactInternals)?Hr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dt(),i=Xn(t),o=gn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Qn(t,o,i),e!==null&&($t(e,t,i,r),Rl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dt(),i=Xn(t),o=gn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Qn(t,o,i),e!==null&&($t(e,t,i,r),Rl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dt(),r=Xn(t),i=gn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Qn(t,i,r),e!==null&&($t(e,t,r,n),Rl(e,t,r))}};function Em(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!ss(n,r)||!ss(i,o):!0}function vE(t,e,n){var r=!1,i=or,o=e.contextType;return typeof o=="object"&&o!==null?o=Ft(o):(i=_t(e)?Vr:st.current,r=e.contextTypes,o=(r=r!=null)?Vi(t,i):or),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ba,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Tm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ba.enqueueReplaceState(e,e.state,null)}function Kc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},_f(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ft(o):(o=_t(e)?Vr:st.current,i.context=Vi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Jc(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ba.enqueueReplaceState(i,i.state,null),ra(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Oi(t,e){try{var n="",r=e;do n+=MS(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function nc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var iw=typeof WeakMap=="function"?WeakMap:Map;function EE(t,e,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){aa||(aa=!0,od=r),Qc(t,e)},n}function TE(t,e,n){n=gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Qc(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Qc(t,e),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Im(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new iw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_w.bind(null,t,e,n),e.then(t,t))}function Cm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gn(-1,1),e.tag=2,Qn(n,e,1))),n.lanes|=1),t)}var ow=An.ReactCurrentOwner,gt=!1;function ct(t,e,n,r){e.child=t===null?Yv(e,null,n,r):Fi(e,t.child,n,r)}function Am(t,e,n,r,i){n=n.render;var o=e.ref;return Si(e,i),r=Cf(t,e,n,r,o,i),n=Sf(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(Ee&&n&&df(e),e.flags|=1,ct(t,e,r,i),e.child)}function wm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Vf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,IE(t,e,o,r,i)):(t=Dl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ss,n(s,r)&&t.ref===e.ref)return En(t,e,i)}return e.flags|=1,t=Zn(o,r),t.ref=e.ref,t.return=e,e.child=t}function IE(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ss(o,r)&&t.ref===e.ref)if(gt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,En(t,e,i)}return Yc(t,e,n,r,i)}function CE(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(_i,Tt),Tt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(_i,Tt),Tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,he(_i,Tt),Tt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,he(_i,Tt),Tt|=r;return ct(t,e,i,n),e.child}function SE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Yc(t,e,n,r,i){var o=_t(n)?Vr:st.current;return o=Vi(e,o),Si(e,i),n=Cf(t,e,n,r,o,i),r=Sf(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(Ee&&r&&df(e),e.flags|=1,ct(t,e,n,i),e.child)}function Rm(t,e,n,r,i){if(_t(n)){var o=!0;Zl(e)}else o=!1;if(Si(e,i),e.stateNode===null)xl(t,e),vE(e,n,r),Kc(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ft(d):(d=_t(n)?Vr:st.current,d=Vi(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Tm(e,s,r,d),Un=!1;var m=e.memoizedState;s.state=m,ra(e,r,s,i),u=e.memoizedState,l!==r||m!==u||yt.current||Un?(typeof h=="function"&&(Jc(e,n,h,r),u=e.memoizedState),(l=Un||Em(e,n,l,r,m,u,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=d,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Zv(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:qt(e.type,l),s.props=d,p=e.pendingProps,m=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ft(u):(u=_t(n)?Vr:st.current,u=Vi(e,u));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||m!==u)&&Tm(e,s,r,u),Un=!1,m=e.memoizedState,s.state=m,ra(e,r,s,i);var w=e.memoizedState;l!==p||m!==w||yt.current||Un?(typeof _=="function"&&(Jc(e,n,_,r),w=e.memoizedState),(d=Un||Em(e,n,d,r,m,w,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,w,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,w,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),s.props=r,s.state=w,s.context=u,r=d):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Xc(t,e,n,r,o,i)}function Xc(t,e,n,r,i,o){SE(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&fm(e,n,!1),En(t,e,o);r=e.stateNode,ow.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Fi(e,t.child,null,o),e.child=Fi(e,null,l,o)):ct(t,e,l,o),e.memoizedState=r.state,i&&fm(e,n,!0),e.child}function AE(t){var e=t.stateNode;e.pendingContext?dm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dm(t,e.context,!1),vf(t,e.containerInfo)}function Pm(t,e,n,r,i){return Li(),hf(i),e.flags|=256,ct(t,e,n,r),e.child}var Zc={dehydrated:null,treeContext:null,retryLane:0};function jc(t){return{baseLanes:t,cachePool:null,transitions:null}}function wE(t,e,n){var r=e.pendingProps,i=Te.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),he(Te,i&1),t===null)return $c(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ba(s,r,0,null),t=Mr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=jc(n),e.memoizedState=Zc,t):Rf(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return sw(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Zn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Zn(l,o):(o=Mr(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?jc(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Zc,r}return o=t.child,t=o.sibling,r=Zn(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rf(t,e){return e=ba({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hl(t,e,n,r){return r!==null&&hf(r),Fi(e,t.child,null,n),t=Rf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sw(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=nc(Error(G(422))),hl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ba({mode:"visible",children:r.children},i,0,null),o=Mr(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Fi(e,t.child,null,s),e.child.memoizedState=jc(s),e.memoizedState=Zc,o);if(!(e.mode&1))return hl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(G(419)),r=nc(o,r,void 0),hl(t,e,s,r)}if(l=(s&t.childLanes)!==0,gt||l){if(r=ze,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,vn(t,i),$t(r,t,i,-1))}return Df(),r=nc(Error(G(421))),hl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vw.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,It=Kn(i.nextSibling),Ct=e,Ee=!0,bt=null,t!==null&&(Nt[xt++]=pn,Nt[xt++]=mn,Nt[xt++]=Lr,pn=t.id,mn=t.overflow,Lr=e),e=Rf(e,r.children),e.flags|=4096,e)}function Nm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wc(t.return,e,n)}function rc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function RE(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(ct(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nm(t,n,e);else if(t.tag===19)Nm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(Te,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ia(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),rc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ia(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}rc(e,!0,n,null,o);break;case"together":rc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ur|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Zn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lw(t,e,n){switch(e.tag){case 3:AE(e),Li();break;case 5:jv(e);break;case 1:_t(e.type)&&Zl(e);break;case 4:vf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;he(ta,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?wE(t,e,n):(he(Te,Te.current&1),t=En(t,e,n),t!==null?t.sibling:null);he(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return RE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,CE(t,e,n)}return En(t,e,n)}var PE,ed,NE,xE;PE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ed=function(){};NE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Pr(nn.current);var o=null;switch(n){case"input":i=Ic(t,i),r=Ic(t,r),o=[];break;case"select":i=Ce({},i,{value:void 0}),r=Ce({},r,{value:void 0}),o=[];break;case"textarea":i=Ac(t,i),r=Ac(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yl)}Rc(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(jo.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(jo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&me("scroll",t),o||l===u||(o=[])):(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};xE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ro(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aw(t,e,n){var r=e.pendingProps;switch(ff(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(e),null;case 1:return _t(e.type)&&Xl(),je(e),null;case 3:return r=e.stateNode,Ui(),_e(yt),_e(st),Tf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bt!==null&&(ad(bt),bt=null))),ed(t,e),je(e),null;case 5:Ef(e);var i=Pr(ds.current);if(n=e.type,t!==null&&e.stateNode!=null)NE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return je(e),null}if(t=Pr(nn.current),dl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[en]=e,r[us]=o,t=(e.mode&1)!==0,n){case"dialog":me("cancel",r),me("close",r);break;case"iframe":case"object":case"embed":me("load",r);break;case"video":case"audio":for(i=0;i<Do.length;i++)me(Do[i],r);break;case"source":me("error",r);break;case"img":case"image":case"link":me("error",r),me("load",r);break;case"details":me("toggle",r);break;case"input":Op(r,o),me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},me("invalid",r);break;case"textarea":qp(r,o),me("invalid",r)}Rc(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&cl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&cl(r.textContent,l,t),i=["children",""+l]):jo.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&me("scroll",r)}switch(n){case"input":nl(r),Bp(r,o,!0);break;case"textarea":nl(r),Gp(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Yl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[en]=e,t[us]=r,PE(t,e,!1,!1),e.stateNode=t;e:{switch(s=Pc(n,r),n){case"dialog":me("cancel",t),me("close",t),i=r;break;case"iframe":case"object":case"embed":me("load",t),i=r;break;case"video":case"audio":for(i=0;i<Do.length;i++)me(Do[i],t);i=r;break;case"source":me("error",t),i=r;break;case"img":case"image":case"link":me("error",t),me("load",t),i=r;break;case"details":me("toggle",t),i=r;break;case"input":Op(t,r),i=Ic(t,r),me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ce({},r,{value:void 0}),me("invalid",t);break;case"textarea":qp(t,r),i=Ac(t,r),me("invalid",t);break;default:i=r}Rc(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?lv(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ov(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&es(t,u):typeof u=="number"&&es(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(jo.hasOwnProperty(o)?u!=null&&o==="onScroll"&&me("scroll",t):u!=null&&Yd(t,o,u,s))}switch(n){case"input":nl(t),Bp(t,r,!1);break;case"textarea":nl(t),Gp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ir(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ei(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ei(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return je(e),null;case 6:if(t&&e.stateNode!=null)xE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Pr(ds.current),Pr(nn.current),dl(e)){if(r=e.stateNode,n=e.memoizedProps,r[en]=e,(o=r.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[en]=e,e.stateNode=r}return je(e),null;case 13:if(_e(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&It!==null&&e.mode&1&&!(e.flags&128))Kv(),Li(),e.flags|=98560,o=!1;else if(o=dl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(G(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[en]=e}else Li(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;je(e),o=!1}else bt!==null&&(ad(bt),bt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Oe===0&&(Oe=3):Df())),e.updateQueue!==null&&(e.flags|=4),je(e),null);case 4:return Ui(),ed(t,e),t===null&&ls(e.stateNode.containerInfo),je(e),null;case 10:return gf(e.type._context),je(e),null;case 17:return _t(e.type)&&Xl(),je(e),null;case 19:if(_e(Te),o=e.memoizedState,o===null)return je(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ro(o,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ia(t),s!==null){for(e.flags|=128,Ro(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(Te,Te.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ne()>Bi&&(e.flags|=128,r=!0,Ro(o,!1),e.lanes=4194304)}else{if(!r)if(t=ia(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ro(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ee)return je(e),null}else 2*Ne()-o.renderingStartTime>Bi&&n!==1073741824&&(e.flags|=128,r=!0,Ro(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ne(),e.sibling=null,n=Te.current,he(Te,r?n&1|2:n&1),e):(je(e),null);case 22:case 23:return kf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tt&1073741824&&(je(e),e.subtreeFlags&6&&(e.flags|=8192)):je(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function uw(t,e){switch(ff(e),e.tag){case 1:return _t(e.type)&&Xl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ui(),_e(yt),_e(st),Tf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ef(e),null;case 13:if(_e(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Li()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Te),null;case 4:return Ui(),null;case 10:return gf(e.type._context),null;case 22:case 23:return kf(),null;case 24:return null;default:return null}}var pl=!1,rt=!1,cw=typeof WeakSet=="function"?WeakSet:Set,K=null;function yi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){we(t,e,r)}else n.current=null}function td(t,e,n){try{n()}catch(r){we(t,e,r)}}var xm=!1;function dw(t,e){if(Oc=Jl,t=Lv(),cf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,d=0,h=0,p=t,m=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(l=s+i),p!==o||r!==0&&p.nodeType!==3||(u=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===t)break t;if(m===n&&++d===i&&(l=s),m===o&&++h===r&&(u=s),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bc={focusedElem:t,selectionRange:n},Jl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,k=w.memoizedState,I=e.stateNode,E=I.getSnapshotBeforeUpdate(e.elementType===e.type?x:qt(e.type,x),k);I.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(V){we(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return w=xm,xm=!1,w}function zo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&td(e,n,o)}i=i.next}while(i!==r)}}function qa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ME(t){var e=t.alternate;e!==null&&(t.alternate=null,ME(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[en],delete e[us],delete e[bc],delete e[JA],delete e[KA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kE(t){return t.tag===5||t.tag===3||t.tag===4}function Mm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yl));else if(r!==4&&(t=t.child,t!==null))for(rd(t,e,n),t=t.sibling;t!==null;)rd(t,e,n),t=t.sibling}function id(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(id(t,e,n),t=t.sibling;t!==null;)id(t,e,n),t=t.sibling}var $e=null,Gt=!1;function Ln(t,e,n){for(n=n.child;n!==null;)DE(t,e,n),n=n.sibling}function DE(t,e,n){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(ka,n)}catch{}switch(n.tag){case 5:rt||yi(n,e);case 6:var r=$e,i=Gt;$e=null,Ln(t,e,n),$e=r,Gt=i,$e!==null&&(Gt?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(Gt?(t=$e,n=n.stateNode,t.nodeType===8?Yu(t.parentNode,n):t.nodeType===1&&Yu(t,n),is(t)):Yu($e,n.stateNode));break;case 4:r=$e,i=Gt,$e=n.stateNode.containerInfo,Gt=!0,Ln(t,e,n),$e=r,Gt=i;break;case 0:case 11:case 14:case 15:if(!rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&td(n,e,s),i=i.next}while(i!==r)}Ln(t,e,n);break;case 1:if(!rt&&(yi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){we(n,e,l)}Ln(t,e,n);break;case 21:Ln(t,e,n);break;case 22:n.mode&1?(rt=(r=rt)||n.memoizedState!==null,Ln(t,e,n),rt=r):Ln(t,e,n);break;default:Ln(t,e,n)}}function km(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cw),e.forEach(function(r){var i=Ew.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:$e=l.stateNode,Gt=!1;break e;case 3:$e=l.stateNode.containerInfo,Gt=!0;break e;case 4:$e=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if($e===null)throw Error(G(160));DE(o,s,i),$e=null,Gt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){we(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VE(e,t),e=e.sibling}function VE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bt(e,t),Xt(t),r&4){try{zo(3,t,t.return),qa(3,t)}catch(x){we(t,t.return,x)}try{zo(5,t,t.return)}catch(x){we(t,t.return,x)}}break;case 1:Bt(e,t),Xt(t),r&512&&n!==null&&yi(n,n.return);break;case 5:if(Bt(e,t),Xt(t),r&512&&n!==null&&yi(n,n.return),t.flags&32){var i=t.stateNode;try{es(i,"")}catch(x){we(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&nv(i,o),Pc(l,s);var d=Pc(l,o);for(s=0;s<u.length;s+=2){var h=u[s],p=u[s+1];h==="style"?lv(i,p):h==="dangerouslySetInnerHTML"?ov(i,p):h==="children"?es(i,p):Yd(i,h,p,d)}switch(l){case"input":Cc(i,o);break;case"textarea":rv(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var _=o.value;_!=null?Ei(i,!!o.multiple,_,!1):m!==!!o.multiple&&(o.defaultValue!=null?Ei(i,!!o.multiple,o.defaultValue,!0):Ei(i,!!o.multiple,o.multiple?[]:"",!1))}i[us]=o}catch(x){we(t,t.return,x)}}break;case 6:if(Bt(e,t),Xt(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(x){we(t,t.return,x)}}break;case 3:if(Bt(e,t),Xt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{is(e.containerInfo)}catch(x){we(t,t.return,x)}break;case 4:Bt(e,t),Xt(t);break;case 13:Bt(e,t),Xt(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(xf=Ne())),r&4&&km(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(rt=(d=rt)||h,Bt(e,t),rt=d):Bt(e,t),Xt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(p=K=h;K!==null;){switch(m=K,_=m.child,m.tag){case 0:case 11:case 14:case 15:zo(4,m,m.return);break;case 1:yi(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){we(r,n,x)}}break;case 5:yi(m,m.return);break;case 22:if(m.memoizedState!==null){Vm(p);continue}}_!==null?(_.return=m,K=_):Vm(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=sv("display",s))}catch(x){we(t,t.return,x)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(x){we(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Bt(e,t),Xt(t),r&4&&km(t);break;case 21:break;default:Bt(e,t),Xt(t)}}function Xt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(kE(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(es(i,""),r.flags&=-33);var o=Mm(t);id(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Mm(t);rd(t,l,s);break;default:throw Error(G(161))}}catch(u){we(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fw(t,e,n){K=t,LE(t)}function LE(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||pl;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||rt;l=pl;var d=rt;if(pl=s,(rt=u)&&!d)for(K=i;K!==null;)s=K,u=s.child,s.tag===22&&s.memoizedState!==null?Lm(i):u!==null?(u.return=s,K=u):Lm(i);for(;o!==null;)K=o,LE(o),o=o.sibling;K=i,pl=l,rt=d}Dm(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,K=o):Dm(t)}}function Dm(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rt||qa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:qt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ym(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ym(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&is(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}rt||e.flags&512&&nd(e)}catch(m){we(e,e.return,m)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Vm(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Lm(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qa(4,e)}catch(u){we(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){we(e,i,u)}}var o=e.return;try{nd(e)}catch(u){we(e,o,u)}break;case 5:var s=e.return;try{nd(e)}catch(u){we(e,s,u)}}}catch(u){we(e,e.return,u)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var hw=Math.ceil,la=An.ReactCurrentDispatcher,Pf=An.ReactCurrentOwner,Vt=An.ReactCurrentBatchConfig,le=0,ze=null,ke=null,Ke=0,Tt=0,_i=hr(0),Oe=0,ms=null,Ur=0,Ga=0,Nf=0,$o=null,mt=null,xf=0,Bi=1/0,fn=null,aa=!1,od=null,Yn=null,ml=!1,Gn=null,ua=0,Wo=0,sd=null,Ml=-1,kl=0;function dt(){return le&6?Ne():Ml!==-1?Ml:Ml=Ne()}function Xn(t){return t.mode&1?le&2&&Ke!==0?Ke&-Ke:YA.transition!==null?(kl===0&&(kl=vv()),kl):(t=ce,t!==0||(t=window.event,t=t===void 0?16:wv(t.type)),t):1}function $t(t,e,n,r){if(50<Wo)throw Wo=0,sd=null,Error(G(185));ks(t,n,r),(!(le&2)||t!==ze)&&(t===ze&&(!(le&2)&&(Ga|=n),Oe===4&&Bn(t,Ke)),vt(t,r),n===1&&le===0&&!(e.mode&1)&&(Bi=Ne()+500,Ua&&pr()))}function vt(t,e){var n=t.callbackNode;YS(t,e);var r=Wl(t,t===ze?Ke:0);if(r===0)n!==null&&zp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zp(n),e===1)t.tag===0?QA(Fm.bind(null,t)):$v(Fm.bind(null,t)),$A(function(){!(le&6)&&pr()}),n=null;else{switch(Ev(r)){case 1:n=tf;break;case 4:n=yv;break;case 16:n=$l;break;case 536870912:n=_v;break;default:n=$l}n=HE(n,FE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function FE(t,e){if(Ml=-1,kl=0,le&6)throw Error(G(327));var n=t.callbackNode;if(Ai()&&t.callbackNode!==n)return null;var r=Wl(t,t===ze?Ke:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ca(t,r);else{e=r;var i=le;le|=2;var o=OE();(ze!==t||Ke!==e)&&(fn=null,Bi=Ne()+500,xr(t,e));do try{gw();break}catch(l){UE(t,l)}while(!0);mf(),la.current=o,le=i,ke!==null?e=0:(ze=null,Ke=0,e=Oe)}if(e!==0){if(e===2&&(i=Dc(t),i!==0&&(r=i,e=ld(t,i))),e===1)throw n=ms,xr(t,0),Bn(t,r),vt(t,Ne()),n;if(e===6)Bn(t,r);else{if(i=t.current.alternate,!(r&30)&&!pw(i)&&(e=ca(t,r),e===2&&(o=Dc(t),o!==0&&(r=o,e=ld(t,o))),e===1))throw n=ms,xr(t,0),Bn(t,r),vt(t,Ne()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Sr(t,mt,fn);break;case 3:if(Bn(t,r),(r&130023424)===r&&(e=xf+500-Ne(),10<e)){if(Wl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){dt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gc(Sr.bind(null,t,mt,fn),e);break}Sr(t,mt,fn);break;case 4:if(Bn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-zt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hw(r/1960))-r,10<r){t.timeoutHandle=Gc(Sr.bind(null,t,mt,fn),r);break}Sr(t,mt,fn);break;case 5:Sr(t,mt,fn);break;default:throw Error(G(329))}}}return vt(t,Ne()),t.callbackNode===n?FE.bind(null,t):null}function ld(t,e){var n=$o;return t.current.memoizedState.isDehydrated&&(xr(t,e).flags|=256),t=ca(t,e),t!==2&&(e=mt,mt=n,e!==null&&ad(e)),t}function ad(t){mt===null?mt=t:mt.push.apply(mt,t)}function pw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Wt(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bn(t,e){for(e&=~Nf,e&=~Ga,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zt(e),r=1<<n;t[n]=-1,e&=~r}}function Fm(t){if(le&6)throw Error(G(327));Ai();var e=Wl(t,0);if(!(e&1))return vt(t,Ne()),null;var n=ca(t,e);if(t.tag!==0&&n===2){var r=Dc(t);r!==0&&(e=r,n=ld(t,r))}if(n===1)throw n=ms,xr(t,0),Bn(t,e),vt(t,Ne()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sr(t,mt,fn),vt(t,Ne()),null}function Mf(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Bi=Ne()+500,Ua&&pr())}}function Or(t){Gn!==null&&Gn.tag===0&&!(le&6)&&Ai();var e=le;le|=1;var n=Vt.transition,r=ce;try{if(Vt.transition=null,ce=1,t)return t()}finally{ce=r,Vt.transition=n,le=e,!(le&6)&&pr()}}function kf(){Tt=_i.current,_e(_i)}function xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zA(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(ff(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xl();break;case 3:Ui(),_e(yt),_e(st),Tf();break;case 5:Ef(r);break;case 4:Ui();break;case 13:_e(Te);break;case 19:_e(Te);break;case 10:gf(r.type._context);break;case 22:case 23:kf()}n=n.return}if(ze=t,ke=t=Zn(t.current,null),Ke=Tt=e,Oe=0,ms=null,Nf=Ga=Ur=0,mt=$o=null,Rr!==null){for(e=0;e<Rr.length;e++)if(n=Rr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Rr=null}return t}function UE(t,e){do{var n=ke;try{if(mf(),Pl.current=sa,oa){for(var r=Ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}oa=!1}if(Fr=0,He=Ue=Ie=null,Ho=!1,fs=0,Pf.current=null,n===null||n.return===null){Oe=1,ms=e,ke=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=Ke,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Cm(s);if(_!==null){_.flags&=-257,Sm(_,s,l,o,e),_.mode&1&&Im(o,d,e),e=_,u=d;var w=e.updateQueue;if(w===null){var x=new Set;x.add(u),e.updateQueue=x}else w.add(u);break e}else{if(!(e&1)){Im(o,d,e),Df();break e}u=Error(G(426))}}else if(Ee&&l.mode&1){var k=Cm(s);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Sm(k,s,l,o,e),hf(Oi(u,l));break e}}o=u=Oi(u,l),Oe!==4&&(Oe=2),$o===null?$o=[o]:$o.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var I=EE(o,u,e);gm(o,I);break e;case 1:l=u;var E=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Yn===null||!Yn.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var V=TE(o,l,e);gm(o,V);break e}}o=o.return}while(o!==null)}qE(n)}catch(U){e=U,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function OE(){var t=la.current;return la.current=sa,t===null?sa:t}function Df(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),ze===null||!(Ur&268435455)&&!(Ga&268435455)||Bn(ze,Ke)}function ca(t,e){var n=le;le|=2;var r=OE();(ze!==t||Ke!==e)&&(fn=null,xr(t,e));do try{mw();break}catch(i){UE(t,i)}while(!0);if(mf(),le=n,la.current=r,ke!==null)throw Error(G(261));return ze=null,Ke=0,Oe}function mw(){for(;ke!==null;)BE(ke)}function gw(){for(;ke!==null&&!GS();)BE(ke)}function BE(t){var e=bE(t.alternate,t,Tt);t.memoizedProps=t.pendingProps,e===null?qE(t):ke=e,Pf.current=null}function qE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uw(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,ke=null;return}}else if(n=aw(n,e,Tt),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Oe===0&&(Oe=5)}function Sr(t,e,n){var r=ce,i=Vt.transition;try{Vt.transition=null,ce=1,yw(t,e,n,r)}finally{Vt.transition=i,ce=r}return null}function yw(t,e,n,r){do Ai();while(Gn!==null);if(le&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(XS(t,o),t===ze&&(ke=ze=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ml||(ml=!0,HE($l,function(){return Ai(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Vt.transition,Vt.transition=null;var s=ce;ce=1;var l=le;le|=4,Pf.current=null,dw(t,n),VE(n,t),UA(Bc),Jl=!!Oc,Bc=Oc=null,t.current=n,fw(n),bS(),le=l,ce=s,Vt.transition=o}else t.current=n;if(ml&&(ml=!1,Gn=t,ua=i),o=t.pendingLanes,o===0&&(Yn=null),$S(n.stateNode),vt(t,Ne()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(aa)throw aa=!1,t=od,od=null,t;return ua&1&&t.tag!==0&&Ai(),o=t.pendingLanes,o&1?t===sd?Wo++:(Wo=0,sd=t):Wo=0,pr(),null}function Ai(){if(Gn!==null){var t=Ev(ua),e=Vt.transition,n=ce;try{if(Vt.transition=null,ce=16>t?16:t,Gn===null)var r=!1;else{if(t=Gn,Gn=null,ua=0,le&6)throw Error(G(331));var i=le;for(le|=4,K=t.current;K!==null;){var o=K,s=o.child;if(K.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(K=d;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:zo(8,h,o)}var p=h.child;if(p!==null)p.return=h,K=p;else for(;K!==null;){h=K;var m=h.sibling,_=h.return;if(ME(h),h===d){K=null;break}if(m!==null){m.return=_,K=m;break}K=_}}}var w=o.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var k=x.sibling;x.sibling=null,x=k}while(x!==null)}}K=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,K=s;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:zo(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,K=I;break e}K=o.return}}var E=t.current;for(K=E;K!==null;){s=K;var C=s.child;if(s.subtreeFlags&2064&&C!==null)C.return=s,K=C;else e:for(s=E;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qa(9,l)}}catch(U){we(l,l.return,U)}if(l===s){K=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,K=V;break e}K=l.return}}if(le=i,pr(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(ka,t)}catch{}r=!0}return r}finally{ce=n,Vt.transition=e}}return!1}function Um(t,e,n){e=Oi(n,e),e=EE(t,e,1),t=Qn(t,e,1),e=dt(),t!==null&&(ks(t,1,e),vt(t,e))}function we(t,e,n){if(t.tag===3)Um(t,t,n);else for(;e!==null;){if(e.tag===3){Um(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){t=Oi(n,t),t=TE(e,t,1),e=Qn(e,t,1),t=dt(),e!==null&&(ks(e,1,t),vt(e,t));break}}e=e.return}}function _w(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dt(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(Ke&n)===n&&(Oe===4||Oe===3&&(Ke&130023424)===Ke&&500>Ne()-xf?xr(t,0):Nf|=n),vt(t,e)}function GE(t,e){e===0&&(t.mode&1?(e=ol,ol<<=1,!(ol&130023424)&&(ol=4194304)):e=1);var n=dt();t=vn(t,e),t!==null&&(ks(t,e,n),vt(t,n))}function vw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GE(t,n)}function Ew(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),GE(t,n)}var bE;bE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yt.current)gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gt=!1,lw(t,e,n);gt=!!(t.flags&131072)}else gt=!1,Ee&&e.flags&1048576&&Wv(e,ea,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xl(t,e),t=e.pendingProps;var i=Vi(e,st.current);Si(e,n),i=Cf(null,e,r,t,i,n);var o=Sf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_t(r)?(o=!0,Zl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_f(e),i.updater=Ba,e.stateNode=i,i._reactInternals=e,Kc(e,r,t,n),e=Xc(null,e,r,!0,o,n)):(e.tag=0,Ee&&o&&df(e),ct(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Iw(r),t=qt(r,t),i){case 0:e=Yc(null,e,r,t,n);break e;case 1:e=Rm(null,e,r,t,n);break e;case 11:e=Am(null,e,r,t,n);break e;case 14:e=wm(null,e,r,qt(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),Yc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),Rm(t,e,r,i,n);case 3:e:{if(AE(e),t===null)throw Error(G(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Zv(t,e),ra(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Oi(Error(G(423)),e),e=Pm(t,e,r,n,i);break e}else if(r!==i){i=Oi(Error(G(424)),e),e=Pm(t,e,r,n,i);break e}else for(It=Kn(e.stateNode.containerInfo.firstChild),Ct=e,Ee=!0,bt=null,n=Yv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Li(),r===i){e=En(t,e,n);break e}ct(t,e,r,n)}e=e.child}return e;case 5:return jv(e),t===null&&$c(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,qc(r,i)?s=null:o!==null&&qc(r,o)&&(e.flags|=32),SE(t,e),ct(t,e,s,n),e.child;case 6:return t===null&&$c(e),null;case 13:return wE(t,e,n);case 4:return vf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fi(e,null,r,n):ct(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),Am(t,e,r,i,n);case 7:return ct(t,e,e.pendingProps,n),e.child;case 8:return ct(t,e,e.pendingProps.children,n),e.child;case 12:return ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,he(ta,r._currentValue),r._currentValue=s,o!==null)if(Wt(o.value,s)){if(o.children===i.children&&!yt.current){e=En(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=gn(-1,n&-n),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Wc(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(G(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Wc(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}ct(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Si(e,n),i=Ft(i),r=r(i),e.flags|=1,ct(t,e,r,n),e.child;case 14:return r=e.type,i=qt(r,e.pendingProps),i=qt(r.type,i),wm(t,e,r,i,n);case 15:return IE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),xl(t,e),e.tag=1,_t(r)?(t=!0,Zl(e)):t=!1,Si(e,n),vE(e,r,i),Kc(e,r,i,n),Xc(null,e,r,!0,t,n);case 19:return RE(t,e,n);case 22:return CE(t,e,n)}throw Error(G(156,e.tag))};function HE(t,e){return gv(t,e)}function Tw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,e,n,r){return new Tw(t,e,n,r)}function Vf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Iw(t){if(typeof t=="function")return Vf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zd)return 11;if(t===jd)return 14}return 2}function Zn(t,e){var n=t.alternate;return n===null?(n=Dt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Vf(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ai:return Mr(n.children,i,o,e);case Xd:s=8,i|=8;break;case _c:return t=Dt(12,n,e,i|2),t.elementType=_c,t.lanes=o,t;case vc:return t=Dt(13,n,e,i),t.elementType=vc,t.lanes=o,t;case Ec:return t=Dt(19,n,e,i),t.elementType=Ec,t.lanes=o,t;case j_:return ba(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X_:s=10;break e;case Z_:s=9;break e;case Zd:s=11;break e;case jd:s=14;break e;case Fn:s=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Dt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Mr(t,e,n,r){return t=Dt(7,t,r,e),t.lanes=n,t}function ba(t,e,n,r){return t=Dt(22,t,r,e),t.elementType=j_,t.lanes=n,t.stateNode={isHidden:!1},t}function ic(t,e,n){return t=Dt(6,t,null,e),t.lanes=n,t}function oc(t,e,n){return e=Dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Cw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bu(0),this.expirationTimes=Bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lf(t,e,n,r,i,o,s,l,u){return t=new Cw(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Dt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_f(o),t}function Sw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function zE(t){if(!t)return or;t=t._reactInternals;e:{if(Hr(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(_t(n))return zv(t,n,e)}return e}function $E(t,e,n,r,i,o,s,l,u){return t=Lf(n,r,!0,t,i,o,s,l,u),t.context=zE(null),n=t.current,r=dt(),i=Xn(n),o=gn(r,i),o.callback=e??null,Qn(n,o,i),t.current.lanes=i,ks(t,i,r),vt(t,r),t}function Ha(t,e,n,r){var i=e.current,o=dt(),s=Xn(i);return n=zE(n),e.context===null?e.context=n:e.pendingContext=n,e=gn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qn(i,e,s),t!==null&&($t(t,i,s,o),Rl(t,i,s)),s}function da(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Om(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ff(t,e){Om(t,e),(t=t.alternate)&&Om(t,e)}function Aw(){return null}var WE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uf(t){this._internalRoot=t}za.prototype.render=Uf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Ha(t,e,null,null)};za.prototype.unmount=Uf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Or(function(){Ha(null,t,null,null)}),e[_n]=null}};function za(t){this._internalRoot=t}za.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<On.length&&e!==0&&e<On[n].priority;n++);On.splice(n,0,t),n===0&&Av(t)}};function Of(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $a(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bm(){}function ww(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=da(s);o.call(d)}}var s=$E(e,r,t,0,null,!1,!1,"",Bm);return t._reactRootContainer=s,t[_n]=s.current,ls(t.nodeType===8?t.parentNode:t),Or(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=da(u);l.call(d)}}var u=Lf(t,0,!1,null,null,!1,!1,"",Bm);return t._reactRootContainer=u,t[_n]=u.current,ls(t.nodeType===8?t.parentNode:t),Or(function(){Ha(e,u,n,r)}),u}function Wa(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=da(s);l.call(u)}}Ha(e,s,t,i)}else s=ww(n,e,t,i,r);return da(s)}Tv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ko(e.pendingLanes);n!==0&&(nf(e,n|1),vt(e,Ne()),!(le&6)&&(Bi=Ne()+500,pr()))}break;case 13:Or(function(){var r=vn(t,1);if(r!==null){var i=dt();$t(r,t,1,i)}}),Ff(t,1)}};rf=function(t){if(t.tag===13){var e=vn(t,134217728);if(e!==null){var n=dt();$t(e,t,134217728,n)}Ff(t,134217728)}};Iv=function(t){if(t.tag===13){var e=Xn(t),n=vn(t,e);if(n!==null){var r=dt();$t(n,t,e,r)}Ff(t,e)}};Cv=function(){return ce};Sv=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};xc=function(t,e,n){switch(e){case"input":if(Cc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fa(r);if(!i)throw Error(G(90));tv(r),Cc(r,i)}}}break;case"textarea":rv(t,n);break;case"select":e=n.value,e!=null&&Ei(t,!!n.multiple,e,!1)}};cv=Mf;dv=Or;var Rw={usingClientEntryPoint:!1,Events:[Vs,fi,Fa,av,uv,Mf]},Po={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pw={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pv(t),t===null?null:t.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||Aw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{ka=gl.inject(Pw),tn=gl}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rw;At.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Of(e))throw Error(G(200));return Sw(t,e,null,n)};At.createRoot=function(t,e){if(!Of(t))throw Error(G(299));var n=!1,r="",i=WE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Lf(t,1,!1,null,null,n,!1,r,i),t[_n]=e.current,ls(t.nodeType===8?t.parentNode:t),new Uf(e)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=pv(e),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return Or(t)};At.hydrate=function(t,e,n){if(!$a(e))throw Error(G(200));return Wa(null,t,e,!0,n)};At.hydrateRoot=function(t,e,n){if(!Of(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=WE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=$E(e,null,t,1,n??null,i,!1,o,s),t[_n]=e.current,ls(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new za(e)};At.render=function(t,e,n){if(!$a(e))throw Error(G(200));return Wa(null,t,e,!1,n)};At.unmountComponentAtNode=function(t){if(!$a(t))throw Error(G(40));return t._reactRootContainer?(Or(function(){Wa(null,null,t,!1,function(){t._reactRootContainer=null,t[_n]=null})}),!0):!1};At.unstable_batchedUpdates=Mf;At.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$a(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Wa(t,e,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function JE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JE)}catch(t){console.error(t)}}JE(),J_.exports=At;var Nw=J_.exports,qm=Nw;gc.createRoot=qm.createRoot,gc.hydrateRoot=qm.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gs(){return gs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gs.apply(this,arguments)}var bn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(bn||(bn={}));const Gm="popstate";function xw(t){t===void 0&&(t={});function e(i,o){let{pathname:s="/",search:l="",hash:u=""}=zr(i.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),ud("",{pathname:s,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),l="";if(s&&s.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof o=="string"?o:fa(o))}function r(i,o){Ja(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return kw(e,n,r,t)}function Le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ja(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Mw(){return Math.random().toString(36).substr(2,8)}function bm(t,e){return{usr:t.state,key:t.key,idx:e}}function ud(t,e,n,r){return n===void 0&&(n=null),gs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zr(e):e,{state:n,key:e&&e.key||r||Mw()})}function fa(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function kw(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=bn.Pop,u=null,d=h();d==null&&(d=0,s.replaceState(gs({},s.state,{idx:d}),""));function h(){return(s.state||{idx:null}).idx}function p(){l=bn.Pop;let k=h(),I=k==null?null:k-d;d=k,u&&u({action:l,location:x.location,delta:I})}function m(k,I){l=bn.Push;let E=ud(x.location,k,I);n&&n(E,k),d=h()+1;let C=bm(E,d),V=x.createHref(E);try{s.pushState(C,"",V)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(V)}o&&u&&u({action:l,location:x.location,delta:1})}function _(k,I){l=bn.Replace;let E=ud(x.location,k,I);n&&n(E,k),d=h();let C=bm(E,d),V=x.createHref(E);s.replaceState(C,"",V),o&&u&&u({action:l,location:x.location,delta:0})}function w(k){let I=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof k=="string"?k:fa(k);return E=E.replace(/ $/,"%20"),Le(I,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,I)}let x={get action(){return l},get location(){return t(i,s)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Gm,p),u=k,()=>{i.removeEventListener(Gm,p),u=null}},createHref(k){return e(i,k)},createURL:w,encodeLocation(k){let I=w(k);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:m,replace:_,go(k){return s.go(k)}};return x}var Hm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Hm||(Hm={}));function Dw(t,e,n){return n===void 0&&(n="/"),Vw(t,e,n)}function Vw(t,e,n,r){let i=typeof e=="string"?zr(e):e,o=Bf(i.pathname||"/",n);if(o==null)return null;let s=KE(t);Lw(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let d=Jw(o);l=zw(s[u],d)}return l}function KE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(Le(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=jn([r,u.relativePath]),h=n.concat(u);o.children&&o.children.length>0&&(Le(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),KE(o.children,e,h,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:bw(d,o.index),routesMeta:h})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,s);else for(let u of QE(o.path))i(o,s,u)}),e}function QE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=QE(r.join("/")),l=[];return l.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&l.push(...s),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function Lw(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Hw(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Fw=/^:[\w-]+$/,Uw=3,Ow=2,Bw=1,qw=10,Gw=-2,zm=t=>t==="*";function bw(t,e){let n=t.split("/"),r=n.length;return n.some(zm)&&(r+=Gw),e&&(r+=Ow),n.filter(i=>!zm(i)).reduce((i,o)=>i+(Fw.test(o)?Uw:o===""?Bw:qw),r)}function Hw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function zw(t,e,n){let{routesMeta:r}=t,i={},o="/",s=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=o==="/"?e:e.slice(o.length)||"/",p=$w({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:jn([o,p.pathname]),pathnameBase:Zw(jn([o,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(o=jn([o,p.pathnameBase]))}return s}function $w(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ww(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:m,isOptional:_}=h;if(m==="*"){let x=l[p]||"";s=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const w=l[p];return _&&!w?d[m]=void 0:d[m]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:s,pattern:t}}function Ww(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ja(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Jw(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ja(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Kw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qw=t=>Kw.test(t);function Yw(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?zr(t):t,o;if(n)if(Qw(n))o=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),Ja(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+n))}n.startsWith("/")?o=$m(n.substring(1),"/"):o=$m(n,e)}else o=e;return{pathname:o,search:jw(r),hash:e0(i)}}function $m(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function sc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xw(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function YE(t,e){let n=Xw(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function XE(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=zr(t):(i=gs({},t),Le(!i.pathname||!i.pathname.includes("?"),sc("?","pathname","search",i)),Le(!i.pathname||!i.pathname.includes("#"),sc("#","pathname","hash",i)),Le(!i.search||!i.search.includes("#"),sc("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else{let p=e.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?e[p]:"/"}let u=Yw(i,l),d=s&&s!=="/"&&s.endsWith("/"),h=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const jn=t=>t.join("/").replace(/\/\/+/g,"/"),Zw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,e0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function t0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ZE=["post","put","patch","delete"];new Set(ZE);const n0=["get",...ZE];new Set(n0);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ys(){return ys=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ys.apply(this,arguments)}const qf=b.createContext(null),r0=b.createContext(null),$r=b.createContext(null),Ka=b.createContext(null),Wr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),jE=b.createContext(null);function i0(t,e){let{relative:n}=e===void 0?{}:e;Fs()||Le(!1);let{basename:r,navigator:i}=b.useContext($r),{hash:o,pathname:s,search:l}=tT(t,{relative:n}),u=s;return r!=="/"&&(u=s==="/"?r:jn([r,s])),i.createHref({pathname:u,search:l,hash:o})}function Fs(){return b.useContext(Ka)!=null}function Qa(){return Fs()||Le(!1),b.useContext(Ka).location}function eT(t){b.useContext($r).static||b.useLayoutEffect(t)}function o0(){let{isDataRoute:t}=b.useContext(Wr);return t?_0():s0()}function s0(){Fs()||Le(!1);let t=b.useContext(qf),{basename:e,future:n,navigator:r}=b.useContext($r),{matches:i}=b.useContext(Wr),{pathname:o}=Qa(),s=JSON.stringify(YE(i,n.v7_relativeSplatPath)),l=b.useRef(!1);return eT(()=>{l.current=!0}),b.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=XE(d,JSON.parse(s),o,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:jn([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,s,o,t])}function tT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext($r),{matches:i}=b.useContext(Wr),{pathname:o}=Qa(),s=JSON.stringify(YE(i,r.v7_relativeSplatPath));return b.useMemo(()=>XE(t,JSON.parse(s),o,n==="path"),[t,s,o,n])}function l0(t,e){return a0(t,e)}function a0(t,e,n,r){Fs()||Le(!1);let{navigator:i}=b.useContext($r),{matches:o}=b.useContext(Wr),s=o[o.length-1],l=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let d=Qa(),h;if(e){var p;let k=typeof e=="string"?zr(e):e;u==="/"||(p=k.pathname)!=null&&p.startsWith(u)||Le(!1),h=k}else h=d;let m=h.pathname||"/",_=m;if(u!=="/"){let k=u.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let w=Dw(t,{pathname:_}),x=h0(w&&w.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:jn([u,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:jn([u,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,n,r);return e&&x?b.createElement(Ka.Provider,{value:{location:ys({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:bn.Pop}},x):x}function u0(){let t=y0(),e=t0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const c0=b.createElement(u0,null);class d0 extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Wr.Provider,{value:this.props.routeContext},b.createElement(jE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f0(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(qf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Wr.Provider,{value:e},r)}function h0(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=s.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);h>=0||Le(!1),s=s.slice(0,Math.min(s.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:m,errors:_}=n,w=p.route.loader&&m[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||w){u=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((h,p,m)=>{let _,w=!1,x=null,k=null;n&&(_=l&&p.route.id?l[p.route.id]:void 0,x=p.route.errorElement||c0,u&&(d<0&&m===0?(v0("route-fallback"),w=!0,k=null):d===m&&(w=!0,k=p.route.hydrateFallbackElement||null)));let I=e.concat(s.slice(0,m+1)),E=()=>{let C;return _?C=x:w?C=k:p.route.Component?C=b.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,b.createElement(f0,{match:p,routeContext:{outlet:h,matches:I,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?b.createElement(d0,{location:n.location,revalidation:n.revalidation,component:x,error:_,children:E(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):E()},null)}var nT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nT||{}),rT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rT||{});function p0(t){let e=b.useContext(qf);return e||Le(!1),e}function m0(t){let e=b.useContext(r0);return e||Le(!1),e}function g0(t){let e=b.useContext(Wr);return e||Le(!1),e}function iT(t){let e=g0(),n=e.matches[e.matches.length-1];return n.route.id||Le(!1),n.route.id}function y0(){var t;let e=b.useContext(jE),n=m0(),r=iT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function _0(){let{router:t}=p0(nT.UseNavigateStable),e=iT(rT.UseNavigateStable),n=b.useRef(!1);return eT(()=>{n.current=!0}),b.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ys({fromRouteId:e},o)))},[t,e])}const Wm={};function v0(t,e,n){Wm[t]||(Wm[t]=!0)}function E0(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function dn(t){Le(!1)}function T0(t){let{basename:e="/",children:n=null,location:r,navigationType:i=bn.Pop,navigator:o,static:s=!1,future:l}=t;Fs()&&Le(!1);let u=e.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:u,navigator:o,static:s,future:ys({v7_relativeSplatPath:!1},l)}),[u,l,o,s]);typeof r=="string"&&(r=zr(r));let{pathname:h="/",search:p="",hash:m="",state:_=null,key:w="default"}=r,x=b.useMemo(()=>{let k=Bf(h,u);return k==null?null:{location:{pathname:k,search:p,hash:m,state:_,key:w},navigationType:i}},[u,h,p,m,_,w,i]);return x==null?null:b.createElement($r.Provider,{value:d},b.createElement(Ka.Provider,{children:n,value:x}))}function I0(t){let{children:e,location:n}=t;return l0(cd(e),n)}new Promise(()=>{});function cd(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let o=[...e,i];if(r.type===b.Fragment){n.push.apply(n,cd(r.props.children,o));return}r.type!==dn&&Le(!1),!r.props.index||!r.props.children||Le(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=cd(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}function C0(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function S0(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function A0(t,e){return t.button===0&&(!e||e==="_self")&&!S0(t)}const w0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],R0="6";try{window.__reactRouterVersion=R0}catch{}const P0="startTransition",Jm=_S[P0];function N0(t){let{basename:e,children:n,future:r,window:i}=t,o=b.useRef();o.current==null&&(o.current=xw({window:i,v5Compat:!0}));let s=o.current,[l,u]=b.useState({action:s.action,location:s.location}),{v7_startTransition:d}=r||{},h=b.useCallback(p=>{d&&Jm?Jm(()=>u(p)):u(p)},[u,d]);return b.useLayoutEffect(()=>s.listen(h),[s,h]),b.useEffect(()=>E0(r),[r]),b.createElement(T0,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:s,future:r})}const x0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",M0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nt=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:l,target:u,to:d,preventScrollReset:h,viewTransition:p}=e,m=C0(e,w0),{basename:_}=b.useContext($r),w,x=!1;if(typeof d=="string"&&M0.test(d)&&(w=d,x0))try{let C=new URL(window.location.href),V=d.startsWith("//")?new URL(C.protocol+d):new URL(d),U=Bf(V.pathname,_);V.origin===C.origin&&U!=null?d=U+V.search+V.hash:x=!0}catch{}let k=i0(d,{relative:i}),I=k0(d,{replace:s,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:p});function E(C){r&&r(C),C.defaultPrevented||I(C)}return b.createElement("a",dd({},m,{href:w||k,onClick:x||o?r:E,ref:n,target:u}))});var Km;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Km||(Km={}));var Qm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Qm||(Qm={}));function k0(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:l}=e===void 0?{}:e,u=o0(),d=Qa(),h=tT(t,{relative:s});return b.useCallback(p=>{if(A0(p,n)){p.preventDefault();let m=r!==void 0?r:fa(d)===fa(h);u(t,{replace:m,state:i,preventScrollReset:o,relative:s,viewTransition:l})}},[d,u,h,r,i,n,t,o,s,l])}const D0=""+new URL("logo-BFZqakIN.png",import.meta.url).href;function V0(){const[t,e]=b.useState(window.pageYOffset),[n,r]=b.useState(!0);return b.useEffect(()=>{const i=()=>{const o=window.pageYOffset,s=t>o||o<10;r(s),e(o)};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[t]),P.jsxs("nav",{className:`navbar ${n?"":"hidden"}`,children:[P.jsx("div",{className:"navbar-logo",children:P.jsx(nt,{to:"/",children:P.jsx("img",{src:D0,alt:"Logo",className:"logo-image"})})}),P.jsxs("ul",{className:"navbar-links",children:[P.jsx("li",{children:P.jsx(nt,{to:"/",children:"Home"})}),P.jsx("li",{children:P.jsx(nt,{to:"/about",children:"About"})}),P.jsx("li",{children:P.jsx(nt,{to:"/skill",children:"Skills"})}),P.jsx("li",{children:P.jsx(nt,{to:"/projects",children:"Projects"})}),P.jsx("li",{children:P.jsx(nt,{to:"/ai-answer",className:"ai-link",children:"AI Answer"})}),P.jsx("li",{children:P.jsx(nt,{to:"/contact",className:"cta-button",children:"Contact"})})]})]})}const oT=""+new URL("profile-7EXvHzVp.png",import.meta.url).href;function L0(){return P.jsx("section",{id:"home",className:"home-section","aria-label":"Introduction and Hero Section",children:P.jsxs("div",{className:"home-content",children:[P.jsxs("div",{className:"text-container",children:[P.jsx("p",{className:"greeting",children:"Hi, my name is"}),P.jsx("h1",{className:"name",children:"Pankaj Ray."}),P.jsx("h2",{className:"tagline",children:"I build animated and accessible web experiences."}),P.jsx("p",{className:"description",children:"I'm a Frontend Developer specializing in modern React applications. Currently, I'm focused on delivering high-performance, user-centric products and highly polished interfaces."}),P.jsx("a",{href:"/projects",className:"cta-button",children:"View My Work"})]}),P.jsx("div",{className:"animation-container",children:P.jsx("img",{src:oT,alt:"Pankaj Ray - Frontend Developer Profile Photo",className:"hero-profile-image"})})]})})}const F0=({text:t})=>{const[e,n]=b.useState(""),[r,i]=b.useState(0);return b.useEffect(()=>{if(r<t.length){const o=setTimeout(()=>{n(s=>s+t[r]),i(s=>s+1)},75);return()=>clearTimeout(o)}},[r,t]),P.jsxs("p",{className:"animated-message",children:[e,P.jsx("span",{className:"cursor-flash",children:"|"})]})};function U0(){const t=new Date().getFullYear();return P.jsx("footer",{className:"footer-container",children:P.jsxs("div",{className:"footer-content",children:[P.jsxs("div",{className:"footer-section footer-cta",children:[P.jsx(F0,{text:"Ready to build your next digital project?"}),P.jsx(nt,{to:"/contact",className:"cta-link-btn",children:"Let's Talk!"})]}),P.jsxs("div",{className:"footer-section footer-links-group",children:[P.jsx("h3",{children:"Quick Links"}),P.jsxs("ul",{children:[P.jsx("li",{children:P.jsx(nt,{to:"/",children:"Home"})}),P.jsx("li",{children:P.jsx(nt,{to:"/about",children:"About Me"})}),P.jsx("li",{children:P.jsx(nt,{to:"/projects",children:"Projects"})}),P.jsx("li",{children:P.jsx(nt,{to:"/skill",children:"Skills"})}),P.jsx("li",{children:P.jsx(nt,{to:"/ai-answer",children:"AI Answer"})})]})]}),P.jsxs("div",{className:"footer-section footer-info",children:[P.jsx("h3",{children:"Contact"}),P.jsx("a",{href:"tel:+919205905491",className:"footer-phone",children:"+91 9205905491"}),P.jsxs("div",{className:"social-links",children:[P.jsx("a",{href:"https://linkedin.com/in/pankajkumarray",target:"_blank",rel:"noopener noreferrer","aria-label":"LinkedIn",children:"LinkedIn"}),P.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub",children:"GitHub"}),P.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",children:"Twitter"})]}),P.jsx("div",{className:"footer-copyright",children:P.jsxs("p",{children:[" ",t," Pankaj Ray. All rights reserved.",P.jsxs("span",{className:"admin-access",children:["| ",P.jsx(nt,{to:"/admin",children:"Admin"})]})]})})]})]})})}const O0=()=>{};var Ym={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},B0=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},lT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|l>>4;let m=(l&15)<<2|d>>6,_=d&63;u||(_=64,s||(m=64)),r.push(n[h],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):B0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||d==null||p==null)throw new q0;const m=o<<2|l>>4;if(r.push(m),d!==64){const _=l<<4&240|d>>2;if(r.push(_),p!==64){const w=d<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class q0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G0=function(t){const e=sT(t);return lT.encodeByteArray(e,!0)},ha=function(t){return G0(t).replace(/\./g,"")},b0=function(t){try{return lT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=()=>H0().__FIREBASE_DEFAULTS__,$0=()=>{if(typeof process>"u"||typeof Ym>"u")return;const t=Ym.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},W0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&b0(t[1]);return e&&JSON.parse(e)},Gf=()=>{try{return O0()||z0()||$0()||W0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},J0=t=>{var e,n;return(n=(e=Gf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},K0=t=>{const e=J0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},aT=()=>{var t;return(t=Gf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Y0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ha(JSON.stringify(n)),ha(JSON.stringify(s)),""].join(".")}const Jo={};function Z0(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jo))Jo[e]?t.emulator.push(e):t.prod.push(e);return t}function j0(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Xm=!1;function eR(t,e){if(typeof window>"u"||typeof document>"u"||!bf(window.location.host)||Jo[t]===e||Jo[t]||Xm)return;Jo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",o=Z0().prod.length>0;function s(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Xm=!0,s()},m}function h(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=j0(r),_=n("text"),w=document.getElementById(_)||document.createElement("span"),x=n("learnmore"),k=document.getElementById(x)||document.createElement("a"),I=n("preprendIcon"),E=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;l(C),h(k,x);const V=d();u(E,I),C.append(E,w,k,V),document.body.appendChild(C)}o?(w.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nR(){var e;const t=(e=Gf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rR(){return!nR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iR(){try{return typeof indexedDB=="object"}catch{return!1}}function oR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="FirebaseError";class Qi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sR,Object.setPrototypeOf(this,Qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uT.prototype.create)}}class uT{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?lR(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Qi(i,l,r)}}function lR(t,e){return t.replace(aR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const aR=/\{\$([^}]+)}/g;function pa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Zm(o)&&Zm(s)){if(!pa(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Zm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Q0;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dR(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cR(t){return t===Ar?void 0:t}function dR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const hR={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},pR=se.INFO,mR={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},gR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=mR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cT{constructor(e){this.name=e,this._logLevel=pR,this._logHandler=gR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const yR=(t,e)=>e.some(n=>t instanceof n);let jm,eg;function _R(){return jm||(jm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vR(){return eg||(eg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dT=new WeakMap,fd=new WeakMap,fT=new WeakMap,lc=new WeakMap,Hf=new WeakMap;function ER(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(er(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&dT.set(n,t)}).catch(()=>{}),Hf.set(e,t),e}function TR(t){if(fd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});fd.set(t,e)}let hd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IR(t){hd=t(hd)}function CR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ac(this),e,...n);return fT.set(r,e.sort?e.sort():[e]),er(r)}:vR().includes(t)?function(...e){return t.apply(ac(this),e),er(dT.get(this))}:function(...e){return er(t.apply(ac(this),e))}}function SR(t){return typeof t=="function"?CR(t):(t instanceof IDBTransaction&&TR(t),yR(t,_R())?new Proxy(t,hd):t)}function er(t){if(t instanceof IDBRequest)return ER(t);if(lc.has(t))return lc.get(t);const e=SR(t);return e!==t&&(lc.set(t,e),Hf.set(e,t)),e}const ac=t=>Hf.get(t);function AR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=er(s);return r&&s.addEventListener("upgradeneeded",u=>{r(er(s.result),u.oldVersion,u.newVersion,er(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const wR=["get","getKey","getAll","getAllKeys","count"],RR=["put","add","delete","clear"],uc=new Map;function tg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uc.get(e))return uc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=RR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||wR.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return uc.set(e,o),o}IR(t=>({...t,get:(e,n,r)=>tg(e,n)||t.get(e,n,r),has:(e,n)=>!!tg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pd="@firebase/app",ng="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new cT("@firebase/app"),xR="@firebase/app-compat",MR="@firebase/analytics-compat",kR="@firebase/analytics",DR="@firebase/app-check-compat",VR="@firebase/app-check",LR="@firebase/auth",FR="@firebase/auth-compat",UR="@firebase/database",OR="@firebase/data-connect",BR="@firebase/database-compat",qR="@firebase/functions",GR="@firebase/functions-compat",bR="@firebase/installations",HR="@firebase/installations-compat",zR="@firebase/messaging",$R="@firebase/messaging-compat",WR="@firebase/performance",JR="@firebase/performance-compat",KR="@firebase/remote-config",QR="@firebase/remote-config-compat",YR="@firebase/storage",XR="@firebase/storage-compat",ZR="@firebase/firestore",jR="@firebase/ai",eP="@firebase/firestore-compat",tP="firebase",nP="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="[DEFAULT]",rP={[pd]:"fire-core",[xR]:"fire-core-compat",[kR]:"fire-analytics",[MR]:"fire-analytics-compat",[VR]:"fire-app-check",[DR]:"fire-app-check-compat",[LR]:"fire-auth",[FR]:"fire-auth-compat",[UR]:"fire-rtdb",[OR]:"fire-data-connect",[BR]:"fire-rtdb-compat",[qR]:"fire-fn",[GR]:"fire-fn-compat",[bR]:"fire-iid",[HR]:"fire-iid-compat",[zR]:"fire-fcm",[$R]:"fire-fcm-compat",[WR]:"fire-perf",[JR]:"fire-perf-compat",[KR]:"fire-rc",[QR]:"fire-rc-compat",[YR]:"fire-gcs",[XR]:"fire-gcs-compat",[ZR]:"fire-fst",[eP]:"fire-fst-compat",[jR]:"fire-vertex","fire-js":"fire-js",[tP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new Map,iP=new Map,gd=new Map;function rg(t,e){try{t.container.addComponent(e)}catch(n){Tn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ma(t){const e=t.name;if(gd.has(e))return Tn.debug(`There were multiple attempts to register component ${e}.`),!1;gd.set(e,t);for(const n of vs.values())rg(n,t);for(const n of iP.values())rg(n,t);return!0}function oP(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sP(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new uT("app","Firebase",lP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=nP;function hT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:md,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw tr.create("bad-app-name",{appName:String(i)});if(n||(n=aT()),!n)throw tr.create("no-options");const o=vs.get(i);if(o){if(pa(n,o.options)&&pa(r,o.config))return o;throw tr.create("duplicate-app",{appName:i})}const s=new fR(i);for(const u of gd.values())s.addComponent(u);const l=new aP(n,r,s);return vs.set(i,l),l}function pT(t=md){const e=vs.get(t);if(!e&&t===md&&aT())return hT();if(!e)throw tr.create("no-app",{appName:t});return e}function cP(){return Array.from(vs.values())}function wi(t,e,n){let r=rP[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tn.warn(s.join(" "));return}ma(new _s(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="firebase-heartbeat-database",fP=1,Es="firebase-heartbeat-store";let cc=null;function mT(){return cc||(cc=AR(dP,fP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Es)}catch(n){console.warn(n)}}}}).catch(t=>{throw tr.create("idb-open",{originalErrorMessage:t.message})})),cc}async function hP(t){try{const n=(await mT()).transaction(Es),r=await n.objectStore(Es).get(gT(t));return await n.done,r}catch(e){if(e instanceof Qi)Tn.warn(e.message);else{const n=tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tn.warn(n.message)}}}async function ig(t,e){try{const r=(await mT()).transaction(Es,"readwrite");await r.objectStore(Es).put(e,gT(t)),await r.done}catch(n){if(n instanceof Qi)Tn.warn(n.message);else{const r=tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tn.warn(r.message)}}}function gT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=1024,mP=30;class gP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _P(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=og();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>mP){const s=vP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Tn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=og(),{heartbeatsToSend:r,unsentEntries:i}=yP(this._heartbeatsCache.heartbeats),o=ha(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Tn.warn(n),""}}}function og(){return new Date().toISOString().substring(0,10)}function yP(t,e=pP){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),sg(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _P{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iR()?oR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ig(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ig(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sg(t){return ha(JSON.stringify({version:2,heartbeats:t})).length}function vP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t){ma(new _s("platform-logger",e=>new PR(e),"PRIVATE")),ma(new _s("heartbeat",e=>new gP(e),"PRIVATE")),wi(pd,ng,t),wi(pd,ng,"esm2020"),wi("fire-js","")}EP("");var TP="firebase",IP="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi(TP,IP,"app");var lg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nr,yT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function S(){}S.prototype=T.prototype,A.F=T.prototype,A.prototype=new S,A.prototype.constructor=A,A.D=function(R,M,D){for(var N=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)N[xe-2]=arguments[xe];return T.prototype[M].apply(R,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,T,S){S||(S=0);const R=Array(16);if(typeof T=="string")for(var M=0;M<16;++M)R[M]=T.charCodeAt(S++)|T.charCodeAt(S++)<<8|T.charCodeAt(S++)<<16|T.charCodeAt(S++)<<24;else for(M=0;M<16;++M)R[M]=T[S++]|T[S++]<<8|T[S++]<<16|T[S++]<<24;T=A.g[0],S=A.g[1],M=A.g[2];let D=A.g[3],N;N=T+(D^S&(M^D))+R[0]+3614090360&4294967295,T=S+(N<<7&4294967295|N>>>25),N=D+(M^T&(S^M))+R[1]+3905402710&4294967295,D=T+(N<<12&4294967295|N>>>20),N=M+(S^D&(T^S))+R[2]+606105819&4294967295,M=D+(N<<17&4294967295|N>>>15),N=S+(T^M&(D^T))+R[3]+3250441966&4294967295,S=M+(N<<22&4294967295|N>>>10),N=T+(D^S&(M^D))+R[4]+4118548399&4294967295,T=S+(N<<7&4294967295|N>>>25),N=D+(M^T&(S^M))+R[5]+1200080426&4294967295,D=T+(N<<12&4294967295|N>>>20),N=M+(S^D&(T^S))+R[6]+2821735955&4294967295,M=D+(N<<17&4294967295|N>>>15),N=S+(T^M&(D^T))+R[7]+4249261313&4294967295,S=M+(N<<22&4294967295|N>>>10),N=T+(D^S&(M^D))+R[8]+1770035416&4294967295,T=S+(N<<7&4294967295|N>>>25),N=D+(M^T&(S^M))+R[9]+2336552879&4294967295,D=T+(N<<12&4294967295|N>>>20),N=M+(S^D&(T^S))+R[10]+4294925233&4294967295,M=D+(N<<17&4294967295|N>>>15),N=S+(T^M&(D^T))+R[11]+2304563134&4294967295,S=M+(N<<22&4294967295|N>>>10),N=T+(D^S&(M^D))+R[12]+1804603682&4294967295,T=S+(N<<7&4294967295|N>>>25),N=D+(M^T&(S^M))+R[13]+4254626195&4294967295,D=T+(N<<12&4294967295|N>>>20),N=M+(S^D&(T^S))+R[14]+2792965006&4294967295,M=D+(N<<17&4294967295|N>>>15),N=S+(T^M&(D^T))+R[15]+1236535329&4294967295,S=M+(N<<22&4294967295|N>>>10),N=T+(M^D&(S^M))+R[1]+4129170786&4294967295,T=S+(N<<5&4294967295|N>>>27),N=D+(S^M&(T^S))+R[6]+3225465664&4294967295,D=T+(N<<9&4294967295|N>>>23),N=M+(T^S&(D^T))+R[11]+643717713&4294967295,M=D+(N<<14&4294967295|N>>>18),N=S+(D^T&(M^D))+R[0]+3921069994&4294967295,S=M+(N<<20&4294967295|N>>>12),N=T+(M^D&(S^M))+R[5]+3593408605&4294967295,T=S+(N<<5&4294967295|N>>>27),N=D+(S^M&(T^S))+R[10]+38016083&4294967295,D=T+(N<<9&4294967295|N>>>23),N=M+(T^S&(D^T))+R[15]+3634488961&4294967295,M=D+(N<<14&4294967295|N>>>18),N=S+(D^T&(M^D))+R[4]+3889429448&4294967295,S=M+(N<<20&4294967295|N>>>12),N=T+(M^D&(S^M))+R[9]+568446438&4294967295,T=S+(N<<5&4294967295|N>>>27),N=D+(S^M&(T^S))+R[14]+3275163606&4294967295,D=T+(N<<9&4294967295|N>>>23),N=M+(T^S&(D^T))+R[3]+4107603335&4294967295,M=D+(N<<14&4294967295|N>>>18),N=S+(D^T&(M^D))+R[8]+1163531501&4294967295,S=M+(N<<20&4294967295|N>>>12),N=T+(M^D&(S^M))+R[13]+2850285829&4294967295,T=S+(N<<5&4294967295|N>>>27),N=D+(S^M&(T^S))+R[2]+4243563512&4294967295,D=T+(N<<9&4294967295|N>>>23),N=M+(T^S&(D^T))+R[7]+1735328473&4294967295,M=D+(N<<14&4294967295|N>>>18),N=S+(D^T&(M^D))+R[12]+2368359562&4294967295,S=M+(N<<20&4294967295|N>>>12),N=T+(S^M^D)+R[5]+4294588738&4294967295,T=S+(N<<4&4294967295|N>>>28),N=D+(T^S^M)+R[8]+2272392833&4294967295,D=T+(N<<11&4294967295|N>>>21),N=M+(D^T^S)+R[11]+1839030562&4294967295,M=D+(N<<16&4294967295|N>>>16),N=S+(M^D^T)+R[14]+4259657740&4294967295,S=M+(N<<23&4294967295|N>>>9),N=T+(S^M^D)+R[1]+2763975236&4294967295,T=S+(N<<4&4294967295|N>>>28),N=D+(T^S^M)+R[4]+1272893353&4294967295,D=T+(N<<11&4294967295|N>>>21),N=M+(D^T^S)+R[7]+4139469664&4294967295,M=D+(N<<16&4294967295|N>>>16),N=S+(M^D^T)+R[10]+3200236656&4294967295,S=M+(N<<23&4294967295|N>>>9),N=T+(S^M^D)+R[13]+681279174&4294967295,T=S+(N<<4&4294967295|N>>>28),N=D+(T^S^M)+R[0]+3936430074&4294967295,D=T+(N<<11&4294967295|N>>>21),N=M+(D^T^S)+R[3]+3572445317&4294967295,M=D+(N<<16&4294967295|N>>>16),N=S+(M^D^T)+R[6]+76029189&4294967295,S=M+(N<<23&4294967295|N>>>9),N=T+(S^M^D)+R[9]+3654602809&4294967295,T=S+(N<<4&4294967295|N>>>28),N=D+(T^S^M)+R[12]+3873151461&4294967295,D=T+(N<<11&4294967295|N>>>21),N=M+(D^T^S)+R[15]+530742520&4294967295,M=D+(N<<16&4294967295|N>>>16),N=S+(M^D^T)+R[2]+3299628645&4294967295,S=M+(N<<23&4294967295|N>>>9),N=T+(M^(S|~D))+R[0]+4096336452&4294967295,T=S+(N<<6&4294967295|N>>>26),N=D+(S^(T|~M))+R[7]+1126891415&4294967295,D=T+(N<<10&4294967295|N>>>22),N=M+(T^(D|~S))+R[14]+2878612391&4294967295,M=D+(N<<15&4294967295|N>>>17),N=S+(D^(M|~T))+R[5]+4237533241&4294967295,S=M+(N<<21&4294967295|N>>>11),N=T+(M^(S|~D))+R[12]+1700485571&4294967295,T=S+(N<<6&4294967295|N>>>26),N=D+(S^(T|~M))+R[3]+2399980690&4294967295,D=T+(N<<10&4294967295|N>>>22),N=M+(T^(D|~S))+R[10]+4293915773&4294967295,M=D+(N<<15&4294967295|N>>>17),N=S+(D^(M|~T))+R[1]+2240044497&4294967295,S=M+(N<<21&4294967295|N>>>11),N=T+(M^(S|~D))+R[8]+1873313359&4294967295,T=S+(N<<6&4294967295|N>>>26),N=D+(S^(T|~M))+R[15]+4264355552&4294967295,D=T+(N<<10&4294967295|N>>>22),N=M+(T^(D|~S))+R[6]+2734768916&4294967295,M=D+(N<<15&4294967295|N>>>17),N=S+(D^(M|~T))+R[13]+1309151649&4294967295,S=M+(N<<21&4294967295|N>>>11),N=T+(M^(S|~D))+R[4]+4149444226&4294967295,T=S+(N<<6&4294967295|N>>>26),N=D+(S^(T|~M))+R[11]+3174756917&4294967295,D=T+(N<<10&4294967295|N>>>22),N=M+(T^(D|~S))+R[2]+718787259&4294967295,M=D+(N<<15&4294967295|N>>>17),N=S+(D^(M|~T))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+D&4294967295}r.prototype.v=function(A,T){T===void 0&&(T=A.length);const S=T-this.blockSize,R=this.C;let M=this.h,D=0;for(;D<T;){if(M==0)for(;D<=S;)i(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<T;)if(R[M++]=A.charCodeAt(D++),M==this.blockSize){i(this,R),M=0;break}}else for(;D<T;)if(R[M++]=A[D++],M==this.blockSize){i(this,R),M=0;break}}this.h=M,this.o+=T},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;T=this.o*8;for(var S=A.length-8;S<A.length;++S)A[S]=T&255,T/=256;for(this.v(A),A=Array(16),T=0,S=0;S<4;++S)for(let R=0;R<32;R+=8)A[T++]=this.g[S]>>>R&255;return A};function o(A,T){var S=l;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=T(A)}function s(A,T){this.h=T;const S=[];let R=!0;for(let M=A.length-1;M>=0;M--){const D=A[M]|0;R&&D==T||(S[M]=D,R=!1)}this.g=S}var l={};function u(A){return-128<=A&&A<128?o(A,function(T){return new s([T|0],T<0?-1:0)}):new s([A|0],A<0?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return p;if(A<0)return k(d(-A));const T=[];let S=1;for(let R=0;A>=S;R++)T[R]=A/S|0,S*=4294967296;return new s(T,0)}function h(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return k(h(A.substring(1),T));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=d(Math.pow(T,8));let R=p;for(let D=0;D<A.length;D+=8){var M=Math.min(8,A.length-D);const N=parseInt(A.substring(D,D+M),T);M<8?(M=d(Math.pow(T,M)),R=R.j(M).add(d(N))):(R=R.j(S),R=R.add(d(N)))}return R}var p=u(0),m=u(1),_=u(16777216);t=s.prototype,t.m=function(){if(x(this))return-k(this).m();let A=0,T=1;for(let S=0;S<this.g.length;S++){const R=this.i(S);A+=(R>=0?R:4294967296+R)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(x(this))return"-"+k(this).toString(A);const T=d(Math.pow(A,6));var S=this;let R="";for(;;){const M=V(S,T).g;S=I(S,M.j(T));let D=((S.g.length>0?S.g[0]:S.h)>>>0).toString(A);if(S=M,w(S))return D+R;for(;D.length<6;)D="0"+D;R=D+R}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(let T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function x(A){return A.h==-1}t.l=function(A){return A=I(this,A),x(A)?-1:w(A)?0:1};function k(A){const T=A.g.length,S=[];for(let R=0;R<T;R++)S[R]=~A.g[R];return new s(S,~A.h).add(m)}t.abs=function(){return x(this)?k(this):this},t.add=function(A){const T=Math.max(this.g.length,A.g.length),S=[];let R=0;for(let M=0;M<=T;M++){let D=R+(this.i(M)&65535)+(A.i(M)&65535),N=(D>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);R=N>>>16,D&=65535,N&=65535,S[M]=N<<16|D}return new s(S,S[S.length-1]&-2147483648?-1:0)};function I(A,T){return A.add(k(T))}t.j=function(A){if(w(this)||w(A))return p;if(x(this))return x(A)?k(this).j(k(A)):k(k(this).j(A));if(x(A))return k(this.j(k(A)));if(this.l(_)<0&&A.l(_)<0)return d(this.m()*A.m());const T=this.g.length+A.g.length,S=[];for(var R=0;R<2*T;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(let M=0;M<A.g.length;M++){const D=this.i(R)>>>16,N=this.i(R)&65535,xe=A.i(M)>>>16,Rt=A.i(M)&65535;S[2*R+2*M]+=N*Rt,E(S,2*R+2*M),S[2*R+2*M+1]+=D*Rt,E(S,2*R+2*M+1),S[2*R+2*M+1]+=N*xe,E(S,2*R+2*M+1),S[2*R+2*M+2]+=D*xe,E(S,2*R+2*M+2)}for(A=0;A<T;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=T;A<2*T;A++)S[A]=0;return new s(S,0)};function E(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function C(A,T){this.g=A,this.h=T}function V(A,T){if(w(T))throw Error("division by zero");if(w(A))return new C(p,p);if(x(A))return T=V(k(A),T),new C(k(T.g),k(T.h));if(x(T))return T=V(A,k(T)),new C(k(T.g),T.h);if(A.g.length>30){if(x(A)||x(T))throw Error("slowDivide_ only works with positive integers.");for(var S=m,R=T;R.l(A)<=0;)S=U(S),R=U(R);var M=O(S,1),D=O(R,1);for(R=O(R,2),S=O(S,2);!w(R);){var N=D.add(R);N.l(A)<=0&&(M=M.add(S),D=N),R=O(R,1),S=O(S,1)}return T=I(A,M.j(T)),new C(M,T)}for(M=p;A.l(T)>=0;){for(S=Math.max(1,Math.floor(A.m()/T.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),D=d(S),N=D.j(T);x(N)||N.l(A)>0;)S-=R,D=d(S),N=D.j(T);w(D)&&(D=m),M=M.add(D),A=I(A,N)}return new C(M,A)}t.B=function(A){return V(this,A).h},t.and=function(A){const T=Math.max(this.g.length,A.g.length),S=[];for(let R=0;R<T;R++)S[R]=this.i(R)&A.i(R);return new s(S,this.h&A.h)},t.or=function(A){const T=Math.max(this.g.length,A.g.length),S=[];for(let R=0;R<T;R++)S[R]=this.i(R)|A.i(R);return new s(S,this.h|A.h)},t.xor=function(A){const T=Math.max(this.g.length,A.g.length),S=[];for(let R=0;R<T;R++)S[R]=this.i(R)^A.i(R);return new s(S,this.h^A.h)};function U(A){const T=A.g.length+1,S=[];for(let R=0;R<T;R++)S[R]=A.i(R)<<1|A.i(R-1)>>>31;return new s(S,A.h)}function O(A,T){const S=T>>5;T%=32;const R=A.g.length-S,M=[];for(let D=0;D<R;D++)M[D]=T>0?A.i(D+S)>>>T|A.i(D+S+1)<<32-T:A.i(D+S);return new s(M,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,yT=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,nr=s}).apply(typeof lg<"u"?lg:typeof self<"u"?self:typeof window<"u"?window:{});var yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _T,Vo,vT,Vl,yd,ET,TT,IT;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof yl=="object"&&yl];for(var g=0;g<f.length;++g){var y=f[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(f,g){if(g)e:{var y=r;f=f.split(".");for(var v=0;v<f.length-1;v++){var L=f[v];if(!(L in y))break e;y=y[L]}f=f[f.length-1],v=y[f],g=g(v),g!=v&&g!=null&&e(y,f,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(g){var y=[],v;for(v in g)Object.prototype.hasOwnProperty.call(g,v)&&y.push([v,g[v]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function l(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function u(f,g,y){return f.call.apply(f.bind,arguments)}function d(f,g,y){return d=u,d.apply(null,arguments)}function h(f,g){var y=Array.prototype.slice.call(arguments,1);return function(){var v=y.slice();return v.push.apply(v,arguments),f.apply(this,v)}}function p(f,g){function y(){}y.prototype=g.prototype,f.Z=g.prototype,f.prototype=new y,f.prototype.constructor=f,f.Ob=function(v,L,F){for(var H=Array(arguments.length-2),te=2;te<arguments.length;te++)H[te-2]=arguments[te];return g.prototype[L].apply(v,H)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function _(f){const g=f.length;if(g>0){const y=Array(g);for(let v=0;v<g;v++)y[v]=f[v];return y}return[]}function w(f,g){for(let v=1;v<arguments.length;v++){const L=arguments[v];var y=typeof L;if(y=y!="object"?y:L?Array.isArray(L)?"array":y:"null",y=="array"||y=="object"&&typeof L.length=="number"){y=f.length||0;const F=L.length||0;f.length=y+F;for(let H=0;H<F;H++)f[y+H]=L[H]}else f.push(L)}}class x{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function k(f){s.setTimeout(()=>{throw f},0)}function I(){var f=A;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class E{constructor(){this.h=this.g=null}add(g,y){const v=C.get();v.set(g,y),this.h?this.h.next=v:this.g=v,this.h=v}}var C=new x(()=>new V,f=>f.reset());class V{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let U,O=!1,A=new E,T=()=>{const f=Promise.resolve(void 0);U=()=>{f.then(S)}};function S(){for(var f;f=I();){try{f.h.call(f.g)}catch(y){k(y)}var g=C;g.j(f),g.h<100&&(g.h++,f.next=g.g,g.g=f)}O=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const y=()=>{};s.addEventListener("test",y,g),s.removeEventListener("test",y,g)}catch{}return f}();function N(f){return/^[\s\xa0]*$/.test(f)}function xe(f,g){M.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,g)}p(xe,M),xe.prototype.init=function(f,g){const y=this.type=f.type,v=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget,g||(y=="mouseover"?g=f.fromElement:y=="mouseout"&&(g=f.toElement)),this.relatedTarget=g,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Rt="closure_listenable_"+(Math.random()*1e6|0),lt=0;function cn(f,g,y,v,L){this.listener=f,this.proxy=null,this.src=g,this.type=y,this.capture=!!v,this.ha=L,this.key=++lt,this.da=this.fa=!1}function $(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function X(f,g,y){for(const v in f)g.call(y,f[v],v,f)}function ee(f,g){for(const y in f)g.call(void 0,f[y],y,f)}function ve(f){const g={};for(const y in f)g[y]=f[y];return g}const Re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gr(f,g){let y,v;for(let L=1;L<arguments.length;L++){v=arguments[L];for(y in v)f[y]=v[y];for(let F=0;F<Re.length;F++)y=Re[F],Object.prototype.hasOwnProperty.call(v,y)&&(f[y]=v[y])}}function Pt(f){this.src=f,this.g={},this.h=0}Pt.prototype.add=function(f,g,y,v,L){const F=f.toString();f=this.g[F],f||(f=this.g[F]=[],this.h++);const H=Ot(f,g,v,L);return H>-1?(g=f[H],y||(g.fa=!1)):(g=new cn(g,this.src,F,!!v,L),g.fa=y,f.push(g)),g};function yr(f,g){const y=g.type;if(y in f.g){var v=f.g[y],L=Array.prototype.indexOf.call(v,g,void 0),F;(F=L>=0)&&Array.prototype.splice.call(v,L,1),F&&($(g),f.g[y].length==0&&(delete f.g[y],f.h--))}}function Ot(f,g,y,v){for(let L=0;L<f.length;++L){const F=f[L];if(!F.da&&F.listener==g&&F.capture==!!y&&F.ha==v)return L}return-1}var Pn="closure_lm_"+(Math.random()*1e6|0),hu={};function Vh(f,g,y,v,L){if(Array.isArray(g)){for(let F=0;F<g.length;F++)Vh(f,g[F],y,v,L);return null}return y=Uh(y),f&&f[Rt]?f.J(g,y,l(v)?!!v.capture:!1,L):wC(f,g,y,!1,v,L)}function wC(f,g,y,v,L,F){if(!g)throw Error("Invalid event type");const H=l(L)?!!L.capture:!!L;let te=mu(f);if(te||(f[Pn]=te=new Pt(f)),y=te.add(g,y,v,H,F),y.proxy)return y;if(v=RC(),y.proxy=v,v.src=f,v.listener=y,f.addEventListener)D||(L=H),L===void 0&&(L=!1),f.addEventListener(g.toString(),v,L);else if(f.attachEvent)f.attachEvent(Fh(g.toString()),v);else if(f.addListener&&f.removeListener)f.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return y}function RC(){function f(y){return g.call(f.src,f.listener,y)}const g=PC;return f}function Lh(f,g,y,v,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)Lh(f,g[F],y,v,L);else v=l(v)?!!v.capture:!!v,y=Uh(y),f&&f[Rt]?(f=f.i,F=String(g).toString(),F in f.g&&(g=f.g[F],y=Ot(g,y,v,L),y>-1&&($(g[y]),Array.prototype.splice.call(g,y,1),g.length==0&&(delete f.g[F],f.h--)))):f&&(f=mu(f))&&(g=f.g[g.toString()],f=-1,g&&(f=Ot(g,y,v,L)),(y=f>-1?g[f]:null)&&pu(y))}function pu(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[Rt])yr(g.i,f);else{var y=f.type,v=f.proxy;g.removeEventListener?g.removeEventListener(y,v,f.capture):g.detachEvent?g.detachEvent(Fh(y),v):g.addListener&&g.removeListener&&g.removeListener(v),(y=mu(g))?(yr(y,f),y.h==0&&(y.src=null,g[Pn]=null)):$(f)}}}function Fh(f){return f in hu?hu[f]:hu[f]="on"+f}function PC(f,g){if(f.da)f=!0;else{g=new xe(g,this);const y=f.listener,v=f.ha||f.src;f.fa&&pu(f),f=y.call(v,g)}return f}function mu(f){return f=f[Pn],f instanceof Pt?f:null}var gu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Uh(f){return typeof f=="function"?f:(f[gu]||(f[gu]=function(g){return f.handleEvent(g)}),f[gu])}function Xe(){R.call(this),this.i=new Pt(this),this.M=this,this.G=null}p(Xe,R),Xe.prototype[Rt]=!0,Xe.prototype.removeEventListener=function(f,g,y,v){Lh(this,f,g,y,v)};function at(f,g){var y,v=f.G;if(v)for(y=[];v;v=v.G)y.push(v);if(f=f.M,v=g.type||g,typeof g=="string")g=new M(g,f);else if(g instanceof M)g.target=g.target||f;else{var L=g;g=new M(v,f),gr(g,L)}L=!0;let F,H;if(y)for(H=y.length-1;H>=0;H--)F=g.g=y[H],L=bs(F,v,!0,g)&&L;if(F=g.g=f,L=bs(F,v,!0,g)&&L,L=bs(F,v,!1,g)&&L,y)for(H=0;H<y.length;H++)F=g.g=y[H],L=bs(F,v,!1,g)&&L}Xe.prototype.N=function(){if(Xe.Z.N.call(this),this.i){var f=this.i;for(const g in f.g){const y=f.g[g];for(let v=0;v<y.length;v++)$(y[v]);delete f.g[g],f.h--}}this.G=null},Xe.prototype.J=function(f,g,y,v){return this.i.add(String(f),g,!1,y,v)},Xe.prototype.K=function(f,g,y,v){return this.i.add(String(f),g,!0,y,v)};function bs(f,g,y,v){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let F=0;F<g.length;++F){const H=g[F];if(H&&!H.da&&H.capture==y){const te=H.listener,Fe=H.ha||H.src;H.fa&&yr(f.i,H),L=te.call(Fe,v)!==!1&&L}}return L&&!v.defaultPrevented}function NC(f,g){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=d(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:s.setTimeout(f,g||0)}function Oh(f){f.g=NC(()=>{f.g=null,f.i&&(f.i=!1,Oh(f))},f.l);const g=f.h;f.h=null,f.m.apply(null,g)}class xC extends R{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Oh(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function io(f){R.call(this),this.h=f,this.g={}}p(io,R);var Bh=[];function qh(f){X(f.g,function(g,y){this.g.hasOwnProperty(y)&&pu(g)},f),f.g={}}io.prototype.N=function(){io.Z.N.call(this),qh(this)},io.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yu=s.JSON.stringify,MC=s.JSON.parse,kC=class{stringify(f){return s.JSON.stringify(f,void 0)}parse(f){return s.JSON.parse(f,void 0)}};function Gh(){}function bh(){}var oo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _u(){M.call(this,"d")}p(_u,M);function vu(){M.call(this,"c")}p(vu,M);var _r={},Hh=null;function Hs(){return Hh=Hh||new Xe}_r.Ia="serverreachability";function zh(f){M.call(this,_r.Ia,f)}p(zh,M);function so(f){const g=Hs();at(g,new zh(g))}_r.STAT_EVENT="statevent";function $h(f,g){M.call(this,_r.STAT_EVENT,f),this.stat=g}p($h,M);function ut(f){const g=Hs();at(g,new $h(g,f))}_r.Ja="timingevent";function Wh(f,g){M.call(this,_r.Ja,f),this.size=g}p(Wh,M);function lo(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){f()},g)}function ao(){this.g=!0}ao.prototype.ua=function(){this.g=!1};function DC(f,g,y,v,L,F){f.info(function(){if(f.g)if(F){var H="",te=F.split("&");for(let de=0;de<te.length;de++){var Fe=te[de].split("=");if(Fe.length>1){const Ge=Fe[0];Fe=Fe[1];const Yt=Ge.split("_");H=Yt.length>=2&&Yt[1]=="type"?H+(Ge+"="+Fe+"&"):H+(Ge+"=redacted&")}}}else H=null;else H=F;return"XMLHTTP REQ ("+v+") [attempt "+L+"]: "+g+`
`+y+`
`+H})}function VC(f,g,y,v,L,F,H){f.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+L+"]: "+g+`
`+y+`
`+F+" "+H})}function jr(f,g,y,v){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+FC(f,y)+(v?" "+v:"")})}function LC(f,g){f.info(function(){return"TIMEOUT: "+g})}ao.prototype.info=function(){};function FC(f,g){if(!f.g)return g;if(!g)return null;try{const F=JSON.parse(g);if(F){for(f=0;f<F.length;f++)if(Array.isArray(F[f])){var y=F[f];if(!(y.length<2)){var v=y[1];if(Array.isArray(v)&&!(v.length<1)){var L=v[0];if(L!="noop"&&L!="stop"&&L!="close")for(let H=1;H<v.length;H++)v[H]=""}}}}return yu(F)}catch{return g}}var zs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kh;function Eu(){}p(Eu,Gh),Eu.prototype.g=function(){return new XMLHttpRequest},Kh=new Eu;function uo(f){return encodeURIComponent(String(f))}function UC(f){var g=1;f=f.split(":");const y=[];for(;g>0&&f.length;)y.push(f.shift()),g--;return f.length&&y.push(f.join(":")),y}function Nn(f,g,y,v){this.j=f,this.i=g,this.l=y,this.S=v||1,this.V=new io(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qh}function Qh(){this.i=null,this.g="",this.h=!1}var Yh={},Tu={};function Iu(f,g,y){f.M=1,f.A=Ws(Qt(g)),f.u=y,f.R=!0,Xh(f,null)}function Xh(f,g){f.F=Date.now(),$s(f),f.B=Qt(f.A);var y=f.B,v=f.S;Array.isArray(v)||(v=[String(v)]),cp(y.i,"t",v),f.C=0,y=f.j.L,f.h=new Qh,f.g=Pp(f.j,y?g:null,!f.u),f.P>0&&(f.O=new xC(d(f.Y,f,f.g),f.P)),g=f.V,y=f.g,v=f.ba;var L="readystatechange";Array.isArray(L)||(L&&(Bh[0]=L.toString()),L=Bh);for(let F=0;F<L.length;F++){const H=Vh(y,L[F],v||g.handleEvent,!1,g.h||g);if(!H)break;g.g[H.key]=H}g=f.J?ve(f.J):{},f.u?(f.v||(f.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,g)):(f.v="GET",f.g.ea(f.B,f.v,null,g)),so(),DC(f.i,f.v,f.B,f.l,f.S,f.u)}Nn.prototype.ba=function(f){f=f.target;const g=this.O;g&&kn(f)==3?g.j():this.Y(f)},Nn.prototype.Y=function(f){try{if(f==this.g)e:{const te=kn(this.g),Fe=this.g.ya(),de=this.g.ca();if(!(te<3)&&(te!=3||this.g&&(this.h.h||this.g.la()||yp(this.g)))){this.K||te!=4||Fe==7||(Fe==8||de<=0?so(3):so(2)),Cu(this);var g=this.g.ca();this.X=g;var y=OC(this);if(this.o=g==200,VC(this.i,this.v,this.B,this.l,this.S,te,g),this.o){if(this.U&&!this.L){t:{if(this.g){var v,L=this.g;if((v=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(v)){var F=v;break t}}F=null}if(f=F)jr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Su(this,f);else{this.o=!1,this.m=3,ut(12),vr(this),co(this);break e}}if(this.R){f=!0;let Ge;for(;!this.K&&this.C<y.length;)if(Ge=BC(this,y),Ge==Tu){te==4&&(this.m=4,ut(14),f=!1),jr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ge==Yh){this.m=4,ut(15),jr(this.i,this.l,y,"[Invalid Chunk]"),f=!1;break}else jr(this.i,this.l,Ge,null),Su(this,Ge);if(Zh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||y.length!=0||this.h.h||(this.m=1,ut(16),f=!1),this.o=this.o&&f,!f)jr(this.i,this.l,y,"[Invalid Chunked Response]"),vr(this),co(this);else if(y.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),ku(H),H.P=!0,ut(11))}}else jr(this.i,this.l,y,null),Su(this,y);te==4&&vr(this),this.o&&!this.K&&(te==4?Sp(this.j,this):(this.o=!1,$s(this)))}else jC(this.g),g==400&&y.indexOf("Unknown SID")>0?(this.m=3,ut(12)):(this.m=0,ut(13)),vr(this),co(this)}}}catch{}finally{}};function OC(f){if(!Zh(f))return f.g.la();const g=yp(f.g);if(g==="")return"";let y="";const v=g.length,L=kn(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return vr(f),co(f),"";f.h.i=new s.TextDecoder}for(let F=0;F<v;F++)f.h.h=!0,y+=f.h.i.decode(g[F],{stream:!(L&&F==v-1)});return g.length=0,f.h.g+=y,f.C=0,f.h.g}function Zh(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function BC(f,g){var y=f.C,v=g.indexOf(`
`,y);return v==-1?Tu:(y=Number(g.substring(y,v)),isNaN(y)?Yh:(v+=1,v+y>g.length?Tu:(g=g.slice(v,v+y),f.C=v+y,g)))}Nn.prototype.cancel=function(){this.K=!0,vr(this)};function $s(f){f.T=Date.now()+f.H,jh(f,f.H)}function jh(f,g){if(f.D!=null)throw Error("WatchDog timer not null");f.D=lo(d(f.aa,f),g)}function Cu(f){f.D&&(s.clearTimeout(f.D),f.D=null)}Nn.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(LC(this.i,this.B),this.M!=2&&(so(),ut(17)),vr(this),this.m=2,co(this)):jh(this,this.T-f)};function co(f){f.j.I==0||f.K||Sp(f.j,f)}function vr(f){Cu(f);var g=f.O;g&&typeof g.dispose=="function"&&g.dispose(),f.O=null,qh(f.V),f.g&&(g=f.g,f.g=null,g.abort(),g.dispose())}function Su(f,g){try{var y=f.j;if(y.I!=0&&(y.g==f||Au(y.h,f))){if(!f.L&&Au(y.h,f)&&y.I==3){try{var v=y.Ba.g.parse(g)}catch{v=null}if(Array.isArray(v)&&v.length==3){var L=v;if(L[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<f.F)Xs(y),Qs(y);else break e;Mu(y),ut(18)}}else y.xa=L[1],0<y.xa-y.K&&L[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=lo(d(y.Va,y),6e3));np(y.h)<=1&&y.ta&&(y.ta=void 0)}else Tr(y,11)}else if((f.L||y.g==f)&&Xs(y),!N(g))for(L=y.Ba.g.parse(g),g=0;g<L.length;g++){let de=L[g];const Ge=de[0];if(!(Ge<=y.K))if(y.K=Ge,de=de[1],y.I==2)if(de[0]=="c"){y.M=de[1],y.ba=de[2];const Yt=de[3];Yt!=null&&(y.ka=Yt,y.j.info("VER="+y.ka));const Ir=de[4];Ir!=null&&(y.za=Ir,y.j.info("SVER="+y.za));const Dn=de[5];Dn!=null&&typeof Dn=="number"&&Dn>0&&(v=1.5*Dn,y.O=v,y.j.info("backChannelRequestTimeoutMs_="+v)),v=y;const Vn=f.g;if(Vn){const js=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(js){var F=v.h;F.g||js.indexOf("spdy")==-1&&js.indexOf("quic")==-1&&js.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(wu(F,F.h),F.h=null))}if(v.G){const Du=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Du&&(v.wa=Du,pe(v.J,v.G,Du))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-f.F,y.j.info("Handshake RTT: "+y.T+"ms")),v=y;var H=f;if(v.na=Rp(v,v.L?v.ba:null,v.W),H.L){rp(v.h,H);var te=H,Fe=v.O;Fe&&(te.H=Fe),te.D&&(Cu(te),$s(te)),v.g=H}else Ip(v);y.i.length>0&&Ys(y)}else de[0]!="stop"&&de[0]!="close"||Tr(y,7);else y.I==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Tr(y,7):xu(y):de[0]!="noop"&&y.l&&y.l.qa(de),y.A=0)}}so(4)}catch{}}var qC=class{constructor(f,g){this.g=f,this.map=g}};function ep(f){this.l=f||10,s.PerformanceNavigationTiming?(f=s.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function tp(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function np(f){return f.h?1:f.g?f.g.size:0}function Au(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function wu(f,g){f.g?f.g.add(g):f.h=g}function rp(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}ep.prototype.cancel=function(){if(this.i=ip(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ip(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let g=f.i;for(const y of f.g.values())g=g.concat(y.G);return g}return _(f.i)}var op=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GC(f,g){if(f){f=f.split("&");for(let y=0;y<f.length;y++){const v=f[y].indexOf("=");let L,F=null;v>=0?(L=f[y].substring(0,v),F=f[y].substring(v+1)):L=f[y],g(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function xn(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;f instanceof xn?(this.l=f.l,fo(this,f.j),this.o=f.o,this.g=f.g,ho(this,f.u),this.h=f.h,Ru(this,dp(f.i)),this.m=f.m):f&&(g=String(f).match(op))?(this.l=!1,fo(this,g[1]||"",!0),this.o=po(g[2]||""),this.g=po(g[3]||"",!0),ho(this,g[4]),this.h=po(g[5]||"",!0),Ru(this,g[6]||"",!0),this.m=po(g[7]||"")):(this.l=!1,this.i=new go(null,this.l))}xn.prototype.toString=function(){const f=[];var g=this.j;g&&f.push(mo(g,sp,!0),":");var y=this.g;return(y||g=="file")&&(f.push("//"),(g=this.o)&&f.push(mo(g,sp,!0),"@"),f.push(uo(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&f.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&f.push("/"),f.push(mo(y,y.charAt(0)=="/"?zC:HC,!0))),(y=this.i.toString())&&f.push("?",y),(y=this.m)&&f.push("#",mo(y,WC)),f.join("")},xn.prototype.resolve=function(f){const g=Qt(this);let y=!!f.j;y?fo(g,f.j):y=!!f.o,y?g.o=f.o:y=!!f.g,y?g.g=f.g:y=f.u!=null;var v=f.h;if(y)ho(g,f.u);else if(y=!!f.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var L=g.h.lastIndexOf("/");L!=-1&&(v=g.h.slice(0,L+1)+v)}if(L=v,L==".."||L==".")v="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){v=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let H=0;H<L.length;){const te=L[H++];te=="."?v&&H==L.length&&F.push(""):te==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),v&&H==L.length&&F.push("")):(F.push(te),v=!0)}v=F.join("/")}else v=L}return y?g.h=v:y=f.i.toString()!=="",y?Ru(g,dp(f.i)):y=!!f.m,y&&(g.m=f.m),g};function Qt(f){return new xn(f)}function fo(f,g,y){f.j=y?po(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function ho(f,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);f.u=g}else f.u=null}function Ru(f,g,y){g instanceof go?(f.i=g,JC(f.i,f.l)):(y||(g=mo(g,$C)),f.i=new go(g,f.l))}function pe(f,g,y){f.i.set(g,y)}function Ws(f){return pe(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function po(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function mo(f,g,y){return typeof f=="string"?(f=encodeURI(f).replace(g,bC),y&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function bC(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var sp=/[#\/\?@]/g,HC=/[#\?:]/g,zC=/[#\?]/g,$C=/[#\?@]/g,WC=/#/g;function go(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function Er(f){f.g||(f.g=new Map,f.h=0,f.i&&GC(f.i,function(g,y){f.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=go.prototype,t.add=function(f,g){Er(this),this.i=null,f=ei(this,f);let y=this.g.get(f);return y||this.g.set(f,y=[]),y.push(g),this.h+=1,this};function lp(f,g){Er(f),g=ei(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function ap(f,g){return Er(f),g=ei(f,g),f.g.has(g)}t.forEach=function(f,g){Er(this),this.g.forEach(function(y,v){y.forEach(function(L){f.call(g,L,v,this)},this)},this)};function up(f,g){Er(f);let y=[];if(typeof g=="string")ap(f,g)&&(y=y.concat(f.g.get(ei(f,g))));else for(f=Array.from(f.g.values()),g=0;g<f.length;g++)y=y.concat(f[g]);return y}t.set=function(f,g){return Er(this),this.i=null,f=ei(this,f),ap(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},t.get=function(f,g){return f?(f=up(this,f),f.length>0?String(f[0]):g):g};function cp(f,g,y){lp(f,g),y.length>0&&(f.i=null,f.g.set(ei(f,g),_(y)),f.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],g=Array.from(this.g.keys());for(let v=0;v<g.length;v++){var y=g[v];const L=uo(y);y=up(this,y);for(let F=0;F<y.length;F++){let H=L;y[F]!==""&&(H+="="+uo(y[F])),f.push(H)}}return this.i=f.join("&")};function dp(f){const g=new go;return g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),g}function ei(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function JC(f,g){g&&!f.j&&(Er(f),f.i=null,f.g.forEach(function(y,v){const L=v.toLowerCase();v!=L&&(lp(this,v),cp(this,L,y))},f)),f.j=g}function KC(f,g){const y=new ao;if(s.Image){const v=new Image;v.onload=h(Mn,y,"TestLoadImage: loaded",!0,g,v),v.onerror=h(Mn,y,"TestLoadImage: error",!1,g,v),v.onabort=h(Mn,y,"TestLoadImage: abort",!1,g,v),v.ontimeout=h(Mn,y,"TestLoadImage: timeout",!1,g,v),s.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=f}else g(!1)}function QC(f,g){const y=new ao,v=new AbortController,L=setTimeout(()=>{v.abort(),Mn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:v.signal}).then(F=>{clearTimeout(L),F.ok?Mn(y,"TestPingServer: ok",!0,g):Mn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Mn(y,"TestPingServer: error",!1,g)})}function Mn(f,g,y,v,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),v(y)}catch{}}function YC(){this.g=new kC}function Pu(f){this.i=f.Sb||null,this.h=f.ab||!1}p(Pu,Gh),Pu.prototype.g=function(){return new Js(this.i,this.h)};function Js(f,g){Xe.call(this),this.H=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Js,Xe),t=Js.prototype,t.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=g,this.readyState=1,_o(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(g.body=f),(this.H||s).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,_o(this)),this.g&&(this.readyState=3,_o(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fp(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function fp(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?yo(this):_o(this),this.readyState==3&&fp(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,yo(this))},t.Na=function(f){this.g&&(this.response=f,yo(this))},t.ga=function(){this.g&&yo(this)};function yo(f){f.readyState=4,f.l=null,f.j=null,f.B=null,_o(f)}t.setRequestHeader=function(f,g){this.A.append(f,g)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,f.push(y[0]+": "+y[1]),y=g.next();return f.join(`\r
`)};function _o(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function hp(f){let g="";return X(f,function(y,v){g+=v,g+=":",g+=y,g+=`\r
`}),g}function Nu(f,g,y){e:{for(v in y){var v=!1;break e}v=!0}v||(y=hp(y),typeof f=="string"?y!=null&&uo(y):pe(f,g,y))}function Ae(f){Xe.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ae,Xe);var XC=/^https?$/i,ZC=["POST","PUT"];t=Ae.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,g,y,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kh.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(F){pp(this,F);return}if(f=y||"",y=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var L in v)y.set(L,v[L]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const F of v.keys())y.set(F,v.get(F));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(y.keys()).find(F=>F.toLowerCase()=="content-type"),L=s.FormData&&f instanceof s.FormData,!(Array.prototype.indexOf.call(ZC,g,void 0)>=0)||v||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,H]of y)this.g.setRequestHeader(F,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(F){pp(this,F)}};function pp(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.o=5,mp(f),Ks(f)}function mp(f){f.A||(f.A=!0,at(f,"complete"),at(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,at(this,"complete"),at(this,"abort"),Ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ks(this,!0)),Ae.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?gp(this):this.Xa())},t.Xa=function(){gp(this)};function gp(f){if(f.h&&typeof o<"u"){if(f.v&&kn(f)==4)setTimeout(f.Ca.bind(f),0);else if(at(f,"readystatechange"),kn(f)==4){f.h=!1;try{const F=f.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var v;if(v=F===0){let H=String(f.D).match(op)[1]||null;!H&&s.self&&s.self.location&&(H=s.self.location.protocol.slice(0,-1)),v=!XC.test(H?H.toLowerCase():"")}y=v}if(y)at(f,"complete"),at(f,"success");else{f.o=6;try{var L=kn(f)>2?f.g.statusText:""}catch{L=""}f.l=L+" ["+f.ca()+"]",mp(f)}}finally{Ks(f)}}}}function Ks(f,g){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const y=f.g;f.g=null,g||at(f,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function kn(f){return f.g?f.g.readyState:0}t.ca=function(){try{return kn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),MC(g)}};function yp(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function jC(f){const g={};f=(f.g&&kn(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<f.length;v++){if(N(f[v]))continue;var y=UC(f[v]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const F=g[L]||[];g[L]=F,F.push(y)}ee(g,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vo(f,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[f]||g}function _p(f){this.za=0,this.i=[],this.j=new ao,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vo("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vo("baseRetryDelayMs",5e3,f),this.Za=vo("retryDelaySeedMs",1e4,f),this.Ta=vo("forwardChannelMaxRetries",2,f),this.va=vo("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new ep(f&&f.concurrentRequestLimit),this.Ba=new YC,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=_p.prototype,t.ka=8,t.I=1,t.connect=function(f,g,y,v){ut(0),this.W=f,this.H=g||{},y&&v!==void 0&&(this.H.OSID=y,this.H.OAID=v),this.F=this.X,this.J=Rp(this,null,this.W),Ys(this)};function xu(f){if(vp(f),f.I==3){var g=f.V++,y=Qt(f.J);if(pe(y,"SID",f.M),pe(y,"RID",g),pe(y,"TYPE","terminate"),Eo(f,y),g=new Nn(f,f.j,g),g.M=2,g.A=Ws(Qt(y)),y=!1,s.navigator&&s.navigator.sendBeacon)try{y=s.navigator.sendBeacon(g.A.toString(),"")}catch{}!y&&s.Image&&(new Image().src=g.A,y=!0),y||(g.g=Pp(g.j,null),g.g.ea(g.A)),g.F=Date.now(),$s(g)}wp(f)}function Qs(f){f.g&&(ku(f),f.g.cancel(),f.g=null)}function vp(f){Qs(f),f.v&&(s.clearTimeout(f.v),f.v=null),Xs(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&s.clearTimeout(f.m),f.m=null)}function Ys(f){if(!tp(f.h)&&!f.m){f.m=!0;var g=f.Ea;U||T(),O||(U(),O=!0),A.add(g,f),f.D=0}}function eS(f,g){return np(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=g.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=lo(d(f.Ea,f,g),Ap(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const L=new Nn(this,this.j,f);let F=this.o;if(this.U&&(F?(F=ve(F),gr(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var v=this.i[y];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(g+=v,g>4096){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Tp(this,L,g),y=Qt(this.J),pe(y,"RID",f),pe(y,"CVER",22),this.G&&pe(y,"X-HTTP-Session-Id",this.G),Eo(this,y),F&&(this.R?g="headers="+uo(hp(F))+"&"+g:this.u&&Nu(y,this.u,F)),wu(this.h,L),this.Ra&&pe(y,"TYPE","init"),this.S?(pe(y,"$req",g),pe(y,"SID","null"),L.U=!0,Iu(L,y,null)):Iu(L,y,g),this.I=2}}else this.I==3&&(f?Ep(this,f):this.i.length==0||tp(this.h)||Ep(this))};function Ep(f,g){var y;g?y=g.l:y=f.V++;const v=Qt(f.J);pe(v,"SID",f.M),pe(v,"RID",y),pe(v,"AID",f.K),Eo(f,v),f.u&&f.o&&Nu(v,f.u,f.o),y=new Nn(f,f.j,y,f.D+1),f.u===null&&(y.J=f.o),g&&(f.i=g.G.concat(f.i)),g=Tp(f,y,1e3),y.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),wu(f.h,y),Iu(y,v,g)}function Eo(f,g){f.H&&X(f.H,function(y,v){pe(g,v,y)}),f.l&&X({},function(y,v){pe(g,v,y)})}function Tp(f,g,y){y=Math.min(f.i.length,y);const v=f.l?d(f.l.Ka,f.l,f):null;e:{var L=f.i;let te=-1;for(;;){const Fe=["count="+y];te==-1?y>0?(te=L[0].g,Fe.push("ofs="+te)):te=0:Fe.push("ofs="+te);let de=!0;for(let Ge=0;Ge<y;Ge++){var F=L[Ge].g;const Yt=L[Ge].map;if(F-=te,F<0)te=Math.max(0,L[Ge].g-100),de=!1;else try{F="req"+F+"_"||"";try{var H=Yt instanceof Map?Yt:Object.entries(Yt);for(const[Ir,Dn]of H){let Vn=Dn;l(Dn)&&(Vn=yu(Dn)),Fe.push(F+Ir+"="+encodeURIComponent(Vn))}}catch(Ir){throw Fe.push(F+"type="+encodeURIComponent("_badmap")),Ir}}catch{v&&v(Yt)}}if(de){H=Fe.join("&");break e}}H=void 0}return f=f.i.splice(0,y),g.G=f,H}function Ip(f){if(!f.g&&!f.v){f.Y=1;var g=f.Da;U||T(),O||(U(),O=!0),A.add(g,f),f.A=0}}function Mu(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=lo(d(f.Da,f),Ap(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,Cp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=lo(d(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ut(10),Qs(this),Cp(this))};function ku(f){f.B!=null&&(s.clearTimeout(f.B),f.B=null)}function Cp(f){f.g=new Nn(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var g=Qt(f.na);pe(g,"RID","rpc"),pe(g,"SID",f.M),pe(g,"AID",f.K),pe(g,"CI",f.F?"0":"1"),!f.F&&f.ia&&pe(g,"TO",f.ia),pe(g,"TYPE","xmlhttp"),Eo(f,g),f.u&&f.o&&Nu(g,f.u,f.o),f.O&&(f.g.H=f.O);var y=f.g;f=f.ba,y.M=1,y.A=Ws(Qt(g)),y.u=null,y.R=!0,Xh(y,f)}t.Va=function(){this.C!=null&&(this.C=null,Qs(this),Mu(this),ut(19))};function Xs(f){f.C!=null&&(s.clearTimeout(f.C),f.C=null)}function Sp(f,g){var y=null;if(f.g==g){Xs(f),ku(f),f.g=null;var v=2}else if(Au(f.h,g))y=g.G,rp(f.h,g),v=1;else return;if(f.I!=0){if(g.o)if(v==1){y=g.u?g.u.length:0,g=Date.now()-g.F;var L=f.D;v=Hs(),at(v,new Wh(v,y)),Ys(f)}else Ip(f);else if(L=g.m,L==3||L==0&&g.X>0||!(v==1&&eS(f,g)||v==2&&Mu(f)))switch(y&&y.length>0&&(g=f.h,g.i=g.i.concat(y)),L){case 1:Tr(f,5);break;case 4:Tr(f,10);break;case 3:Tr(f,6);break;default:Tr(f,2)}}}function Ap(f,g){let y=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(y*=2),y*g}function Tr(f,g){if(f.j.info("Error code "+g),g==2){var y=d(f.bb,f),v=f.Ua;const L=!v;v=new xn(v||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||fo(v,"https"),Ws(v),L?KC(v.toString(),y):QC(v.toString(),y)}else ut(2);f.I=0,f.l&&f.l.pa(g),wp(f),vp(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function wp(f){if(f.I=0,f.ja=[],f.l){const g=ip(f.h);(g.length!=0||f.i.length!=0)&&(w(f.ja,g),w(f.ja,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.oa()}}function Rp(f,g,y){var v=y instanceof xn?Qt(y):new xn(y);if(v.g!="")g&&(v.g=g+"."+v.g),ho(v,v.u);else{var L=s.location;v=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const F=new xn(null);v&&fo(F,v),g&&(F.g=g),L&&ho(F,L),y&&(F.h=y),v=F}return y=f.G,g=f.wa,y&&g&&pe(v,y,g),pe(v,"VER",f.ka),Eo(f,v),v}function Pp(f,g,y){if(g&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Aa&&!f.ma?new Ae(new Pu({ab:y})):new Ae(f.ma),g.Fa(f.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Np(){}t=Np.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Zs(){}Zs.prototype.g=function(f,g){return new Et(f,g)};function Et(f,g){Xe.call(this),this.g=new _p(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(f?f["X-WebChannel-Client-Profile"]=g.sa:f={"X-WebChannel-Client-Profile":g.sa}),this.g.U=f,(f=g&&g.Qb)&&!N(f)&&(this.g.u=f),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new ti(this)}p(Et,Xe),Et.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){xu(this.g)},Et.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var y={};y.__data__=f,f=y}else this.v&&(y={},y.__data__=yu(f),f=y);g.i.push(new qC(g.Ya++,f)),g.I==3&&Ys(g)},Et.prototype.N=function(){this.g.l=null,delete this.j,xu(this.g),delete this.g,Et.Z.N.call(this)};function xp(f){_u.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){e:{for(const y in g){f=y;break e}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}p(xp,_u);function Mp(){vu.call(this),this.status=1}p(Mp,vu);function ti(f){this.g=f}p(ti,Np),ti.prototype.ra=function(){at(this.g,"a")},ti.prototype.qa=function(f){at(this.g,new xp(f))},ti.prototype.pa=function(f){at(this.g,new Mp)},ti.prototype.oa=function(){at(this.g,"b")},Zs.prototype.createWebChannel=Zs.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,IT=function(){return new Zs},TT=function(){return Hs()},ET=_r,yd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,Vl=zs,Jh.COMPLETE="complete",vT=Jh,bh.EventType=oo,oo.OPEN="a",oo.CLOSE="b",oo.ERROR="c",oo.MESSAGE="d",Xe.prototype.listen=Xe.prototype.J,Vo=bh,Ae.prototype.listenOnce=Ae.prototype.K,Ae.prototype.getLastError=Ae.prototype.Ha,Ae.prototype.getLastErrorCode=Ae.prototype.ya,Ae.prototype.getStatus=Ae.prototype.ca,Ae.prototype.getResponseJson=Ae.prototype.La,Ae.prototype.getResponseText=Ae.prototype.la,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Fa,_T=Ae}).apply(typeof yl<"u"?yl:typeof self<"u"?self:typeof window<"u"?window:{});const ag="@firebase/firestore",ug="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tt.UNAUTHENTICATED=new tt(null),tt.GOOGLE_CREDENTIALS=new tt("google-credentials-uid"),tt.FIRST_PARTY=new tt("first-party-uid"),tt.MOCK_USER=new tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new cT("@firebase/firestore");function ri(){return qr.logLevel}function J(t,...e){if(qr.logLevel<=se.DEBUG){const n=e.map(zf);qr.debug(`Firestore (${Yi}): ${t}`,...n)}}function In(t,...e){if(qr.logLevel<=se.ERROR){const n=e.map(zf);qr.error(`Firestore (${Yi}): ${t}`,...n)}}function qi(t,...e){if(qr.logLevel<=se.WARN){const n=e.map(zf);qr.warn(`Firestore (${Yi}): ${t}`,...n)}}function zf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,CT(t,r,n)}function CT(t,e,n){let r=`FIRESTORE (${Yi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw In(r),new Error(r)}function ue(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||CT(e,i,r)}function j(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Qi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tt.UNAUTHENTICATED))}shutdown(){}}class SP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class AP{constructor(e){this.t=e,this.currentUser=tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ue(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string",31837,{l:r}),new ST(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string",2055,{h:e}),new tt(e)}}class wP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class RP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sP(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ue(this.o===void 0,3512);const r=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,J("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new cg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=NP(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function _d(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return dc(i)===dc(o)?re(i,o):dc(i)?1:-1}return re(t.length,e.length)}const xP=55296,MP=57343;function dc(t){const e=t.charCodeAt(0);return e>=xP&&e<=MP}function Gi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="__name__";class jt{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return jt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=jt.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return re(e.length,n.length)}static compareSegments(e,n){const r=jt.isNumericId(e),i=jt.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?jt.extractNumericId(e).compare(jt.extractNumericId(n)):_d(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nr.fromString(e.substring(4,e.length-2))}}class fe extends jt{construct(e,n,r){return new fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new fe(n)}static emptyPath(){return new fe([])}}const kP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends jt{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return kP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dg}static keyField(){return new Je([dg])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new W(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new W(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new W(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(fe.fromString(e))}static fromName(e){return new Q(fe.fromString(e).popFirst(5))}static empty(){return new Q(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t,e,n){if(!n)throw new W(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DP(t,e,n,r){if(e===!0&&r===!0)throw new W(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fg(t){if(!Q.isDocumentKey(t))throw new W(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hg(t){if(Q.isDocumentKey(t))throw new W(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ya(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function Ri(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ya(t);throw new W(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e){const n={typeString:t};return e&&(n.value=e),n}function Us(t,e){if(!wT(t))throw new W(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new W(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=-62135596800,mg=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*mg);return new ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pg)throw new W(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mg}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Us(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:Ve("string",ye._jsonSchemaVersion),seconds:Ve("number"),nanoseconds:Ve("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new ye(0,0))}static max(){return new Z(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=-1;function VP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new ye(n+1,0):new ye(n,r));return new sr(i,Q.empty(),e)}function LP(t){return new sr(t.readTime,t.key,Ts)}class sr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new sr(Z.min(),Q.empty(),Ts)}static max(){return new sr(Z.max(),Q.empty(),Ts)}}function FP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xi(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==UP)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let u=0;u<o;u++){const d=u;n(e[d]).next(h=>{s[d]=h,++l,l===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new q((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function BP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xa.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=-1;function Za(t){return t==null}function ga(t){return t===0&&1/t==-1/0}function qP(t){return typeof t=="number"&&Number.isInteger(t)&&!ga(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="";function GP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=gg(e)),e=bP(t.get(n),e);return gg(e)}function bP(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case RT:n+="";break;default:n+=o}}return n}function gg(t){return t+RT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.comparator=e,this.root=n||We.EMPTY}insert(e,n){return new Se(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,We.BLACK,null,null))}remove(e){return new Se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,We.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _l(this.root,e,this.comparator,!1)}getReverseIterator(){return new _l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _l(this.root,e,this.comparator,!0)}}class _l{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class We{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??We.RED,this.left=i??We.EMPTY,this.right=o??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new We(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return We.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new We(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _g(this.data.getIterator())}getIteratorFrom(e){return new _g(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qe(this.comparator);return n.data=e,n}}class _g{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new Ht([])}unionWith(e){let n=new qe(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ht(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new NT("Invalid base64 string: "+o):o}}(e);return new Ye(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Ye(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const HP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(t){if(ue(!!t,39018),typeof t=="string"){let e=0;const n=HP.exec(t);if(ue(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ar(t){return typeof t=="string"?Ye.fromBase64String(t):Ye.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="server_timestamp",MT="__type__",kT="__previous_value__",DT="__local_write_time__";function Jf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[MT])==null?void 0:r.stringValue)===xT}function ja(t){const e=t.mapValue.fields[kT];return Jf(e)?ja(e):e}function Is(t){const e=lr(t.mapValue.fields[DT].timestampValue);return new ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n,r,i,o,s,l,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const ya="(default)";class Cs{constructor(e,n){this.projectId=e,this.database=n||ya}static empty(){return new Cs("","")}get isDefaultDatabase(){return this.database===ya}isEqual(e){return e instanceof Cs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="__type__",$P="__max__",vl={mapValue:{}},LT="__vector__",_a="value";function ur(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jf(t)?4:JP(t)?9007199254740991:WP(t)?10:11:Y(28295,{value:t})}function un(t,e){if(t===e)return!0;const n=ur(t);if(n!==ur(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Is(t).isEqual(Is(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=lr(i.timestampValue),l=lr(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return ar(i.bytesValue).isEqual(ar(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Pe(i.geoPointValue.latitude)===Pe(o.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Pe(i.integerValue)===Pe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Pe(i.doubleValue),l=Pe(o.doubleValue);return s===l?ga(s)===ga(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return Gi(t.arrayValue.values||[],e.arrayValue.values||[],un);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(yg(s)!==yg(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!un(s[u],l[u])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function Ss(t,e){return(t.values||[]).find(n=>un(n,e))!==void 0}function bi(t,e){if(t===e)return 0;const n=ur(t),r=ur(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=Pe(o.integerValue||o.doubleValue),u=Pe(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return vg(t.timestampValue,e.timestampValue);case 4:return vg(Is(t),Is(e));case 5:return _d(t.stringValue,e.stringValue);case 6:return function(o,s){const l=ar(o),u=ar(s);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),u=s.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=re(l[d],u[d]);if(h!==0)return h}return re(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=re(Pe(o.latitude),Pe(s.latitude));return l!==0?l:re(Pe(o.longitude),Pe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Eg(t.arrayValue,e.arrayValue);case 10:return function(o,s){var m,_,w,x;const l=o.fields||{},u=s.fields||{},d=(m=l[_a])==null?void 0:m.arrayValue,h=(_=u[_a])==null?void 0:_.arrayValue,p=re(((w=d==null?void 0:d.values)==null?void 0:w.length)||0,((x=h==null?void 0:h.values)==null?void 0:x.length)||0);return p!==0?p:Eg(d,h)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===vl.mapValue&&s===vl.mapValue)return 0;if(o===vl.mapValue)return 1;if(s===vl.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),d=s.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=_d(u[p],h[p]);if(m!==0)return m;const _=bi(l[u[p]],d[h[p]]);if(_!==0)return _}return re(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:n})}}function vg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=lr(t),r=lr(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function Eg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=bi(n[i],r[i]);if(o)return o}return re(n.length,r.length)}function Hi(t){return vd(t)}function vd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ar(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=vd(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${vd(n.fields[s])}`;return i+"}"}(t.mapValue):Y(61005,{value:t})}function Ll(t){switch(ur(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ja(t);return e?16+Ll(e):16;case 5:return 2*t.stringValue.length;case 6:return ar(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Ll(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Jr(r.fields,(o,s)=>{i+=o.length+Ll(s)}),i}(t.mapValue);default:throw Y(13486,{value:t})}}function Tg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ed(t){return!!t&&"integerValue"in t}function Kf(t){return!!t&&"arrayValue"in t}function Ig(t){return!!t&&"nullValue"in t}function Cg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fl(t){return!!t&&"mapValue"in t}function WP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[VT])==null?void 0:r.stringValue)===LT}function Ko(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Jr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ko(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ko(t.arrayValue.values[n]);return e}return{...t}}function JP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$P}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ko(n)}setAll(e){let n=Je.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Ko(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Fl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Fl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Jr(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Mt(Ko(this.value))}}function FT(t){const e=[];return Jr(t.fields,(n,r)=>{const i=new Je([n]);if(Fl(r)){const o=FT(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Ht(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new it(e,0,Z.min(),Z.min(),Z.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,i){return new it(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new it(e,2,n,Z.min(),Z.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new it(e,3,n,Z.min(),Z.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof it&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new it(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){this.position=e,this.inclusive=n}}function Sg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),n.key):r=bi(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ag(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n="asc"){this.field=e,this.dir=n}}function KP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{}class De extends UT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new YP(e,n,r):n==="array-contains"?new jP(e,r):n==="in"?new eN(e,r):n==="not-in"?new tN(e,r):n==="array-contains-any"?new nN(e,r):new De(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new XP(e,r):new ZP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bi(n,this.value)):n!==null&&ur(this.value)===ur(n)&&this.matchesComparison(bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends UT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Jt(e,n)}matches(e){return OT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function OT(t){return t.op==="and"}function BT(t){return QP(t)&&OT(t)}function QP(t){for(const e of t.filters)if(e instanceof Jt)return!1;return!0}function Td(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+Hi(t.value);if(BT(t))return t.filters.map(e=>Td(e)).join(",");{const e=t.filters.map(n=>Td(n)).join(",");return`${t.op}(${e})`}}function qT(t,e){return t instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.field.isEqual(i.field)&&un(r.value,i.value)}(t,e):t instanceof Jt?function(r,i){return i instanceof Jt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&qT(s,i.filters[l]),!0):!1}(t,e):void Y(19439)}function GT(t){return t instanceof De?function(n){return`${n.field.canonicalString()} ${n.op} ${Hi(n.value)}`}(t):t instanceof Jt?function(n){return n.op.toString()+" {"+n.getFilters().map(GT).join(" ,")+"}"}(t):"Filter"}class YP extends De{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class XP extends De{constructor(e,n){super(e,"in",n),this.keys=bT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ZP extends De{constructor(e,n){super(e,"not-in",n),this.keys=bT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bT(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class jP extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kf(n)&&Ss(n.arrayValue,this.value)}}class eN extends De{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ss(this.value.arrayValue,n)}}class tN extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ss(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ss(this.value.arrayValue,n)}}class nN extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ss(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.Te=null}}function wg(t,e=null,n=[],r=[],i=null,o=null,s=null){return new rN(t,e,n,r,i,o,s)}function Qf(t){const e=j(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Td(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Za(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hi(r)).join(",")),e.Te=n}return e.Te}function Yf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ag(t.startAt,e.startAt)&&Ag(t.endAt,e.endAt)}function Id(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function iN(t,e,n,r,i,o,s,l){return new ji(t,e,n,r,i,o,s,l)}function Xf(t){return new ji(t)}function Rg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HT(t){return t.collectionGroup!==null}function Qo(t){const e=j(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new qe(Je.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new As(o,r))}),n.has(Je.keyField().canonicalString())||e.Ie.push(new As(Je.keyField(),r))}return e.Ie}function rn(t){const e=j(t);return e.Ee||(e.Ee=oN(e,Qo(t))),e.Ee}function oN(t,e){if(t.limitType==="F")return wg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new As(i.field,o)});const n=t.endAt?new va(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new va(t.startAt.position,t.startAt.inclusive):null;return wg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cd(t,e){const n=t.filters.concat([e]);return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sd(t,e,n){return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function eu(t,e){return Yf(rn(t),rn(e))&&t.limitType===e.limitType}function zT(t){return`${Qf(rn(t))}|lt:${t.limitType}`}function ii(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>GT(i)).join(", ")}]`),Za(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Hi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Hi(i)).join(",")),`Target(${r})`}(rn(t))}; limitType=${t.limitType})`}function tu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Qo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,u){const d=Sg(s,l,u);return s.inclusive?d<=0:d<0}(r.startAt,Qo(r),i)||r.endAt&&!function(s,l,u){const d=Sg(s,l,u);return s.inclusive?d>=0:d>0}(r.endAt,Qo(r),i))}(t,e)}function sN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $T(t){return(e,n)=>{let r=!1;for(const i of Qo(t)){const o=lN(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function lN(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(o,s,l){const u=s.data.field(o),d=l.data.field(o);return u!==null&&d!==null?bi(u,d):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return PT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new Se(Q.comparator);function Cn(){return aN}const WT=new Se(Q.comparator);function Lo(...t){let e=WT;for(const n of t)e=e.insert(n.key,n);return e}function JT(t){let e=WT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Nr(){return Yo()}function KT(){return Yo()}function Yo(){return new Kr(t=>t.toString(),(t,e)=>t.isEqual(e))}const uN=new Se(Q.comparator),cN=new qe(Q.comparator);function ie(...t){let e=cN;for(const n of t)e=e.add(n);return e}const dN=new qe(re);function fN(){return dN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ga(e)?"-0":e}}function QT(t){return{integerValue:""+t}}function hN(t,e){return qP(e)?QT(e):Zf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this._=void 0}}function pN(t,e,n){return t instanceof ws?function(i,o){const s={fields:{[MT]:{stringValue:xT},[DT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Jf(o)&&(o=ja(o)),o&&(s.fields[kT]=o),{mapValue:s}}(n,e):t instanceof Rs?XT(t,e):t instanceof Ps?ZT(t,e):function(i,o){const s=YT(i,o),l=Pg(s)+Pg(i.Ae);return Ed(s)&&Ed(i.Ae)?QT(l):Zf(i.serializer,l)}(t,e)}function mN(t,e,n){return t instanceof Rs?XT(t,e):t instanceof Ps?ZT(t,e):n}function YT(t,e){return t instanceof Ea?function(r){return Ed(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ws extends nu{}class Rs extends nu{constructor(e){super(),this.elements=e}}function XT(t,e){const n=jT(e);for(const r of t.elements)n.some(i=>un(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ps extends nu{constructor(e){super(),this.elements=e}}function ZT(t,e){let n=jT(e);for(const r of t.elements)n=n.filter(i=>!un(i,r));return{arrayValue:{values:n}}}class Ea extends nu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Pg(t){return Pe(t.integerValue||t.doubleValue)}function jT(t){return Kf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n){this.field=e,this.transform=n}}function yN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Rs&&i instanceof Rs||r instanceof Ps&&i instanceof Ps?Gi(r.elements,i.elements,un):r instanceof Ea&&i instanceof Ea?un(r.Ae,i.Ae):r instanceof ws&&i instanceof ws}(t.transform,e.transform)}class _N{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ul(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ru{}function eI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jf(t.key,on.none()):new Os(t.key,t.data,on.none());{const n=t.data,r=Mt.empty();let i=new qe(Je.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Qr(t.key,r,new Ht(i.toArray()),on.none())}}function vN(t,e,n){t instanceof Os?function(i,o,s){const l=i.value.clone(),u=xg(i.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Qr?function(i,o,s){if(!Ul(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=xg(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(tI(i)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Xo(t,e,n,r){return t instanceof Os?function(o,s,l,u){if(!Ul(o.precondition,s))return l;const d=o.value.clone(),h=Mg(o.fieldTransforms,u,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Qr?function(o,s,l,u){if(!Ul(o.precondition,s))return l;const d=Mg(o.fieldTransforms,u,s),h=s.data;return h.setAll(tI(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,l){return Ul(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function EN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=YT(r.transform,i||null);o!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,o))}return n||null}function Ng(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gi(r,i,(o,s)=>yN(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Os extends ru{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qr extends ru{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function tI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xg(t,e,n){const r=new Map;ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,mN(s,l,n[i]))}return r}function Mg(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,pN(o,s,e))}return r}class jf extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TN extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&vN(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=KT();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const u=eI(s,l);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,(n,r)=>Ng(n,r))&&Gi(this.baseMutations,e.baseMutations,(n,r)=>Ng(n,r))}}class eh{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return uN}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new eh(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,oe;function AN(t){switch(t){case B.OK:return Y(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function nI(t){if(t===void 0)return In("GRPC error has no .code"),B.UNKNOWN;switch(t){case Me.OK:return B.OK;case Me.CANCELLED:return B.CANCELLED;case Me.UNKNOWN:return B.UNKNOWN;case Me.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Me.INTERNAL:return B.INTERNAL;case Me.UNAVAILABLE:return B.UNAVAILABLE;case Me.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Me.NOT_FOUND:return B.NOT_FOUND;case Me.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Me.ABORTED:return B.ABORTED;case Me.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Me.DATA_LOSS:return B.DATA_LOSS;default:return Y(39323,{code:t})}}(oe=Me||(Me={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=new nr([4294967295,4294967295],0);function kg(t){const e=wN().encode(t),n=new yT;return n.update(e),new Uint8Array(n.digest())}function Dg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new nr([n,r],0),new nr([i,o],0)]}class th{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fo(`Invalid padding: ${n}`);if(r<0)throw new Fo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=nr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(nr.fromNumber(r)));return i.compare(RN)===1&&(i=new nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=kg(e),[r,i]=Dg(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new th(o,i,n);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.ge===0)return;const n=kg(e),[r,i]=Dg(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Bs.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new iu(Z.min(),i,new Se(re),Cn(),ie())}}class Bs{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Bs(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class rI{constructor(e,n){this.targetId=e,this.Ce=n}}class iI{constructor(e,n,r=Ye.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Vg{constructor(){this.ve=0,this.Fe=Lg(),this.Me=Ye.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ie(),n=ie(),r=ie();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y(38017,{changeType:o})}}),new Bs(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Lg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cn(),this.Je=El(),this.He=El(),this.Ye=new Se(re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(Id(o))if(r===0){const s=new Q(o.path);this.et(n,s,it.newNoDocument(s,Z.min()))}else ue(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const l=this.ut(e),u=l?this.ct(l,e,s):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=ar(r).toUint8Array()}catch(u){if(u instanceof NT)return qi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new th(s,i,o)}catch(u){return qi(u instanceof Fo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,s)=>{const l=this.ot(s);if(l){if(o.current&&Id(l.target)){const u=new Q(l.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,it.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=ie();this.He.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));const i=new iu(e,n,this.Ye,this.je,r);return this.je=Cn(),this.Je=El(),this.He=El(),this.Ye=new Se(re),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Vg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qe(re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qe(re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function El(){return new Se(Q.comparator)}function Lg(){return new Se(Q.comparator)}const NN={asc:"ASCENDING",desc:"DESCENDING"},xN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MN={and:"AND",or:"OR"};class kN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ad(t,e){return t.useProto3Json||Za(e)?e:{value:e}}function Ta(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DN(t,e){return Ta(t,e.toTimestamp())}function sn(t){return ue(!!t,49232),Z.fromTimestamp(function(n){const r=lr(n);return new ye(r.seconds,r.nanos)}(t))}function nh(t,e){return wd(t,e).canonicalString()}function wd(t,e){const n=function(i){return new fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sI(t){const e=fe.fromString(t);return ue(dI(e),10190,{key:e.toString()}),e}function Rd(t,e){return nh(t.databaseId,e.path)}function fc(t,e){const n=sI(e);if(n.get(1)!==t.databaseId.projectId)throw new W(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(aI(n))}function lI(t,e){return nh(t.databaseId,e)}function VN(t){const e=sI(t);return e.length===4?fe.emptyPath():aI(e)}function Pd(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aI(t){return ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Fg(t,e,n){return{name:Rd(t,e),fields:n.value.mapValue.fields}}function LN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(ue(h===void 0||typeof h=="string",58123),Ye.fromBase64String(h||"")):(ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ye.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(d){const h=d.code===void 0?B.UNKNOWN:nI(d.code);return new W(h,d.message||"")}(s);n=new iI(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fc(t,r.document.name),o=sn(r.document.updateTime),s=r.document.createTime?sn(r.document.createTime):Z.min(),l=new Mt({mapValue:{fields:r.document.fields}}),u=it.newFoundDocument(i,o,s,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Ol(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fc(t,r.document),o=r.readTime?sn(r.readTime):Z.min(),s=it.newNoDocument(i,o),l=r.removedTargetIds||[];n=new Ol([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fc(t,r.document),o=r.removedTargetIds||[];n=new Ol([],o,i,null)}else{if(!("filter"in e))return Y(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new SN(i,o),l=r.targetId;n=new rI(l,s)}}return n}function FN(t,e){let n;if(e instanceof Os)n={update:Fg(t,e.key,e.value)};else if(e instanceof jf)n={delete:Rd(t,e.key)};else if(e instanceof Qr)n={update:Fg(t,e.key,e.data),updateMask:$N(e.fieldMask)};else{if(!(e instanceof TN))return Y(16599,{Vt:e.type});n={verify:Rd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof ws)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Rs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ps)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ea)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:DN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Y(27497)}(t,e.precondition)),n}function UN(t,e){return t&&t.length>0?(ue(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?sn(i.updateTime):sn(o);return s.isEqual(Z.min())&&(s=sn(o)),new _N(s,i.transformResults||[])}(n,e))):[]}function ON(t,e){return{documents:[lI(t,e.path)]}}function BN(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lI(t,i);const o=function(d){if(d.length!==0)return cI(Jt.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:oi(m.field),direction:bN(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=Ad(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function qN(t){let e=VN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ue(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const m=uI(p);return m instanceof Jt&&BT(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(w){return new As(si(w.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Za(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,_=p.values||[];return new va(_,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,_=p.values||[];return new va(_,m)}(n.endAt)),iN(e,i,s,o,l,"F",u,d)}function GN(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=si(n.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=si(n.unaryFilter.field);return De.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=si(n.unaryFilter.field);return De.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=si(n.unaryFilter.field);return De.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return De.create(si(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jt.create(n.compositeFilter.filters.map(r=>uI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function bN(t){return NN[t]}function HN(t){return xN[t]}function zN(t){return MN[t]}function oi(t){return{fieldPath:t.canonicalString()}}function si(t){return Je.fromServerFormat(t.fieldPath)}function cI(t){return t instanceof De?function(n){if(n.op==="=="){if(Cg(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NAN"}};if(Ig(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cg(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NAN"}};if(Ig(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oi(n.field),op:HN(n.op),value:n.value}}}(t):t instanceof Jt?function(n){const r=n.getFilters().map(i=>cI(i));return r.length===1?r[0]:{compositeFilter:{op:zN(n.op),filters:r}}}(t):Y(54877,{filter:t})}function $N(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n,r,i,o=Z.min(),s=Z.min(),l=Ye.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.yt=e}}function JN(t){const e=qN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.Cn=new QN}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(sr.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(sr.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class QN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(fe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fI=41943040;class pt{static withCacheSize(e){return new pt(e,pt.DEFAULT_COLLECTION_PERCENTILE,pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pt.DEFAULT_COLLECTION_PERCENTILE=10,pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pt.DEFAULT=new pt(fI,pt.DEFAULT_COLLECTION_PERCENTILE,pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pt.DISABLED=new pt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zi(0)}static cr(){return new zi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="LruGarbageCollector",YN=1048576;function Bg([t,e],[n,r]){const i=re(t,n);return i===0?re(e,r):i}class XN{constructor(e){this.Ir=e,this.buffer=new qe(Bg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Bg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(Og,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zi(n)?J(Og,"Ignoring IndexedDB error during garbage collection: ",n):await Xi(n)}await this.Vr(3e5)})}}class jN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Xa.ce);const r=new XN(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Ug)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ug):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ri()<=se.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}function ex(t,e){return new jN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.changes=new Kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Xo(r.mutation,i,Ht.empty(),ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const i=Nr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Lo();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Nr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=Cn();const s=Yo(),l=function(){return Yo()}();return n.forEach((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Qr)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),Xo(h.mutation,d,h.mutation.getFieldMask(),ye.now())):s.set(d.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,h)=>s.set(d,h)),n.forEach((d,h)=>l.set(d,new nx(h,s.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Yo();let i=new Se((s,l)=>s-l),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||Ht.empty();h=l.applyToLocalView(d,h),r.set(u,h);const p=(i.get(l.batchId)||ie()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,p=KT();h.forEach(m=>{if(!o.has(m)){const _=eI(n.get(m),r.get(m));_!==null&&p.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,p))}return q.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):q.resolve(Nr());let l=Ts,u=o;return s.next(d=>q.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),o.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,ie())).next(h=>({batchId:l,changes:JT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=Lo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Lo();return this.indexManager.getCollectionParents(e,o).next(l=>q.forEach(l,u=>{const d=function(p,m){return new ji(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,d)=>{const h=d.getKey();s.get(h)===null&&(s=s.insert(h,it.newInvalidDocument(h)))});let l=Lo();return s.forEach((u,d)=>{const h=o.get(u);h!==void 0&&Xo(h.mutation,d,Ht.empty(),ye.now()),tu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:sn(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:JN(i.bundledQuery),readTime:sn(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.overlays=new Se(Q.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Nr();return q.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=Nr(),o=n.length+1,s=new Q(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Se((d,h)=>d-h);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=Nr(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Nr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return q.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new CN(n,r));let o=this.qr.get(n);o===void 0&&(o=ie(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this.Qr=new qe(be.$r),this.Ur=new qe(be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new be(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new be(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Q(new fe([])),r=new be(n,e),i=new be(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Q(new fe([])),r=new be(n,e),i=new be(n,e+1);let o=ie();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new be(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class be{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Q.comparator(e.key,n.key)||re(e.Yr,n.Yr)}static Kr(e,n){return re(e.Yr,n.Yr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qe(be.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new IN(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.Zr=this.Zr.add(new be(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return q.resolve(s)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Wf:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new be(n,0),i=new be(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{const l=this.Xr(s.Yr);o.push(l)}),q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(re);return n.forEach(i=>{const o=new be(i,0),s=new be(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],l=>{r=r.add(l.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Q.isDocumentKey(o)||(o=o.child(""));const s=new be(new Q(o),0);let l=new qe(re);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.Yr)),!0)},s),q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,i=>{const o=new be(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new be(n,0),i=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.ri=e,this.docs=function(){return new Se(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():it.newInvalidDocument(n))}getEntries(e,n){let r=Cn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():it.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Cn();const s=n.path,l=new Q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||FP(LP(h),r)<=0||(i.has(h.key)||tu(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return q.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Y(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ux(this)}getSize(e){return q.resolve(this.size)}}class ux extends tx{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.persistence=e,this.si=new Kr(n=>Qf(n),Yf),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new rh,this.targetCount=0,this.ai=zi.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new zi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),q.waitFor(o).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.ui={},this.overlays={},this.ci=new Xa(0),this.li=!1,this.li=!0,this.hi=new sx,this.referenceDelegate=e(this),this.Pi=new cx(this),this.indexManager=new KN,this.remoteDocumentCache=function(i){return new ax(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new WN(n),this.Ii=new ix(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ox,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new lx(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new dx(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class dx extends OP{constructor(e){super(),this.currentSequenceNumber=e}}class ih{constructor(e){this.persistence=e,this.Ri=new rh,this.Vi=null}static mi(e){return new ih(e)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const i=Q.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,Z.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ia{constructor(e,n){this.persistence=e,this.pi=new Kr(r=>GP(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=ex(this,n)}static mi(e,n){return new Ia(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?q.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(l=>{l||(r++,o.removeEntry(s,Z.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ll(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ie(),i=ie();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new oh(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return rR()?8:BP(tR())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new fx;return this.Ss(e,n,s).next(l=>{if(o.result=l,this.Vs)return this.bs(e,n,s,l.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ri()<=se.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",ii(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(ri()<=se.DEBUG&&J("QueryEngine","Query:",ii(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ri()<=se.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",ii(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rn(n))):q.resolve())}ys(e,n){if(Rg(n))return q.resolve(null);let r=rn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sd(n,null,"F"),r=rn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ie(...o);return this.ps.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,l);return this.Cs(n,d,s,u.readTime)?this.ys(e,Sd(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,i){return Rg(n)||i.isEqual(Z.min())?q.resolve(null):this.ps.getDocuments(e,r).next(o=>{const s=this.Ds(n,o);return this.Cs(n,s,r,i)?q.resolve(null):(ri()<=se.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ii(n)),this.vs(e,s,n,VP(i,Ts)).next(l=>l))})}Ds(e,n){let r=new qe($T(e));return n.forEach((i,o)=>{tu(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return ri()<=se.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",ii(n)),this.ps.getDocumentsMatchingQuery(e,n,sr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="LocalStore",px=3e8;class mx{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Se(re),this.xs=new Kr(o=>Qf(o),Yf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function gx(t,e,n,r){return new mx(t,e,n,r)}async function pI(t,e){const n=j(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let u=ie();for(const d of i){s.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of o){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:s,addedBatchIds:l}))})})}function yx(t,e){const n=j(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const p=d.batch,m=p.keys();let _=q.resolve();return m.forEach(w=>{_=_.next(()=>h.getEntry(u,w)).next(x=>{const k=d.docVersions.get(w);ue(k!==null,48541),x.version.compareTo(k)<0&&(p.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),h.addEntry(x)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function mI(t){const e=j(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function _x(t,e){const n=j(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,p)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Ye.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(x,k,I){return x.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=px?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(m,_,h)&&l.push(n.Pi.updateTargetData(o,_))});let u=Cn(),d=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(vx(o,s,e.documentUpdates).next(h=>{u=h.ks,d=h.qs})),!r.isEqual(Z.min())){const h=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(h)}return q.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(n.Ms=i,o))}function vx(t,e,n){let r=ie(),i=ie();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Cn();return n.forEach((l,u)=>{const d=o.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):J(sh,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{ks:s,qs:i}})}function Ex(t,e){const n=j(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Wf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tx(t,e){const n=j(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,q.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Hn(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Nd(t,e,n){const r=j(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Zi(s))throw s;J(sh,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function qg(t,e,n){const r=j(t);let i=Z.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,d,h){const p=j(u),m=p.xs.get(h);return m!==void 0?q.resolve(p.Ms.get(m)):p.Pi.getTargetData(d,h)}(r,s,rn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Z.min(),n?o:ie())).next(l=>(Ix(r,sN(e),l),{documents:l,Qs:o})))}function Ix(t,e,n){let r=t.Os.get(e)||Z.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class Gg{constructor(){this.activeTargetIds=fN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cx{constructor(){this.Mo=new Gg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Gg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="ConnectivityMonitor";class Hg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(bg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(bg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl=null;function xd(){return Tl===null?Tl=function(){return 268435456+Math.round(2147483648*Math.random())}():Tl++,"0x"+Tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc="RestConnection",Ax={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wx{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ya?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const s=xd(),l=this.zo(e,n.toUriEncodedString());J(hc,`Sending RPC '${e}' ${s}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);const{host:d}=new URL(l),h=bf(d);return this.Jo(e,l,u,r,h).then(p=>(J(hc,`Received RPC '${e}' ${s}: `,p),p),p=>{throw qi(hc,`RPC '${e}' ${s} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){const r=Ax[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et="WebChannelConnection";class Px extends wx{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=xd();return new Promise((l,u)=>{const d=new _T;d.setWithCredentials(!0),d.listenOnce(vT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Vl.NO_ERROR:const p=d.getResponseJson();J(et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),l(p);break;case Vl.TIMEOUT:J(et,`RPC '${e}' ${s} timed out`),u(new W(B.DEADLINE_EXCEEDED,"Request time out"));break;case Vl.HTTP_ERROR:const m=d.getStatus();if(J(et,`RPC '${e}' ${s} failed with status:`,m,"response text:",d.getResponseText()),m>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const w=_==null?void 0:_.error;if(w&&w.status&&w.message){const x=function(I){const E=I.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(E)>=0?E:B.UNKNOWN}(w.status);u(new W(x,w.message))}else u(new W(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new W(B.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{J(et,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);J(et,`RPC '${e}' ${s} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){const i=xd(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=IT(),l=TT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=o.join("");J(et,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=s.createWebChannel(h,u);this.I_(p);let m=!1,_=!1;const w=new Rx({Yo:k=>{_?J(et,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(m||(J(et,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),J(et,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},Zo:()=>p.close()}),x=(k,I,E)=>{k.listen(I,C=>{try{E(C)}catch(V){setTimeout(()=>{throw V},0)}})};return x(p,Vo.EventType.OPEN,()=>{_||(J(et,`RPC '${e}' stream ${i} transport opened.`),w.o_())}),x(p,Vo.EventType.CLOSE,()=>{_||(_=!0,J(et,`RPC '${e}' stream ${i} transport closed`),w.a_(),this.E_(p))}),x(p,Vo.EventType.ERROR,k=>{_||(_=!0,qi(et,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),w.a_(new W(B.UNAVAILABLE,"The operation could not be completed")))}),x(p,Vo.EventType.MESSAGE,k=>{var I;if(!_){const E=k.data[0];ue(!!E,16349);const C=E,V=(C==null?void 0:C.error)||((I=C[0])==null?void 0:I.error);if(V){J(et,`RPC '${e}' stream ${i} received error:`,V);const U=V.status;let O=function(S){const R=Me[S];if(R!==void 0)return nI(R)}(U),A=V.message;O===void 0&&(O=B.INTERNAL,A="Unknown error status: "+U+" with message "+V.message),_=!0,w.a_(new W(O,A)),p.close()}else J(et,`RPC '${e}' stream ${i} received:`,E),w.u_(E)}}),x(l,ET.STAT_EVENT,k=>{k.stat===yd.PROXY?J(et,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===yd.NOPROXY&&J(et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function pc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t){return new kN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="PersistentStream";class yI{constructor(e,n,r,i,o,s,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(In(n.toString()),In("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new W(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(zg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(zg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Nx extends yI{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=LN(this.serializer,e),r=function(o){if(!("targetChange"in o))return Z.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?sn(s.readTime):Z.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Pd(this.serializer),n.addTarget=function(o,s){let l;const u=s.target;if(l=Id(u)?{documents:ON(o,u)}:{query:BN(o,u).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=oI(o,s.resumeToken);const d=Ad(o,s.expectedCount);d!==null&&(l.expectedCount=d)}else if(s.snapshotVersion.compareTo(Z.min())>0){l.readTime=Ta(o,s.snapshotVersion.toTimestamp());const d=Ad(o,s.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=GN(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Pd(this.serializer),n.removeTarget=e,this.q_(n)}}class xx extends yI{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=UN(e.writeResults,e.commitTime),r=sn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Pd(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>FN(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{}class kx extends Mx{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new W(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,wd(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(B.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Ho(e,wd(n,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(B.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Dx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(In(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="RemoteStore";class Vx{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Yr(this)&&(J(Gr,"Restarting streams for network reachability change."),await async function(u){const d=j(u);d.Ea.add(4),await qs(d),d.Ra.set("Unknown"),d.Ea.delete(4),await su(d)}(this))})}),this.Ra=new Dx(r,i)}}async function su(t){if(Yr(t))for(const e of t.da)await e(!0)}async function qs(t){for(const e of t.da)await e(!1)}function _I(t,e){const n=j(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ch(n)?uh(n):eo(n).O_()&&ah(n,e))}function lh(t,e){const n=j(t),r=eo(n);n.Ia.delete(e),r.O_()&&vI(n,e),n.Ia.size===0&&(r.O_()?r.L_():Yr(n)&&n.Ra.set("Unknown"))}function ah(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}eo(t).Y_(e)}function vI(t,e){t.Va.Ue(e),eo(t).Z_(e)}function uh(t){t.Va=new PN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),eo(t).start(),t.Ra.ua()}function ch(t){return Yr(t)&&!eo(t).x_()&&t.Ia.size>0}function Yr(t){return j(t).Ea.size===0}function EI(t){t.Va=void 0}async function Lx(t){t.Ra.set("Online")}async function Fx(t){t.Ia.forEach((e,n)=>{ah(t,e)})}async function Ux(t,e){EI(t),ch(t)?(t.Ra.ha(e),uh(t)):t.Ra.set("Unknown")}async function Ox(t,e,n){if(t.Ra.set("Online"),e instanceof iI&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){J(Gr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ca(t,r)}else if(e instanceof Ol?t.Va.Ze(e):e instanceof rI?t.Va.st(e):t.Va.tt(e),!n.isEqual(Z.min()))try{const r=await mI(t.localStore);n.compareTo(r)>=0&&await function(o,s){const l=o.Va.Tt(s);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.Ia.get(d);h&&o.Ia.set(d,h.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,d)=>{const h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(Ye.EMPTY_BYTE_STRING,h.snapshotVersion)),vI(o,u);const p=new Hn(h.target,u,d,h.sequenceNumber);ah(o,p)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){J(Gr,"Failed to raise snapshot:",r),await Ca(t,r)}}async function Ca(t,e,n){if(!Zi(e))throw e;t.Ea.add(1),await qs(t),t.Ra.set("Offline"),n||(n=()=>mI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(Gr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await su(t)})}function TI(t,e){return e().catch(n=>Ca(t,n,e))}async function lu(t){const e=j(t),n=cr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wf;for(;Bx(e);)try{const i=await Ex(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,qx(e,i)}catch(i){await Ca(e,i)}II(e)&&CI(e)}function Bx(t){return Yr(t)&&t.Ta.length<10}function qx(t,e){t.Ta.push(e);const n=cr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function II(t){return Yr(t)&&!cr(t).x_()&&t.Ta.length>0}function CI(t){cr(t).start()}async function Gx(t){cr(t).ra()}async function bx(t){const e=cr(t);for(const n of t.Ta)e.ea(n.mutations)}async function Hx(t,e,n){const r=t.Ta.shift(),i=eh.from(r,e,n);await TI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await lu(t)}async function zx(t,e){e&&cr(t).X_&&await async function(r,i){if(function(s){return AN(s)&&s!==B.ABORTED}(i.code)){const o=r.Ta.shift();cr(r).B_(),await TI(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await lu(r)}}(t,e),II(t)&&CI(t)}async function $g(t,e){const n=j(t);n.asyncQueue.verifyOperationInProgress(),J(Gr,"RemoteStore received new credentials");const r=Yr(n);n.Ea.add(3),await qs(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await su(n)}async function $x(t,e){const n=j(t);e?(n.Ea.delete(2),await su(n)):e||(n.Ea.add(2),await qs(n),n.Ra.set("Unknown"))}function eo(t){return t.ma||(t.ma=function(n,r,i){const o=j(n);return o.sa(),new Nx(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:Lx.bind(null,t),t_:Fx.bind(null,t),r_:Ux.bind(null,t),H_:Ox.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ch(t)?uh(t):t.Ra.set("Unknown")):(await t.ma.stop(),EI(t))})),t.ma}function cr(t){return t.fa||(t.fa=function(n,r,i){const o=j(n);return o.sa(),new xx(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Gx.bind(null,t),r_:zx.bind(null,t),ta:bx.bind(null,t),na:Hx.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await lu(t)):(await t.fa.stop(),t.Ta.length>0&&(J(Gr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new dh(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fh(t,e){if(In("AsyncQueue",`${e}: ${t}`),Zi(t))return new W(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{static emptySet(e){return new Pi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Lo(),this.sortedSet=new Se(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(){this.ga=new Se(Q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Y(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $i{constructor(e,n,r,i,o,s,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new $i(e,n,Pi.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Jx{constructor(){this.queries=Jg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=j(n),o=i.queries;i.queries=Jg(),o.forEach((s,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new W(B.ABORTED,"Firestore shutting down"))}}function Jg(){return new Kr(t=>zT(t),eu)}async function Kx(t,e){const n=j(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Wx,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=fh(s,`Initialization of query '${ii(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&hh(n)}async function Qx(t,e){const n=j(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Yx(t,e){const n=j(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.Sa)l.Fa(i)&&(r=!0);s.wa=i}}r&&hh(n)}function Xx(t,e,n){const r=j(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function hh(t){t.Ca.forEach(e=>{e.next()})}var Md,Kg;(Kg=Md||(Md={})).Ma="default",Kg.Cache="cache";class Zx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Md.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.key=e}}class AI{constructor(e){this.key=e}}class jx{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ie(),this.mutatedKeys=ie(),this.eu=$T(e),this.tu=new Pi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Wg,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),_=tu(this.query,p)?p:null,w=!!m&&this.mutatedKeys.has(m.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let k=!1;m&&_?m.data.isEqual(_.data)?w!==x&&(r.track({type:3,doc:_}),k=!0):this.su(m,_)||(r.track({type:2,doc:_}),k=!0,(u&&this.eu(_,u)>0||d&&this.eu(_,d)<0)&&(l=!0)):!m&&_?(r.track({type:0,doc:_}),k=!0):m&&!_&&(r.track({type:1,doc:m}),k=!0,(u||d)&&(l=!0)),k&&(_?(s=s.add(_),o=x?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:l,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((h,p)=>function(_,w){const x=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:k})}};return x(_)-x(w)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,s.length!==0||d?{snapshot:new $i(this.query,e.tu,o,s,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new AI(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new SI(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $i.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ph="SyncEngine";class e1{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class t1{constructor(e){this.key=e,this.hu=!1}}class n1{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Kr(l=>zT(l),eu),this.Iu=new Map,this.Eu=new Set,this.du=new Se(Q.comparator),this.Au=new Map,this.Ru=new rh,this.Vu={},this.mu=new Map,this.fu=zi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function r1(t,e,n=!0){const r=MI(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await wI(r,e,n,!0),i}async function i1(t,e){const n=MI(t);await wI(n,e,!0,!1)}async function wI(t,e,n,r){const i=await Tx(t.localStore,rn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await o1(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&_I(t.remoteStore,i),l}async function o1(t,e,n,r,i){t.pu=(p,m,_)=>async function(x,k,I,E){let C=k.view.ru(I);C.Cs&&(C=await qg(x.localStore,k.query,!1).then(({documents:A})=>k.view.ru(A,C)));const V=E&&E.targetChanges.get(k.targetId),U=E&&E.targetMismatches.get(k.targetId)!=null,O=k.view.applyChanges(C,x.isPrimaryClient,V,U);return Yg(x,k.targetId,O.au),O.snapshot}(t,p,m,_);const o=await qg(t.localStore,e,!0),s=new jx(e,o.Qs),l=s.ru(o.documents),u=Bs.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(l,t.isPrimaryClient,u);Yg(t,n,d.au);const h=new e1(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function s1(t,e,n){const r=j(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!eu(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Nd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&lh(r.remoteStore,i.targetId),kd(r,i.targetId)}).catch(Xi)):(kd(r,i.targetId),await Nd(r.localStore,i.targetId,!0))}async function l1(t,e){const n=j(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lh(n.remoteStore,r.targetId))}async function a1(t,e,n){const r=m1(t);try{const i=await function(s,l){const u=j(s),d=ye.now(),h=l.reduce((_,w)=>_.add(w.key),ie());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let w=Cn(),x=ie();return u.Ns.getEntries(_,h).next(k=>{w=k,w.forEach((I,E)=>{E.isValidDocument()||(x=x.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,w)).next(k=>{p=k;const I=[];for(const E of l){const C=EN(E,p.get(E.key).overlayedDocument);C!=null&&I.push(new Qr(E.key,C,FT(C.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,I,l)}).next(k=>{m=k;const I=k.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(_,k.batchId,I)})}).then(()=>({batchId:m.batchId,changes:JT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,u){let d=s.Vu[s.currentUser.toKey()];d||(d=new Se(re)),d=d.insert(l,u),s.Vu[s.currentUser.toKey()]=d}(r,i.batchId,n),await Gs(r,i.changes),await lu(r.remoteStore)}catch(i){const o=fh(i,"Failed to persist write");n.reject(o)}}async function RI(t,e){const n=j(t);try{const r=await _x(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Au.get(o);s&&(ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ue(s.hu,14607):i.removedDocuments.size>0&&(ue(s.hu,42227),s.hu=!1))}),await Gs(n,r,e)}catch(r){await Xi(r)}}function Qg(t,e,n){const r=j(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,s)=>{const l=s.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const u=j(s);u.onlineState=l;let d=!1;u.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(l)&&(d=!0)}),d&&hh(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function u1(t,e,n){const r=j(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Se(Q.comparator);s=s.insert(o,it.newNoDocument(o,Z.min()));const l=ie().add(o),u=new iu(Z.min(),new Map,new Se(re),s,l);await RI(r,u),r.du=r.du.remove(o),r.Au.delete(e),mh(r)}else await Nd(r.localStore,e,!1).then(()=>kd(r,e,n)).catch(Xi)}async function c1(t,e){const n=j(t),r=e.batch.batchId;try{const i=await yx(n.localStore,e);NI(n,r,null),PI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gs(n,i)}catch(i){await Xi(i)}}async function d1(t,e,n){const r=j(t);try{const i=await function(s,l){const u=j(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(ue(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);NI(r,e,n),PI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gs(r,i)}catch(i){await Xi(i)}}function PI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function NI(t,e,n){const r=j(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function kd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||xI(t,r)})}function xI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(lh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),mh(t))}function Yg(t,e,n){for(const r of n)r instanceof SI?(t.Ru.addReference(r.key,e),f1(t,r)):r instanceof AI?(J(ph,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||xI(t,r.key)):Y(19791,{wu:r})}function f1(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(J(ph,"New document in limbo: "+n),t.Eu.add(r),mh(t))}function mh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Q(fe.fromString(e)),r=t.fu.next();t.Au.set(r,new t1(n)),t.du=t.du.insert(n,r),_I(t.remoteStore,new Hn(rn(Xf(n.path)),r,"TargetPurposeLimboResolution",Xa.ce))}}async function Gs(t,e,n){const r=j(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{s.push(r.pu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){i.push(d);const p=oh.As(u.targetId,d);o.push(p)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(u,d){const h=j(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>q.forEach(d,m=>q.forEach(m.Es,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>q.forEach(m.ds,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!Zi(p))throw p;J(sh,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const _=h.Ms.get(m),w=_.snapshotVersion,x=_.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(m,x)}}}(r.localStore,o))}async function h1(t,e){const n=j(t);if(!n.currentUser.isEqual(e)){J(ph,"User change. New user:",e.toKey());const r=await pI(n.localStore,e);n.currentUser=e,function(o,s){o.mu.forEach(l=>{l.forEach(u=>{u.reject(new W(B.CANCELLED,s))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gs(n,r.Ls)}}function p1(t,e){const n=j(t),r=n.Au.get(e);if(r&&r.hu)return ie().add(r.key);{let i=ie();const o=n.Iu.get(e);if(!o)return i;for(const s of o){const l=n.Tu.get(s);i=i.unionWith(l.view.nu)}return i}}function MI(t){const e=j(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u1.bind(null,e),e.Pu.H_=Yx.bind(null,e.eventManager),e.Pu.yu=Xx.bind(null,e.eventManager),e}function m1(t){const e=j(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d1.bind(null,e),e}class Sa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ou(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return gx(this.persistence,new hx,e.initialUser,this.serializer)}Cu(e){return new hI(ih.mi,this.serializer)}Du(e){return new Cx}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sa.provider={build:()=>new Sa};class g1 extends Sa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ue(this.persistence.referenceDelegate instanceof Ia,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?pt.withCacheSize(this.cacheSizeBytes):pt.DEFAULT;return new hI(r=>Ia.mi(r,n),this.serializer)}}class Dd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=h1.bind(null,this.syncEngine),await $x(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Jx}()}createDatastore(e){const n=ou(e.databaseInfo.databaseId),r=function(o){return new Px(o)}(e.databaseInfo);return function(o,s,l,u){return new kx(o,s,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new Vx(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Qg(this.syncEngine,n,0),function(){return Hg.v()?new Hg:new Sx}())}createSyncEngine(e,n){return function(i,o,s,l,u,d,h){const p=new n1(i,o,s,l,u,d);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=j(i);J(Gr,"RemoteStore shutting down."),o.Ea.add(5),await qs(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Dd.provider={build:()=>new Dd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):In("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="FirestoreClient";class _1{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=tt.UNAUTHENTICATED,this.clientId=$f.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{J(dr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(J(dr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function mc(t,e){t.asyncQueue.verifyOperationInProgress(),J(dr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await v1(t);J(dr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$g(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>$g(e.remoteStore,i)),t._onlineComponents=e}async function v1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(dr,"Using user provided OfflineComponentProvider");try{await mc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;qi("Error using user provided cache. Falling back to memory cache: "+n),await mc(t,new Sa)}}else J(dr,"Using default OfflineComponentProvider"),await mc(t,new g1(void 0));return t._offlineComponents}async function kI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(dr,"Using user provided OnlineComponentProvider"),await Xg(t,t._uninitializedComponentsProvider._online)):(J(dr,"Using default OnlineComponentProvider"),await Xg(t,new Dd))),t._onlineComponents}function E1(t){return kI(t).then(e=>e.syncEngine)}async function Zg(t){const e=await kI(t),n=e.eventManager;return n.onListen=r1.bind(null,e.syncEngine),n.onUnlisten=s1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=i1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=l1.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="firestore.googleapis.com",ey=!0;class ty{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VI,this.ssl=ey}else this.host=e.host,this.ssl=e.ssl??ey;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YN)throw new W(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class au{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ty({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ty(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new CP;switch(r.type){case"firstParty":return new RP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jg.get(n);r&&(J("ComponentProvider","Removing Datastore"),jg.delete(n),r.terminate())}(this),Promise.resolve()}}function T1(t,e,n,r={}){var d;t=Ri(t,au);const i=bf(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(Y0(`https://${l}`),eR("Firestore",!0)),o.host!==VI&&o.host!==l&&qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:l,ssl:i,emulatorOptions:r};if(!pa(u,s)&&(t._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=tt.MOCK_USER;else{h=X0(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new W(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new tt(m)}t._authCredentials=new SP(new ST(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xr(this.firestore,e,this._query)}}class Be{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Be(this.firestore,e,this._key)}toJSON(){return{type:Be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Us(n,Be._jsonSchema))return new Be(e,r||null,new Q(fe.fromString(n.referencePath)))}}Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:Ve("string",Be._jsonSchemaVersion),referencePath:Ve("string")};class rr extends Xr{constructor(e,n,r){super(e,n,Xf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new Q(e))}withConverter(e){return new rr(this.firestore,e,this._path)}}function Aa(t,e,...n){if(t=Br(t),AT("collection","path",e),t instanceof au){const r=fe.fromString(e,...n);return hg(r),new rr(t,null,r)}{if(!(t instanceof Be||t instanceof rr))throw new W(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return hg(r),new rr(t.firestore,null,r)}}function LI(t,e,...n){if(t=Br(t),arguments.length===1&&(e=$f.newId()),AT("doc","path",e),t instanceof au){const r=fe.fromString(e,...n);return fg(r),new Be(t,null,new Q(r))}{if(!(t instanceof Be||t instanceof rr))throw new W(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return fg(r),new Be(t.firestore,t instanceof rr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="AsyncQueue";class ry{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gI(this,"async_queue_retry"),this._c=()=>{const r=pc();r&&J(ny,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=pc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=pc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new kr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zi(e))throw e;J(ny,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,In("INTERNAL UNHANDLED ERROR: ",iy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=dh.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Y(47125,{Pc:iy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function iy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Ns extends au{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ry,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ry(e),this._firestoreClient=void 0,await e}}}function I1(t,e){const n=typeof t=="object"?t:pT(),r=typeof t=="string"?t:ya,i=oP(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=K0("firestore");o&&T1(i,...o)}return i}function FI(t){if(t._terminated)throw new W(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||C1(t),t._firestoreClient}function C1(t){var r,i,o;const e=t._freezeSettings(),n=function(l,u,d,h){return new zP(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,DI(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new _1(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kt(Ye.fromBase64String(e))}catch(n){throw new W(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kt(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Us(e,kt._jsonSchema))return kt.fromBase64String(e.bytes)}}kt._jsonSchemaVersion="firestore/bytes/1.0",kt._jsonSchema={type:Ve("string",kt._jsonSchemaVersion),bytes:Ve("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ln._jsonSchemaVersion}}static fromJSON(e){if(Us(e,ln._jsonSchema))return new ln(e.latitude,e.longitude)}}ln._jsonSchemaVersion="firestore/geoPoint/1.0",ln._jsonSchema={type:Ve("string",ln._jsonSchemaVersion),latitude:Ve("number"),longitude:Ve("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:an._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Us(e,an._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new an(e.vectorValues);throw new W(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}an._jsonSchemaVersion="firestore/vectorValue/1.0",an._jsonSchema={type:Ve("string",an._jsonSchemaVersion),vectorValues:Ve("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=/^__.*__$/;class A1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Os(e,this.data,n,this.fieldTransforms)}}function UI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:t})}}class _h{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _h({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(UI(this.Ac)&&S1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class w1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ou(e)}Cc(e,n,r,i=!1){return new _h({Ac:e,methodName:n,Dc:r,path:Je.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function OI(t){const e=t._freezeSettings(),n=ou(t._databaseId);return new w1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function R1(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);GI("Data must be an object, but it was:",s,r);const l=BI(r,s);let u,d;if(o.merge)u=new Ht(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const m=N1(e,p,n);if(!s.contains(m))throw new W(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);M1(h,m)||h.push(m)}u=new Ht(h),d=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=s.fieldTransforms;return new A1(new Mt(l),u,d)}class vh extends yh{_toFieldTransform(e){return new gN(e.path,new ws)}isEqual(e){return e instanceof vh}}function P1(t,e,n,r=!1){return Eh(n,t.Cc(r?4:3,e))}function Eh(t,e){if(qI(t=Br(t)))return GI("Unsupported field value:",e,t),BI(t,e);if(t instanceof yh)return function(r,i){if(!UI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let u=Eh(l,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Br(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ye.fromDate(r);return{timestampValue:Ta(i.serializer,o)}}if(r instanceof ye){const o=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ta(i.serializer,o)}}if(r instanceof ln)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kt)return{bytesValue:oI(i.serializer,r._byteString)};if(r instanceof Be){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof an)return function(s,l){return{mapValue:{fields:{[VT]:{stringValue:LT},[_a]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Zf(l.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Ya(r)}`)}(t,e)}function BI(t,e){const n={};return PT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(t,(r,i)=>{const o=Eh(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function qI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ye||t instanceof ln||t instanceof kt||t instanceof Be||t instanceof yh||t instanceof an)}function GI(t,e,n){if(!qI(n)||!wT(n)){const r=Ya(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function N1(t,e,n){if((e=Br(e))instanceof gh)return e._internalPath;if(typeof e=="string")return bI(t,e);throw wa("Field path arguments must be of type string or ",t,!1,void 0,n)}const x1=new RegExp("[~\\*/\\[\\]]");function bI(t,e,n){if(e.search(x1)>=0)throw wa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gh(...e.split("."))._internalPath}catch{throw wa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wa(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new W(B.INVALID_ARGUMENT,l+t+u)}function M1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Th("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class k1 extends HI{data(){return super.data()}}function Th(t,e){return typeof e=="string"?bI(t,e):e instanceof gh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ih{}class zI extends Ih{}function $I(t,e,...n){let r=[];e instanceof Ih&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof Sh).length,l=o.filter(u=>u instanceof Ch).length;if(s>1||s>0&&l>0)throw new W(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ch extends zI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ch(e,n,r)}_apply(e){const n=this._parse(e);return JI(e._query,n),new Xr(e.firestore,e.converter,Cd(e._query,n))}_parse(e){const n=OI(e.firestore);return function(o,s,l,u,d,h,p){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ly(p,h);const w=[];for(const x of p)w.push(sy(u,o,x));m={arrayValue:{values:w}}}else m=sy(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ly(p,h),m=P1(l,s,p,h==="in"||h==="not-in");return De.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Sh extends Ih{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Jt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const l=o.getFlattenedFilters();for(const u of l)JI(s,u),s=Cd(s,u)}(e._query,n),new Xr(e.firestore,e.converter,Cd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ah extends zI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ah(e,n)}_apply(e){const n=function(i,o,s){if(i.startAt!==null)throw new W(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new W(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new As(o,s)}(e._query,this._field,this._direction);return new Xr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new ji(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function WI(t,e="asc"){const n=e,r=Th("orderBy",t);return Ah._create(r,n)}function sy(t,e,n){if(typeof(n=Br(n))=="string"){if(n==="")throw new W(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HT(e)&&n.indexOf("/")!==-1)throw new W(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fe.fromString(n));if(!Q.isDocumentKey(r))throw new W(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tg(t,new Q(r))}if(n instanceof Be)return Tg(t,n._key);throw new W(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ya(n)}.`)}function ly(t,e){if(!Array.isArray(t)||t.length===0)throw new W(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JI(t,e){const n=function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class V1{convertValue(e,n="none"){switch(ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ar(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[_a].arrayValue)==null?void 0:i.values)==null?void 0:o.map(s=>Pe(s.doubleValue));return new an(n)}convertGeoPoint(e){return new ln(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ja(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Is(e));default:return null}}convertTimestamp(e){const n=lr(e);return new ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fe.fromString(e);ue(dI(r),9688,{name:e});const i=new Cs(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(n)||In(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Uo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dr extends HI{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Th("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Dr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Dr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dr._jsonSchema={type:Ve("string",Dr._jsonSchemaVersion),bundleSource:Ve("string","DocumentSnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class Bl extends Dr{data(e={}){return super.data(e)}}class Ni{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Uo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bl(this._firestore,this._userDataWriter,r.key,r,new Uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const u=new Bl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Uo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Bl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Uo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),h=s.indexOf(l.doc.key)),{type:F1(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ni._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$f.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function F1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}Ni._jsonSchemaVersion="firestore/querySnapshot/1.0",Ni._jsonSchema={type:Ve("string",Ni._jsonSchemaVersion),bundleSource:Ve("string","QuerySnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class KI extends V1{constructor(e){super(),this.firestore=e}convertBytes(e){return new kt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}function U1(t){return XI(Ri(t.firestore,Ns),[new jf(t._key,on.none())])}function QI(t,e){const n=Ri(t.firestore,Ns),r=LI(t),i=L1(t.converter,e);return XI(n,[R1(OI(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function YI(t,...e){var u,d,h;t=Br(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||oy(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(oy(e[r])){const p=e[r];e[r]=(u=p.next)==null?void 0:u.bind(p),e[r+1]=(d=p.error)==null?void 0:d.bind(p),e[r+2]=(h=p.complete)==null?void 0:h.bind(p)}let o,s,l;if(t instanceof Be)s=Ri(t.firestore,Ns),l=Xf(t._key.path),o={next:p=>{e[r]&&e[r](O1(s,t,p))},error:e[r+1],complete:e[r+2]};else{const p=Ri(t,Xr);s=Ri(p.firestore,Ns),l=p._query;const m=new KI(s);o={next:_=>{e[r]&&e[r](new Ni(s,m,p,_))},error:e[r+1],complete:e[r+2]},D1(t._query)}return function(m,_,w,x){const k=new y1(x),I=new Zx(_,k,w);return m.asyncQueue.enqueueAndForget(async()=>Kx(await Zg(m),I)),()=>{k.Nu(),m.asyncQueue.enqueueAndForget(async()=>Qx(await Zg(m),I))}}(FI(s),l,i,o)}function XI(t,e){return function(r,i){const o=new kr;return r.asyncQueue.enqueueAndForget(async()=>a1(await E1(r),i,o)),o.promise}(FI(t),e)}function O1(t,e,n){const r=n.docs.get(e._key),i=new KI(t);return new Dr(t,i,e._key,r,new Uo(n.hasPendingWrites,n.fromCache),e.converter)}function ZI(){return new vh("serverTimestamp")}(function(e,n=!0){(function(i){Yi=i})(uP),ma(new _s("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new Ns(new AP(r.getProvider("auth-internal")),new PP(s,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cs(d.options.projectId,h)}(s,i),s);return o={useFetchStreams:n,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),wi(ag,ug,e),wi(ag,ug,"esm2020")})();const B1={apiKey:"AIzaSyDK5-evOKoAevaFDMjsoZ2lqJI6hkkDZHg",authDomain:"myportfolio-8dae6.firebaseapp.com",projectId:"myportfolio-8dae6",storageBucket:"myportfolio-8dae6.firebasestorage.app",messagingSenderId:"301685183802",appId:"1:301685183802:web:0337b0a7baa10267f5ec03"},q1=cP().length?pT():hT(B1),xs=I1(q1);function G1(){const[t,e]=b.useState([]),[n,r]=b.useState(!1),[i,o]=b.useState(""),[s,l]=b.useState(!1),[u,d]=b.useState(""),[h,p]=b.useState({name:"",role:"",text:""}),m=[{id:"js-es6",name:"Modern JavaScript (ES6+)"},{id:"react-ctx",name:"React & Redux/Context API"},{id:"html-css",name:"Responsive HTML & CSS (Sass, Tailwind)"},{id:"git-hub",name:"Git & GitHub Version Control"}];b.useEffect(()=>{const I=$I(Aa(xs,"reviews"),WI("timestamp","desc")),E=YI(I,C=>{const V=C.docs.map(U=>({id:U.id,...U.data()}));e(V)},C=>{console.error("Error fetching reviews:",C)});return()=>E()},[]);const _=()=>{i==="PANKAJ-CLIENT"?(l(!0),d("")):d(" Invalid Access Code. Please contact Pankaj for a code.")},w=async I=>{if(I.preventDefault(),!(!h.name||!h.text))try{await QI(Aa(xs,"reviews"),{name:h.name,role:h.role||"Client",text:h.text,timestamp:ZI()}),p({name:"",role:"",text:""}),r(!1),l(!1),o(""),alert("Thank you! Your review has been added.")}catch(E){console.error("Error adding review: ",E),alert("Error submitting review. Please try again.")}},x=()=>{o("PANKAJ-CLIENT")},k=()=>{p({name:"Test User",role:"QA Engineer",text:"This is a test review to check the database connection. The UI looks great and the submission process is smooth!"})};return P.jsxs("section",{id:"about",className:"about-section","aria-labelledby":"about-title",children:[P.jsxs("h2",{id:"about-title",className:"section-title",children:[P.jsx("span",{className:"number"})," About Me"]}),P.jsxs("div",{className:"about-content",children:[P.jsxs("div",{className:"about-text-column",children:[P.jsxs("p",{children:["Hello! I'm ",P.jsx("strong",{children:"Pankaj Ray"}),", a results-driven ",P.jsx("strong",{children:"Frontend Web Developer"})," specializing in creating high-performance, ",P.jsx("strong",{children:"accessible digital experiences"}),". Based in ",P.jsx("strong",{children:"Noida, India"}),", I thrive on turning complex UI/UX designs into pixel-perfect, seamless web applications."]}),P.jsxs("p",{children:["My core focus is on ",P.jsx("strong",{children:"React development"}),", specializing in dynamic Single Page Applications (SPAs) and integrating them with robust ",P.jsx("strong",{children:"RESTful APIs"}),". My priority is ensuring ",P.jsx("strong",{children:"fast loading speeds"})," and ",P.jsx("strong",{children:"cross-browser compatibility"})," across all my projects."]}),P.jsxs("p",{children:["I'm actively seeking challenging roles where I can leverage ",P.jsx("strong",{children:"modern JavaScript frameworks"})," and contribute to an innovative team. Let's build something scalable!"]}),P.jsx("h3",{className:"skills-heading",children:"My Current Tech Stack:"}),P.jsx("ul",{className:"skills-list",children:m.map(I=>P.jsxs("li",{className:"skill-item",children:[P.jsx("span",{className:"skill-icon",children:""})," ",I.name]},I.id))}),P.jsx("div",{className:"about-cta-buttons",children:P.jsx(nt,{to:"/contact",className:"contact-button cta-button secondary",children:"Get In Touch"})})]}),P.jsx("div",{className:"about-image-column",children:P.jsx("div",{className:"profile-image-wrapper",children:P.jsx("img",{src:oT,alt:"Pankaj Ray professional profile",className:"profile-image"})})})]}),P.jsxs("div",{className:"reviews-container",children:[P.jsxs("div",{className:"reviews-header-group",children:[P.jsx("h3",{className:"reviews-heading",children:"What People Say"}),!n&&P.jsx("button",{className:"add-review-btn",onClick:()=>r(!0),children:"+ Write a Review"})]}),n&&P.jsx("div",{className:"review-form-wrapper",children:P.jsxs("div",{className:"review-form-card",children:[P.jsx("button",{className:"close-form-btn",onClick:()=>r(!1),children:""}),s?P.jsxs("form",{onSubmit:w,className:"review-input-step",children:[P.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[P.jsx("h4",{style:{margin:0},children:"Share your experience"}),P.jsx("button",{type:"button",onClick:k,style:{background:"#172a45",border:"1px solid #64ffda",color:"#64ffda",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem"},children:"Fill Test Data"})]}),P.jsx("input",{type:"text",placeholder:"Your Name",className:"form-input",required:!0,value:h.name,onChange:I=>p({...h,name:I.target.value})}),P.jsx("input",{type:"text",placeholder:"Your Role / Company",className:"form-input",value:h.role,onChange:I=>p({...h,role:I.target.value})}),P.jsx("textarea",{placeholder:"Write your review here...",className:"form-input form-textarea",required:!0,value:h.text,onChange:I=>p({...h,text:I.target.value})}),P.jsx("button",{type:"submit",className:"cta-button",children:"Submit Review"})]}):P.jsxs("div",{className:"verification-step",children:[P.jsx("h4",{children:"Client Verification"}),P.jsx("p",{children:"To ensure authenticity, please enter the Access Code provided after your service."}),P.jsx("input",{type:"text",placeholder:"Enter Access Code (e.g. PANKAJ-CLIENT)",value:i,onChange:I=>o(I.target.value),className:"form-input"}),u&&P.jsx("p",{className:"error-msg",children:u}),P.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[P.jsx("button",{onClick:_,className:"cta-button",children:"Verify"}),P.jsx("button",{type:"button",onClick:x,style:{background:"none",border:"none",color:"#8892b0",cursor:"pointer",fontSize:"0.8rem",textDecoration:"underline"},children:"Auto-fill Code"})]})]})]})}),P.jsx("div",{className:"reviews-grid",children:t.map(I=>P.jsxs("div",{className:"review-card",children:[P.jsx("div",{className:"review-icon",children:""}),P.jsx("p",{className:"review-text",children:I.text}),P.jsxs("div",{className:"reviewer-info",children:[P.jsx("h4",{className:"reviewer-name",children:I.name}),P.jsx("span",{className:"reviewer-role",children:I.role})]})]},I.id))})]})]})}function b1(){const[t,e]=b.useState({name:"",email:"",mobile:"",company:"",message:""}),[n,r]=b.useState(!1),i=s=>{e({...t,[s.target.name]:s.target.value})},o=async s=>{s.preventDefault(),r(!0);try{await QI(Aa(xs,"clients"),{...t,timestamp:ZI()}),alert("Message sent successfully! I will contact you shortly."),e({name:"",email:"",mobile:"",company:"",message:""})}catch(l){console.error("Error submitting form: ",l),alert("Something went wrong. Please try again.")}r(!1)};return P.jsx("section",{className:"contact-container",children:P.jsxs("div",{className:"contact-content",children:[P.jsx("h2",{className:"contact-title",children:"Let's Connect"}),P.jsx("p",{className:"contact-subtitle",children:"Fill out the form below and I will get back to you."}),P.jsx("div",{className:"contact-form-card",children:P.jsxs("form",{onSubmit:o,className:"contact-form",children:[P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Name"}),P.jsx("input",{type:"text",name:"name",required:!0,className:"contact-input",placeholder:"Enter your name",value:t.name,onChange:i})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Email"}),P.jsx("input",{type:"email",name:"email",required:!0,className:"contact-input",placeholder:"Enter your email",value:t.email,onChange:i})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Mobile Number"}),P.jsx("input",{type:"tel",name:"mobile",required:!0,className:"contact-input",placeholder:"Enter your mobile",value:t.mobile,onChange:i})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Company Name (Optional)"}),P.jsx("input",{type:"text",name:"company",className:"contact-input",placeholder:"Enter company name",value:t.company,onChange:i})]}),P.jsxs("div",{className:"form-group",children:[P.jsx("label",{children:"Message"}),P.jsx("textarea",{name:"message",rows:"5",required:!0,className:"contact-input contact-textarea",placeholder:"How can I help you?",value:t.message,onChange:i})]}),P.jsx("button",{type:"submit",className:"contact-btn",disabled:n,children:n?"Sending...":"Send Message"})]})})]})})}function H1(){const t={frontend:["React (Core)","JavaScript (ES6+)","TypeScript","HTML5 & CSS3 / SASS","Tailwind CSS / Styled Components","Framer Motion (Advanced Animation)","Three.js (3D Graphics)","Web Performance & Accessibility (A11y)"],backend:["Node.js & Express.js","RESTful API Development","MongoDB (Mongoose)","Firebase/Firestore","Authentication (JWT)","API Integration (Third-party services)"],tools:["Git & GitHub","VS Code & WebStorm","Vite & Webpack Bundlers","NPM/Yarn/PNPM","Figma & Adobe XD","Linux/Bash (Deployment)","Postman/Insomnia (API Testing)"]},e=(n,r)=>P.jsxs("div",{className:"skill-category",children:[P.jsx("h3",{className:"category-title",children:n}),P.jsx("ul",{className:"skill-list",children:r.map((i,o)=>P.jsxs("li",{className:"skill-item",children:[P.jsx("span",{className:"skill-icon",children:""})," ",i]},o))})]});return P.jsxs("section",{id:"skills",className:"skill-section","aria-labelledby":"skills-title",children:[P.jsxs("h2",{id:"skills-title",className:"section-title",children:[P.jsx("span",{className:"number"})," My Core Skillset"]}),P.jsxs("div",{className:"skill-content-wrapper",children:[P.jsx("p",{className:"skill-pitch",children:"I focus on **modern JavaScript frameworks** and robust tools to build **highly performant**, accessible, and visually appealing web applications, specializing in the **MERN stack** and advanced frontend animation."}),P.jsxs("div",{className:"skill-grid",children:[e("Frontend Development",t.frontend),e("Backend & Database",t.backend),e("Tools & Workflow",t.tools)]}),P.jsxs("div",{className:"skills-cta-footer",children:[P.jsx("p",{children:"Interested in my process? Let's connect!"}),P.jsx(nt,{to:"/contact",className:"cta-button secondary",children:"Discuss A Project"})]})]})]})}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let z1,$1;function W1(){return{geminiUrl:z1,vertexUrl:$1}}function J1(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=W1();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wn{}function z(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function c(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let d=0;d<u.length;d++){const h=u[d];c(h,e.slice(o+1),n[d])}else for(const d of u)c(d,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];c(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(l=>a(l,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function K1(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let l=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){l=u;break}if(l!==-1&&o.length>l)for(let u=l;u<o.length;u++){const d=o[u];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Vd(t,i,o,0,s)}}function Vd(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const u of l[s])Vd(u,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(d=>!d.startsWith("_")&&!i.has(d)),u={};for(const d of l)u[d]=s[d];for(const[d,h]of Object.entries(u)){const p=[];for(const m of n.slice(r))m==="*"?p.push(d):p.push(m);c(s,p,h)}for(const d of l)delete s[d]}}else{const s=t;o in s&&Vd(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wh(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q1(t){const e={},n=a(t,["operationName"]);n!=null&&c(e,["operationName"],n);const r=a(t,["resourceName"]);return r!=null&&c(e,["_url","resourceName"],r),e}function Y1(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],Z1(s)),e}function X1(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],j1(s)),e}function Z1(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>eM(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function j1(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>tM(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function eM(t){const e={},n=a(t,["video"]);return n!=null&&c(e,["video"],lM(n)),e}function tM(t){const e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],aM(n)),e}function nM(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function rM(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function iM(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],oM(s)),e}function oM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function jI(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],sM(s)),e}function sM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function lM(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&c(e,["videoBytes"],wh(r));const i=a(t,["encoding"]);return i!=null&&c(e,["mimeType"],i),e}function aM(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["videoBytes"],wh(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ay;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ay||(ay={}));var uy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(uy||(uy={}));var cy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(cy||(cy={}));var zn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(zn||(zn={}));var dy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(dy||(dy={}));var fy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fy||(fy={}));var hy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(hy||(hy={}));var py;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(py||(py={}));var my;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(my||(my={}));var gy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(gy||(gy={}));var yy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(yy||(yy={}));var _y;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(_y||(_y={}));var vy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(vy||(vy={}));var Ey;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Ey||(Ey={}));var Ty;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Ty||(Ty={}));var Iy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Iy||(Iy={}));var Cy;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Cy||(Cy={}));var Sy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Sy||(Sy={}));var Ay;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ay||(Ay={}));var Ra;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ra||(Ra={}));var wy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(wy||(wy={}));var Ry;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ry||(Ry={}));var Py;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Py||(Py={}));var Ld;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ld||(Ld={}));var Ny;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ny||(Ny={}));var xy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(xy||(xy={}));var My;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(My||(My={}));var ky;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ky||(ky={}));var Dy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Dy||(Dy={}));var Vy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Vy||(Vy={}));var Ly;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Ly||(Ly={}));var Fy;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Fy||(Fy={}));var Uy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Uy||(Uy={}));var Oy;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Oy||(Oy={}));var By;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(By||(By={}));var qy;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(qy||(qy={}));var Gy;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Gy||(Gy={}));var by;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(by||(by={}));var Hy;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Hy||(Hy={}));var zy;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(zy||(zy={}));var $y;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})($y||($y={}));var Wy;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Wy||(Wy={}));var Jy;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Jy||(Jy={}));var Ky;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Ky||(Ky={}));var Qy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Qy||(Qy={}));var Yy;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Yy||(Yy={}));var Xy;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Xy||(Xy={}));var Zy;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Zy||(Zy={}));var jy;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(jy||(jy={}));var e_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(e_||(e_={}));var t_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(t_||(t_={}));var n_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(n_||(n_={}));var r_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(r_||(r_={}));var i_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(i_||(i_={}));var vi;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(vi||(vi={}));class Fd{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class No{get text(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1;const p=[];for(const m of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[_,w]of Object.entries(m))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(w!==null||w!==void 0)&&p.push(_);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,d+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const h=[];for(const p of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[m,_]of Object.entries(p))m!=="inlineData"&&(_!==null||_!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,i,o,s,l,u,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,o,s,l,u,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.output}}class o_{}class s_{}class uM{}class cM{}class dM{}class fM{}class l_{}class a_{}class u_{}class hM{}class Pa{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Pa;let i;const o=e;return n?i=X1(o):i=Y1(o),Object.assign(r,i),r}}class c_{}class d_{}class f_{}class pM{}class mM{}class gM{}class Rh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Rh,o=iM(e);return Object.assign(r,o),r}}class yM{}class _M{}class vM{}class h_{}class EM{get text(){var e,n,r;let i="",o=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,d]of Object.entries(l))u!=="text"&&u!=="thought"&&d!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,i+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class TM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ph{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Ph,o=jI(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ae(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function eC(t,e){const n=ae(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function tC(t){return Array.isArray(t)?t.map(e=>Na(e)):[Na(t)]}function Na(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function nC(t){const e=Na(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function rC(t){const e=Na(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function p_(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function iC(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>p_(e)):[p_(t)]}function Ud(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function m_(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function g_(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ot(t){if(t==null)throw new Error("ContentUnion is required");return Ud(t)?t:{role:"user",parts:iC(t)}}function Nh(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=ot(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=ot(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ot(n)):[ot(e)]}function Lt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(m_(t)||g_(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ot(t)]}const e=[],n=[],r=Ud(t[0]);for(const i of t){const o=Ud(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(m_(i)||g_(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:iC(n)}),e}function IM(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(zn).includes(n[0].toUpperCase())?n[0].toUpperCase():zn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(zn).includes(r.toUpperCase())?r.toUpperCase():zn.TYPE_UNSPECIFIED})}}function xi(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&IM(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(zn).includes(l.toUpperCase())?l.toUpperCase():zn.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=xi(l);else if(r.includes(s)){const u=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}u.push(xi(d))}e[s]=u}else if(i.includes(s)){const u={};for(const[d,h]of Object.entries(l))u[d]=xi(h);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=l}return e}function xh(t){return xi(t)}function Mh(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function kh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function to(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=xi(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=xi(e.response));return t}function no(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function CM(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Rn(t,e){if(typeof e!="string")throw new Error("name must be a string");return CM(t,e,"cachedContents")}function oC(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function mr(t){return wh(t)}function SM(t){return t!=null&&typeof t=="object"&&"name"in t}function AM(t){return t!=null&&typeof t=="object"&&"video"in t}function wM(t){return t!=null&&typeof t=="object"&&"uri"in t}function sC(t){var e;let n;if(SM(t)&&(n=t.name),!(wM(t)&&(n=t.uri,n===void 0))&&!(AM(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function lC(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function aC(t){for(const e of["models","tunedModels","publisherModels"])if(RM(t,e))return t[e];return[]}function RM(t,e){return t!==null&&typeof t=="object"&&e in t}function PM(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function NM(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=PM(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function uC(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function xM(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function cC(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ro(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function dC(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MM(t){const e={},n=a(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);const r=a(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>dk(s))),c(e,["inlinedResponses"],o)}const i=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["inlinedEmbedContentResponses"],o)}return e}function kM(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsDestination","outputUriPrefix"]);r!=null&&c(e,["gcsUri"],r);const i=a(t,["bigqueryDestination","outputUri"]);return i!=null&&c(e,["bigqueryUri"],i),e}function DM(t){const e={},n=a(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsDestination","outputUriPrefix"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&c(e,["bigqueryDestination","outputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ql(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata","displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["metadata","state"]);i!=null&&c(e,["state"],dC(i));const o=a(t,["metadata","createTime"]);o!=null&&c(e,["createTime"],o);const s=a(t,["metadata","endTime"]);s!=null&&c(e,["endTime"],s);const l=a(t,["metadata","updateTime"]);l!=null&&c(e,["updateTime"],l);const u=a(t,["metadata","model"]);u!=null&&c(e,["model"],u);const d=a(t,["metadata","output"]);return d!=null&&c(e,["dest"],MM(cC(d))),e}function Od(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["state"]);i!=null&&c(e,["state"],dC(i));const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["createTime"]);s!=null&&c(e,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(e,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(e,["endTime"],u);const d=a(t,["updateTime"]);d!=null&&c(e,["updateTime"],d);const h=a(t,["model"]);h!=null&&c(e,["model"],h);const p=a(t,["inputConfig"]);p!=null&&c(e,["src"],VM(p));const m=a(t,["outputConfig"]);m!=null&&c(e,["dest"],kM(cC(m)));const _=a(t,["completionStats"]);return _!=null&&c(e,["completionStats"],_),e}function VM(t){const e={},n=a(t,["instancesFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsSource","uris"]);r!=null&&c(e,["gcsUri"],r);const i=a(t,["bigquerySource","inputUri"]);return i!=null&&c(e,["bigqueryUri"],i),e}function LM(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(e,["fileName"]);r!=null&&c(n,["fileName"],r);const i=a(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ck(t,s))),c(n,["requests","requests"],o)}return n}function FM(t){const e={},n=a(t,["format"]);n!=null&&c(e,["instancesFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsSource","uris"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&c(e,["bigquerySource","inputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function UM(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function OM(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],ro(t,r)),n}function BM(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],ro(t,r)),n}function qM(t){const e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&c(e,["citationMetadata"],GM(r));const i=a(t,["tokenCount"]);i!=null&&c(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&c(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&c(e,["index"],u);const d=a(t,["logprobsResult"]);d!=null&&c(e,["logprobsResult"],d);const h=a(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>_)),c(e,["safetyRatings"],m)}const p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function GM(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),c(e,["citations"],r)}return e}function fC(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>_k(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function bM(t,e){const n={},r=a(t,["displayName"]);if(e!==void 0&&r!=null&&c(e,["batch","displayName"],r),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function HM(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const i=a(t,["dest"]);return e!==void 0&&i!=null&&c(e,["outputConfig"],DM(xM(i))),n}function y_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["src"]);i!=null&&c(n,["batch","inputConfig"],LM(t,uC(t,i)));const o=a(e,["config"]);return o!=null&&bM(o,n),n}function zM(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],ae(t,r));const i=a(e,["src"]);i!=null&&c(n,["inputConfig"],FM(uC(t,i)));const o=a(e,["config"]);return o!=null&&HM(o,n),n}function $M(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["batch","displayName"],r),n}function WM(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["src"]);i!=null&&c(n,["batch","inputConfig"],jM(t,i));const o=a(e,["config"]);return o!=null&&$M(o,n),n}function JM(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],ro(t,r)),n}function KM(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],ro(t,r)),n}function QM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);return o!=null&&c(e,["error"],o),e}function YM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);return o!=null&&c(e,["error"],o),e}function XM(t,e){const n={},r=a(e,["contents"]);if(r!=null){let o=Nh(t,r);Array.isArray(o)&&(o=o.map(s=>s)),c(n,["requests[]","request","content"],o)}const i=a(e,["config"]);return i!=null&&(c(n,["_self"],ZM(i,n)),K1(n,{"requests[].*":"requests[].request.*"})),n}function ZM(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&c(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&c(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function jM(t,e){const n={},r=a(e,["fileName"]);r!=null&&c(n,["file_name"],r);const i=a(e,["inlinedRequests"]);return i!=null&&c(n,["requests"],XM(t,i)),n}function ek(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function tk(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nk(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function rk(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&c(n,["systemInstruction"],fC(ot(i)));const o=a(e,["temperature"]);o!=null&&c(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const d=a(e,["maxOutputTokens"]);d!=null&&c(r,["maxOutputTokens"],d);const h=a(e,["stopSequences"]);h!=null&&c(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&c(r,["logprobs"],m);const _=a(e,["presencePenalty"]);_!=null&&c(r,["presencePenalty"],_);const w=a(e,["frequencyPenalty"]);w!=null&&c(r,["frequencyPenalty"],w);const x=a(e,["seed"]);x!=null&&c(r,["seed"],x);const k=a(e,["responseMimeType"]);k!=null&&c(r,["responseMimeType"],k);const I=a(e,["responseSchema"]);I!=null&&c(r,["responseSchema"],xh(I));const E=a(e,["responseJsonSchema"]);if(E!=null&&c(r,["responseJsonSchema"],E),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=a(e,["safetySettings"]);if(n!==void 0&&C!=null){let D=C;Array.isArray(D)&&(D=D.map(N=>vk(N))),c(n,["safetySettings"],D)}const V=a(e,["tools"]);if(n!==void 0&&V!=null){let D=no(V);Array.isArray(D)&&(D=D.map(N=>Tk(to(N)))),c(n,["tools"],D)}const U=a(e,["toolConfig"]);if(n!==void 0&&U!=null&&c(n,["toolConfig"],Ek(U)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=a(e,["cachedContent"]);n!==void 0&&O!=null&&c(n,["cachedContent"],Rn(t,O));const A=a(e,["responseModalities"]);A!=null&&c(r,["responseModalities"],A);const T=a(e,["mediaResolution"]);T!=null&&c(r,["mediaResolution"],T);const S=a(e,["speechConfig"]);if(S!=null&&c(r,["speechConfig"],Mh(S)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);R!=null&&c(r,["thinkingConfig"],R);const M=a(e,["imageConfig"]);return M!=null&&c(r,["imageConfig"],uk(M)),r}function ik(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>qM(d))),c(e,["candidates"],u)}const i=a(t,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&c(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function ok(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],ro(t,r)),n}function sk(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],ro(t,r)),n}function lk(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function ak(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function uk(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&c(e,["imageSize"],r),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ck(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["request","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let l=Lt(i);Array.isArray(l)&&(l=l.map(u=>fC(u))),c(n,["request","contents"],l)}const o=a(e,["metadata"]);o!=null&&c(n,["metadata"],o);const s=a(e,["config"]);return s!=null&&c(n,["request","generationConfig"],rk(t,s,a(n,["request"],{}))),n}function dk(t){const e={},n=a(t,["response"]);n!=null&&c(e,["response"],ik(n));const r=a(t,["error"]);return r!=null&&c(e,["error"],r),e}function fk(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);if(e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function hk(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&c(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&c(e,["_query","filter"],o),n}function pk(t){const e={},n=a(t,["config"]);return n!=null&&fk(n,e),e}function mk(t){const e={},n=a(t,["config"]);return n!=null&&hk(n,e),e}function gk(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>ql(s))),c(e,["batchJobs"],o)}return e}function yk(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Od(s))),c(e,["batchJobs"],o)}return e}function _k(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],ek(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],tk(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],UM(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function vk(t){const e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function Ek(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],nk(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function Tk(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&c(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],lk(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],ak(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Sn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Sn||(Sn={}));class Zr{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ik extends wn{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Zr(Sn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=y_(this.apiClient,e),r=n._url,i=z("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,u=l.requests,d=[];for(const h of u){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const _=p.request;_.systemInstruction=m,p.request=_}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=zM(this.apiClient,e);return l=z("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Od(h))}else{const d=y_(this.apiClient,e);return l=z("{model}:batchGenerateContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>ql(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=WM(this.apiClient,e);return o=z("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>ql(u))}}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=sk(this.apiClient,e);return l=z("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Od(h))}else{const d=ok(this.apiClient,e);return l=z("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>ql(h))}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const u=BM(this.apiClient,e);s=z("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=OM(this.apiClient,e);s=z("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=mk(e);return l=z("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=yk(h),m=new h_;return Object.assign(m,p),m})}else{const d=pk(e);return l=z("batches",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=gk(h),m=new h_;return Object.assign(m,p),m})}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=KM(this.apiClient,e);return l=z("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>YM(h))}else{const d=JM(this.apiClient,e);return l=z("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>QM(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ck(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function __(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Wk(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function Sk(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&c(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let h=Lt(s);Array.isArray(h)&&(h=h.map(p=>__(p))),c(e,["contents"],h)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],__(ot(l)));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>Kk(p))),c(e,["tools"],h)}const d=a(t,["toolConfig"]);if(e!==void 0&&d!=null&&c(e,["toolConfig"],Jk(d)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Ak(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&c(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=Lt(s);Array.isArray(p)&&(p=p.map(m=>m)),c(e,["contents"],p)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],ot(l));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>Qk(m))),c(e,["tools"],p)}const d=a(t,["toolConfig"]);e!==void 0&&d!=null&&c(e,["toolConfig"],d);const h=a(t,["kmsKeyName"]);return e!==void 0&&h!=null&&c(e,["encryption_spec","kmsKeyName"],h),n}function wk(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],eC(t,r));const i=a(e,["config"]);return i!=null&&Sk(i,n),n}function Rk(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],eC(t,r));const i=a(e,["config"]);return i!=null&&Ak(i,n),n}function Pk(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Rn(t,r)),n}function Nk(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Rn(t,r)),n}function xk(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function Mk(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function kk(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Dk(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Vk(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Lk(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&c(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function Fk(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Rn(t,r)),n}function Uk(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Rn(t,r)),n}function Ok(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function Bk(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function qk(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function Gk(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function bk(t){const e={},n=a(t,["config"]);return n!=null&&qk(n,e),e}function Hk(t){const e={},n=a(t,["config"]);return n!=null&&Gk(n,e),e}function zk(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["cachedContents"],o)}return e}function $k(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["cachedContents"],o)}return e}function Wk(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],kk(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],Dk(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],Ck(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function Jk(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],Vk(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function Kk(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&c(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],Ok(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],Bk(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function Qk(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Lk(m))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const i=a(t,["googleSearchRetrieval"]);i!=null&&c(e,["googleSearchRetrieval"],i);const o=a(t,["computerUse"]);if(o!=null&&c(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],d);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function Yk(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&c(e,["expireTime"],i),n}function Xk(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&c(e,["expireTime"],i),n}function Zk(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],Rn(t,r));const i=a(e,["config"]);return i!=null&&Yk(i,n),n}function jk(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],Rn(t,r));const i=a(e,["config"]);return i!=null&&Xk(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eD extends wn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Zr(Sn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Rk(this.apiClient,e);return l=z("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const d=wk(this.apiClient,e);return l=z("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Uk(this.apiClient,e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const d=Fk(this.apiClient,e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Nk(this.apiClient,e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=Mk(h),m=new d_;return Object.assign(m,p),m})}else{const d=Pk(this.apiClient,e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=xk(h),m=new d_;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=jk(this.apiClient,e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const d=Zk(this.apiClient,e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Hk(e);return l=z("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=$k(h),m=new f_;return Object.assign(m,p),m})}else{const d=bk(e);return l=z("cachedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=zk(h),m=new f_;return Object.assign(m,p),m})}}}function v_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ge(t){return this instanceof ge?(this.v=t,this):new ge(t)}function Mi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(w){return Promise.resolve(w).then(_,p)}}function l(_,w){r[_]&&(i[_]=function(x){return new Promise(function(k,I){o.push([_,x,k,I])>1||u(_,x)})},w&&(i[_]=w(i[_])))}function u(_,w){try{d(r[_](w))}catch(x){m(o[0][3],x)}}function d(_){_.value instanceof ge?Promise.resolve(_.value.v).then(h,p):m(o[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function m(_,w){_(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Zo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof v_=="function"?v_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(l,u){s=t[o](s),i(l,u,s.done,s.value)})}}function i(o,s,l,u){Promise.resolve(u).then(function(d){o({value:d,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tD(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:hC(n)}function hC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function nD(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function E_(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!hC(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class rD{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new iD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class iD{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),nD(o)}async sendMessage(e){var n;await this.sendPromise;const r=ot(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const u=await i,d=(s=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(l=h.slice(p))!==null&&l!==void 0?l:[]);const _=d?[d]:[];this.recordHistory(r,_,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=ot(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?E_(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Mi(this,arguments,function*(){var s,l,u,d;const h=[];try{for(var p=!0,m=Zo(e),_;_=yield ge(m.next()),s=_.done,!s;p=!0){d=_.value,p=!1;const w=d;if(tD(w)){const x=(i=(r=w.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;x!==void 0&&h.push(x)}yield yield ge(w)}}catch(w){l={error:w}}finally{try{!p&&!s&&(u=m.return)&&(yield ge(u.call(m)))}finally{if(l)throw l.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...E_(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,uu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oD(t){const e={},n=a(t,["file"]);return n!=null&&c(e,["file"],n),e}function sD(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function lD(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],sC(n)),e}function aD(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function uD(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],sC(n)),e}function cD(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function dD(t){const e={},n=a(t,["config"]);return n!=null&&cD(n,e),e}function fD(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hD extends wn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Zr(Sn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=dD(e);return o=z("files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const d=fD(u),h=new yM;return Object.assign(h,d),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=oD(e);return o=z("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=sD(u),h=new _M;return Object.assign(h,d),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=uD(e);return o=z("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=lD(e);return o=z("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const d=aD(u),h=new vM;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gl(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function pD(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xD(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function mD(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function gD(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yD(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&c(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function _D(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&c(e,["responseJsonSchema"],r);const i=a(t,["audioTimestamp"]);i!=null&&c(e,["audioTimestamp"],i);const o=a(t,["candidateCount"]);o!=null&&c(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);const d=a(t,["maxOutputTokens"]);d!=null&&c(e,["maxOutputTokens"],d);const h=a(t,["mediaResolution"]);h!=null&&c(e,["mediaResolution"],h);const p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(e,["responseLogprobs"],m);const _=a(t,["responseMimeType"]);_!=null&&c(e,["responseMimeType"],_);const w=a(t,["responseModalities"]);w!=null&&c(e,["responseModalities"],w);const x=a(t,["responseSchema"]);x!=null&&c(e,["responseSchema"],x);const k=a(t,["routingConfig"]);k!=null&&c(e,["routingConfig"],k);const I=a(t,["seed"]);I!=null&&c(e,["seed"],I);const E=a(t,["speechConfig"]);E!=null&&c(e,["speechConfig"],pC(E));const C=a(t,["stopSequences"]);C!=null&&c(e,["stopSequences"],C);const V=a(t,["temperature"]);V!=null&&c(e,["temperature"],V);const U=a(t,["thinkingConfig"]);U!=null&&c(e,["thinkingConfig"],U);const O=a(t,["topK"]);O!=null&&c(e,["topK"],O);const A=a(t,["topP"]);if(A!=null&&c(e,["topP"],A),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vD(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function ED(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function TD(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","mediaResolution"],d);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],kh(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const _=a(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],_);const w=a(t,["systemInstruction"]);e!==void 0&&w!=null&&c(e,["setup","systemInstruction"],pD(ot(w)));const x=a(t,["tools"]);if(e!==void 0&&x!=null){let O=no(x);Array.isArray(O)&&(O=O.map(A=>kD(to(A)))),c(e,["setup","tools"],O)}const k=a(t,["sessionResumption"]);e!==void 0&&k!=null&&c(e,["setup","sessionResumption"],MD(k));const I=a(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","inputAudioTranscription"],I);const E=a(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&c(e,["setup","outputAudioTranscription"],E);const C=a(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&c(e,["setup","realtimeInputConfig"],C);const V=a(t,["contextWindowCompression"]);e!==void 0&&V!=null&&c(e,["setup","contextWindowCompression"],V);const U=a(t,["proactivity"]);return e!==void 0&&U!=null&&c(e,["setup","proactivity"],U),n}function ID(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],_D(r));const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","mediaResolution"],d);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],pC(kh(p)));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const _=a(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],_);const w=a(t,["systemInstruction"]);e!==void 0&&w!=null&&c(e,["setup","systemInstruction"],ot(w));const x=a(t,["tools"]);if(e!==void 0&&x!=null){let O=no(x);Array.isArray(O)&&(O=O.map(A=>DD(to(A)))),c(e,["setup","tools"],O)}const k=a(t,["sessionResumption"]);e!==void 0&&k!=null&&c(e,["setup","sessionResumption"],k);const I=a(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","inputAudioTranscription"],I);const E=a(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&c(e,["setup","outputAudioTranscription"],E);const C=a(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&c(e,["setup","realtimeInputConfig"],C);const V=a(t,["contextWindowCompression"]);e!==void 0&&V!=null&&c(e,["setup","contextWindowCompression"],V);const U=a(t,["proactivity"]);return e!==void 0&&U!=null&&c(e,["setup","proactivity"],U),n}function CD(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],ae(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],TD(i,n)),n}function SD(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],ae(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],ID(i,n)),n}function AD(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],n),e}function wD(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),c(e,["weightedPrompts"],r)}return e}function RD(t){const e={},n=a(t,["media"]);if(n!=null){let d=tC(n);Array.isArray(d)&&(d=d.map(h=>Gl(h))),c(e,["mediaChunks"],d)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],Gl(rC(r)));const i=a(t,["audioStreamEnd"]);i!=null&&c(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&c(e,["video"],Gl(nC(o)));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function PD(t){const e={},n=a(t,["media"]);if(n!=null){let d=tC(n);Array.isArray(d)&&(d=d.map(h=>h)),c(e,["mediaChunks"],d)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],rC(r));const i=a(t,["audioStreamEnd"]);i!=null&&c(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&c(e,["video"],nC(o));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function ND(t){const e={},n=a(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],n);const r=a(t,["serverContent"]);r!=null&&c(e,["serverContent"],r);const i=a(t,["toolCall"]);i!=null&&c(e,["toolCall"],i);const o=a(t,["toolCallCancellation"]);o!=null&&c(e,["toolCallCancellation"],o);const s=a(t,["usageMetadata"]);s!=null&&c(e,["usageMetadata"],VD(s));const l=a(t,["goAway"]);l!=null&&c(e,["goAway"],l);const u=a(t,["sessionResumptionUpdate"]);return u!=null&&c(e,["sessionResumptionUpdate"],u),e}function xD(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],mD(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],gD(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],Gl(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function MD(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pC(t){const e={},n=a(t,["languageCode"]);n!=null&&c(e,["languageCode"],n);const r=a(t,["voiceConfig"]);if(r!=null&&c(e,["voiceConfig"],r),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function kD(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&c(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],vD(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],ED(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function DD(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>yD(m))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const i=a(t,["googleSearchRetrieval"]);i!=null&&c(e,["googleSearchRetrieval"],i);const o=a(t,["computerUse"]);if(o!=null&&c(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],d);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function VD(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&c(e,["cachedContentTokenCount"],r);const i=a(t,["candidatesTokenCount"]);i!=null&&c(e,["responseTokenCount"],i);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&c(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&c(e,["thoughtsTokenCount"],s);const l=a(t,["totalTokenCount"]);l!=null&&c(e,["totalTokenCount"],l);const u=a(t,["promptTokensDetails"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(w=>w)),c(e,["promptTokensDetails"],_)}const d=a(t,["cacheTokensDetails"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(w=>w)),c(e,["cacheTokensDetails"],_)}const h=a(t,["candidatesTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(w=>w)),c(e,["responseTokensDetails"],_)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(w=>w)),c(e,["toolUsePromptTokensDetails"],_)}const m=a(t,["trafficType"]);return m!=null&&c(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LD(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function FD(t){const e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&c(e,["citationMetadata"],UD(r));const i=a(t,["tokenCount"]);i!=null&&c(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&c(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&c(e,["index"],u);const d=a(t,["logprobsResult"]);d!=null&&c(e,["logprobsResult"],d);const h=a(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>_)),c(e,["safetyRatings"],m)}const p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function UD(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),c(e,["citations"],r)}return e}function OD(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let o=Lt(i);Array.isArray(o)&&(o=o.map(s=>s)),c(n,["contents"],o)}return n}function BD(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["tokensInfo"],i)}return e}function qD(t){const e={},n=a(t,["values"]);n!=null&&c(e,["values"],n);const r=a(t,["statistics"]);return r!=null&&c(e,["statistics"],GD(r)),e}function GD(t){const e={},n=a(t,["truncated"]);n!=null&&c(e,["truncated"],n);const r=a(t,["token_count"]);return r!=null&&c(e,["tokenCount"],r),e}function cu(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>YV(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function bD(t){const e={},n=a(t,["controlType"]);n!=null&&c(e,["controlType"],n);const r=a(t,["enableControlImageComputation"]);return r!=null&&c(e,["computeControl"],r),e}function HD(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function zD(t,e){const n={},r=a(t,["systemInstruction"]);e!==void 0&&r!=null&&c(e,["systemInstruction"],ot(r));const i=a(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>vC(l))),c(e,["tools"],s)}const o=a(t,["generationConfig"]);return e!==void 0&&o!=null&&c(e,["generationConfig"],LV(o)),n}function $D(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let s=Lt(i);Array.isArray(s)&&(s=s.map(l=>cu(l))),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&HD(o),n}function WD(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let s=Lt(i);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&zD(o,n),n}function JD(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);r!=null&&c(e,["totalTokens"],r);const i=a(t,["cachedContentTokenCount"]);return i!=null&&c(e,["cachedContentTokenCount"],i),e}function KD(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);return r!=null&&c(e,["totalTokens"],r),e}function QD(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],ae(t,r)),n}function YD(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],ae(t,r)),n}function XD(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function ZD(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function jD(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&c(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);const m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&c(e,["parameters","includeRaiReason"],m);const _=a(t,["language"]);e!==void 0&&_!=null&&c(e,["parameters","language"],_);const w=a(t,["outputMimeType"]);e!==void 0&&w!=null&&c(e,["parameters","outputOptions","mimeType"],w);const x=a(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&c(e,["parameters","outputOptions","compressionQuality"],x);const k=a(t,["addWatermark"]);e!==void 0&&k!=null&&c(e,["parameters","addWatermark"],k);const I=a(t,["labels"]);e!==void 0&&I!=null&&c(e,["labels"],I);const E=a(t,["editMode"]);e!==void 0&&E!=null&&c(e,["parameters","editMode"],E);const C=a(t,["baseSteps"]);return e!==void 0&&C!=null&&c(e,["parameters","editConfig","baseSteps"],C),n}function eV(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);const o=a(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>nL(u))),c(n,["instances[0]","referenceImages"],l)}const s=a(e,["config"]);return s!=null&&jD(s,n),n}function tV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>du(o))),c(e,["generatedImages"],i)}return e}function nV(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&c(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&c(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function rV(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["instances[]","task_type"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&c(e,["instances[]","title"],i);const o=a(t,["outputDimensionality"]);e!==void 0&&o!=null&&c(e,["parameters","outputDimensionality"],o);const s=a(t,["mimeType"]);e!==void 0&&s!=null&&c(e,["instances[]","mimeType"],s);const l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&c(e,["parameters","autoTruncate"],l),n}function iV(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let l=Nh(t,i);Array.isArray(l)&&(l=l.map(u=>u)),c(n,["requests[]","content"],l)}const o=a(e,["config"]);o!=null&&nV(o,n);const s=a(e,["model"]);return s!==void 0&&c(n,["requests[]","model"],ae(t,s)),n}function oV(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let s=Nh(t,i);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["instances[]","content"],s)}const o=a(e,["config"]);return o!=null&&rV(o,n),n}function sV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["embeddings"],o)}const i=a(t,["metadata"]);return i!=null&&c(e,["metadata"],i),e}function lV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>qD(s))),c(e,["embeddings"],o)}const i=a(t,["metadata"]);return i!=null&&c(e,["metadata"],i),e}function aV(t){const e={},n=a(t,["endpoint"]);n!=null&&c(e,["name"],n);const r=a(t,["deployedModelId"]);return r!=null&&c(e,["deployedModelId"],r),e}function uV(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function cV(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dV(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function fV(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&c(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function hV(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&c(n,["systemInstruction"],cu(ot(i)));const o=a(e,["temperature"]);o!=null&&c(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const d=a(e,["maxOutputTokens"]);d!=null&&c(r,["maxOutputTokens"],d);const h=a(e,["stopSequences"]);h!=null&&c(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&c(r,["logprobs"],m);const _=a(e,["presencePenalty"]);_!=null&&c(r,["presencePenalty"],_);const w=a(e,["frequencyPenalty"]);w!=null&&c(r,["frequencyPenalty"],w);const x=a(e,["seed"]);x!=null&&c(r,["seed"],x);const k=a(e,["responseMimeType"]);k!=null&&c(r,["responseMimeType"],k);const I=a(e,["responseSchema"]);I!=null&&c(r,["responseSchema"],xh(I));const E=a(e,["responseJsonSchema"]);if(E!=null&&c(r,["responseJsonSchema"],E),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=a(e,["safetySettings"]);if(n!==void 0&&C!=null){let D=C;Array.isArray(D)&&(D=D.map(N=>rL(N))),c(n,["safetySettings"],D)}const V=a(e,["tools"]);if(n!==void 0&&V!=null){let D=no(V);Array.isArray(D)&&(D=D.map(N=>cL(to(N)))),c(n,["tools"],D)}const U=a(e,["toolConfig"]);if(n!==void 0&&U!=null&&c(n,["toolConfig"],uL(U)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=a(e,["cachedContent"]);n!==void 0&&O!=null&&c(n,["cachedContent"],Rn(t,O));const A=a(e,["responseModalities"]);A!=null&&c(r,["responseModalities"],A);const T=a(e,["mediaResolution"]);T!=null&&c(r,["mediaResolution"],T);const S=a(e,["speechConfig"]);if(S!=null&&c(r,["speechConfig"],Mh(S)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);R!=null&&c(r,["thinkingConfig"],R);const M=a(e,["imageConfig"]);return M!=null&&c(r,["imageConfig"],qV(M)),r}function pV(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&c(n,["systemInstruction"],ot(i));const o=a(e,["temperature"]);o!=null&&c(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const d=a(e,["maxOutputTokens"]);d!=null&&c(r,["maxOutputTokens"],d);const h=a(e,["stopSequences"]);h!=null&&c(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&c(r,["logprobs"],m);const _=a(e,["presencePenalty"]);_!=null&&c(r,["presencePenalty"],_);const w=a(e,["frequencyPenalty"]);w!=null&&c(r,["frequencyPenalty"],w);const x=a(e,["seed"]);x!=null&&c(r,["seed"],x);const k=a(e,["responseMimeType"]);k!=null&&c(r,["responseMimeType"],k);const I=a(e,["responseSchema"]);I!=null&&c(r,["responseSchema"],xh(I));const E=a(e,["responseJsonSchema"]);E!=null&&c(r,["responseJsonSchema"],E);const C=a(e,["routingConfig"]);C!=null&&c(r,["routingConfig"],C);const V=a(e,["modelSelectionConfig"]);V!=null&&c(r,["modelConfig"],V);const U=a(e,["safetySettings"]);if(n!==void 0&&U!=null){let lt=U;Array.isArray(lt)&&(lt=lt.map(cn=>cn)),c(n,["safetySettings"],lt)}const O=a(e,["tools"]);if(n!==void 0&&O!=null){let lt=no(O);Array.isArray(lt)&&(lt=lt.map(cn=>vC(to(cn)))),c(n,["tools"],lt)}const A=a(e,["toolConfig"]);n!==void 0&&A!=null&&c(n,["toolConfig"],A);const T=a(e,["labels"]);n!==void 0&&T!=null&&c(n,["labels"],T);const S=a(e,["cachedContent"]);n!==void 0&&S!=null&&c(n,["cachedContent"],Rn(t,S));const R=a(e,["responseModalities"]);R!=null&&c(r,["responseModalities"],R);const M=a(e,["mediaResolution"]);M!=null&&c(r,["mediaResolution"],M);const D=a(e,["speechConfig"]);D!=null&&c(r,["speechConfig"],_C(Mh(D)));const N=a(e,["audioTimestamp"]);N!=null&&c(r,["audioTimestamp"],N);const xe=a(e,["thinkingConfig"]);xe!=null&&c(r,["thinkingConfig"],xe);const Rt=a(e,["imageConfig"]);return Rt!=null&&c(r,["imageConfig"],GV(Rt)),r}function T_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let s=Lt(i);Array.isArray(s)&&(s=s.map(l=>cu(l))),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&c(n,["generationConfig"],hV(t,o,n)),n}function I_(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let s=Lt(i);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&c(n,["generationConfig"],pV(t,o,n)),n}function C_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>FD(d))),c(e,["candidates"],u)}const i=a(t,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&c(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function S_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>h)),c(e,["candidates"],d)}const i=a(t,["createTime"]);i!=null&&c(e,["createTime"],i);const o=a(t,["modelVersion"]);o!=null&&c(e,["modelVersion"],o);const s=a(t,["promptFeedback"]);s!=null&&c(e,["promptFeedback"],s);const l=a(t,["responseId"]);l!=null&&c(e,["responseId"],l);const u=a(t,["usageMetadata"]);return u!=null&&c(e,["usageMetadata"],u),e}function mV(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const i=a(t,["aspectRatio"]);e!==void 0&&i!=null&&c(e,["parameters","aspectRatio"],i);const o=a(t,["guidanceScale"]);if(e!==void 0&&o!=null&&c(e,["parameters","guidanceScale"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&c(e,["parameters","safetySetting"],s);const l=a(t,["personGeneration"]);e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l);const u=a(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&c(e,["parameters","includeSafetyAttributes"],u);const d=a(t,["includeRaiReason"]);e!==void 0&&d!=null&&c(e,["parameters","includeRaiReason"],d);const h=a(t,["language"]);e!==void 0&&h!=null&&c(e,["parameters","language"],h);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","mimeType"],p);const m=a(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&c(e,["parameters","outputOptions","compressionQuality"],m),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=a(t,["imageSize"]);if(e!==void 0&&_!=null&&c(e,["parameters","sampleImageSize"],_),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function gV(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&c(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);const m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&c(e,["parameters","includeRaiReason"],m);const _=a(t,["language"]);e!==void 0&&_!=null&&c(e,["parameters","language"],_);const w=a(t,["outputMimeType"]);e!==void 0&&w!=null&&c(e,["parameters","outputOptions","mimeType"],w);const x=a(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&c(e,["parameters","outputOptions","compressionQuality"],x);const k=a(t,["addWatermark"]);e!==void 0&&k!=null&&c(e,["parameters","addWatermark"],k);const I=a(t,["labels"]);e!==void 0&&I!=null&&c(e,["labels"],I);const E=a(t,["imageSize"]);e!==void 0&&E!=null&&c(e,["parameters","sampleImageSize"],E);const C=a(t,["enhancePrompt"]);return e!==void 0&&C!=null&&c(e,["parameters","enhancePrompt"],C),n}function yV(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&mV(o,n),n}function _V(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&gV(o,n),n}function vV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>MV(s))),c(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&c(e,["positivePromptSafetyAttributes"],gC(i)),e}function EV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>du(s))),c(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&c(e,["positivePromptSafetyAttributes"],yC(i)),e}function TV(t,e){const n={},r=a(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=a(t,["durationSeconds"]);if(e!==void 0&&i!=null&&c(e,["parameters","durationSeconds"],i),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&c(e,["parameters","aspectRatio"],o);const s=a(t,["resolution"]);e!==void 0&&s!=null&&c(e,["parameters","resolution"],s);const l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(t,["negativePrompt"]);e!==void 0&&u!=null&&c(e,["parameters","negativePrompt"],u);const d=a(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&c(e,["parameters","enhancePrompt"],d),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=a(t,["lastFrame"]);e!==void 0&&h!=null&&c(e,["instances[0]","lastFrame"],fu(h));const p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>CL(_))),c(e,["instances[0]","referenceImages"],m)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function IV(t,e){const n={},r=a(t,["numberOfVideos"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const o=a(t,["fps"]);e!==void 0&&o!=null&&c(e,["parameters","fps"],o);const s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&c(e,["parameters","durationSeconds"],s);const l=a(t,["seed"]);e!==void 0&&l!=null&&c(e,["parameters","seed"],l);const u=a(t,["aspectRatio"]);e!==void 0&&u!=null&&c(e,["parameters","aspectRatio"],u);const d=a(t,["resolution"]);e!==void 0&&d!=null&&c(e,["parameters","resolution"],d);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&c(e,["parameters","pubsubTopic"],p);const m=a(t,["negativePrompt"]);e!==void 0&&m!=null&&c(e,["parameters","negativePrompt"],m);const _=a(t,["enhancePrompt"]);e!==void 0&&_!=null&&c(e,["parameters","enhancePrompt"],_);const w=a(t,["generateAudio"]);e!==void 0&&w!=null&&c(e,["parameters","generateAudio"],w);const x=a(t,["lastFrame"]);e!==void 0&&x!=null&&c(e,["instances[0]","lastFrame"],Kt(x));const k=a(t,["referenceImages"]);if(e!==void 0&&k!=null){let C=k;Array.isArray(C)&&(C=C.map(V=>SL(V))),c(e,["instances[0]","referenceImages"],C)}const I=a(t,["mask"]);e!==void 0&&I!=null&&c(e,["instances[0]","mask"],IL(I));const E=a(t,["compressionQuality"]);return e!==void 0&&E!=null&&c(e,["parameters","compressionQuality"],E),n}function CV(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],RV(s)),e}function SV(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],PV(s)),e}function AV(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);const o=a(e,["image"]);o!=null&&c(n,["instances[0]","image"],fu(o));const s=a(e,["video"]);s!=null&&c(n,["instances[0]","video"],EC(s));const l=a(e,["source"]);l!=null&&NV(l,n);const u=a(e,["config"]);return u!=null&&TV(u,n),n}function wV(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);const o=a(e,["image"]);o!=null&&c(n,["instances[0]","image"],Kt(o));const s=a(e,["video"]);s!=null&&c(n,["instances[0]","video"],TC(s));const l=a(e,["source"]);l!=null&&xV(l,n);const u=a(e,["config"]);return u!=null&&IV(u,n),n}function RV(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>DV(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function PV(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>VV(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function NV(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&c(e,["instances[0]","image"],fu(i));const o=a(t,["video"]);return e!==void 0&&o!=null&&c(e,["instances[0]","video"],EC(o)),n}function xV(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&c(e,["instances[0]","image"],Kt(i));const o=a(t,["video"]);return e!==void 0&&o!=null&&c(e,["instances[0]","video"],TC(o)),n}function MV(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["image"],bV(n));const r=a(t,["raiFilteredReason"]);r!=null&&c(e,["raiFilteredReason"],r);const i=a(t,["_self"]);return i!=null&&c(e,["safetyAttributes"],gC(i)),e}function du(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["image"],mC(n));const r=a(t,["raiFilteredReason"]);r!=null&&c(e,["raiFilteredReason"],r);const i=a(t,["_self"]);i!=null&&c(e,["safetyAttributes"],yC(i));const o=a(t,["prompt"]);return o!=null&&c(e,["enhancedPrompt"],o),e}function kV(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["mask"],mC(n));const r=a(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["labels"],i)}return e}function DV(t){const e={},n=a(t,["video"]);return n!=null&&c(e,["video"],EL(n)),e}function VV(t){const e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],TL(n)),e}function LV(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&c(e,["responseJsonSchema"],r);const i=a(t,["audioTimestamp"]);i!=null&&c(e,["audioTimestamp"],i);const o=a(t,["candidateCount"]);o!=null&&c(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);const d=a(t,["maxOutputTokens"]);d!=null&&c(e,["maxOutputTokens"],d);const h=a(t,["mediaResolution"]);h!=null&&c(e,["mediaResolution"],h);const p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(e,["responseLogprobs"],m);const _=a(t,["responseMimeType"]);_!=null&&c(e,["responseMimeType"],_);const w=a(t,["responseModalities"]);w!=null&&c(e,["responseModalities"],w);const x=a(t,["responseSchema"]);x!=null&&c(e,["responseSchema"],x);const k=a(t,["routingConfig"]);k!=null&&c(e,["routingConfig"],k);const I=a(t,["seed"]);I!=null&&c(e,["seed"],I);const E=a(t,["speechConfig"]);E!=null&&c(e,["speechConfig"],_C(E));const C=a(t,["stopSequences"]);C!=null&&c(e,["stopSequences"],C);const V=a(t,["temperature"]);V!=null&&c(e,["temperature"],V);const U=a(t,["thinkingConfig"]);U!=null&&c(e,["thinkingConfig"],U);const O=a(t,["topK"]);O!=null&&c(e,["topK"],O);const A=a(t,["topP"]);if(A!=null&&c(e,["topP"],A),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function FV(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],ae(t,r)),n}function UV(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],ae(t,r)),n}function OV(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function BV(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function qV(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&c(e,["imageSize"],r),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function GV(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);r!=null&&c(e,["imageSize"],r);const i=a(t,["outputMimeType"]);i!=null&&c(e,["imageOutputOptions","mimeType"],i);const o=a(t,["outputCompressionQuality"]);return o!=null&&c(e,["imageOutputOptions","compressionQuality"],o),e}function bV(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&c(e,["imageBytes"],mr(n));const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function mC(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["imageBytes"],mr(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function fu(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&c(e,["bytesBase64Encoded"],mr(n));const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Kt(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["imageBytes"]);r!=null&&c(e,["bytesBase64Encoded"],mr(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function HV(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&c(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&c(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],lC(t,l)),r}function zV(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&c(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&c(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],lC(t,l)),r}function $V(t,e){const n={},r=a(e,["config"]);return r!=null&&HV(t,r,n),n}function WV(t,e){const n={},r=a(e,["config"]);return r!=null&&zV(t,r,n),n}function JV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=aC(i);Array.isArray(o)&&(o=o.map(s=>Bd(s))),c(e,["models"],o)}return e}function KV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=aC(i);Array.isArray(o)&&(o=o.map(s=>qd(s))),c(e,["models"],o)}return e}function QV(t){const e={},n=a(t,["maskMode"]);n!=null&&c(e,["maskMode"],n);const r=a(t,["segmentationClasses"]);r!=null&&c(e,["maskClasses"],r);const i=a(t,["maskDilation"]);return i!=null&&c(e,["dilation"],i),e}function Bd(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["description"]);i!=null&&c(e,["description"],i);const o=a(t,["version"]);o!=null&&c(e,["version"],o);const s=a(t,["_self"]);s!=null&&c(e,["tunedModelInfo"],dL(s));const l=a(t,["inputTokenLimit"]);l!=null&&c(e,["inputTokenLimit"],l);const u=a(t,["outputTokenLimit"]);u!=null&&c(e,["outputTokenLimit"],u);const d=a(t,["supportedGenerationMethods"]);d!=null&&c(e,["supportedActions"],d);const h=a(t,["temperature"]);h!=null&&c(e,["temperature"],h);const p=a(t,["maxTemperature"]);p!=null&&c(e,["maxTemperature"],p);const m=a(t,["topP"]);m!=null&&c(e,["topP"],m);const _=a(t,["topK"]);_!=null&&c(e,["topK"],_);const w=a(t,["thinking"]);return w!=null&&c(e,["thinking"],w),e}function qd(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["description"]);i!=null&&c(e,["description"],i);const o=a(t,["versionId"]);o!=null&&c(e,["version"],o);const s=a(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>aV(m))),c(e,["endpoints"],p)}const l=a(t,["labels"]);l!=null&&c(e,["labels"],l);const u=a(t,["_self"]);u!=null&&c(e,["tunedModelInfo"],fL(u));const d=a(t,["defaultCheckpointId"]);d!=null&&c(e,["defaultCheckpointId"],d);const h=a(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),c(e,["checkpoints"],p)}return e}function YV(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],uV(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],cV(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],LD(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function XV(t){const e={},n=a(t,["productImage"]);return n!=null&&c(e,["image"],Kt(n)),e}function ZV(t,e){const n={},r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const i=a(t,["baseSteps"]);e!==void 0&&i!=null&&c(e,["parameters","baseSteps"],i);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);const s=a(t,["seed"]);e!==void 0&&s!=null&&c(e,["parameters","seed"],s);const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&c(e,["parameters","safetySetting"],l);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&c(e,["parameters","personGeneration"],u);const d=a(t,["addWatermark"]);e!==void 0&&d!=null&&c(e,["parameters","addWatermark"],d);const h=a(t,["outputMimeType"]);e!==void 0&&h!=null&&c(e,["parameters","outputOptions","mimeType"],h);const p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","compressionQuality"],p);const m=a(t,["enhancePrompt"]);e!==void 0&&m!=null&&c(e,["parameters","enhancePrompt"],m);const _=a(t,["labels"]);return e!==void 0&&_!=null&&c(e,["labels"],_),n}function jV(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["source"]);i!=null&&tL(i,n);const o=a(e,["config"]);return o!=null&&ZV(o,n),n}function eL(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>du(i))),c(e,["generatedImages"],r)}return e}function tL(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const i=a(t,["personImage"]);e!==void 0&&i!=null&&c(e,["instances[0]","personImage","image"],Kt(i));const o=a(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>XV(l))),c(e,["instances[0]","productImages"],s)}return n}function nL(t){const e={},n=a(t,["referenceImage"]);n!=null&&c(e,["referenceImage"],Kt(n));const r=a(t,["referenceId"]);r!=null&&c(e,["referenceId"],r);const i=a(t,["referenceType"]);i!=null&&c(e,["referenceType"],i);const o=a(t,["maskImageConfig"]);o!=null&&c(e,["maskImageConfig"],QV(o));const s=a(t,["controlImageConfig"]);s!=null&&c(e,["controlImageConfig"],bD(s));const l=a(t,["styleImageConfig"]);l!=null&&c(e,["styleImageConfig"],l);const u=a(t,["subjectImageConfig"]);return u!=null&&c(e,["subjectImageConfig"],u),e}function gC(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&c(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&c(e,["contentType"],i),e}function yC(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&c(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&c(e,["contentType"],i),e}function rL(t){const e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function iL(t){const e={},n=a(t,["image"]);return n!=null&&c(e,["image"],Kt(n)),e}function oL(t,e){const n={},r=a(t,["mode"]);e!==void 0&&r!=null&&c(e,["parameters","mode"],r);const i=a(t,["maxPredictions"]);e!==void 0&&i!=null&&c(e,["parameters","maxPredictions"],i);const o=a(t,["confidenceThreshold"]);e!==void 0&&o!=null&&c(e,["parameters","confidenceThreshold"],o);const s=a(t,["maskDilation"]);e!==void 0&&s!=null&&c(e,["parameters","maskDilation"],s);const l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&c(e,["parameters","binaryColorThreshold"],l);const u=a(t,["labels"]);return e!==void 0&&u!=null&&c(e,["labels"],u),n}function sL(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["source"]);i!=null&&aL(i,n);const o=a(e,["config"]);return o!=null&&oL(o,n),n}function lL(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>kV(i))),c(e,["generatedMasks"],r)}return e}function aL(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&c(e,["instances[0]","image"],Kt(i));const o=a(t,["scribbleImage"]);return e!==void 0&&o!=null&&c(e,["instances[0]","scribble"],iL(o)),n}function _C(t){const e={},n=a(t,["languageCode"]);n!=null&&c(e,["languageCode"],n);const r=a(t,["voiceConfig"]);if(r!=null&&c(e,["voiceConfig"],r),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function uL(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],dV(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function cL(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&c(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],OV(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],BV(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function vC(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>fV(m))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const i=a(t,["googleSearchRetrieval"]);i!=null&&c(e,["googleSearchRetrieval"],i);const o=a(t,["computerUse"]);if(o!=null&&c(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],d);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function dL(t){const e={},n=a(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&c(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&c(e,["updateTime"],i),e}function fL(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&c(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&c(e,["updateTime"],i),e}function hL(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&c(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&c(e,["defaultCheckpointId"],o),n}function pL(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&c(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&c(e,["defaultCheckpointId"],o),n}function mL(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","name"],ae(t,r));const i=a(e,["config"]);return i!=null&&hL(i,n),n}function gL(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["config"]);return i!=null&&pL(i,n),n}function yL(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const i=a(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&c(e,["parameters","safetySetting"],i);const o=a(t,["personGeneration"]);e!==void 0&&o!=null&&c(e,["parameters","personGeneration"],o);const s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","mimeType"],l);const u=a(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&c(e,["parameters","outputOptions","compressionQuality"],u);const d=a(t,["enhanceInputImage"]);e!==void 0&&d!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],d);const h=a(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);const m=a(t,["numberOfImages"]);e!==void 0&&m!=null&&c(e,["parameters","sampleCount"],m);const _=a(t,["mode"]);return e!==void 0&&_!=null&&c(e,["parameters","mode"],_),n}function _L(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],ae(t,r));const i=a(e,["image"]);i!=null&&c(n,["instances[0]","image"],Kt(i));const o=a(e,["upscaleFactor"]);o!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=a(e,["config"]);return s!=null&&yL(s,n),n}function vL(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>du(o))),c(e,["generatedImages"],i)}return e}function EL(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&c(e,["videoBytes"],mr(r));const i=a(t,["encoding"]);return i!=null&&c(e,["mimeType"],i),e}function TL(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["videoBytes"],mr(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function IL(t){const e={},n=a(t,["image"]);n!=null&&c(e,["_self"],Kt(n));const r=a(t,["maskMode"]);return r!=null&&c(e,["maskMode"],r),e}function CL(t){const e={},n=a(t,["image"]);n!=null&&c(e,["image"],fu(n));const r=a(t,["referenceType"]);return r!=null&&c(e,["referenceType"],r),e}function SL(t){const e={},n=a(t,["image"]);n!=null&&c(e,["image"],Kt(n));const r=a(t,["referenceType"]);return r!=null&&c(e,["referenceType"],r),e}function EC(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["videoBytes"]);r!=null&&c(e,["encodedVideo"],mr(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["encoding"],i),e}function TC(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["videoBytes"]);r!=null&&c(e,["bytesBase64Encoded"],mr(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AL="Content-Type",wL="X-Server-Timeout",RL="User-Agent",Gd="x-goog-api-client",PL="1.30.0",NL=`google-genai-sdk/${PL}`,xL="v1beta1",ML="v1beta",A_=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class kL{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:xL,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:ML,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))i.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>o.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&DL(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await w_(i),new Fd(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await w_(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Mi(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:l,value:u}=yield ge(i.read());if(l){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(u,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),_=m.status,w=m.code,x=`got status: ${_}. ${JSON.stringify(p)}`;if(w>=400&&w<600)throw new uu({message:x,status:w})}}catch(p){if(p.name==="ApiError")throw p}s+=d;let h=s.match(A_);for(;h;){const p=h[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ge(new Fd(m)),s=s.slice(h[0].length),h=s.match(A_)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=NL+" "+this.clientOptions.userAgentExtra;return e[RL]=n,e[Gd]=n,e[AL]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(wL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const u={file:i},d=this.getFileName(e),h=z("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,d,u,n==null?void 0:n.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),l=String(s.size),u=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),p={};r!=null&&r.customMetadata&&(p.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(p.chunkingConfig=r.chunkingConfig);const m=await this.fetchUploadUrl(d,l,u,h,p,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var l;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const d=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:u});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(l=d==null?void 0:d.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function w_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new uu({message:i,status:n}):new Error(i)}}function DL(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const l=Object.assign({},o);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const d=s[u],h=l[u];d&&typeof d=="object"&&!Array.isArray(d)&&h&&typeof h=="object"&&!Array.isArray(h)?l[u]=r(h,d):(h&&d&&typeof h!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof h}, New type: ${typeof d}. Overwriting.`),l[u]=d)}return l}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VL="mcp_used/unknown";let LL=!1;function IC(t){for(const e of t)if(FL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return LL}function CC(t){var e;const n=(e=t[Gd])!==null&&e!==void 0?e:"";t[Gd]=(n+` ${VL}`).trimStart()}function FL(t){return t!==null&&typeof t=="object"&&t instanceof Dh}function UL(t,e=100){return Mi(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield ge(t.listTools({cursor:r}));for(const s of o.tools)yield yield ge(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class Dh{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Dh(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var l=!0,u=(n=void 0,Zo(UL(h))),d;d=await u.next(),e=d.done,!e;l=!0){i=d.value,l=!1;const p=i;s.push(p);const m=p.name;if(o[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);o[m]=h}}catch(p){n={error:p}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),NM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function OL(t,e,n){const r=new TM;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class BL{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=bL(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const h=new Promise(C=>{d=C}),p=e.callbacks,m=function(){d({})},_=this.apiClient,w={onopen:m,onmessage:C=>{OL(_,p.onmessage,C)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(C){}},x=this.webSocketFactory.create(u,GL(s),w);x.connect(),await h;const E={setup:{model:ae(this.apiClient,e.model)}};return x.send(JSON.stringify(E)),new qL(x,this.apiClient)}}class qL{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=wD(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=AD(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(vi.PLAY)}pause(){this.sendPlaybackControl(vi.PAUSE)}stop(){this.sendPlaybackControl(vi.STOP)}resetContext(){this.sendPlaybackControl(vi.RESET_CONTEXT)}close(){this.conn.close()}}function GL(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function bL(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function zL(t,e,n){const r=new EM;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=ND(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class $L{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new BL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&IC(e.config.tools)&&CC(p);const m=QL(p);if(this.apiClient.isVertexAI())h=`${u}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,h);else{const S=this.apiClient.getApiKey();let R="BidiGenerateContent",M="key";S!=null&&S.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",M="access_token"),h=`${u}/ws/google.ai.generativelanguage.${d}.GenerativeService.${R}?${M}=${S}`}let _=()=>{};const w=new Promise(S=>{_=S}),x=e.callbacks,k=function(){var S;(S=x==null?void 0:x.onopen)===null||S===void 0||S.call(x),_({})},I=this.apiClient,E={onopen:k,onmessage:S=>{zL(I,x.onmessage,S)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(S){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(S){}},C=this.webSocketFactory.create(h,KL(m),E);C.connect(),await w;let V=ae(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const S=this.apiClient.getProject(),R=this.apiClient.getLocation();V=`projects/${S}/locations/${R}/`+V}let U={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ra.AUDIO]}:e.config.responseModalities=[Ra.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],A=[];for(const S of O)if(this.isCallableTool(S)){const R=S;A.push(await R.tool())}else A.push(S);A.length>0&&(e.config.tools=A);const T={model:V,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=SD(this.apiClient,T):U=CD(this.apiClient,T),delete U.config,C.send(JSON.stringify(U)),new JL(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const WL={turnComplete:!0};class JL{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Lt(n.turns),e.isVertexAI()||(r=r.map(i=>cu(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(HL)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},WL),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:PD(e)}:n={realtimeInput:RD(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function KL(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function QL(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R_=10;function P_(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ki(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ki(t){return"callTool"in t&&typeof t.callTool=="function"}function YL(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>ki(i)))!==null&&r!==void 0?r:!1}function N_(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(ki(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function x_(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XL extends wn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!YL(n)||P_(n.config))return await this.generateContentInternal(u);const d=N_(n);if(d.length>0){const x=d.map(k=>`tools[${k}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let h,p;const m=Lt(u.contents),_=(o=(i=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:R_;let w=0;for(;w<_&&(h=await this.generateContentInternal(u),!(!h.functionCalls||h.functionCalls.length===0));){const x=h.candidates[0].content,k=[];for(const I of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(ki(I)){const C=await I.callTool(h.functionCalls);k.push(...C)}w++,p={role:"user",parts:k},u.contents=Lt(u.contents),u.contents.push(x),u.contents.push(p),x_(u.config)&&(m.push(x),m.push(p))}return x_(u.config)&&(h.automaticFunctionCallingHistory=m),h},this.generateContentStream=async n=>{var r,i,o,s,l;if(this.maybeMoveToResponseJsonSchem(n),P_(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const u=N_(n);if(u.length>0){const p=u.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,h=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Zr(Sn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async u=>ki(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&IC(e.config.tools)){const u=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},u);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),CC(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ki(s)){const l=s,u=await l.tool();for(const d of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,l)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:R_;let s=!1,l=0;const u=await this.initAfcToolsMap(e);return function(d,h,p){var m,_;return Mi(this,arguments,function*(){for(var w,x,k,I;l<o;){s&&(l++,s=!1);const U=yield ge(d.processParamsMaybeAddMcpUsage(p)),O=yield ge(d.generateContentStreamInternal(U)),A=[],T=[];try{for(var E=!0,C=(x=void 0,Zo(O)),V;V=yield ge(C.next()),w=V.done,!w;E=!0){I=V.value,E=!1;const S=I;if(yield yield ge(S),S.candidates&&(!((m=S.candidates[0])===null||m===void 0)&&m.content)){T.push(S.candidates[0].content);for(const R of(_=S.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(l<o&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(R.functionCall.name)){const M=yield ge(h.get(R.functionCall.name).callTool([R.functionCall]));A.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(S){x={error:S}}finally{try{!E&&!w&&(k=C.return)&&(yield ge(k.call(C)))}finally{if(x)throw x.error}}if(A.length>0){s=!0;const S=new No;S.candidates=[{content:{role:"user",parts:A}}],yield yield ge(S);const R=[];R.push(...T),R.push({role:"user",parts:A});const M=Lt(p.contents).concat(R);p.contents=M}else break}})}(this,u,e)}async generateContentInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=I_(this.apiClient,e);return l=z("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=S_(h),m=new No;return Object.assign(m,p),m})}else{const d=T_(this.apiClient,e);return l=z("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=C_(h),m=new No;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=I_(this.apiClient,e);return l=z("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Mi(this,arguments,function*(){var m,_,w,x;try{for(var k=!0,I=Zo(p),E;E=yield ge(I.next()),m=E.done,!m;k=!0){x=E.value,k=!1;const C=x,V=S_(yield ge(C.json()));V.sdkHttpResponse={headers:C.headers};const U=new No;Object.assign(U,V),yield yield ge(U)}}catch(C){_={error:C}}finally{try{!k&&!m&&(w=I.return)&&(yield ge(w.call(I)))}finally{if(_)throw _.error}}})})}else{const d=T_(this.apiClient,e);return l=z("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Mi(this,arguments,function*(){var m,_,w,x;try{for(var k=!0,I=Zo(p),E;E=yield ge(I.next()),m=E.done,!m;k=!0){x=E.value,k=!1;const C=x,V=C_(yield ge(C.json()));V.sdkHttpResponse={headers:C.headers};const U=new No;Object.assign(U,V),yield yield ge(U)}}catch(C){_={error:C}}finally{try{!k&&!m&&(w=I.return)&&(yield ge(w.call(I)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=oV(this.apiClient,e);return l=z("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=lV(h),m=new o_;return Object.assign(m,p),m})}else{const d=iV(this.apiClient,e);return l=z("{model}:batchEmbedContents",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=sV(h),m=new o_;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=_V(this.apiClient,e);return l=z("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=EV(h),m=new s_;return Object.assign(m,p),m})}else{const d=yV(this.apiClient,e);return l=z("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=vV(h),m=new s_;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=eV(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const d=tV(u),h=new uM;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=_L(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const d=vL(u),h=new cM;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=jV(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=eL(u),h=new dM;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=sL(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=lL(u),h=new fM;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=UV(this.apiClient,e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>qd(h))}else{const d=FV(this.apiClient,e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Bd(h))}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=WV(this.apiClient,e);return l=z("{models_url}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=KV(h),m=new l_;return Object.assign(m,p),m})}else{const d=$V(this.apiClient,e);return l=z("{models_url}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=JV(h),m=new l_;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=gL(this.apiClient,e);return l=z("{model}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>qd(h))}else{const d=mL(this.apiClient,e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Bd(h))}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=YD(this.apiClient,e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=ZD(h),m=new a_;return Object.assign(m,p),m})}else{const d=QD(this.apiClient,e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=XD(h),m=new a_;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=WD(this.apiClient,e);return l=z("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=KD(h),m=new u_;return Object.assign(m,p),m})}else{const d=$D(this.apiClient,e);return l=z("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=JD(h),m=new u_;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=OD(this.apiClient,e);return o=z("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const d=BD(u),h=new hM;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=wV(this.apiClient,e);return l=z("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const p=SV(h),m=new Pa;return Object.assign(m,p),m})}else{const d=AV(this.apiClient,e);return l=z("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const p=CV(h),m=new Pa;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZL extends wn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=rM(e);return l=z("{operationName}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const d=nM(e);return l=z("{operationName}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=Q1(e);return o=z("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jL(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function e2(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>u2(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function t2(t,e,n){const r={},i=a(e,["expireTime"]);n!==void 0&&i!=null&&c(n,["expireTime"],i);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&c(n,["newSessionExpireTime"],o);const s=a(e,["uses"]);n!==void 0&&s!=null&&c(n,["uses"],s);const l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&c(n,["bidiGenerateContentSetup"],a2(t,l));const u=a(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&c(n,["fieldMask"],u),r}function n2(t,e){const n={},r=a(e,["config"]);return r!=null&&c(n,["config"],t2(t,r,n)),n}function r2(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function i2(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function o2(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function s2(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function l2(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","mediaResolution"],d);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],kh(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const _=a(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],_);const w=a(t,["systemInstruction"]);e!==void 0&&w!=null&&c(e,["setup","systemInstruction"],e2(ot(w)));const x=a(t,["tools"]);if(e!==void 0&&x!=null){let O=no(x);Array.isArray(O)&&(O=O.map(A=>d2(to(A)))),c(e,["setup","tools"],O)}const k=a(t,["sessionResumption"]);e!==void 0&&k!=null&&c(e,["setup","sessionResumption"],c2(k));const I=a(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&c(e,["setup","inputAudioTranscription"],I);const E=a(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&c(e,["setup","outputAudioTranscription"],E);const C=a(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&c(e,["setup","realtimeInputConfig"],C);const V=a(t,["contextWindowCompression"]);e!==void 0&&V!=null&&c(e,["setup","contextWindowCompression"],V);const U=a(t,["proactivity"]);return e!==void 0&&U!=null&&c(e,["setup","proactivity"],U),n}function a2(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],ae(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],l2(i,n)),n}function u2(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],r2(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],i2(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],jL(u));const d=a(t,["text"]);d!=null&&c(e,["text"],d);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function c2(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function d2(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&c(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],o2(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],s2(u));const d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f2(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function h2(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=f2(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(d=>s.includes(d)?`generationConfig.${d}`:d));const u=[];o&&u.push(o),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class p2 extends wn{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=n2(this.apiClient,e);o=z("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const u=h2(l,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m2(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["displayName"],r),n}function g2(t){const e={},n=a(t,["config"]);return n!=null&&m2(n,e),e}function y2(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function _2(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&y2(r,e),e}function v2(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function E2(t,e){const n={},r=a(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["customMetadata"],o)}const i=a(t,["chunkingConfig"]);return e!==void 0&&i!=null&&c(e,["chunkingConfig"],i),n}function T2(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],C2(s)),e}function I2(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["fileName"]);r!=null&&c(e,["fileName"],r);const i=a(t,["config"]);return i!=null&&E2(i,e),e}function C2(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function S2(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function A2(t){const e={},n=a(t,["config"]);return n!=null&&S2(n,e),e}function w2(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["fileSearchStores"],o)}return e}function R2(t,e){const n={},r=a(t,["mimeType"]);e!==void 0&&r!=null&&c(e,["mimeType"],r);const i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const o=a(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),c(e,["customMetadata"],l)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&c(e,["chunkingConfig"],s),n}function P2(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["config"]);return r!=null&&R2(r,e),e}function N2(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x2(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function M2(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&x2(r,e),e}function k2(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function D2(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function V2(t){const e={},n=a(t,["parent"]);n!=null&&c(e,["_url","parent"],n);const r=a(t,["config"]);return r!=null&&D2(r,e),e}function L2(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F2 extends wn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Zr(Sn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=k2(e);return o=z("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=M2(e);i=z("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=V2(e);return o=z("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=L2(u),h=new pM;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U2 extends wn{constructor(e,n=new F2(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Zr(Sn.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=g2(e);return o=z("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=v2(e);return o=z("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=_2(e);i=z("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=A2(e);return o=z("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=w2(u),h=new mM;return Object.assign(h,d),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=P2(e);return o=z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=N2(u),h=new gM;return Object.assign(h,d),h})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=I2(e);return o=z("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=T2(u),h=new Rh;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O2(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function B2(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function q2(t,e,n){const r={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=a(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&c(e,["displayName"],i),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=a(t,["epochCount"]);e!==void 0&&o!=null&&c(e,["tuningTask","hyperparameters","epochCount"],o);const s=a(t,["learningRateMultiplier"]);if(s!=null&&c(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=a(t,["batchSize"]);e!==void 0&&l!=null&&c(e,["tuningTask","hyperparameters","batchSize"],l);const u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&c(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function G2(t,e,n){const r={};let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const _=a(t,["validationDataset"]);e!==void 0&&_!=null&&c(e,["supervisedTuningSpec"],M_(_))}else if(i==="PREFERENCE_TUNING"){const _=a(t,["validationDataset"]);e!==void 0&&_!=null&&c(e,["preferenceOptimizationSpec"],M_(_))}const o=a(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&c(e,["tunedModelDisplayName"],o);const s=a(t,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const _=a(t,["epochCount"]);e!==void 0&&_!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(l==="PREFERENCE_TUNING"){const _=a(t,["epochCount"]);e!==void 0&&_!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const _=a(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(u==="PREFERENCE_TUNING"){const _=a(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const _=a(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(d==="PREFERENCE_TUNING"){const _=a(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&c(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let h=a(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const _=a(t,["adapterSize"]);e!==void 0&&_!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(h==="PREFERENCE_TUNING"){const _=a(t,["adapterSize"]);e!==void 0&&_!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);const m=a(t,["beta"]);return e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function b2(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["preTunedModel"]);i!=null&&c(n,["preTunedModel"],i);const o=a(t,["trainingDataset"]);o!=null&&j2(o);const s=a(t,["config"]);return s!=null&&q2(s,n),n}function H2(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["preTunedModel"]);i!=null&&c(n,["preTunedModel"],i);const o=a(t,["trainingDataset"]);o!=null&&eF(o,n,e);const s=a(t,["config"]);return s!=null&&G2(s,n,e),n}function z2(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function $2(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function W2(t,e,n){const r={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function J2(t,e,n){const r={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function K2(t,e){const n={},r=a(t,["config"]);return r!=null&&W2(r,n),n}function Q2(t,e){const n={},r=a(t,["config"]);return r!=null&&J2(r,n),n}function Y2(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>SC(l))),c(n,["tuningJobs"],s)}return n}function X2(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>bd(l))),c(n,["tuningJobs"],s)}return n}function Z2(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["model"],r);const i=a(t,["name"]);return i!=null&&c(n,["endpoint"],i),n}function j2(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=a(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(n,["examples","examples"],i)}return n}function eF(t,e,n){const r={};let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function SC(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["state"]);o!=null&&c(n,["state"],oC(o));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["tuningTask","startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["tuningTask","completeTime"]);u!=null&&c(n,["endTime"],u);const d=a(t,["updateTime"]);d!=null&&c(n,["updateTime"],d);const h=a(t,["description"]);h!=null&&c(n,["description"],h);const p=a(t,["baseModel"]);p!=null&&c(n,["baseModel"],p);const m=a(t,["_self"]);return m!=null&&c(n,["tunedModel"],Z2(m)),n}function bd(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["state"]);o!=null&&c(n,["state"],oC(o));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(n,["endTime"],u);const d=a(t,["updateTime"]);d!=null&&c(n,["updateTime"],d);const h=a(t,["error"]);h!=null&&c(n,["error"],h);const p=a(t,["description"]);p!=null&&c(n,["description"],p);const m=a(t,["baseModel"]);m!=null&&c(n,["baseModel"],m);const _=a(t,["tunedModel"]);_!=null&&c(n,["tunedModel"],_);const w=a(t,["preTunedModel"]);w!=null&&c(n,["preTunedModel"],w);const x=a(t,["supervisedTuningSpec"]);x!=null&&c(n,["supervisedTuningSpec"],x);const k=a(t,["preferenceOptimizationSpec"]);k!=null&&c(n,["preferenceOptimizationSpec"],k);const I=a(t,["tuningDataStats"]);I!=null&&c(n,["tuningDataStats"],I);const E=a(t,["encryptionSpec"]);E!=null&&c(n,["encryptionSpec"],E);const C=a(t,["partnerModelTuningSpec"]);C!=null&&c(n,["partnerModelTuningSpec"],C);const V=a(t,["customBaseModel"]);V!=null&&c(n,["customBaseModel"],V);const U=a(t,["experiment"]);U!=null&&c(n,["experiment"],U);const O=a(t,["labels"]);O!=null&&c(n,["labels"],O);const A=a(t,["outputUri"]);A!=null&&c(n,["outputUri"],A);const T=a(t,["pipelineJob"]);T!=null&&c(n,["pipelineJob"],T);const S=a(t,["serviceAccount"]);S!=null&&c(n,["serviceAccount"],S);const R=a(t,["tunedModelDisplayName"]);R!=null&&c(n,["tunedModelDisplayName"],R);const M=a(t,["veoTuningSpec"]);return M!=null&&c(n,["veoTuningSpec"],M),n}function tF(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["metadata"]);o!=null&&c(n,["metadata"],o);const s=a(t,["done"]);s!=null&&c(n,["done"],s);const l=a(t,["error"]);return l!=null&&c(n,["error"],l),n}function M_(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["validationDatasetUri"],r);const i=a(t,["vertexDatasetResource"]);return i!=null&&c(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nF extends wn{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Zr(Sn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Ld.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=$2(e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>bd(h))}else{const d=z2(e);return l=z("{name}",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>SC(h))}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const d=Q2(e);return l=z("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=X2(h),m=new c_;return Object.assign(m,p),m})}else{const d=K2(e);return l=z("tunedModels",d._url),u=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=Y2(h),m=new c_;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const u=B2(e);s=z("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=O2(e);s=z("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=H2(e,e);return o=z("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>bd(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=b2(e);return o=z("tunedModels",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>tF(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rF{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const iF=1024*1024*8,oF=3,sF=1e3,lF=2,xa="x-goog-upload-status";async function aF(t,e,n){var r;const i=await AC(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[xa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function uF(t,e,n){var r;const i=await AC(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[xa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=jI(o),l=new Ph;return Object.assign(l,s),l}async function AC(t,e,n){var r,i;let o=0,s=0,l=new Fd(new Response),u="upload";for(o=t.size;s<o;){const d=Math.min(iF,o-s),h=t.slice(s,s+d);s+d>=o&&(u+=", finalize");let p=0,m=sF;for(;p<oF&&(l=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[xa]));)p++,await dF(m),m=m*lF;if(s+=d,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[xa])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function cF(t){return{size:t.size,type:t.type}}function dF(t){return new Promise(e=>setTimeout(e,t))}class fF{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await aF(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uF(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cF(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hF{create(e,n,r){return new pF(e,n,r)}}class pF{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k_="x-goog-api-key";class mF{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(k_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(k_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gF="gl-node/";class yF{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=J1(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new mF(this.apiKey);this.apiClient=new kL({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:gF+"web",uploader:new fF,downloader:new rF}),this.models=new XL(this.apiClient),this.live=new $L(this.apiClient,i,new hF),this.batches=new Ik(this.apiClient),this.chats=new rD(this.models,this.apiClient),this.caches=new eD(this.apiClient),this.files=new hD(this.apiClient),this.operations=new ZL(this.apiClient),this.authTokens=new p2(this.apiClient),this.tunings=new nF(this.apiClient),this.fileSearchStores=new U2(this.apiClient)}}const _F=new yF({apiKey:"AIzaSyB7psCDQy1fx6JRlkVOF_dez0ngOul724U"}),D_="gemini-2.5-flash",V_=3,vF=()=>{const[t,e]=b.useState(""),[n,r]=b.useState("Ask the AI model about anything."),[i,o]=b.useState(!1),s=async()=>{if(!(!t.trim()||i)){o(!0),r("Thinking...");for(let u=1;u<=V_;u++)try{const d=await _F.models.generateContentStream({model:D_,contents:[{role:"user",parts:[{text:t}]}]});let h="";for await(const p of d)h+=p.text,r(h);o(!1);return}catch(d){console.error(`AI API Error (Attempt ${u}):`,d);const h=d.message.includes('"code": 503');if(h&&u<V_){const p=Math.pow(2,u)*1e3;r(`Service temporarily overloaded. Retrying in ${p/1e3}s...`),await new Promise(m=>setTimeout(m,p))}else{r(h?"Failed after multiple retries. Try again later.":"An unrecoverable API error occurred. Check the console."),o(!1);return}}o(!1)}},l=u=>{u.key==="Enter"&&!i&&s()};return P.jsxs("div",{className:"ai-container",children:[P.jsx("h1",{children:" Generative AI Question Answering"}),P.jsxs("div",{className:"input-area",children:[P.jsx("input",{type:"text",value:t,onChange:u=>e(u.target.value),onKeyPress:l,placeholder:"E.g., What is the difference between React and Vue?",disabled:i,"aria-label":"Enter your question for the AI model"}),P.jsx("button",{onClick:s,disabled:i,className:"ai-button",children:i?"Asking...":"Ask AI"})]}),P.jsx("div",{className:`response-box ${i?"loading":""}`,children:P.jsx("p",{className:"response-text",children:n})}),P.jsxs("p",{className:"note",children:["Note: This feature uses a fast, specialized language model (",D_,")."]})]})},Hd="mrdoob",EF=`https://api.github.com/users/${Hd}/repos`,TF=({repo:t})=>{const e=t.language||"Documentation",n=e.toLowerCase().replace(/[#.+]/g,""),r=t.stargazers_count>=5;return P.jsxs("div",{className:`project-card ${r?"featured":""}`,children:[P.jsx("h3",{className:"project-title",children:t.name.replace(/-/g," ")}),P.jsx("p",{className:"project-description",children:t.description||"No description provided."}),P.jsxs("div",{className:"project-meta",children:[P.jsx("span",{className:`language-tag ${n}`,children:e}),P.jsxs("span",{className:"star-count",children:[" ",t.stargazers_count," Stars"]})]}),P.jsxs("div",{className:"project-links",children:[P.jsx("a",{href:t.html_url,target:"_blank",rel:"noopener noreferrer","aria-label":`View code for ${t.name} on GitHub`,children:P.jsx("i",{className:"link-icon",children:"Code"})}),t.homepage&&P.jsx("a",{href:t.homepage,target:"_blank",rel:"noopener noreferrer","aria-label":`View live demo for ${t.name}`,children:P.jsx("i",{className:"link-icon",children:"Demo"})})]})]})};function IF(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,o]=b.useState(null);return b.useEffect(()=>{(async()=>{try{const l=await fetch(EF);if(!l.ok)throw l.status===403?new Error("GitHub API Rate Limit Exceeded. Try again in an hour."):new Error(`GitHub API returned status: ${l.status}`);const d=(await l.json()).filter(h=>!h.fork&&h.stargazers_count>0&&h.description).sort((h,p)=>p.stargazers_count-h.stargazers_count);e(d)}catch(l){console.error("Failed to fetch GitHub projects:",l),o(l.message)}finally{r(!1)}})()},[]),P.jsxs("section",{id:"projects",className:"projects-section","aria-labelledby":"projects-title",children:[P.jsxs("h2",{id:"projects-title",className:"section-title",children:[P.jsx("span",{className:"number"})," Projects & Open Source"]}),P.jsxs("div",{className:"projects-list-container",children:[n&&P.jsx("p",{className:"status-message",children:"Loading projects from GitHub..."}),i&&P.jsxs("div",{className:"error-message",children:[P.jsxs("p",{children:["Error fetching projects: **",i,"**"]}),P.jsx("p",{children:"If this error persists, the GitHub API rate limit may be exceeded. Please try again later."})]}),!n&&t.length===0&&!i&&P.jsxs("div",{className:"status-message",children:[P.jsx("p",{children:"No high-quality, non-forked repositories found. I'm busy coding a new one!"}),P.jsx("a",{href:`https://github.com/${Hd}?tab=repositories`,target:"_blank",rel:"noopener noreferrer",className:"cta-button secondary",children:"View All Repositories on GitHub"})]}),P.jsx("div",{className:"project-grid",children:t.map(s=>P.jsx(TF,{repo:s},s.id))})]}),!n&&t.length>0&&P.jsxs("div",{className:"projects-footer-cta",children:[P.jsx("p",{children:"Want to see more of my code?"}),P.jsx("a",{href:`https://github.com/${Hd}`,target:"_blank",rel:"noopener noreferrer",className:"cta-button primary",children:"Visit My Full GitHub Profile"})]})]})}function CF(){const[t,e]=b.useState(!1),[n,r]=b.useState(""),[i,o]=b.useState([]),[s,l]=b.useState(!0),u=h=>{h.preventDefault(),n==="PANKAJ-ADMIN-2025"?e(!0):alert("Access Denied! Incorrect Password.")};b.useEffect(()=>{if(!t)return;const h=$I(Aa(xs,"clients"),WI("timestamp","desc")),p=YI(h,m=>{const _=m.docs.map(w=>({id:w.id,...w.data()}));o(_),l(!1)});return()=>p()},[t]);const d=async h=>{window.confirm("Are you sure you want to delete this record?")&&await U1(LI(xs,"clients",h))};return t?s?P.jsx("div",{className:"admin-dashboard",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:P.jsx("h2",{style:{color:"#64ffda"},children:"Loading Leads..."})}):P.jsxs("div",{className:"admin-dashboard",children:[P.jsxs("div",{className:"admin-header",children:[P.jsx("h2",{children:"Admin Dashboard"}),P.jsx("button",{className:"logout-btn",onClick:()=>e(!1),children:"Logout"})]}),P.jsxs("p",{className:"status-text",children:["Total Leads: ",i.length]}),P.jsx("div",{className:"table-responsive",children:P.jsxs("table",{className:"client-table",children:[P.jsx("thead",{children:P.jsxs("tr",{children:[P.jsx("th",{children:"Date"}),P.jsx("th",{children:"Name"}),P.jsx("th",{children:"Mobile"}),P.jsx("th",{children:"Email"}),P.jsx("th",{children:"Company"}),P.jsx("th",{children:"Message"}),P.jsx("th",{children:"Action"})]})}),P.jsxs("tbody",{children:[i.map(h=>{var p;return P.jsxs("tr",{children:[P.jsx("td",{children:(p=h.timestamp)!=null&&p.seconds?new Date(h.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),P.jsx("td",{children:h.name}),P.jsx("td",{children:h.mobile}),P.jsx("td",{children:h.email}),P.jsx("td",{children:h.company||"-"}),P.jsx("td",{children:h.message}),P.jsx("td",{children:P.jsx("button",{className:"delete-btn",onClick:()=>d(h.id),children:"Delete"})})]},h.id)}),i.length===0&&P.jsx("tr",{children:P.jsx("td",{colSpan:"7",style:{textAlign:"center",color:"#8892b0",padding:"20px"},children:"No leads found yet."})})]})]})})]}):P.jsx("div",{className:"admin-login-container",children:P.jsxs("div",{className:"admin-login-card",children:[P.jsx("h2",{children:" Owner Access Only"}),P.jsxs("form",{onSubmit:u,children:[P.jsx("input",{type:"password",placeholder:"Enter Admin Password",value:n,onChange:h=>r(h.target.value),className:"admin-input"}),P.jsx("button",{type:"submit",className:"admin-btn",children:"Login"})]})]})})}function SF(){return P.jsxs("div",{className:"App",children:[P.jsx(V0,{}),P.jsx("main",{children:P.jsxs(I0,{children:[P.jsx(dn,{path:"/",element:P.jsx(L0,{})}),P.jsx(dn,{path:"/about",element:P.jsx(G1,{})}),P.jsx(dn,{path:"/skill",element:P.jsx(H1,{})}),P.jsx(dn,{path:"/projects",element:P.jsx(IF,{})}),P.jsx(dn,{path:"/contact",element:P.jsx(b1,{})}),P.jsx(dn,{path:"*",element:P.jsx("div",{children:"404 Page Not Found"})}),P.jsx(dn,{path:"/ai-answer",element:P.jsx(vF,{})}),P.jsx(dn,{path:"/admin",element:P.jsx(CF,{})})]})}),P.jsx(U0,{})]})}gc.createRoot(document.getElementById("root")).render(P.jsx($_.StrictMode,{children:P.jsx(N0,{future:{v7_relativeSplatPath:!0,v7_startTransition:!0},children:P.jsx(SF,{})})}));
