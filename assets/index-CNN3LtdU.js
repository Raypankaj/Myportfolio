function CS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function IS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var X_={exports:{}},Fa={},Z_={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),SS=Symbol.for("react.portal"),wS=Symbol.for("react.fragment"),AS=Symbol.for("react.strict_mode"),RS=Symbol.for("react.profiler"),PS=Symbol.for("react.provider"),NS=Symbol.for("react.context"),xS=Symbol.for("react.forward_ref"),kS=Symbol.for("react.suspense"),MS=Symbol.for("react.memo"),DS=Symbol.for("react.lazy"),Kp=Symbol.iterator;function VS(t){return t===null||typeof t!="object"?null:(t=Kp&&t[Kp]||t["@@iterator"],typeof t=="function"?t:null)}var j_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ev=Object.assign,tv={};function Yi(t,e,n){this.props=t,this.context=e,this.refs=tv,this.updater=n||j_}Yi.prototype.isReactComponent={};Yi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nv(){}nv.prototype=Yi.prototype;function of(t,e,n){this.props=t,this.context=e,this.refs=tv,this.updater=n||j_}var sf=of.prototype=new nv;sf.constructor=of;ev(sf,Yi.prototype);sf.isPureReactComponent=!0;var Qp=Array.isArray,rv=Object.prototype.hasOwnProperty,lf={current:null},iv={key:!0,ref:!0,__self:!0,__source:!0};function ov(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)rv.call(e,r)&&!iv.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ds,type:t,key:o,ref:s,props:i,_owner:lf.current}}function LS(t,e){return{$$typeof:Ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function af(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ds}function FS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Yp=/\/+/g;function zu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FS(""+t.key):e.toString(36)}function Al(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ds:case SS:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+zu(s,0):r,Qp(i)?(n="",t!=null&&(n=t.replace(Yp,"$&/")+"/"),Al(i,e,n,"",function(c){return c})):i!=null&&(af(i)&&(i=LS(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Yp,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Qp(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+zu(o,l);s+=Al(o,e,n,u,i)}else if(u=VS(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+zu(o,l++),s+=Al(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function il(t,e,n){if(t==null)return t;var r=[],i=0;return Al(t,r,"","",function(o){return e.call(n,o,i++)}),r}function US(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},Rl={transition:null},OS={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:Rl,ReactCurrentOwner:lf};function sv(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:il,forEach:function(t,e,n){il(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return il(t,function(){e++}),e},toArray:function(t){return il(t,function(e){return e})||[]},only:function(t){if(!af(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Yi;ne.Fragment=wS;ne.Profiler=RS;ne.PureComponent=of;ne.StrictMode=AS;ne.Suspense=kS;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OS;ne.act=sv;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ev({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=lf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)rv.call(e,u)&&!iv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Ds,type:t.type,key:i,ref:o,props:r,_owner:s}};ne.createContext=function(t){return t={$$typeof:NS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PS,_context:t},t.Consumer=t};ne.createElement=ov;ne.createFactory=function(t){var e=ov.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:xS,render:t}};ne.isValidElement=af;ne.lazy=function(t){return{$$typeof:DS,_payload:{_status:-1,_result:t},_init:US}};ne.memo=function(t,e){return{$$typeof:MS,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=Rl.transition;Rl.transition={};try{t()}finally{Rl.transition=e}};ne.unstable_act=sv;ne.useCallback=function(t,e){return ht.current.useCallback(t,e)};ne.useContext=function(t){return ht.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};ne.useEffect=function(t,e){return ht.current.useEffect(t,e)};ne.useId=function(){return ht.current.useId()};ne.useImperativeHandle=function(t,e,n){return ht.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return ht.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return ht.current.useReducer(t,e,n)};ne.useRef=function(t){return ht.current.useRef(t)};ne.useState=function(t){return ht.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return ht.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return ht.current.useTransition()};ne.version="18.3.1";Z_.exports=ne;var q=Z_.exports;const lv=IS(q),bS=CS({__proto__:null,default:lv},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS=q,qS=Symbol.for("react.element"),GS=Symbol.for("react.fragment"),HS=Object.prototype.hasOwnProperty,zS=BS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$S={key:!0,ref:!0,__self:!0,__source:!0};function av(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)HS.call(e,r)&&!$S.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qS,type:t,key:o,ref:s,props:i,_owner:zS.current}}Fa.Fragment=GS;Fa.jsx=av;Fa.jsxs=av;X_.exports=Fa;var T=X_.exports,Ac={},uv={exports:{}},Nt={},cv={exports:{}},dv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,X){var ee=W.length;W.push(X);e:for(;0<ee;){var ve=ee-1>>>1,Pe=W[ve];if(0<i(Pe,X))W[ve]=X,W[ee]=Pe,ee=ve;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var X=W[0],ee=W.pop();if(ee!==X){W[0]=ee;e:for(var ve=0,Pe=W.length,Sr=Pe>>>1;ve<Sr;){var kt=2*(ve+1)-1,wr=W[kt],Bt=kt+1,Mn=W[Bt];if(0>i(wr,ee))Bt<Pe&&0>i(Mn,wr)?(W[ve]=Mn,W[Bt]=ee,ve=Bt):(W[ve]=wr,W[kt]=ee,ve=kt);else if(Bt<Pe&&0>i(Mn,ee))W[ve]=Mn,W[Bt]=ee,ve=Bt;else break e}}return X}function i(W,X){var ee=W.sortIndex-X.sortIndex;return ee!==0?ee:W.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,p=null,m=3,_=!1,R=!1,x=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(W){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=W)r(c),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(c)}}function V(W){if(x=!1,A(W),!R)if(n(u)!==null)R=!0,at(F);else{var X=n(c);X!==null&&hn(V,X.startTime-W)}}function F(W,X){R=!1,x&&(x=!1,w(E),E=-1),_=!0;var ee=m;try{for(A(X),p=n(u);p!==null&&(!(p.expirationTime>X)||W&&!k());){var ve=p.callback;if(typeof ve=="function"){p.callback=null,m=p.priorityLevel;var Pe=ve(p.expirationTime<=X);X=t.unstable_now(),typeof Pe=="function"?p.callback=Pe:p===n(u)&&r(u),A(X)}else r(u);p=n(u)}if(p!==null)var Sr=!0;else{var kt=n(c);kt!==null&&hn(V,kt.startTime-X),Sr=!1}return Sr}finally{p=null,m=ee,_=!1}}var O=!1,v=null,E=-1,S=5,P=-1;function k(){return!(t.unstable_now()-P<S)}function D(){if(v!==null){var W=t.unstable_now();P=W;var X=!0;try{X=v(!0,W)}finally{X?N():(O=!1,v=null)}}else O=!1}var N;if(typeof I=="function")N=function(){I(D)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,mt=we.port2;we.port1.onmessage=D,N=function(){mt.postMessage(null)}}else N=function(){M(D,0)};function at(W){v=W,O||(O=!0,N())}function hn(W,X){E=M(function(){W(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){R||_||(R=!0,at(F))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var ee=m;m=X;try{return W()}finally{m=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,X){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ee=m;m=W;try{return X()}finally{m=ee}},t.unstable_scheduleCallback=function(W,X,ee){var ve=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ve+ee:ve):ee=ve,W){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ee+Pe,W={id:h++,callback:X,priorityLevel:W,startTime:ee,expirationTime:Pe,sortIndex:-1},ee>ve?(W.sortIndex=ee,e(c,W),n(u)===null&&W===n(c)&&(x?(w(E),E=-1):x=!0,hn(V,ee-ve))):(W.sortIndex=Pe,e(u,W),R||_||(R=!0,at(F))),W},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(W){var X=m;return function(){var ee=m;m=X;try{return W.apply(this,arguments)}finally{m=ee}}}})(dv);cv.exports=dv;var WS=cv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JS=q,Pt=WS;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fv=new Set,rs={};function Yr(t,e){Ui(t,e),Ui(t+"Capture",e)}function Ui(t,e){for(rs[t]=e,t=0;t<e.length;t++)fv.add(e[t])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rc=Object.prototype.hasOwnProperty,KS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xp={},Zp={};function QS(t){return Rc.call(Zp,t)?!0:Rc.call(Xp,t)?!1:KS.test(t)?Zp[t]=!0:(Xp[t]=!0,!1)}function YS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XS(t,e,n,r){if(e===null||typeof e>"u"||YS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ye[t]=new pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ye[e]=new pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ye[t]=new pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ye[t]=new pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ye[t]=new pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ye[t]=new pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ye[t]=new pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ye[t]=new pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ye[t]=new pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var uf=/[\-:]([a-z])/g;function cf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uf,cf);Ye[e]=new pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uf,cf);Ye[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uf,cf);Ye[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ye[t]=new pt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ye[t]=new pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function df(t,e,n,r){var i=Ye.hasOwnProperty(e)?Ye[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XS(e,n,i,r)&&(n=null),r||i===null?QS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Nn=JS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ol=Symbol.for("react.element"),fi=Symbol.for("react.portal"),hi=Symbol.for("react.fragment"),ff=Symbol.for("react.strict_mode"),Pc=Symbol.for("react.profiler"),hv=Symbol.for("react.provider"),pv=Symbol.for("react.context"),hf=Symbol.for("react.forward_ref"),Nc=Symbol.for("react.suspense"),xc=Symbol.for("react.suspense_list"),pf=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),mv=Symbol.for("react.offscreen"),jp=Symbol.iterator;function wo(t){return t===null||typeof t!="object"?null:(t=jp&&t[jp]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,$u;function Vo(t){if($u===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$u=e&&e[1]||""}return`
`+$u+t}var Wu=!1;function Ju(t,e){if(!t||Wu)return"";Wu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{Wu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vo(t):""}function ZS(t){switch(t.tag){case 5:return Vo(t.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 2:case 15:return t=Ju(t.type,!1),t;case 11:return t=Ju(t.type.render,!1),t;case 1:return t=Ju(t.type,!0),t;default:return""}}function kc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hi:return"Fragment";case fi:return"Portal";case Pc:return"Profiler";case ff:return"StrictMode";case Nc:return"Suspense";case xc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pv:return(t.displayName||"Context")+".Consumer";case hv:return(t._context.displayName||"Context")+".Provider";case hf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pf:return e=t.displayName||null,e!==null?e:kc(t.type)||"Memo";case Bn:e=t._payload,t=t._init;try{return kc(t(e))}catch{}}return null}function jS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kc(e);case 8:return e===ff?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ew(t){var e=gv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sl(t){t._valueTracker||(t._valueTracker=ew(t))}function yv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mc(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function em(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _v(t,e){e=e.checked,e!=null&&df(t,"checked",e,!1)}function Dc(t,e){_v(t,e);var n=ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vc(t,e.type,ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vc(t,e,n){(e!=="number"||Jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lo=Array.isArray;function wi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ur(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Lc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Lo(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ur(n)}}function vv(t,e){var n=ur(e.value),r=ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ev(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ev(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ll,Tv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ll=ll||document.createElement("div"),ll.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ll.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function is(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tw=["Webkit","ms","Moz","O"];Object.keys(Go).forEach(function(t){tw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Go[e]=Go[t]})});function Cv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Go.hasOwnProperty(t)&&Go[t]?(""+e).trim():e+"px"}function Iv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Cv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nw=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uc(t,e){if(e){if(nw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Oc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bc=null;function mf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bc=null,Ai=null,Ri=null;function im(t){if(t=Fs(t)){if(typeof Bc!="function")throw Error(G(280));var e=t.stateNode;e&&(e=qa(e),Bc(t.stateNode,t.type,e))}}function Sv(t){Ai?Ri?Ri.push(t):Ri=[t]:Ai=t}function wv(){if(Ai){var t=Ai,e=Ri;if(Ri=Ai=null,im(t),e)for(t=0;t<e.length;t++)im(e[t])}}function Av(t,e){return t(e)}function Rv(){}var Ku=!1;function Pv(t,e,n){if(Ku)return t(e,n);Ku=!0;try{return Av(t,e,n)}finally{Ku=!1,(Ai!==null||Ri!==null)&&(Rv(),wv())}}function os(t,e){var n=t.stateNode;if(n===null)return null;var r=qa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var qc=!1;if(Tn)try{var Ao={};Object.defineProperty(Ao,"passive",{get:function(){qc=!0}}),window.addEventListener("test",Ao,Ao),window.removeEventListener("test",Ao,Ao)}catch{qc=!1}function rw(t,e,n,r,i,o,s,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ho=!1,Kl=null,Ql=!1,Gc=null,iw={onError:function(t){Ho=!0,Kl=t}};function ow(t,e,n,r,i,o,s,l,u){Ho=!1,Kl=null,rw.apply(iw,arguments)}function sw(t,e,n,r,i,o,s,l,u){if(ow.apply(this,arguments),Ho){if(Ho){var c=Kl;Ho=!1,Kl=null}else throw Error(G(198));Ql||(Ql=!0,Gc=c)}}function Xr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function om(t){if(Xr(t)!==t)throw Error(G(188))}function lw(t){var e=t.alternate;if(!e){if(e=Xr(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return om(i),t;if(o===r)return om(i),e;o=o.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function xv(t){return t=lw(t),t!==null?kv(t):null}function kv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kv(t);if(e!==null)return e;t=t.sibling}return null}var Mv=Pt.unstable_scheduleCallback,sm=Pt.unstable_cancelCallback,aw=Pt.unstable_shouldYield,uw=Pt.unstable_requestPaint,xe=Pt.unstable_now,cw=Pt.unstable_getCurrentPriorityLevel,gf=Pt.unstable_ImmediatePriority,Dv=Pt.unstable_UserBlockingPriority,Yl=Pt.unstable_NormalPriority,dw=Pt.unstable_LowPriority,Vv=Pt.unstable_IdlePriority,Ua=null,rn=null;function fw(t){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Ua,t,void 0,(t.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:mw,hw=Math.log,pw=Math.LN2;function mw(t){return t>>>=0,t===0?32:31-(hw(t)/pw|0)|0}var al=64,ul=4194304;function Fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Fo(l):(o&=s,o!==0&&(r=Fo(o)))}else s=n&~i,s!==0?r=Fo(s):o!==0&&(r=Fo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$t(e),i=1<<n,r|=t[n],e&=~i;return r}function gw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-$t(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=gw(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Hc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Lv(){var t=al;return al<<=1,!(al&4194240)&&(al=64),t}function Qu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$t(e),t[e]=n}function _w(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-$t(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function yf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$t(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ce=0;function Fv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Uv,_f,Ov,bv,Bv,zc=!1,cl=[],Qn=null,Yn=null,Xn=null,ss=new Map,ls=new Map,Gn=[],vw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lm(t,e){switch(t){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":ss.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ls.delete(e.pointerId)}}function Ro(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Fs(e),e!==null&&_f(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ew(t,e,n,r,i){switch(e){case"focusin":return Qn=Ro(Qn,t,e,n,r,i),!0;case"dragenter":return Yn=Ro(Yn,t,e,n,r,i),!0;case"mouseover":return Xn=Ro(Xn,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ss.set(o,Ro(ss.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ls.set(o,Ro(ls.get(o)||null,t,e,n,r,i)),!0}return!1}function qv(t){var e=Vr(t.target);if(e!==null){var n=Xr(e);if(n!==null){if(e=n.tag,e===13){if(e=Nv(n),e!==null){t.blockedOn=e,Bv(t.priority,function(){Ov(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$c(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bc=r,n.target.dispatchEvent(r),bc=null}else return e=Fs(n),e!==null&&_f(e),t.blockedOn=n,!1;e.shift()}return!0}function am(t,e,n){Pl(t)&&n.delete(e)}function Tw(){zc=!1,Qn!==null&&Pl(Qn)&&(Qn=null),Yn!==null&&Pl(Yn)&&(Yn=null),Xn!==null&&Pl(Xn)&&(Xn=null),ss.forEach(am),ls.forEach(am)}function Po(t,e){t.blockedOn===e&&(t.blockedOn=null,zc||(zc=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,Tw)))}function as(t){function e(i){return Po(i,t)}if(0<cl.length){Po(cl[0],t);for(var n=1;n<cl.length;n++){var r=cl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qn!==null&&Po(Qn,t),Yn!==null&&Po(Yn,t),Xn!==null&&Po(Xn,t),ss.forEach(e),ls.forEach(e),n=0;n<Gn.length;n++)r=Gn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gn.length&&(n=Gn[0],n.blockedOn===null);)qv(n),n.blockedOn===null&&Gn.shift()}var Pi=Nn.ReactCurrentBatchConfig,Zl=!0;function Cw(t,e,n,r){var i=ce,o=Pi.transition;Pi.transition=null;try{ce=1,vf(t,e,n,r)}finally{ce=i,Pi.transition=o}}function Iw(t,e,n,r){var i=ce,o=Pi.transition;Pi.transition=null;try{ce=4,vf(t,e,n,r)}finally{ce=i,Pi.transition=o}}function vf(t,e,n,r){if(Zl){var i=$c(t,e,n,r);if(i===null)oc(t,e,r,jl,n),lm(t,r);else if(Ew(i,t,e,n,r))r.stopPropagation();else if(lm(t,r),e&4&&-1<vw.indexOf(t)){for(;i!==null;){var o=Fs(i);if(o!==null&&Uv(o),o=$c(t,e,n,r),o===null&&oc(t,e,r,jl,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else oc(t,e,r,null,n)}}var jl=null;function $c(t,e,n,r){if(jl=null,t=mf(r),t=Vr(t),t!==null)if(e=Xr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jl=t,null}function Gv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cw()){case gf:return 1;case Dv:return 4;case Yl:case dw:return 16;case Vv:return 536870912;default:return 16}default:return 16}}var zn=null,Ef=null,Nl=null;function Hv(){if(Nl)return Nl;var t,e=Ef,n=e.length,r,i="value"in zn?zn.value:zn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Nl=i.slice(t,1<r?1-r:void 0)}function xl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dl(){return!0}function um(){return!1}function xt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?dl:um,this.isPropagationStopped=um,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),e}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tf=xt(Xi),Ls=Ie({},Xi,{view:0,detail:0}),Sw=xt(Ls),Yu,Xu,No,Oa=Ie({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==No&&(No&&t.type==="mousemove"?(Yu=t.screenX-No.screenX,Xu=t.screenY-No.screenY):Xu=Yu=0,No=t),Yu)},movementY:function(t){return"movementY"in t?t.movementY:Xu}}),cm=xt(Oa),ww=Ie({},Oa,{dataTransfer:0}),Aw=xt(ww),Rw=Ie({},Ls,{relatedTarget:0}),Zu=xt(Rw),Pw=Ie({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Nw=xt(Pw),xw=Ie({},Xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kw=xt(xw),Mw=Ie({},Xi,{data:0}),dm=xt(Mw),Dw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Lw[t])?!!e[t]:!1}function Cf(){return Fw}var Uw=Ie({},Ls,{key:function(t){if(t.key){var e=Dw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cf,charCode:function(t){return t.type==="keypress"?xl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ow=xt(Uw),bw=Ie({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fm=xt(bw),Bw=Ie({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cf}),qw=xt(Bw),Gw=Ie({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hw=xt(Gw),zw=Ie({},Oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$w=xt(zw),Ww=[9,13,27,32],If=Tn&&"CompositionEvent"in window,zo=null;Tn&&"documentMode"in document&&(zo=document.documentMode);var Jw=Tn&&"TextEvent"in window&&!zo,zv=Tn&&(!If||zo&&8<zo&&11>=zo),hm=" ",pm=!1;function $v(t,e){switch(t){case"keyup":return Ww.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pi=!1;function Kw(t,e){switch(t){case"compositionend":return Wv(e);case"keypress":return e.which!==32?null:(pm=!0,hm);case"textInput":return t=e.data,t===hm&&pm?null:t;default:return null}}function Qw(t,e){if(pi)return t==="compositionend"||!If&&$v(t,e)?(t=Hv(),Nl=Ef=zn=null,pi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zv&&e.locale!=="ko"?null:e.data;default:return null}}var Yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yw[t.type]:e==="textarea"}function Jv(t,e,n,r){Sv(r),e=ea(e,"onChange"),0<e.length&&(n=new Tf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $o=null,us=null;function Xw(t){iE(t,0)}function ba(t){var e=yi(t);if(yv(e))return t}function Zw(t,e){if(t==="change")return e}var Kv=!1;if(Tn){var ju;if(Tn){var ec="oninput"in document;if(!ec){var gm=document.createElement("div");gm.setAttribute("oninput","return;"),ec=typeof gm.oninput=="function"}ju=ec}else ju=!1;Kv=ju&&(!document.documentMode||9<document.documentMode)}function ym(){$o&&($o.detachEvent("onpropertychange",Qv),us=$o=null)}function Qv(t){if(t.propertyName==="value"&&ba(us)){var e=[];Jv(e,us,t,mf(t)),Pv(Xw,e)}}function jw(t,e,n){t==="focusin"?(ym(),$o=e,us=n,$o.attachEvent("onpropertychange",Qv)):t==="focusout"&&ym()}function eA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ba(us)}function tA(t,e){if(t==="click")return ba(e)}function nA(t,e){if(t==="input"||t==="change")return ba(e)}function rA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kt=typeof Object.is=="function"?Object.is:rA;function cs(t,e){if(Kt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Rc.call(e,i)||!Kt(t[i],e[i]))return!1}return!0}function _m(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vm(t,e){var n=_m(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_m(n)}}function Yv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Yv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xv(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jl(t.document)}return e}function Sf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iA(t){var e=Xv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Yv(n.ownerDocument.documentElement,n)){if(r!==null&&Sf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=vm(n,o);var s=vm(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oA=Tn&&"documentMode"in document&&11>=document.documentMode,mi=null,Wc=null,Wo=null,Jc=!1;function Em(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jc||mi==null||mi!==Jl(r)||(r=mi,"selectionStart"in r&&Sf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wo&&cs(Wo,r)||(Wo=r,r=ea(Wc,"onSelect"),0<r.length&&(e=new Tf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mi)))}function fl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gi={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionend:fl("Transition","TransitionEnd")},tc={},Zv={};Tn&&(Zv=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function Ba(t){if(tc[t])return tc[t];if(!gi[t])return t;var e=gi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zv)return tc[t]=e[n];return t}var jv=Ba("animationend"),eE=Ba("animationiteration"),tE=Ba("animationstart"),nE=Ba("transitionend"),rE=new Map,Tm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(t,e){rE.set(t,e),Yr(e,[t])}for(var nc=0;nc<Tm.length;nc++){var rc=Tm[nc],sA=rc.toLowerCase(),lA=rc[0].toUpperCase()+rc.slice(1);yr(sA,"on"+lA)}yr(jv,"onAnimationEnd");yr(eE,"onAnimationIteration");yr(tE,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(nE,"onTransitionEnd");Ui("onMouseEnter",["mouseout","mouseover"]);Ui("onMouseLeave",["mouseout","mouseover"]);Ui("onPointerEnter",["pointerout","pointerover"]);Ui("onPointerLeave",["pointerout","pointerover"]);Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function Cm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sw(r,e,void 0,t),t.currentTarget=null}function iE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;Cm(i,l,c),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;Cm(i,l,c),o=u}}}if(Ql)throw t=Gc,Ql=!1,Gc=null,t}function me(t,e){var n=e[Zc];n===void 0&&(n=e[Zc]=new Set);var r=t+"__bubble";n.has(r)||(oE(e,t,2,!1),n.add(r))}function ic(t,e,n){var r=0;e&&(r|=4),oE(n,t,r,e)}var hl="_reactListening"+Math.random().toString(36).slice(2);function ds(t){if(!t[hl]){t[hl]=!0,fv.forEach(function(n){n!=="selectionchange"&&(aA.has(n)||ic(n,!1,t),ic(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hl]||(e[hl]=!0,ic("selectionchange",!1,e))}}function oE(t,e,n,r){switch(Gv(e)){case 1:var i=Cw;break;case 4:i=Iw;break;default:i=vf}n=i.bind(null,e,n,t),i=void 0,!qc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function oc(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Vr(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Pv(function(){var c=o,h=mf(n),p=[];e:{var m=rE.get(t);if(m!==void 0){var _=Tf,R=t;switch(t){case"keypress":if(xl(n)===0)break e;case"keydown":case"keyup":_=Ow;break;case"focusin":R="focus",_=Zu;break;case"focusout":R="blur",_=Zu;break;case"beforeblur":case"afterblur":_=Zu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=cm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=Aw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=qw;break;case jv:case eE:case tE:_=Nw;break;case nE:_=Hw;break;case"scroll":_=Sw;break;case"wheel":_=$w;break;case"copy":case"cut":case"paste":_=kw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=fm}var x=(e&4)!==0,M=!x&&t==="scroll",w=x?m!==null?m+"Capture":null:m;x=[];for(var I=c,A;I!==null;){A=I;var V=A.stateNode;if(A.tag===5&&V!==null&&(A=V,w!==null&&(V=os(I,w),V!=null&&x.push(fs(I,V,A)))),M)break;I=I.return}0<x.length&&(m=new _(m,R,null,n,h),p.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==bc&&(R=n.relatedTarget||n.fromElement)&&(Vr(R)||R[Cn]))break e;if((_||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,_?(R=n.relatedTarget||n.toElement,_=c,R=R?Vr(R):null,R!==null&&(M=Xr(R),R!==M||R.tag!==5&&R.tag!==6)&&(R=null)):(_=null,R=c),_!==R)){if(x=cm,V="onMouseLeave",w="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(x=fm,V="onPointerLeave",w="onPointerEnter",I="pointer"),M=_==null?m:yi(_),A=R==null?m:yi(R),m=new x(V,I+"leave",_,n,h),m.target=M,m.relatedTarget=A,V=null,Vr(h)===c&&(x=new x(w,I+"enter",R,n,h),x.target=A,x.relatedTarget=M,V=x),M=V,_&&R)t:{for(x=_,w=R,I=0,A=x;A;A=li(A))I++;for(A=0,V=w;V;V=li(V))A++;for(;0<I-A;)x=li(x),I--;for(;0<A-I;)w=li(w),A--;for(;I--;){if(x===w||w!==null&&x===w.alternate)break t;x=li(x),w=li(w)}x=null}else x=null;_!==null&&Im(p,m,_,x,!1),R!==null&&M!==null&&Im(p,M,R,x,!0)}}e:{if(m=c?yi(c):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var F=Zw;else if(mm(m))if(Kv)F=nA;else{F=eA;var O=jw}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(F=tA);if(F&&(F=F(t,c))){Jv(p,F,n,h);break e}O&&O(t,m,c),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&Vc(m,"number",m.value)}switch(O=c?yi(c):window,t){case"focusin":(mm(O)||O.contentEditable==="true")&&(mi=O,Wc=c,Wo=null);break;case"focusout":Wo=Wc=mi=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,Em(p,n,h);break;case"selectionchange":if(oA)break;case"keydown":case"keyup":Em(p,n,h)}var v;if(If)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else pi?$v(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(zv&&n.locale!=="ko"&&(pi||E!=="onCompositionStart"?E==="onCompositionEnd"&&pi&&(v=Hv()):(zn=h,Ef="value"in zn?zn.value:zn.textContent,pi=!0)),O=ea(c,E),0<O.length&&(E=new dm(E,t,null,n,h),p.push({event:E,listeners:O}),v?E.data=v:(v=Wv(n),v!==null&&(E.data=v)))),(v=Jw?Kw(t,n):Qw(t,n))&&(c=ea(c,"onBeforeInput"),0<c.length&&(h=new dm("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:c}),h.data=v))}iE(p,e)})}function fs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ea(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=os(t,n),o!=null&&r.unshift(fs(t,o,i)),o=os(t,e),o!=null&&r.push(fs(t,o,i))),t=t.return}return r}function li(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Im(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=os(n,o),u!=null&&s.unshift(fs(n,u,l))):i||(u=os(n,o),u!=null&&s.push(fs(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var uA=/\r\n?/g,cA=/\u0000|\uFFFD/g;function Sm(t){return(typeof t=="string"?t:""+t).replace(uA,`
`).replace(cA,"")}function pl(t,e,n){if(e=Sm(e),Sm(t)!==e&&n)throw Error(G(425))}function ta(){}var Kc=null,Qc=null;function Yc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xc=typeof setTimeout=="function"?setTimeout:void 0,dA=typeof clearTimeout=="function"?clearTimeout:void 0,wm=typeof Promise=="function"?Promise:void 0,fA=typeof queueMicrotask=="function"?queueMicrotask:typeof wm<"u"?function(t){return wm.resolve(null).then(t).catch(hA)}:Xc;function hA(t){setTimeout(function(){throw t})}function sc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),as(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);as(e)}function Zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Am(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),nn="__reactFiber$"+Zi,hs="__reactProps$"+Zi,Cn="__reactContainer$"+Zi,Zc="__reactEvents$"+Zi,pA="__reactListeners$"+Zi,mA="__reactHandles$"+Zi;function Vr(t){var e=t[nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cn]||n[nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Am(t);t!==null;){if(n=t[nn])return n;t=Am(t)}return e}t=n,n=t.parentNode}return null}function Fs(t){return t=t[nn]||t[Cn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function qa(t){return t[hs]||null}var jc=[],_i=-1;function _r(t){return{current:t}}function _e(t){0>_i||(t.current=jc[_i],jc[_i]=null,_i--)}function he(t,e){_i++,jc[_i]=t.current,t.current=e}var cr={},lt=_r(cr),Et=_r(!1),Gr=cr;function Oi(t,e){var n=t.type.contextTypes;if(!n)return cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Tt(t){return t=t.childContextTypes,t!=null}function na(){_e(Et),_e(lt)}function Rm(t,e,n){if(lt.current!==cr)throw Error(G(168));he(lt,e),he(Et,n)}function sE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,jS(t)||"Unknown",i));return Ie({},n,r)}function ra(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cr,Gr=lt.current,he(lt,t),he(Et,Et.current),!0}function Pm(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=sE(t,e,Gr),r.__reactInternalMemoizedMergedChildContext=t,_e(Et),_e(lt),he(lt,t)):_e(Et),he(Et,n)}var gn=null,Ga=!1,lc=!1;function lE(t){gn===null?gn=[t]:gn.push(t)}function gA(t){Ga=!0,lE(t)}function vr(){if(!lc&&gn!==null){lc=!0;var t=0,e=ce;try{var n=gn;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gn=null,Ga=!1}catch(i){throw gn!==null&&(gn=gn.slice(t+1)),Mv(gf,vr),i}finally{ce=e,lc=!1}}return null}var vi=[],Ei=0,ia=null,oa=0,Mt=[],Dt=0,Hr=null,_n=1,vn="";function kr(t,e){vi[Ei++]=oa,vi[Ei++]=ia,ia=t,oa=e}function aE(t,e,n){Mt[Dt++]=_n,Mt[Dt++]=vn,Mt[Dt++]=Hr,Hr=t;var r=_n;t=vn;var i=32-$t(r)-1;r&=~(1<<i),n+=1;var o=32-$t(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,_n=1<<32-$t(e)+i|n<<i|r,vn=o+t}else _n=1<<o|n<<i|r,vn=t}function wf(t){t.return!==null&&(kr(t,1),aE(t,1,0))}function Af(t){for(;t===ia;)ia=vi[--Ei],vi[Ei]=null,oa=vi[--Ei],vi[Ei]=null;for(;t===Hr;)Hr=Mt[--Dt],Mt[Dt]=null,vn=Mt[--Dt],Mt[Dt]=null,_n=Mt[--Dt],Mt[Dt]=null}var Rt=null,wt=null,Ee=!1,zt=null;function uE(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rt=t,wt=Zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rt=t,wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hr!==null?{id:_n,overflow:vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rt=t,wt=null,!0):!1;default:return!1}}function ed(t){return(t.mode&1)!==0&&(t.flags&128)===0}function td(t){if(Ee){var e=wt;if(e){var n=e;if(!Nm(t,e)){if(ed(t))throw Error(G(418));e=Zn(n.nextSibling);var r=Rt;e&&Nm(t,e)?uE(r,n):(t.flags=t.flags&-4097|2,Ee=!1,Rt=t)}}else{if(ed(t))throw Error(G(418));t.flags=t.flags&-4097|2,Ee=!1,Rt=t}}}function xm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rt=t}function ml(t){if(t!==Rt)return!1;if(!Ee)return xm(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yc(t.type,t.memoizedProps)),e&&(e=wt)){if(ed(t))throw cE(),Error(G(418));for(;e;)uE(t,e),e=Zn(e.nextSibling)}if(xm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wt=Zn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wt=null}}else wt=Rt?Zn(t.stateNode.nextSibling):null;return!0}function cE(){for(var t=wt;t;)t=Zn(t.nextSibling)}function bi(){wt=Rt=null,Ee=!1}function Rf(t){zt===null?zt=[t]:zt.push(t)}var yA=Nn.ReactCurrentBatchConfig;function xo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function gl(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function km(t){var e=t._init;return e(t._payload)}function dE(t){function e(w,I){if(t){var A=w.deletions;A===null?(w.deletions=[I],w.flags|=16):A.push(I)}}function n(w,I){if(!t)return null;for(;I!==null;)e(w,I),I=I.sibling;return null}function r(w,I){for(w=new Map;I!==null;)I.key!==null?w.set(I.key,I):w.set(I.index,I),I=I.sibling;return w}function i(w,I){return w=nr(w,I),w.index=0,w.sibling=null,w}function o(w,I,A){return w.index=A,t?(A=w.alternate,A!==null?(A=A.index,A<I?(w.flags|=2,I):A):(w.flags|=2,I)):(w.flags|=1048576,I)}function s(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,I,A,V){return I===null||I.tag!==6?(I=pc(A,w.mode,V),I.return=w,I):(I=i(I,A),I.return=w,I)}function u(w,I,A,V){var F=A.type;return F===hi?h(w,I,A.props.children,V,A.key):I!==null&&(I.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Bn&&km(F)===I.type)?(V=i(I,A.props),V.ref=xo(w,I,A),V.return=w,V):(V=Ul(A.type,A.key,A.props,null,w.mode,V),V.ref=xo(w,I,A),V.return=w,V)}function c(w,I,A,V){return I===null||I.tag!==4||I.stateNode.containerInfo!==A.containerInfo||I.stateNode.implementation!==A.implementation?(I=mc(A,w.mode,V),I.return=w,I):(I=i(I,A.children||[]),I.return=w,I)}function h(w,I,A,V,F){return I===null||I.tag!==7?(I=br(A,w.mode,V,F),I.return=w,I):(I=i(I,A),I.return=w,I)}function p(w,I,A){if(typeof I=="string"&&I!==""||typeof I=="number")return I=pc(""+I,w.mode,A),I.return=w,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ol:return A=Ul(I.type,I.key,I.props,null,w.mode,A),A.ref=xo(w,null,I),A.return=w,A;case fi:return I=mc(I,w.mode,A),I.return=w,I;case Bn:var V=I._init;return p(w,V(I._payload),A)}if(Lo(I)||wo(I))return I=br(I,w.mode,A,null),I.return=w,I;gl(w,I)}return null}function m(w,I,A,V){var F=I!==null?I.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return F!==null?null:l(w,I,""+A,V);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ol:return A.key===F?u(w,I,A,V):null;case fi:return A.key===F?c(w,I,A,V):null;case Bn:return F=A._init,m(w,I,F(A._payload),V)}if(Lo(A)||wo(A))return F!==null?null:h(w,I,A,V,null);gl(w,A)}return null}function _(w,I,A,V,F){if(typeof V=="string"&&V!==""||typeof V=="number")return w=w.get(A)||null,l(I,w,""+V,F);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ol:return w=w.get(V.key===null?A:V.key)||null,u(I,w,V,F);case fi:return w=w.get(V.key===null?A:V.key)||null,c(I,w,V,F);case Bn:var O=V._init;return _(w,I,A,O(V._payload),F)}if(Lo(V)||wo(V))return w=w.get(A)||null,h(I,w,V,F,null);gl(I,V)}return null}function R(w,I,A,V){for(var F=null,O=null,v=I,E=I=0,S=null;v!==null&&E<A.length;E++){v.index>E?(S=v,v=null):S=v.sibling;var P=m(w,v,A[E],V);if(P===null){v===null&&(v=S);break}t&&v&&P.alternate===null&&e(w,v),I=o(P,I,E),O===null?F=P:O.sibling=P,O=P,v=S}if(E===A.length)return n(w,v),Ee&&kr(w,E),F;if(v===null){for(;E<A.length;E++)v=p(w,A[E],V),v!==null&&(I=o(v,I,E),O===null?F=v:O.sibling=v,O=v);return Ee&&kr(w,E),F}for(v=r(w,v);E<A.length;E++)S=_(v,w,E,A[E],V),S!==null&&(t&&S.alternate!==null&&v.delete(S.key===null?E:S.key),I=o(S,I,E),O===null?F=S:O.sibling=S,O=S);return t&&v.forEach(function(k){return e(w,k)}),Ee&&kr(w,E),F}function x(w,I,A,V){var F=wo(A);if(typeof F!="function")throw Error(G(150));if(A=F.call(A),A==null)throw Error(G(151));for(var O=F=null,v=I,E=I=0,S=null,P=A.next();v!==null&&!P.done;E++,P=A.next()){v.index>E?(S=v,v=null):S=v.sibling;var k=m(w,v,P.value,V);if(k===null){v===null&&(v=S);break}t&&v&&k.alternate===null&&e(w,v),I=o(k,I,E),O===null?F=k:O.sibling=k,O=k,v=S}if(P.done)return n(w,v),Ee&&kr(w,E),F;if(v===null){for(;!P.done;E++,P=A.next())P=p(w,P.value,V),P!==null&&(I=o(P,I,E),O===null?F=P:O.sibling=P,O=P);return Ee&&kr(w,E),F}for(v=r(w,v);!P.done;E++,P=A.next())P=_(v,w,E,P.value,V),P!==null&&(t&&P.alternate!==null&&v.delete(P.key===null?E:P.key),I=o(P,I,E),O===null?F=P:O.sibling=P,O=P);return t&&v.forEach(function(D){return e(w,D)}),Ee&&kr(w,E),F}function M(w,I,A,V){if(typeof A=="object"&&A!==null&&A.type===hi&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case ol:e:{for(var F=A.key,O=I;O!==null;){if(O.key===F){if(F=A.type,F===hi){if(O.tag===7){n(w,O.sibling),I=i(O,A.props.children),I.return=w,w=I;break e}}else if(O.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Bn&&km(F)===O.type){n(w,O.sibling),I=i(O,A.props),I.ref=xo(w,O,A),I.return=w,w=I;break e}n(w,O);break}else e(w,O);O=O.sibling}A.type===hi?(I=br(A.props.children,w.mode,V,A.key),I.return=w,w=I):(V=Ul(A.type,A.key,A.props,null,w.mode,V),V.ref=xo(w,I,A),V.return=w,w=V)}return s(w);case fi:e:{for(O=A.key;I!==null;){if(I.key===O)if(I.tag===4&&I.stateNode.containerInfo===A.containerInfo&&I.stateNode.implementation===A.implementation){n(w,I.sibling),I=i(I,A.children||[]),I.return=w,w=I;break e}else{n(w,I);break}else e(w,I);I=I.sibling}I=mc(A,w.mode,V),I.return=w,w=I}return s(w);case Bn:return O=A._init,M(w,I,O(A._payload),V)}if(Lo(A))return R(w,I,A,V);if(wo(A))return x(w,I,A,V);gl(w,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,I!==null&&I.tag===6?(n(w,I.sibling),I=i(I,A),I.return=w,w=I):(n(w,I),I=pc(A,w.mode,V),I.return=w,w=I),s(w)):n(w,I)}return M}var Bi=dE(!0),fE=dE(!1),sa=_r(null),la=null,Ti=null,Pf=null;function Nf(){Pf=Ti=la=null}function xf(t){var e=sa.current;_e(sa),t._currentValue=e}function nd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ni(t,e){la=t,Pf=Ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vt=!0),t.firstContext=null)}function Ot(t){var e=t._currentValue;if(Pf!==t)if(t={context:t,memoizedValue:e,next:null},Ti===null){if(la===null)throw Error(G(308));Ti=t,la.dependencies={lanes:0,firstContext:t}}else Ti=Ti.next=t;return e}var Lr=null;function kf(t){Lr===null?Lr=[t]:Lr.push(t)}function hE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,kf(e)):(n.next=i.next,i.next=n),e.interleaved=n,In(t,r)}function In(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qn=!1;function Mf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function En(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,In(t,n)}return i=r.interleaved,i===null?(e.next=e,kf(r)):(e.next=i.next,i.next=e),r.interleaved=e,In(t,n)}function kl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yf(t,n)}}function Mm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function aa(t,e,n,r){var i=t.updateQueue;qn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,s===null?o=c:s.next=c,s=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==s&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;s=0,h=c=u=null,l=o;do{var m=l.lane,_=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,x=l;switch(m=e,_=n,x.tag){case 1:if(R=x.payload,typeof R=="function"){p=R.call(_,p,m);break e}p=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=x.payload,m=typeof R=="function"?R.call(_,p,m):R,m==null)break e;p=Ie({},p,m);break e;case 2:qn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else _={eventTime:_,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=_,u=p):h=h.next=_,s|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);$r|=s,t.lanes=s,t.memoizedState=p}}function Dm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var Us={},on=_r(Us),ps=_r(Us),ms=_r(Us);function Fr(t){if(t===Us)throw Error(G(174));return t}function Df(t,e){switch(he(ms,e),he(ps,t),he(on,Us),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fc(e,t)}_e(on),he(on,e)}function qi(){_e(on),_e(ps),_e(ms)}function mE(t){Fr(ms.current);var e=Fr(on.current),n=Fc(e,t.type);e!==n&&(he(ps,t),he(on,n))}function Vf(t){ps.current===t&&(_e(on),_e(ps))}var Te=_r(0);function ua(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ac=[];function Lf(){for(var t=0;t<ac.length;t++)ac[t]._workInProgressVersionPrimary=null;ac.length=0}var Ml=Nn.ReactCurrentDispatcher,uc=Nn.ReactCurrentBatchConfig,zr=0,Ce=null,Oe=null,He=null,ca=!1,Jo=!1,gs=0,_A=0;function je(){throw Error(G(321))}function Ff(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kt(t[n],e[n]))return!1;return!0}function Uf(t,e,n,r,i,o){if(zr=o,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ml.current=t===null||t.memoizedState===null?CA:IA,t=n(r,i),Jo){o=0;do{if(Jo=!1,gs=0,25<=o)throw Error(G(301));o+=1,He=Oe=null,e.updateQueue=null,Ml.current=SA,t=n(r,i)}while(Jo)}if(Ml.current=da,e=Oe!==null&&Oe.next!==null,zr=0,He=Oe=Ce=null,ca=!1,e)throw Error(G(300));return t}function Of(){var t=gs!==0;return gs=0,t}function en(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ce.memoizedState=He=t:He=He.next=t,He}function bt(){if(Oe===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var e=He===null?Ce.memoizedState:He.next;if(e!==null)He=e,Oe=t;else{if(t===null)throw Error(G(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},He===null?Ce.memoizedState=He=t:He=He.next=t}return He}function ys(t,e){return typeof e=="function"?e(t):e}function cc(t){var e=bt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=Oe,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var h=c.lane;if((zr&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=p,s=r):u=u.next=p,Ce.lanes|=h,$r|=h}c=c.next}while(c!==null&&c!==o);u===null?s=r:u.next=l,Kt(r,e.memoizedState)||(vt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ce.lanes|=o,$r|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dc(t){var e=bt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Kt(o,e.memoizedState)||(vt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function gE(){}function yE(t,e){var n=Ce,r=bt(),i=e(),o=!Kt(r.memoizedState,i);if(o&&(r.memoizedState=i,vt=!0),r=r.queue,bf(EE.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,_s(9,vE.bind(null,n,r,i,e),void 0,null),ze===null)throw Error(G(349));zr&30||_E(n,e,i)}return i}function _E(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vE(t,e,n,r){e.value=n,e.getSnapshot=r,TE(e)&&CE(t)}function EE(t,e,n){return n(function(){TE(e)&&CE(t)})}function TE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kt(t,n)}catch{return!0}}function CE(t){var e=In(t,1);e!==null&&Wt(e,t,1,-1)}function Vm(t){var e=en();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:t},e.queue=t,t=t.dispatch=TA.bind(null,Ce,t),[e.memoizedState,t]}function _s(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function IE(){return bt().memoizedState}function Dl(t,e,n,r){var i=en();Ce.flags|=t,i.memoizedState=_s(1|e,n,void 0,r===void 0?null:r)}function Ha(t,e,n,r){var i=bt();r=r===void 0?null:r;var o=void 0;if(Oe!==null){var s=Oe.memoizedState;if(o=s.destroy,r!==null&&Ff(r,s.deps)){i.memoizedState=_s(e,n,o,r);return}}Ce.flags|=t,i.memoizedState=_s(1|e,n,o,r)}function Lm(t,e){return Dl(8390656,8,t,e)}function bf(t,e){return Ha(2048,8,t,e)}function SE(t,e){return Ha(4,2,t,e)}function wE(t,e){return Ha(4,4,t,e)}function AE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RE(t,e,n){return n=n!=null?n.concat([t]):null,Ha(4,4,AE.bind(null,e,t),n)}function Bf(){}function PE(t,e){var n=bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ff(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function NE(t,e){var n=bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ff(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xE(t,e,n){return zr&21?(Kt(n,e)||(n=Lv(),Ce.lanes|=n,$r|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vt=!0),t.memoizedState=n)}function vA(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=uc.transition;uc.transition={};try{t(!1),e()}finally{ce=n,uc.transition=r}}function kE(){return bt().memoizedState}function EA(t,e,n){var r=tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ME(t))DE(e,n);else if(n=hE(t,e,n,r),n!==null){var i=ft();Wt(n,t,r,i),VE(n,e,r)}}function TA(t,e,n){var r=tr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ME(t))DE(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,Kt(l,s)){var u=e.interleaved;u===null?(i.next=i,kf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=hE(t,e,i,r),n!==null&&(i=ft(),Wt(n,t,r,i),VE(n,e,r))}}function ME(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function DE(t,e){Jo=ca=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function VE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yf(t,n)}}var da={readContext:Ot,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},CA={readContext:Ot,useCallback:function(t,e){return en().memoizedState=[t,e===void 0?null:e],t},useContext:Ot,useEffect:Lm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dl(4194308,4,AE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dl(4,2,t,e)},useMemo:function(t,e){var n=en();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=en();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=EA.bind(null,Ce,t),[r.memoizedState,t]},useRef:function(t){var e=en();return t={current:t},e.memoizedState=t},useState:Vm,useDebugValue:Bf,useDeferredValue:function(t){return en().memoizedState=t},useTransition:function(){var t=Vm(!1),e=t[0];return t=vA.bind(null,t[1]),en().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ce,i=en();if(Ee){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),ze===null)throw Error(G(349));zr&30||_E(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Lm(EE.bind(null,r,o,t),[t]),r.flags|=2048,_s(9,vE.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=en(),e=ze.identifierPrefix;if(Ee){var n=vn,r=_n;n=(r&~(1<<32-$t(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=gs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_A++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IA={readContext:Ot,useCallback:PE,useContext:Ot,useEffect:bf,useImperativeHandle:RE,useInsertionEffect:SE,useLayoutEffect:wE,useMemo:NE,useReducer:cc,useRef:IE,useState:function(){return cc(ys)},useDebugValue:Bf,useDeferredValue:function(t){var e=bt();return xE(e,Oe.memoizedState,t)},useTransition:function(){var t=cc(ys)[0],e=bt().memoizedState;return[t,e]},useMutableSource:gE,useSyncExternalStore:yE,useId:kE,unstable_isNewReconciler:!1},SA={readContext:Ot,useCallback:PE,useContext:Ot,useEffect:bf,useImperativeHandle:RE,useInsertionEffect:SE,useLayoutEffect:wE,useMemo:NE,useReducer:dc,useRef:IE,useState:function(){return dc(ys)},useDebugValue:Bf,useDeferredValue:function(t){var e=bt();return Oe===null?e.memoizedState=t:xE(e,Oe.memoizedState,t)},useTransition:function(){var t=dc(ys)[0],e=bt().memoizedState;return[t,e]},useMutableSource:gE,useSyncExternalStore:yE,useId:kE,unstable_isNewReconciler:!1};function Gt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var za={isMounted:function(t){return(t=t._reactInternals)?Xr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ft(),i=tr(t),o=En(r,i);o.payload=e,n!=null&&(o.callback=n),e=jn(t,o,i),e!==null&&(Wt(e,t,i,r),kl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ft(),i=tr(t),o=En(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=jn(t,o,i),e!==null&&(Wt(e,t,i,r),kl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ft(),r=tr(t),i=En(n,r);i.tag=2,e!=null&&(i.callback=e),e=jn(t,i,r),e!==null&&(Wt(e,t,r,n),kl(e,t,r))}};function Fm(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!cs(n,r)||!cs(i,o):!0}function LE(t,e,n){var r=!1,i=cr,o=e.contextType;return typeof o=="object"&&o!==null?o=Ot(o):(i=Tt(e)?Gr:lt.current,r=e.contextTypes,o=(r=r!=null)?Oi(t,i):cr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=za,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Um(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&za.enqueueReplaceState(e,e.state,null)}function id(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Mf(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ot(o):(o=Tt(e)?Gr:lt.current,i.context=Oi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(rd(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&za.enqueueReplaceState(i,i.state,null),aa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gi(t,e){try{var n="",r=e;do n+=ZS(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function fc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function od(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wA=typeof WeakMap=="function"?WeakMap:Map;function FE(t,e,n){n=En(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ha||(ha=!0,md=r),od(t,e)},n}function UE(t,e,n){n=En(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){od(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){od(t,e),typeof r!="function"&&(er===null?er=new Set([this]):er.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Om(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=bA.bind(null,t,e,n),e.then(t,t))}function bm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=En(-1,1),e.tag=2,jn(n,e,1))),n.lanes|=1),t)}var AA=Nn.ReactCurrentOwner,vt=!1;function dt(t,e,n,r){e.child=t===null?fE(e,null,n,r):Bi(e,t.child,n,r)}function qm(t,e,n,r,i){n=n.render;var o=e.ref;return Ni(e,i),r=Uf(t,e,n,r,o,i),n=Of(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sn(t,e,i)):(Ee&&n&&wf(e),e.flags|=1,dt(t,e,r,i),e.child)}function Gm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Kf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,OE(t,e,o,r,i)):(t=Ul(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:cs,n(s,r)&&t.ref===e.ref)return Sn(t,e,i)}return e.flags|=1,t=nr(o,r),t.ref=e.ref,t.return=e,e.child=t}function OE(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(cs(o,r)&&t.ref===e.ref)if(vt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(vt=!0);else return e.lanes=t.lanes,Sn(t,e,i)}return sd(t,e,n,r,i)}function bE(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(Ii,St),St|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(Ii,St),St|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,he(Ii,St),St|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,he(Ii,St),St|=r;return dt(t,e,i,n),e.child}function BE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sd(t,e,n,r,i){var o=Tt(n)?Gr:lt.current;return o=Oi(e,o),Ni(e,i),n=Uf(t,e,n,r,o,i),r=Of(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sn(t,e,i)):(Ee&&r&&wf(e),e.flags|=1,dt(t,e,n,i),e.child)}function Hm(t,e,n,r,i){if(Tt(n)){var o=!0;ra(e)}else o=!1;if(Ni(e,i),e.stateNode===null)Vl(t,e),LE(e,n,r),id(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ot(c):(c=Tt(n)?Gr:lt.current,c=Oi(e,c));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Um(e,s,r,c),qn=!1;var m=e.memoizedState;s.state=m,aa(e,r,s,i),u=e.memoizedState,l!==r||m!==u||Et.current||qn?(typeof h=="function"&&(rd(e,n,h,r),u=e.memoizedState),(l=qn||Fm(e,n,l,r,m,u,c))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,pE(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Gt(e.type,l),s.props=c,p=e.pendingProps,m=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ot(u):(u=Tt(n)?Gr:lt.current,u=Oi(e,u));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||m!==u)&&Um(e,s,r,u),qn=!1,m=e.memoizedState,s.state=m,aa(e,r,s,i);var R=e.memoizedState;l!==p||m!==R||Et.current||qn?(typeof _=="function"&&(rd(e,n,_,r),R=e.memoizedState),(c=qn||Fm(e,n,c,r,m,R,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,R,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,R,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),s.props=r,s.state=R,s.context=u,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return ld(t,e,n,r,o,i)}function ld(t,e,n,r,i,o){BE(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Pm(e,n,!1),Sn(t,e,o);r=e.stateNode,AA.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Bi(e,t.child,null,o),e.child=Bi(e,null,l,o)):dt(t,e,l,o),e.memoizedState=r.state,i&&Pm(e,n,!0),e.child}function qE(t){var e=t.stateNode;e.pendingContext?Rm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rm(t,e.context,!1),Df(t,e.containerInfo)}function zm(t,e,n,r,i){return bi(),Rf(i),e.flags|=256,dt(t,e,n,r),e.child}var ad={dehydrated:null,treeContext:null,retryLane:0};function ud(t){return{baseLanes:t,cachePool:null,transitions:null}}function GE(t,e,n){var r=e.pendingProps,i=Te.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),he(Te,i&1),t===null)return td(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ja(s,r,0,null),t=br(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ud(n),e.memoizedState=ad,t):qf(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return RA(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=nr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=nr(l,o):(o=br(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?ud(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=ad,r}return o=t.child,t=o.sibling,r=nr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qf(t,e){return e=Ja({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yl(t,e,n,r){return r!==null&&Rf(r),Bi(e,t.child,null,n),t=qf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RA(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=fc(Error(G(422))),yl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Ja({mode:"visible",children:r.children},i,0,null),o=br(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Bi(e,t.child,null,s),e.child.memoizedState=ud(s),e.memoizedState=ad,o);if(!(e.mode&1))return yl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(G(419)),r=fc(o,r,void 0),yl(t,e,s,r)}if(l=(s&t.childLanes)!==0,vt||l){if(r=ze,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,In(t,i),Wt(r,t,i,-1))}return Jf(),r=fc(Error(G(421))),yl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=BA.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,wt=Zn(i.nextSibling),Rt=e,Ee=!0,zt=null,t!==null&&(Mt[Dt++]=_n,Mt[Dt++]=vn,Mt[Dt++]=Hr,_n=t.id,vn=t.overflow,Hr=e),e=qf(e,r.children),e.flags|=4096,e)}function $m(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nd(t.return,e,n)}function hc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function HE(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(dt(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$m(t,n,e);else if(t.tag===19)$m(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(Te,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ua(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),hc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ua(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}hc(e,!0,n,null,o);break;case"together":hc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$r|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function PA(t,e,n){switch(e.tag){case 3:qE(e),bi();break;case 5:mE(e);break;case 1:Tt(e.type)&&ra(e);break;case 4:Df(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;he(sa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?GE(t,e,n):(he(Te,Te.current&1),t=Sn(t,e,n),t!==null?t.sibling:null);he(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return HE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,bE(t,e,n)}return Sn(t,e,n)}var zE,cd,$E,WE;zE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cd=function(){};$E=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fr(on.current);var o=null;switch(n){case"input":i=Mc(t,i),r=Mc(t,r),o=[];break;case"select":i=Ie({},i,{value:void 0}),r=Ie({},r,{value:void 0}),o=[];break;case"textarea":i=Lc(t,i),r=Lc(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ta)}Uc(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rs.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rs.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&me("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};WE=function(t,e,n,r){n!==r&&(e.flags|=4)};function ko(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function NA(t,e,n){var r=e.pendingProps;switch(Af(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return Tt(e.type)&&na(),et(e),null;case 3:return r=e.stateNode,qi(),_e(Et),_e(lt),Lf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zt!==null&&(_d(zt),zt=null))),cd(t,e),et(e),null;case 5:Vf(e);var i=Fr(ms.current);if(n=e.type,t!==null&&e.stateNode!=null)$E(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return et(e),null}if(t=Fr(on.current),ml(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[nn]=e,r[hs]=o,t=(e.mode&1)!==0,n){case"dialog":me("cancel",r),me("close",r);break;case"iframe":case"object":case"embed":me("load",r);break;case"video":case"audio":for(i=0;i<Uo.length;i++)me(Uo[i],r);break;case"source":me("error",r);break;case"img":case"image":case"link":me("error",r),me("load",r);break;case"details":me("toggle",r);break;case"input":em(r,o),me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},me("invalid",r);break;case"textarea":nm(r,o),me("invalid",r)}Uc(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&pl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&pl(r.textContent,l,t),i=["children",""+l]):rs.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&me("scroll",r)}switch(n){case"input":sl(r),tm(r,o,!0);break;case"textarea":sl(r),rm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ta)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ev(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[nn]=e,t[hs]=r,zE(t,e,!1,!1),e.stateNode=t;e:{switch(s=Oc(n,r),n){case"dialog":me("cancel",t),me("close",t),i=r;break;case"iframe":case"object":case"embed":me("load",t),i=r;break;case"video":case"audio":for(i=0;i<Uo.length;i++)me(Uo[i],t);i=r;break;case"source":me("error",t),i=r;break;case"img":case"image":case"link":me("error",t),me("load",t),i=r;break;case"details":me("toggle",t),i=r;break;case"input":em(t,r),i=Mc(t,r),me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ie({},r,{value:void 0}),me("invalid",t);break;case"textarea":nm(t,r),i=Lc(t,r),me("invalid",t);break;default:i=r}Uc(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Iv(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Tv(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&is(t,u):typeof u=="number"&&is(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(rs.hasOwnProperty(o)?u!=null&&o==="onScroll"&&me("scroll",t):u!=null&&df(t,o,u,s))}switch(n){case"input":sl(t),tm(t,r,!1);break;case"textarea":sl(t),rm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ur(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?wi(t,!!r.multiple,o,!1):r.defaultValue!=null&&wi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ta)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return et(e),null;case 6:if(t&&e.stateNode!=null)WE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Fr(ms.current),Fr(on.current),ml(e)){if(r=e.stateNode,n=e.memoizedProps,r[nn]=e,(o=r.nodeValue!==n)&&(t=Rt,t!==null))switch(t.tag){case 3:pl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nn]=e,e.stateNode=r}return et(e),null;case 13:if(_e(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&wt!==null&&e.mode&1&&!(e.flags&128))cE(),bi(),e.flags|=98560,o=!1;else if(o=ml(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(G(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[nn]=e}else bi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),o=!1}else zt!==null&&(_d(zt),zt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?be===0&&(be=3):Jf())),e.updateQueue!==null&&(e.flags|=4),et(e),null);case 4:return qi(),cd(t,e),t===null&&ds(e.stateNode.containerInfo),et(e),null;case 10:return xf(e.type._context),et(e),null;case 17:return Tt(e.type)&&na(),et(e),null;case 19:if(_e(Te),o=e.memoizedState,o===null)return et(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ko(o,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ua(t),s!==null){for(e.flags|=128,ko(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(Te,Te.current&1|2),e.child}t=t.sibling}o.tail!==null&&xe()>Hi&&(e.flags|=128,r=!0,ko(o,!1),e.lanes=4194304)}else{if(!r)if(t=ua(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ko(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ee)return et(e),null}else 2*xe()-o.renderingStartTime>Hi&&n!==1073741824&&(e.flags|=128,r=!0,ko(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=xe(),e.sibling=null,n=Te.current,he(Te,r?n&1|2:n&1),e):(et(e),null);case 22:case 23:return Wf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?St&1073741824&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function xA(t,e){switch(Af(e),e.tag){case 1:return Tt(e.type)&&na(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qi(),_e(Et),_e(lt),Lf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vf(e),null;case 13:if(_e(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));bi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Te),null;case 4:return qi(),null;case 10:return xf(e.type._context),null;case 22:case 23:return Wf(),null;case 24:return null;default:return null}}var _l=!1,it=!1,kA=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ci(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function dd(t,e,n){try{n()}catch(r){Re(t,e,r)}}var Wm=!1;function MA(t,e){if(Kc=Zl,t=Xv(),Sf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,p=t,m=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(l=s+i),p!==o||r!==0&&p.nodeType!==3||(u=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===t)break t;if(m===n&&++c===i&&(l=s),m===o&&++h===r&&(u=s),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qc={focusedElem:t,selectionRange:n},Zl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var x=R.memoizedProps,M=R.memoizedState,w=e.stateNode,I=w.getSnapshotBeforeUpdate(e.elementType===e.type?x:Gt(e.type,x),M);w.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(V){Re(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return R=Wm,Wm=!1,R}function Ko(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&dd(e,n,o)}i=i.next}while(i!==r)}}function $a(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JE(t){var e=t.alternate;e!==null&&(t.alternate=null,JE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nn],delete e[hs],delete e[Zc],delete e[pA],delete e[mA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function KE(t){return t.tag===5||t.tag===3||t.tag===4}function Jm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||KE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ta));else if(r!==4&&(t=t.child,t!==null))for(hd(t,e,n),t=t.sibling;t!==null;)hd(t,e,n),t=t.sibling}function pd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pd(t,e,n),t=t.sibling;t!==null;)pd(t,e,n),t=t.sibling}var $e=null,Ht=!1;function bn(t,e,n){for(n=n.child;n!==null;)QE(t,e,n),n=n.sibling}function QE(t,e,n){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Ua,n)}catch{}switch(n.tag){case 5:it||Ci(n,e);case 6:var r=$e,i=Ht;$e=null,bn(t,e,n),$e=r,Ht=i,$e!==null&&(Ht?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(Ht?(t=$e,n=n.stateNode,t.nodeType===8?sc(t.parentNode,n):t.nodeType===1&&sc(t,n),as(t)):sc($e,n.stateNode));break;case 4:r=$e,i=Ht,$e=n.stateNode.containerInfo,Ht=!0,bn(t,e,n),$e=r,Ht=i;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&dd(n,e,s),i=i.next}while(i!==r)}bn(t,e,n);break;case 1:if(!it&&(Ci(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Re(n,e,l)}bn(t,e,n);break;case 21:bn(t,e,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,bn(t,e,n),it=r):bn(t,e,n);break;default:bn(t,e,n)}}function Km(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kA),e.forEach(function(r){var i=qA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:$e=l.stateNode,Ht=!1;break e;case 3:$e=l.stateNode.containerInfo,Ht=!0;break e;case 4:$e=l.stateNode.containerInfo,Ht=!0;break e}l=l.return}if($e===null)throw Error(G(160));QE(o,s,i),$e=null,Ht=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Re(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YE(e,t),e=e.sibling}function YE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qt(e,t),jt(t),r&4){try{Ko(3,t,t.return),$a(3,t)}catch(x){Re(t,t.return,x)}try{Ko(5,t,t.return)}catch(x){Re(t,t.return,x)}}break;case 1:qt(e,t),jt(t),r&512&&n!==null&&Ci(n,n.return);break;case 5:if(qt(e,t),jt(t),r&512&&n!==null&&Ci(n,n.return),t.flags&32){var i=t.stateNode;try{is(i,"")}catch(x){Re(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&_v(i,o),Oc(l,s);var c=Oc(l,o);for(s=0;s<u.length;s+=2){var h=u[s],p=u[s+1];h==="style"?Iv(i,p):h==="dangerouslySetInnerHTML"?Tv(i,p):h==="children"?is(i,p):df(i,h,p,c)}switch(l){case"input":Dc(i,o);break;case"textarea":vv(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var _=o.value;_!=null?wi(i,!!o.multiple,_,!1):m!==!!o.multiple&&(o.defaultValue!=null?wi(i,!!o.multiple,o.defaultValue,!0):wi(i,!!o.multiple,o.multiple?[]:"",!1))}i[hs]=o}catch(x){Re(t,t.return,x)}}break;case 6:if(qt(e,t),jt(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(x){Re(t,t.return,x)}}break;case 3:if(qt(e,t),jt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{as(e.containerInfo)}catch(x){Re(t,t.return,x)}break;case 4:qt(e,t),jt(t);break;case 13:qt(e,t),jt(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(zf=xe())),r&4&&Km(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(it=(c=it)||h,qt(e,t),it=c):qt(e,t),jt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(p=K=h;K!==null;){switch(m=K,_=m.child,m.tag){case 0:case 11:case 14:case 15:Ko(4,m,m.return);break;case 1:Ci(m,m.return);var R=m.stateNode;if(typeof R.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(x){Re(r,n,x)}}break;case 5:Ci(m,m.return);break;case 22:if(m.memoizedState!==null){Ym(p);continue}}_!==null?(_.return=m,K=_):Ym(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Cv("display",s))}catch(x){Re(t,t.return,x)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(x){Re(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:qt(e,t),jt(t),r&4&&Km(t);break;case 21:break;default:qt(e,t),jt(t)}}function jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(KE(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(is(i,""),r.flags&=-33);var o=Jm(t);pd(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Jm(t);hd(t,l,s);break;default:throw Error(G(161))}}catch(u){Re(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DA(t,e,n){K=t,XE(t)}function XE(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||_l;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||it;l=_l;var c=it;if(_l=s,(it=u)&&!c)for(K=i;K!==null;)s=K,u=s.child,s.tag===22&&s.memoizedState!==null?Xm(i):u!==null?(u.return=s,K=u):Xm(i);for(;o!==null;)K=o,XE(o),o=o.sibling;K=i,_l=l,it=c}Qm(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,K=o):Qm(t)}}function Qm(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||$a(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!it)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Dm(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Dm(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&as(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}it||e.flags&512&&fd(e)}catch(m){Re(e,e.return,m)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Ym(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Xm(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$a(4,e)}catch(u){Re(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Re(e,i,u)}}var o=e.return;try{fd(e)}catch(u){Re(e,o,u)}break;case 5:var s=e.return;try{fd(e)}catch(u){Re(e,s,u)}}}catch(u){Re(e,e.return,u)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var VA=Math.ceil,fa=Nn.ReactCurrentDispatcher,Gf=Nn.ReactCurrentOwner,Ft=Nn.ReactCurrentBatchConfig,le=0,ze=null,Me=null,Qe=0,St=0,Ii=_r(0),be=0,vs=null,$r=0,Wa=0,Hf=0,Qo=null,yt=null,zf=0,Hi=1/0,mn=null,ha=!1,md=null,er=null,vl=!1,$n=null,pa=0,Yo=0,gd=null,Ll=-1,Fl=0;function ft(){return le&6?xe():Ll!==-1?Ll:Ll=xe()}function tr(t){return t.mode&1?le&2&&Qe!==0?Qe&-Qe:yA.transition!==null?(Fl===0&&(Fl=Lv()),Fl):(t=ce,t!==0||(t=window.event,t=t===void 0?16:Gv(t.type)),t):1}function Wt(t,e,n,r){if(50<Yo)throw Yo=0,gd=null,Error(G(185));Vs(t,n,r),(!(le&2)||t!==ze)&&(t===ze&&(!(le&2)&&(Wa|=n),be===4&&Hn(t,Qe)),Ct(t,r),n===1&&le===0&&!(e.mode&1)&&(Hi=xe()+500,Ga&&vr()))}function Ct(t,e){var n=t.callbackNode;yw(t,e);var r=Xl(t,t===ze?Qe:0);if(r===0)n!==null&&sm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sm(n),e===1)t.tag===0?gA(Zm.bind(null,t)):lE(Zm.bind(null,t)),fA(function(){!(le&6)&&vr()}),n=null;else{switch(Fv(r)){case 1:n=gf;break;case 4:n=Dv;break;case 16:n=Yl;break;case 536870912:n=Vv;break;default:n=Yl}n=oT(n,ZE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ZE(t,e){if(Ll=-1,Fl=0,le&6)throw Error(G(327));var n=t.callbackNode;if(xi()&&t.callbackNode!==n)return null;var r=Xl(t,t===ze?Qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ma(t,r);else{e=r;var i=le;le|=2;var o=eT();(ze!==t||Qe!==e)&&(mn=null,Hi=xe()+500,Or(t,e));do try{UA();break}catch(l){jE(t,l)}while(!0);Nf(),fa.current=o,le=i,Me!==null?e=0:(ze=null,Qe=0,e=be)}if(e!==0){if(e===2&&(i=Hc(t),i!==0&&(r=i,e=yd(t,i))),e===1)throw n=vs,Or(t,0),Hn(t,r),Ct(t,xe()),n;if(e===6)Hn(t,r);else{if(i=t.current.alternate,!(r&30)&&!LA(i)&&(e=ma(t,r),e===2&&(o=Hc(t),o!==0&&(r=o,e=yd(t,o))),e===1))throw n=vs,Or(t,0),Hn(t,r),Ct(t,xe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Mr(t,yt,mn);break;case 3:if(Hn(t,r),(r&130023424)===r&&(e=zf+500-xe(),10<e)){if(Xl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ft(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Xc(Mr.bind(null,t,yt,mn),e);break}Mr(t,yt,mn);break;case 4:if(Hn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-$t(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VA(r/1960))-r,10<r){t.timeoutHandle=Xc(Mr.bind(null,t,yt,mn),r);break}Mr(t,yt,mn);break;case 5:Mr(t,yt,mn);break;default:throw Error(G(329))}}}return Ct(t,xe()),t.callbackNode===n?ZE.bind(null,t):null}function yd(t,e){var n=Qo;return t.current.memoizedState.isDehydrated&&(Or(t,e).flags|=256),t=ma(t,e),t!==2&&(e=yt,yt=n,e!==null&&_d(e)),t}function _d(t){yt===null?yt=t:yt.push.apply(yt,t)}function LA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Kt(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hn(t,e){for(e&=~Hf,e&=~Wa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$t(e),r=1<<n;t[n]=-1,e&=~r}}function Zm(t){if(le&6)throw Error(G(327));xi();var e=Xl(t,0);if(!(e&1))return Ct(t,xe()),null;var n=ma(t,e);if(t.tag!==0&&n===2){var r=Hc(t);r!==0&&(e=r,n=yd(t,r))}if(n===1)throw n=vs,Or(t,0),Hn(t,e),Ct(t,xe()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mr(t,yt,mn),Ct(t,xe()),null}function $f(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Hi=xe()+500,Ga&&vr())}}function Wr(t){$n!==null&&$n.tag===0&&!(le&6)&&xi();var e=le;le|=1;var n=Ft.transition,r=ce;try{if(Ft.transition=null,ce=1,t)return t()}finally{ce=r,Ft.transition=n,le=e,!(le&6)&&vr()}}function Wf(){St=Ii.current,_e(Ii)}function Or(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dA(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Af(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&na();break;case 3:qi(),_e(Et),_e(lt),Lf();break;case 5:Vf(r);break;case 4:qi();break;case 13:_e(Te);break;case 19:_e(Te);break;case 10:xf(r.type._context);break;case 22:case 23:Wf()}n=n.return}if(ze=t,Me=t=nr(t.current,null),Qe=St=e,be=0,vs=null,Hf=Wa=$r=0,yt=Qo=null,Lr!==null){for(e=0;e<Lr.length;e++)if(n=Lr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Lr=null}return t}function jE(t,e){do{var n=Me;try{if(Nf(),Ml.current=da,ca){for(var r=Ce.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ca=!1}if(zr=0,He=Oe=Ce=null,Jo=!1,gs=0,Gf.current=null,n===null||n.return===null){be=1,vs=e,Me=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=Qe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=bm(s);if(_!==null){_.flags&=-257,Bm(_,s,l,o,e),_.mode&1&&Om(o,c,e),e=_,u=c;var R=e.updateQueue;if(R===null){var x=new Set;x.add(u),e.updateQueue=x}else R.add(u);break e}else{if(!(e&1)){Om(o,c,e),Jf();break e}u=Error(G(426))}}else if(Ee&&l.mode&1){var M=bm(s);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Bm(M,s,l,o,e),Rf(Gi(u,l));break e}}o=u=Gi(u,l),be!==4&&(be=2),Qo===null?Qo=[o]:Qo.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var w=FE(o,u,e);Mm(o,w);break e;case 1:l=u;var I=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof I.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(er===null||!er.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var V=UE(o,l,e);Mm(o,V);break e}}o=o.return}while(o!==null)}nT(n)}catch(F){e=F,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function eT(){var t=fa.current;return fa.current=da,t===null?da:t}function Jf(){(be===0||be===3||be===2)&&(be=4),ze===null||!($r&268435455)&&!(Wa&268435455)||Hn(ze,Qe)}function ma(t,e){var n=le;le|=2;var r=eT();(ze!==t||Qe!==e)&&(mn=null,Or(t,e));do try{FA();break}catch(i){jE(t,i)}while(!0);if(Nf(),le=n,fa.current=r,Me!==null)throw Error(G(261));return ze=null,Qe=0,be}function FA(){for(;Me!==null;)tT(Me)}function UA(){for(;Me!==null&&!aw();)tT(Me)}function tT(t){var e=iT(t.alternate,t,St);t.memoizedProps=t.pendingProps,e===null?nT(t):Me=e,Gf.current=null}function nT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xA(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{be=6,Me=null;return}}else if(n=NA(n,e,St),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);be===0&&(be=5)}function Mr(t,e,n){var r=ce,i=Ft.transition;try{Ft.transition=null,ce=1,OA(t,e,n,r)}finally{Ft.transition=i,ce=r}return null}function OA(t,e,n,r){do xi();while($n!==null);if(le&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(_w(t,o),t===ze&&(Me=ze=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vl||(vl=!0,oT(Yl,function(){return xi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ft.transition,Ft.transition=null;var s=ce;ce=1;var l=le;le|=4,Gf.current=null,MA(t,n),YE(n,t),iA(Qc),Zl=!!Kc,Qc=Kc=null,t.current=n,DA(n),uw(),le=l,ce=s,Ft.transition=o}else t.current=n;if(vl&&(vl=!1,$n=t,pa=i),o=t.pendingLanes,o===0&&(er=null),fw(n.stateNode),Ct(t,xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ha)throw ha=!1,t=md,md=null,t;return pa&1&&t.tag!==0&&xi(),o=t.pendingLanes,o&1?t===gd?Yo++:(Yo=0,gd=t):Yo=0,vr(),null}function xi(){if($n!==null){var t=Fv(pa),e=Ft.transition,n=ce;try{if(Ft.transition=null,ce=16>t?16:t,$n===null)var r=!1;else{if(t=$n,$n=null,pa=0,le&6)throw Error(G(331));var i=le;for(le|=4,K=t.current;K!==null;){var o=K,s=o.child;if(K.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(K=c;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Ko(8,h,o)}var p=h.child;if(p!==null)p.return=h,K=p;else for(;K!==null;){h=K;var m=h.sibling,_=h.return;if(JE(h),h===c){K=null;break}if(m!==null){m.return=_,K=m;break}K=_}}}var R=o.alternate;if(R!==null){var x=R.child;if(x!==null){R.child=null;do{var M=x.sibling;x.sibling=null,x=M}while(x!==null)}}K=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,K=s;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ko(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,K=w;break e}K=o.return}}var I=t.current;for(K=I;K!==null;){s=K;var A=s.child;if(s.subtreeFlags&2064&&A!==null)A.return=s,K=A;else e:for(s=I;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$a(9,l)}}catch(F){Re(l,l.return,F)}if(l===s){K=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,K=V;break e}K=l.return}}if(le=i,vr(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Ua,t)}catch{}r=!0}return r}finally{ce=n,Ft.transition=e}}return!1}function jm(t,e,n){e=Gi(n,e),e=FE(t,e,1),t=jn(t,e,1),e=ft(),t!==null&&(Vs(t,1,e),Ct(t,e))}function Re(t,e,n){if(t.tag===3)jm(t,t,n);else for(;e!==null;){if(e.tag===3){jm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(er===null||!er.has(r))){t=Gi(n,t),t=UE(e,t,1),e=jn(e,t,1),t=ft(),e!==null&&(Vs(e,1,t),Ct(e,t));break}}e=e.return}}function bA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ft(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(Qe&n)===n&&(be===4||be===3&&(Qe&130023424)===Qe&&500>xe()-zf?Or(t,0):Hf|=n),Ct(t,e)}function rT(t,e){e===0&&(t.mode&1?(e=ul,ul<<=1,!(ul&130023424)&&(ul=4194304)):e=1);var n=ft();t=In(t,e),t!==null&&(Vs(t,e,n),Ct(t,n))}function BA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rT(t,n)}function qA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),rT(t,n)}var iT;iT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Et.current)vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return vt=!1,PA(t,e,n);vt=!!(t.flags&131072)}else vt=!1,Ee&&e.flags&1048576&&aE(e,oa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vl(t,e),t=e.pendingProps;var i=Oi(e,lt.current);Ni(e,n),i=Uf(null,e,r,t,i,n);var o=Of();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(r)?(o=!0,ra(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Mf(e),i.updater=za,e.stateNode=i,i._reactInternals=e,id(e,r,t,n),e=ld(null,e,r,!0,o,n)):(e.tag=0,Ee&&o&&wf(e),dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=HA(r),t=Gt(r,t),i){case 0:e=sd(null,e,r,t,n);break e;case 1:e=Hm(null,e,r,t,n);break e;case 11:e=qm(null,e,r,t,n);break e;case 14:e=Gm(null,e,r,Gt(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),sd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),Hm(t,e,r,i,n);case 3:e:{if(qE(e),t===null)throw Error(G(387));r=e.pendingProps,o=e.memoizedState,i=o.element,pE(t,e),aa(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Gi(Error(G(423)),e),e=zm(t,e,r,n,i);break e}else if(r!==i){i=Gi(Error(G(424)),e),e=zm(t,e,r,n,i);break e}else for(wt=Zn(e.stateNode.containerInfo.firstChild),Rt=e,Ee=!0,zt=null,n=fE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bi(),r===i){e=Sn(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return mE(e),t===null&&td(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Yc(r,i)?s=null:o!==null&&Yc(r,o)&&(e.flags|=32),BE(t,e),dt(t,e,s,n),e.child;case 6:return t===null&&td(e),null;case 13:return GE(t,e,n);case 4:return Df(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bi(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),qm(t,e,r,i,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,he(sa,r._currentValue),r._currentValue=s,o!==null)if(Kt(o.value,s)){if(o.children===i.children&&!Et.current){e=Sn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=En(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),nd(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(G(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),nd(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ni(e,n),i=Ot(i),r=r(i),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,i=Gt(r,e.pendingProps),i=Gt(r.type,i),Gm(t,e,r,i,n);case 15:return OE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),Vl(t,e),e.tag=1,Tt(r)?(t=!0,ra(e)):t=!1,Ni(e,n),LE(e,r,i),id(e,r,i,n),ld(null,e,r,!0,t,n);case 19:return HE(t,e,n);case 22:return bE(t,e,n)}throw Error(G(156,e.tag))};function oT(t,e){return Mv(t,e)}function GA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,r){return new GA(t,e,n,r)}function Kf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HA(t){if(typeof t=="function")return Kf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hf)return 11;if(t===pf)return 14}return 2}function nr(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ul(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Kf(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case hi:return br(n.children,i,o,e);case ff:s=8,i|=8;break;case Pc:return t=Lt(12,n,e,i|2),t.elementType=Pc,t.lanes=o,t;case Nc:return t=Lt(13,n,e,i),t.elementType=Nc,t.lanes=o,t;case xc:return t=Lt(19,n,e,i),t.elementType=xc,t.lanes=o,t;case mv:return Ja(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hv:s=10;break e;case pv:s=9;break e;case hf:s=11;break e;case pf:s=14;break e;case Bn:s=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Lt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function br(t,e,n,r){return t=Lt(7,t,r,e),t.lanes=n,t}function Ja(t,e,n,r){return t=Lt(22,t,r,e),t.elementType=mv,t.lanes=n,t.stateNode={isHidden:!1},t}function pc(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function mc(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qu(0),this.expirationTimes=Qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qf(t,e,n,r,i,o,s,l,u){return t=new zA(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Lt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mf(o),t}function $A(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function sT(t){if(!t)return cr;t=t._reactInternals;e:{if(Xr(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Tt(n))return sE(t,n,e)}return e}function lT(t,e,n,r,i,o,s,l,u){return t=Qf(n,r,!0,t,i,o,s,l,u),t.context=sT(null),n=t.current,r=ft(),i=tr(n),o=En(r,i),o.callback=e??null,jn(n,o,i),t.current.lanes=i,Vs(t,i,r),Ct(t,r),t}function Ka(t,e,n,r){var i=e.current,o=ft(),s=tr(i);return n=sT(n),e.context===null?e.context=n:e.pendingContext=n,e=En(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jn(i,e,s),t!==null&&(Wt(t,i,s,o),kl(t,i,s)),s}function ga(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yf(t,e){eg(t,e),(t=t.alternate)&&eg(t,e)}function WA(){return null}var aT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xf(t){this._internalRoot=t}Qa.prototype.render=Xf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Ka(t,e,null,null)};Qa.prototype.unmount=Xf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wr(function(){Ka(null,t,null,null)}),e[Cn]=null}};function Qa(t){this._internalRoot=t}Qa.prototype.unstable_scheduleHydration=function(t){if(t){var e=bv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gn.length&&e!==0&&e<Gn[n].priority;n++);Gn.splice(n,0,t),n===0&&qv(t)}};function Zf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ya(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tg(){}function JA(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=ga(s);o.call(c)}}var s=lT(e,r,t,0,null,!1,!1,"",tg);return t._reactRootContainer=s,t[Cn]=s.current,ds(t.nodeType===8?t.parentNode:t),Wr(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=ga(u);l.call(c)}}var u=Qf(t,0,!1,null,null,!1,!1,"",tg);return t._reactRootContainer=u,t[Cn]=u.current,ds(t.nodeType===8?t.parentNode:t),Wr(function(){Ka(e,u,n,r)}),u}function Xa(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=ga(s);l.call(u)}}Ka(e,s,t,i)}else s=JA(n,e,t,i,r);return ga(s)}Uv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fo(e.pendingLanes);n!==0&&(yf(e,n|1),Ct(e,xe()),!(le&6)&&(Hi=xe()+500,vr()))}break;case 13:Wr(function(){var r=In(t,1);if(r!==null){var i=ft();Wt(r,t,1,i)}}),Yf(t,1)}};_f=function(t){if(t.tag===13){var e=In(t,134217728);if(e!==null){var n=ft();Wt(e,t,134217728,n)}Yf(t,134217728)}};Ov=function(t){if(t.tag===13){var e=tr(t),n=In(t,e);if(n!==null){var r=ft();Wt(n,t,e,r)}Yf(t,e)}};bv=function(){return ce};Bv=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};Bc=function(t,e,n){switch(e){case"input":if(Dc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=qa(r);if(!i)throw Error(G(90));yv(r),Dc(r,i)}}}break;case"textarea":vv(t,n);break;case"select":e=n.value,e!=null&&wi(t,!!n.multiple,e,!1)}};Av=$f;Rv=Wr;var KA={usingClientEntryPoint:!1,Events:[Fs,yi,qa,Sv,wv,$f]},Mo={findFiberByHostInstance:Vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QA={bundleType:Mo.bundleType,version:Mo.version,rendererPackageName:Mo.rendererPackageName,rendererConfig:Mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xv(t),t===null?null:t.stateNode},findFiberByHostInstance:Mo.findFiberByHostInstance||WA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{Ua=El.inject(QA),rn=El}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KA;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zf(e))throw Error(G(200));return $A(t,e,null,n)};Nt.createRoot=function(t,e){if(!Zf(t))throw Error(G(299));var n=!1,r="",i=aT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Qf(t,1,!1,null,null,n,!1,r,i),t[Cn]=e.current,ds(t.nodeType===8?t.parentNode:t),new Xf(e)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=xv(e),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return Wr(t)};Nt.hydrate=function(t,e,n){if(!Ya(e))throw Error(G(200));return Xa(null,t,e,!0,n)};Nt.hydrateRoot=function(t,e,n){if(!Zf(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=aT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=lT(e,null,t,1,n??null,i,!1,o,s),t[Cn]=e.current,ds(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qa(e)};Nt.render=function(t,e,n){if(!Ya(e))throw Error(G(200));return Xa(null,t,e,!1,n)};Nt.unmountComponentAtNode=function(t){if(!Ya(t))throw Error(G(40));return t._reactRootContainer?(Wr(function(){Xa(null,null,t,!1,function(){t._reactRootContainer=null,t[Cn]=null})}),!0):!1};Nt.unstable_batchedUpdates=$f;Nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ya(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Xa(t,e,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function uT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uT)}catch(t){console.error(t)}}uT(),uv.exports=Nt;var YA=uv.exports,ng=YA;Ac.createRoot=ng.createRoot,Ac.hydrateRoot=ng.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Es(){return Es=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Es.apply(this,arguments)}var Wn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wn||(Wn={}));const rg="popstate";function XA(t){t===void 0&&(t={});function e(i,o){let{pathname:s="/",search:l="",hash:u=""}=Zr(i.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),vd("",{pathname:s,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),l="";if(s&&s.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof o=="string"?o:ya(o))}function r(i,o){Za(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return jA(e,n,r,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Za(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZA(){return Math.random().toString(36).substr(2,8)}function ig(t,e){return{usr:t.state,key:t.key,idx:e}}function vd(t,e,n,r){return n===void 0&&(n=null),Es({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zr(e):e,{state:n,key:e&&e.key||r||ZA()})}function ya(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function jA(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=Wn.Pop,u=null,c=h();c==null&&(c=0,s.replaceState(Es({},s.state,{idx:c}),""));function h(){return(s.state||{idx:null}).idx}function p(){l=Wn.Pop;let M=h(),w=M==null?null:M-c;c=M,u&&u({action:l,location:x.location,delta:w})}function m(M,w){l=Wn.Push;let I=vd(x.location,M,w);n&&n(I,M),c=h()+1;let A=ig(I,c),V=x.createHref(I);try{s.pushState(A,"",V)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(V)}o&&u&&u({action:l,location:x.location,delta:1})}function _(M,w){l=Wn.Replace;let I=vd(x.location,M,w);n&&n(I,M),c=h();let A=ig(I,c),V=x.createHref(I);s.replaceState(A,"",V),o&&u&&u({action:l,location:x.location,delta:0})}function R(M){let w=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof M=="string"?M:ya(M);return I=I.replace(/ $/,"%20"),Fe(w,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,w)}let x={get action(){return l},get location(){return t(i,s)},listen(M){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(rg,p),u=M,()=>{i.removeEventListener(rg,p),u=null}},createHref(M){return e(i,M)},createURL:R,encodeLocation(M){let w=R(M);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:_,go(M){return s.go(M)}};return x}var og;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(og||(og={}));function e0(t,e,n){return n===void 0&&(n="/"),t0(t,e,n)}function t0(t,e,n,r){let i=typeof e=="string"?Zr(e):e,o=jf(i.pathname||"/",n);if(o==null)return null;let s=cT(t);n0(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let c=p0(o);l=d0(s[u],c)}return l}function cT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(Fe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=rr([r,u.relativePath]),h=n.concat(u);o.children&&o.children.length>0&&(Fe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cT(o.children,e,h,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:u0(c,o.index),routesMeta:h})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,s);else for(let u of dT(o.path))i(o,s,u)}),e}function dT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=dT(r.join("/")),l=[];return l.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&l.push(...s),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function n0(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:c0(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const r0=/^:[\w-]+$/,i0=3,o0=2,s0=1,l0=10,a0=-2,sg=t=>t==="*";function u0(t,e){let n=t.split("/"),r=n.length;return n.some(sg)&&(r+=a0),e&&(r+=o0),n.filter(i=>!sg(i)).reduce((i,o)=>i+(r0.test(o)?i0:o===""?s0:l0),r)}function c0(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function d0(t,e,n){let{routesMeta:r}=t,i={},o="/",s=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,h=o==="/"?e:e.slice(o.length)||"/",p=f0({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:rr([o,p.pathname]),pathnameBase:v0(rr([o,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(o=rr([o,p.pathnameBase]))}return s}function f0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=h0(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,h,p)=>{let{paramName:m,isOptional:_}=h;if(m==="*"){let x=l[p]||"";s=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const R=l[p];return _&&!R?c[m]=void 0:c[m]=(R||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:t}}function h0(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Za(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function p0(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Za(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const m0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,g0=t=>m0.test(t);function y0(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Zr(t):t,o;if(n)if(g0(n))o=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),Za(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+n))}n.startsWith("/")?o=lg(n.substring(1),"/"):o=lg(n,e)}else o=e;return{pathname:o,search:E0(r),hash:T0(i)}}function lg(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function gc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _0(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fT(t,e){let n=_0(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hT(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Zr(t):(i=Es({},t),Fe(!i.pathname||!i.pathname.includes("?"),gc("?","pathname","search",i)),Fe(!i.pathname||!i.pathname.includes("#"),gc("#","pathname","hash",i)),Fe(!i.search||!i.search.includes("#"),gc("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else{let p=e.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?e[p]:"/"}let u=y0(i,l),c=s&&s!=="/"&&s.endsWith("/"),h=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const rr=t=>t.join("/").replace(/\/\/+/g,"/"),v0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),E0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,T0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function C0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const pT=["post","put","patch","delete"];new Set(pT);const I0=["get",...pT];new Set(I0);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ts(){return Ts=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ts.apply(this,arguments)}const eh=q.createContext(null),S0=q.createContext(null),jr=q.createContext(null),ja=q.createContext(null),ei=q.createContext({outlet:null,matches:[],isDataRoute:!1}),mT=q.createContext(null);function w0(t,e){let{relative:n}=e===void 0?{}:e;Os()||Fe(!1);let{basename:r,navigator:i}=q.useContext(jr),{hash:o,pathname:s,search:l}=yT(t,{relative:n}),u=s;return r!=="/"&&(u=s==="/"?r:rr([r,s])),i.createHref({pathname:u,search:l,hash:o})}function Os(){return q.useContext(ja)!=null}function eu(){return Os()||Fe(!1),q.useContext(ja).location}function gT(t){q.useContext(jr).static||q.useLayoutEffect(t)}function A0(){let{isDataRoute:t}=q.useContext(ei);return t?b0():R0()}function R0(){Os()||Fe(!1);let t=q.useContext(eh),{basename:e,future:n,navigator:r}=q.useContext(jr),{matches:i}=q.useContext(ei),{pathname:o}=eu(),s=JSON.stringify(fT(i,n.v7_relativeSplatPath)),l=q.useRef(!1);return gT(()=>{l.current=!0}),q.useCallback(function(c,h){if(h===void 0&&(h={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let p=hT(c,JSON.parse(s),o,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:rr([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,s,o,t])}function yT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=q.useContext(jr),{matches:i}=q.useContext(ei),{pathname:o}=eu(),s=JSON.stringify(fT(i,r.v7_relativeSplatPath));return q.useMemo(()=>hT(t,JSON.parse(s),o,n==="path"),[t,s,o,n])}function P0(t,e){return N0(t,e)}function N0(t,e,n,r){Os()||Fe(!1);let{navigator:i}=q.useContext(jr),{matches:o}=q.useContext(ei),s=o[o.length-1],l=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let c=eu(),h;if(e){var p;let M=typeof e=="string"?Zr(e):e;u==="/"||(p=M.pathname)!=null&&p.startsWith(u)||Fe(!1),h=M}else h=c;let m=h.pathname||"/",_=m;if(u!=="/"){let M=u.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(M.length).join("/")}let R=e0(t,{pathname:_}),x=V0(R&&R.map(M=>Object.assign({},M,{params:Object.assign({},l,M.params),pathname:rr([u,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?u:rr([u,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),o,n,r);return e&&x?q.createElement(ja.Provider,{value:{location:Ts({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Wn.Pop}},x):x}function x0(){let t=O0(),e=C0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:i},n):null,null)}const k0=q.createElement(x0,null);class M0 extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(ei.Provider,{value:this.props.routeContext},q.createElement(mT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D0(t){let{routeContext:e,match:n,children:r}=t,i=q.useContext(eh);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(ei.Provider,{value:e},r)}function V0(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=s.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);h>=0||Fe(!1),s=s.slice(0,Math.min(s.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:m,errors:_}=n,R=p.route.loader&&m[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||R){u=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((h,p,m)=>{let _,R=!1,x=null,M=null;n&&(_=l&&p.route.id?l[p.route.id]:void 0,x=p.route.errorElement||k0,u&&(c<0&&m===0?(B0("route-fallback"),R=!0,M=null):c===m&&(R=!0,M=p.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,m+1)),I=()=>{let A;return _?A=x:R?A=M:p.route.Component?A=q.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=h,q.createElement(D0,{match:p,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:A})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?q.createElement(M0,{location:n.location,revalidation:n.revalidation,component:x,error:_,children:I(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):I()},null)}var _T=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_T||{}),vT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vT||{});function L0(t){let e=q.useContext(eh);return e||Fe(!1),e}function F0(t){let e=q.useContext(S0);return e||Fe(!1),e}function U0(t){let e=q.useContext(ei);return e||Fe(!1),e}function ET(t){let e=U0(),n=e.matches[e.matches.length-1];return n.route.id||Fe(!1),n.route.id}function O0(){var t;let e=q.useContext(mT),n=F0(),r=ET();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function b0(){let{router:t}=L0(_T.UseNavigateStable),e=ET(vT.UseNavigateStable),n=q.useRef(!1);return gT(()=>{n.current=!0}),q.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ts({fromRouteId:e},o)))},[t,e])}const ag={};function B0(t,e,n){ag[t]||(ag[t]=!0)}function q0(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function pn(t){Fe(!1)}function G0(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Wn.Pop,navigator:o,static:s=!1,future:l}=t;Os()&&Fe(!1);let u=e.replace(/^\/*/,"/"),c=q.useMemo(()=>({basename:u,navigator:o,static:s,future:Ts({v7_relativeSplatPath:!1},l)}),[u,l,o,s]);typeof r=="string"&&(r=Zr(r));let{pathname:h="/",search:p="",hash:m="",state:_=null,key:R="default"}=r,x=q.useMemo(()=>{let M=jf(h,u);return M==null?null:{location:{pathname:M,search:p,hash:m,state:_,key:R},navigationType:i}},[u,h,p,m,_,R,i]);return x==null?null:q.createElement(jr.Provider,{value:c},q.createElement(ja.Provider,{children:n,value:x}))}function H0(t){let{children:e,location:n}=t;return P0(Ed(e),n)}new Promise(()=>{});function Ed(t,e){e===void 0&&(e=[]);let n=[];return q.Children.forEach(t,(r,i)=>{if(!q.isValidElement(r))return;let o=[...e,i];if(r.type===q.Fragment){n.push.apply(n,Ed(r.props.children,o));return}r.type!==pn&&Fe(!1),!r.props.index||!r.props.children||Fe(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Ed(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Td.apply(this,arguments)}function z0(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $0(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function W0(t,e){return t.button===0&&(!e||e==="_self")&&!$0(t)}const J0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],K0="6";try{window.__reactRouterVersion=K0}catch{}const Q0="startTransition",ug=bS[Q0];function Y0(t){let{basename:e,children:n,future:r,window:i}=t,o=q.useRef();o.current==null&&(o.current=XA({window:i,v5Compat:!0}));let s=o.current,[l,u]=q.useState({action:s.action,location:s.location}),{v7_startTransition:c}=r||{},h=q.useCallback(p=>{c&&ug?ug(()=>u(p)):u(p)},[u,c]);return q.useLayoutEffect(()=>s.listen(h),[s,h]),q.useEffect(()=>q0(r),[r]),q.createElement(G0,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:s,future:r})}const X0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=q.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:l,target:u,to:c,preventScrollReset:h,viewTransition:p}=e,m=z0(e,J0),{basename:_}=q.useContext(jr),R,x=!1;if(typeof c=="string"&&Z0.test(c)&&(R=c,X0))try{let A=new URL(window.location.href),V=c.startsWith("//")?new URL(A.protocol+c):new URL(c),F=jf(V.pathname,_);V.origin===A.origin&&F!=null?c=F+V.search+V.hash:x=!0}catch{}let M=w0(c,{relative:i}),w=j0(c,{replace:s,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:p});function I(A){r&&r(A),A.defaultPrevented||w(A)}return q.createElement("a",Td({},m,{href:R||M,onClick:x||o?r:I,ref:n,target:u}))});var cg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cg||(cg={}));var dg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dg||(dg={}));function j0(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:l}=e===void 0?{}:e,u=A0(),c=eu(),h=yT(t,{relative:s});return q.useCallback(p=>{if(W0(p,n)){p.preventDefault();let m=r!==void 0?r:ya(c)===ya(h);u(t,{replace:m,state:i,preventScrollReset:o,relative:s,viewTransition:l})}},[c,u,h,r,i,n,t,o,s,l])}const eR=""+new URL("logo-BFZqakIN.png",import.meta.url).href;function tR(){const[t,e]=q.useState(!1),[n,r]=q.useState(window.pageYOffset),[i,o]=q.useState(!0),s=()=>{e(!t)};return q.useEffect(()=>{const l=()=>{const u=window.pageYOffset,c=n>u||u<10||t;o(c),r(u)};return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[n,t]),T.jsxs("nav",{className:`navbar ${i?"":"hidden"}`,children:[T.jsx("div",{className:"navbar-logo",children:T.jsxs(rt,{to:"/",onClick:()=>e(!1),children:[" ",T.jsx("img",{src:eR,alt:"Logo",className:"logo-image"})]})}),T.jsxs("div",{className:`hamburger ${t?"active":""}`,onClick:s,children:[T.jsx("span",{}),T.jsx("span",{}),T.jsx("span",{})]}),T.jsxs("ul",{className:`navbar-links ${t?"active":""}`,children:[T.jsx("li",{children:T.jsx(rt,{to:"/",onClick:s,children:"Home"})}),T.jsx("li",{children:T.jsx(rt,{to:"/about",onClick:s,children:"About"})}),T.jsx("li",{children:T.jsx(rt,{to:"/skill",onClick:s,children:"Skills"})}),T.jsx("li",{children:T.jsx(rt,{to:"/projects",onClick:s,children:"Projects"})}),T.jsx("li",{children:T.jsx(rt,{to:"/ai-answer",className:"ai-link",onClick:s,children:"AI Answer"})}),T.jsx("li",{children:T.jsx(rt,{to:"/contact",className:"cta-button",onClick:s,children:"Contact"})})]})]})}const TT=""+new URL("profile-7EXvHzVp.png",import.meta.url).href;function nR(){return T.jsx("section",{id:"home",className:"home-section","aria-label":"Introduction and Hero Section",children:T.jsxs("div",{className:"home-content",children:[T.jsxs("div",{className:"text-container",children:[T.jsx("p",{className:"greeting",children:"Hi, my name is"}),T.jsx("h1",{className:"name",children:"Pankaj Ray."}),T.jsx("h2",{className:"tagline",children:"I build animated and accessible web experiences."}),T.jsx("p",{className:"description",children:"I'm a Frontend Developer specializing in modern React applications. Currently, I'm focused on delivering high-performance, user-centric products and highly polished interfaces."}),T.jsx("a",{href:"http://localhost:5173/projects#/projects",className:"cta-button",children:"View My Work"})]}),T.jsx("div",{className:"animation-container",children:T.jsx("img",{src:TT,alt:"Pankaj Ray - Frontend Developer Profile Photo",className:"hero-profile-image"})})]})})}const rR=({text:t})=>{const[e,n]=q.useState(""),[r,i]=q.useState(0);return q.useEffect(()=>{if(r<t.length){const o=setTimeout(()=>{n(s=>s+t[r]),i(s=>s+1)},75);return()=>clearTimeout(o)}},[r,t]),T.jsxs("p",{className:"animated-message",children:[e,T.jsx("span",{className:"cursor-flash",children:"|"})]})};function iR(){const t=new Date().getFullYear();return T.jsx("footer",{className:"footer-container",children:T.jsxs("div",{className:"footer-content",children:[T.jsxs("div",{className:"footer-section footer-cta",children:[T.jsx(rR,{text:"Ready to build your next digital project?"}),T.jsx(rt,{to:"/contact",className:"cta-link-btn",children:"Let's Talk!"})]}),T.jsxs("div",{className:"footer-section footer-links-group",children:[T.jsx("h3",{children:"Quick Links"}),T.jsxs("ul",{children:[T.jsx("li",{children:T.jsx(rt,{to:"/",children:"Home"})}),T.jsx("li",{children:T.jsx(rt,{to:"/about",children:"About Me"})}),T.jsx("li",{children:T.jsx(rt,{to:"/projects",children:"Projects"})}),T.jsx("li",{children:T.jsx(rt,{to:"/skill",children:"Skills"})}),T.jsx("li",{children:T.jsx(rt,{to:"/ai-answer",children:"AI Answer"})})]})]}),T.jsxs("div",{className:"footer-section footer-info",children:[T.jsx("h3",{children:"Contact"}),T.jsx("a",{href:"tel:+919205905491",className:"footer-phone",children:"+91 9205905491"}),T.jsxs("div",{className:"social-links",children:[T.jsx("a",{href:"https://linkedin.com/in/pankajkumarray",target:"_blank",rel:"noopener noreferrer","aria-label":"LinkedIn",children:"LinkedIn"}),T.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub",children:"GitHub"}),T.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",children:"Twitter"})]}),T.jsx("div",{className:"footer-copyright",children:T.jsxs("p",{children:[" ",t," Pankaj Ray. All rights reserved.",T.jsxs("span",{className:"admin-access",children:["| ",T.jsx(rt,{to:"/admin",children:"Admin"})]})]})})]})]})})}const oR=()=>{};var fg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},IT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|l>>4;let m=(l&15)<<2|c>>6,_=c&63;u||(_=64,s||(m=64)),r.push(n[h],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||c==null||p==null)throw new lR;const m=o<<2|l>>4;if(r.push(m),c!==64){const _=l<<4&240|c>>2;if(r.push(_),p!==64){const R=c<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aR=function(t){const e=CT(t);return IT.encodeByteArray(e,!0)},_a=function(t){return aR(t).replace(/\./g,"")},uR=function(t){try{return IT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=()=>cR().__FIREBASE_DEFAULTS__,fR=()=>{if(typeof process>"u"||typeof fg>"u")return;const t=fg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uR(t[1]);return e&&JSON.parse(e)},th=()=>{try{return oR()||dR()||fR()||hR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pR=t=>{var e,n;return(n=(e=th())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},mR=t=>{const e=pR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ST=()=>{var t;return(t=th())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yR(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_a(JSON.stringify(n)),_a(JSON.stringify(s)),""].join(".")}const Xo={};function vR(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xo))Xo[e]?t.emulator.push(e):t.prod.push(e);return t}function ER(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let hg=!1;function TR(t,e){if(typeof window>"u"||typeof document>"u"||!nh(window.location.host)||Xo[t]===e||Xo[t]||hg)return;Xo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",o=vR().prod.length>0;function s(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{hg=!0,s()},m}function h(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=ER(r),_=n("text"),R=document.getElementById(_)||document.createElement("span"),x=n("learnmore"),M=document.getElementById(x)||document.createElement("a"),w=n("preprendIcon"),I=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const A=m.element;l(A),h(M,x);const V=c();u(I,w),A.append(I,R,M,V),document.body.appendChild(A)}o?(R.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IR(){var e;const t=(e=th())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SR(){return!IR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wR(){try{return typeof indexedDB=="object"}catch{return!1}}function AR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="FirebaseError";class ji extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RR,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wT.prototype.create)}}class wT{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?PR(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new ji(i,l,r)}}function PR(t,e){return t.replace(NR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const NR=/\{\$([^}]+)}/g;function va(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(pg(o)&&pg(s)){if(!va(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function pg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t){return t&&t._delegate?t._delegate:t}class Cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MR(e))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dr){return this.instances.has(e)}getOptions(e=Dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dr){return this.component?this.component.multipleInstances?e:Dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kR(t){return t===Dr?void 0:t}function MR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const VR={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},LR=se.INFO,FR={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},UR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=FR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class AT{constructor(e){this.name=e,this._logLevel=LR,this._logHandler=UR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const OR=(t,e)=>e.some(n=>t instanceof n);let mg,gg;function bR(){return mg||(mg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BR(){return gg||(gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RT=new WeakMap,Cd=new WeakMap,PT=new WeakMap,yc=new WeakMap,rh=new WeakMap;function qR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(ir(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&RT.set(n,t)}).catch(()=>{}),rh.set(e,t),e}function GR(t){if(Cd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Cd.set(t,e)}let Id={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function HR(t){Id=t(Id)}function zR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_c(this),e,...n);return PT.set(r,e.sort?e.sort():[e]),ir(r)}:BR().includes(t)?function(...e){return t.apply(_c(this),e),ir(RT.get(this))}:function(...e){return ir(t.apply(_c(this),e))}}function $R(t){return typeof t=="function"?zR(t):(t instanceof IDBTransaction&&GR(t),OR(t,bR())?new Proxy(t,Id):t)}function ir(t){if(t instanceof IDBRequest)return qR(t);if(yc.has(t))return yc.get(t);const e=$R(t);return e!==t&&(yc.set(t,e),rh.set(e,t)),e}const _c=t=>rh.get(t);function WR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=ir(s);return r&&s.addEventListener("upgradeneeded",u=>{r(ir(s.result),u.oldVersion,u.newVersion,ir(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const JR=["get","getKey","getAll","getAllKeys","count"],KR=["put","add","delete","clear"],vc=new Map;function yg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vc.get(e))return vc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=KR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||JR.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return vc.set(e,o),o}HR(t=>({...t,get:(e,n,r)=>yg(e,n)||t.get(e,n,r),has:(e,n)=>!!yg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sd="@firebase/app",_g="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new AT("@firebase/app"),XR="@firebase/app-compat",ZR="@firebase/analytics-compat",jR="@firebase/analytics",eP="@firebase/app-check-compat",tP="@firebase/app-check",nP="@firebase/auth",rP="@firebase/auth-compat",iP="@firebase/database",oP="@firebase/data-connect",sP="@firebase/database-compat",lP="@firebase/functions",aP="@firebase/functions-compat",uP="@firebase/installations",cP="@firebase/installations-compat",dP="@firebase/messaging",fP="@firebase/messaging-compat",hP="@firebase/performance",pP="@firebase/performance-compat",mP="@firebase/remote-config",gP="@firebase/remote-config-compat",yP="@firebase/storage",_P="@firebase/storage-compat",vP="@firebase/firestore",EP="@firebase/ai",TP="@firebase/firestore-compat",CP="firebase",IP="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="[DEFAULT]",SP={[Sd]:"fire-core",[XR]:"fire-core-compat",[jR]:"fire-analytics",[ZR]:"fire-analytics-compat",[tP]:"fire-app-check",[eP]:"fire-app-check-compat",[nP]:"fire-auth",[rP]:"fire-auth-compat",[iP]:"fire-rtdb",[oP]:"fire-data-connect",[sP]:"fire-rtdb-compat",[lP]:"fire-fn",[aP]:"fire-fn-compat",[uP]:"fire-iid",[cP]:"fire-iid-compat",[dP]:"fire-fcm",[fP]:"fire-fcm-compat",[hP]:"fire-perf",[pP]:"fire-perf-compat",[mP]:"fire-rc",[gP]:"fire-rc-compat",[yP]:"fire-gcs",[_P]:"fire-gcs-compat",[vP]:"fire-fst",[TP]:"fire-fst-compat",[EP]:"fire-vertex","fire-js":"fire-js",[CP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new Map,wP=new Map,Ad=new Map;function vg(t,e){try{t.container.addComponent(e)}catch(n){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ea(t){const e=t.name;if(Ad.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;Ad.set(e,t);for(const n of Is.values())vg(n,t);for(const n of wP.values())vg(n,t);return!0}function AP(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function RP(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new wT("app","Firebase",PP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=IP;function NT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:wd,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw or.create("bad-app-name",{appName:String(i)});if(n||(n=ST()),!n)throw or.create("no-options");const o=Is.get(i);if(o){if(va(n,o.options)&&va(r,o.config))return o;throw or.create("duplicate-app",{appName:i})}const s=new DR(i);for(const u of Ad.values())s.addComponent(u);const l=new NP(n,r,s);return Is.set(i,l),l}function xT(t=wd){const e=Is.get(t);if(!e&&t===wd&&ST())return NT();if(!e)throw or.create("no-app",{appName:t});return e}function kP(){return Array.from(Is.values())}function ki(t,e,n){let r=SP[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(s.join(" "));return}Ea(new Cs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="firebase-heartbeat-database",DP=1,Ss="firebase-heartbeat-store";let Ec=null;function kT(){return Ec||(Ec=WR(MP,DP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ss)}catch(n){console.warn(n)}}}}).catch(t=>{throw or.create("idb-open",{originalErrorMessage:t.message})})),Ec}async function VP(t){try{const n=(await kT()).transaction(Ss),r=await n.objectStore(Ss).get(MT(t));return await n.done,r}catch(e){if(e instanceof ji)wn.warn(e.message);else{const n=or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wn.warn(n.message)}}}async function Eg(t,e){try{const r=(await kT()).transaction(Ss,"readwrite");await r.objectStore(Ss).put(e,MT(t)),await r.done}catch(n){if(n instanceof ji)wn.warn(n.message);else{const r=or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wn.warn(r.message)}}}function MT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=1024,FP=30;class UP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Tg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>FP){const s=BP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tg(),{heartbeatsToSend:r,unsentEntries:i}=OP(this._heartbeatsCache.heartbeats),o=_a(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return wn.warn(n),""}}}function Tg(){return new Date().toISOString().substring(0,10)}function OP(t,e=LP){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Cg(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wR()?AR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Eg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Eg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Cg(t){return _a(JSON.stringify({version:2,heartbeats:t})).length}function BP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t){Ea(new Cs("platform-logger",e=>new QR(e),"PRIVATE")),Ea(new Cs("heartbeat",e=>new UP(e),"PRIVATE")),ki(Sd,_g,t),ki(Sd,_g,"esm2020"),ki("fire-js","")}qP("");var GP="firebase",HP="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki(GP,HP,"app");var Ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sr,DT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,E){function S(){}S.prototype=E.prototype,v.F=E.prototype,v.prototype=new S,v.prototype.constructor=v,v.D=function(P,k,D){for(var N=Array(arguments.length-2),we=2;we<arguments.length;we++)N[we-2]=arguments[we];return E.prototype[k].apply(P,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,E,S){S||(S=0);const P=Array(16);if(typeof E=="string")for(var k=0;k<16;++k)P[k]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(k=0;k<16;++k)P[k]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=v.g[0],S=v.g[1],k=v.g[2];let D=v.g[3],N;N=E+(D^S&(k^D))+P[0]+3614090360&4294967295,E=S+(N<<7&4294967295|N>>>25),N=D+(k^E&(S^k))+P[1]+3905402710&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(S^D&(E^S))+P[2]+606105819&4294967295,k=D+(N<<17&4294967295|N>>>15),N=S+(E^k&(D^E))+P[3]+3250441966&4294967295,S=k+(N<<22&4294967295|N>>>10),N=E+(D^S&(k^D))+P[4]+4118548399&4294967295,E=S+(N<<7&4294967295|N>>>25),N=D+(k^E&(S^k))+P[5]+1200080426&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(S^D&(E^S))+P[6]+2821735955&4294967295,k=D+(N<<17&4294967295|N>>>15),N=S+(E^k&(D^E))+P[7]+4249261313&4294967295,S=k+(N<<22&4294967295|N>>>10),N=E+(D^S&(k^D))+P[8]+1770035416&4294967295,E=S+(N<<7&4294967295|N>>>25),N=D+(k^E&(S^k))+P[9]+2336552879&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(S^D&(E^S))+P[10]+4294925233&4294967295,k=D+(N<<17&4294967295|N>>>15),N=S+(E^k&(D^E))+P[11]+2304563134&4294967295,S=k+(N<<22&4294967295|N>>>10),N=E+(D^S&(k^D))+P[12]+1804603682&4294967295,E=S+(N<<7&4294967295|N>>>25),N=D+(k^E&(S^k))+P[13]+4254626195&4294967295,D=E+(N<<12&4294967295|N>>>20),N=k+(S^D&(E^S))+P[14]+2792965006&4294967295,k=D+(N<<17&4294967295|N>>>15),N=S+(E^k&(D^E))+P[15]+1236535329&4294967295,S=k+(N<<22&4294967295|N>>>10),N=E+(k^D&(S^k))+P[1]+4129170786&4294967295,E=S+(N<<5&4294967295|N>>>27),N=D+(S^k&(E^S))+P[6]+3225465664&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^S&(D^E))+P[11]+643717713&4294967295,k=D+(N<<14&4294967295|N>>>18),N=S+(D^E&(k^D))+P[0]+3921069994&4294967295,S=k+(N<<20&4294967295|N>>>12),N=E+(k^D&(S^k))+P[5]+3593408605&4294967295,E=S+(N<<5&4294967295|N>>>27),N=D+(S^k&(E^S))+P[10]+38016083&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^S&(D^E))+P[15]+3634488961&4294967295,k=D+(N<<14&4294967295|N>>>18),N=S+(D^E&(k^D))+P[4]+3889429448&4294967295,S=k+(N<<20&4294967295|N>>>12),N=E+(k^D&(S^k))+P[9]+568446438&4294967295,E=S+(N<<5&4294967295|N>>>27),N=D+(S^k&(E^S))+P[14]+3275163606&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^S&(D^E))+P[3]+4107603335&4294967295,k=D+(N<<14&4294967295|N>>>18),N=S+(D^E&(k^D))+P[8]+1163531501&4294967295,S=k+(N<<20&4294967295|N>>>12),N=E+(k^D&(S^k))+P[13]+2850285829&4294967295,E=S+(N<<5&4294967295|N>>>27),N=D+(S^k&(E^S))+P[2]+4243563512&4294967295,D=E+(N<<9&4294967295|N>>>23),N=k+(E^S&(D^E))+P[7]+1735328473&4294967295,k=D+(N<<14&4294967295|N>>>18),N=S+(D^E&(k^D))+P[12]+2368359562&4294967295,S=k+(N<<20&4294967295|N>>>12),N=E+(S^k^D)+P[5]+4294588738&4294967295,E=S+(N<<4&4294967295|N>>>28),N=D+(E^S^k)+P[8]+2272392833&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^S)+P[11]+1839030562&4294967295,k=D+(N<<16&4294967295|N>>>16),N=S+(k^D^E)+P[14]+4259657740&4294967295,S=k+(N<<23&4294967295|N>>>9),N=E+(S^k^D)+P[1]+2763975236&4294967295,E=S+(N<<4&4294967295|N>>>28),N=D+(E^S^k)+P[4]+1272893353&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^S)+P[7]+4139469664&4294967295,k=D+(N<<16&4294967295|N>>>16),N=S+(k^D^E)+P[10]+3200236656&4294967295,S=k+(N<<23&4294967295|N>>>9),N=E+(S^k^D)+P[13]+681279174&4294967295,E=S+(N<<4&4294967295|N>>>28),N=D+(E^S^k)+P[0]+3936430074&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^S)+P[3]+3572445317&4294967295,k=D+(N<<16&4294967295|N>>>16),N=S+(k^D^E)+P[6]+76029189&4294967295,S=k+(N<<23&4294967295|N>>>9),N=E+(S^k^D)+P[9]+3654602809&4294967295,E=S+(N<<4&4294967295|N>>>28),N=D+(E^S^k)+P[12]+3873151461&4294967295,D=E+(N<<11&4294967295|N>>>21),N=k+(D^E^S)+P[15]+530742520&4294967295,k=D+(N<<16&4294967295|N>>>16),N=S+(k^D^E)+P[2]+3299628645&4294967295,S=k+(N<<23&4294967295|N>>>9),N=E+(k^(S|~D))+P[0]+4096336452&4294967295,E=S+(N<<6&4294967295|N>>>26),N=D+(S^(E|~k))+P[7]+1126891415&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~S))+P[14]+2878612391&4294967295,k=D+(N<<15&4294967295|N>>>17),N=S+(D^(k|~E))+P[5]+4237533241&4294967295,S=k+(N<<21&4294967295|N>>>11),N=E+(k^(S|~D))+P[12]+1700485571&4294967295,E=S+(N<<6&4294967295|N>>>26),N=D+(S^(E|~k))+P[3]+2399980690&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~S))+P[10]+4293915773&4294967295,k=D+(N<<15&4294967295|N>>>17),N=S+(D^(k|~E))+P[1]+2240044497&4294967295,S=k+(N<<21&4294967295|N>>>11),N=E+(k^(S|~D))+P[8]+1873313359&4294967295,E=S+(N<<6&4294967295|N>>>26),N=D+(S^(E|~k))+P[15]+4264355552&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~S))+P[6]+2734768916&4294967295,k=D+(N<<15&4294967295|N>>>17),N=S+(D^(k|~E))+P[13]+1309151649&4294967295,S=k+(N<<21&4294967295|N>>>11),N=E+(k^(S|~D))+P[4]+4149444226&4294967295,E=S+(N<<6&4294967295|N>>>26),N=D+(S^(E|~k))+P[11]+3174756917&4294967295,D=E+(N<<10&4294967295|N>>>22),N=k+(E^(D|~S))+P[2]+718787259&4294967295,k=D+(N<<15&4294967295|N>>>17),N=S+(D^(k|~E))+P[9]+3951481745&4294967295,v.g[0]=v.g[0]+E&4294967295,v.g[1]=v.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,v.g[2]=v.g[2]+k&4294967295,v.g[3]=v.g[3]+D&4294967295}r.prototype.v=function(v,E){E===void 0&&(E=v.length);const S=E-this.blockSize,P=this.C;let k=this.h,D=0;for(;D<E;){if(k==0)for(;D<=S;)i(this,v,D),D+=this.blockSize;if(typeof v=="string"){for(;D<E;)if(P[k++]=v.charCodeAt(D++),k==this.blockSize){i(this,P),k=0;break}}else for(;D<E;)if(P[k++]=v[D++],k==this.blockSize){i(this,P),k=0;break}}this.h=k,this.o+=E},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var E=1;E<v.length-8;++E)v[E]=0;E=this.o*8;for(var S=v.length-8;S<v.length;++S)v[S]=E&255,E/=256;for(this.v(v),v=Array(16),E=0,S=0;S<4;++S)for(let P=0;P<32;P+=8)v[E++]=this.g[S]>>>P&255;return v};function o(v,E){var S=l;return Object.prototype.hasOwnProperty.call(S,v)?S[v]:S[v]=E(v)}function s(v,E){this.h=E;const S=[];let P=!0;for(let k=v.length-1;k>=0;k--){const D=v[k]|0;P&&D==E||(S[k]=D,P=!1)}this.g=S}var l={};function u(v){return-128<=v&&v<128?o(v,function(E){return new s([E|0],E<0?-1:0)}):new s([v|0],v<0?-1:0)}function c(v){if(isNaN(v)||!isFinite(v))return p;if(v<0)return M(c(-v));const E=[];let S=1;for(let P=0;v>=S;P++)E[P]=v/S|0,S*=4294967296;return new s(E,0)}function h(v,E){if(v.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(v.charAt(0)=="-")return M(h(v.substring(1),E));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=c(Math.pow(E,8));let P=p;for(let D=0;D<v.length;D+=8){var k=Math.min(8,v.length-D);const N=parseInt(v.substring(D,D+k),E);k<8?(k=c(Math.pow(E,k)),P=P.j(k).add(c(N))):(P=P.j(S),P=P.add(c(N)))}return P}var p=u(0),m=u(1),_=u(16777216);t=s.prototype,t.m=function(){if(x(this))return-M(this).m();let v=0,E=1;for(let S=0;S<this.g.length;S++){const P=this.i(S);v+=(P>=0?P:4294967296+P)*E,E*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(R(this))return"0";if(x(this))return"-"+M(this).toString(v);const E=c(Math.pow(v,6));var S=this;let P="";for(;;){const k=V(S,E).g;S=w(S,k.j(E));let D=((S.g.length>0?S.g[0]:S.h)>>>0).toString(v);if(S=k,R(S))return D+P;for(;D.length<6;)D="0"+D;P=D+P}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function R(v){if(v.h!=0)return!1;for(let E=0;E<v.g.length;E++)if(v.g[E]!=0)return!1;return!0}function x(v){return v.h==-1}t.l=function(v){return v=w(this,v),x(v)?-1:R(v)?0:1};function M(v){const E=v.g.length,S=[];for(let P=0;P<E;P++)S[P]=~v.g[P];return new s(S,~v.h).add(m)}t.abs=function(){return x(this)?M(this):this},t.add=function(v){const E=Math.max(this.g.length,v.g.length),S=[];let P=0;for(let k=0;k<=E;k++){let D=P+(this.i(k)&65535)+(v.i(k)&65535),N=(D>>>16)+(this.i(k)>>>16)+(v.i(k)>>>16);P=N>>>16,D&=65535,N&=65535,S[k]=N<<16|D}return new s(S,S[S.length-1]&-2147483648?-1:0)};function w(v,E){return v.add(M(E))}t.j=function(v){if(R(this)||R(v))return p;if(x(this))return x(v)?M(this).j(M(v)):M(M(this).j(v));if(x(v))return M(this.j(M(v)));if(this.l(_)<0&&v.l(_)<0)return c(this.m()*v.m());const E=this.g.length+v.g.length,S=[];for(var P=0;P<2*E;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(let k=0;k<v.g.length;k++){const D=this.i(P)>>>16,N=this.i(P)&65535,we=v.i(k)>>>16,mt=v.i(k)&65535;S[2*P+2*k]+=N*mt,I(S,2*P+2*k),S[2*P+2*k+1]+=D*mt,I(S,2*P+2*k+1),S[2*P+2*k+1]+=N*we,I(S,2*P+2*k+1),S[2*P+2*k+2]+=D*we,I(S,2*P+2*k+2)}for(v=0;v<E;v++)S[v]=S[2*v+1]<<16|S[2*v];for(v=E;v<2*E;v++)S[v]=0;return new s(S,0)};function I(v,E){for(;(v[E]&65535)!=v[E];)v[E+1]+=v[E]>>>16,v[E]&=65535,E++}function A(v,E){this.g=v,this.h=E}function V(v,E){if(R(E))throw Error("division by zero");if(R(v))return new A(p,p);if(x(v))return E=V(M(v),E),new A(M(E.g),M(E.h));if(x(E))return E=V(v,M(E)),new A(M(E.g),E.h);if(v.g.length>30){if(x(v)||x(E))throw Error("slowDivide_ only works with positive integers.");for(var S=m,P=E;P.l(v)<=0;)S=F(S),P=F(P);var k=O(S,1),D=O(P,1);for(P=O(P,2),S=O(S,2);!R(P);){var N=D.add(P);N.l(v)<=0&&(k=k.add(S),D=N),P=O(P,1),S=O(S,1)}return E=w(v,k.j(E)),new A(k,E)}for(k=p;v.l(E)>=0;){for(S=Math.max(1,Math.floor(v.m()/E.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),D=c(S),N=D.j(E);x(N)||N.l(v)>0;)S-=P,D=c(S),N=D.j(E);R(D)&&(D=m),k=k.add(D),v=w(v,N)}return new A(k,v)}t.B=function(v){return V(this,v).h},t.and=function(v){const E=Math.max(this.g.length,v.g.length),S=[];for(let P=0;P<E;P++)S[P]=this.i(P)&v.i(P);return new s(S,this.h&v.h)},t.or=function(v){const E=Math.max(this.g.length,v.g.length),S=[];for(let P=0;P<E;P++)S[P]=this.i(P)|v.i(P);return new s(S,this.h|v.h)},t.xor=function(v){const E=Math.max(this.g.length,v.g.length),S=[];for(let P=0;P<E;P++)S[P]=this.i(P)^v.i(P);return new s(S,this.h^v.h)};function F(v){const E=v.g.length+1,S=[];for(let P=0;P<E;P++)S[P]=v.i(P)<<1|v.i(P-1)>>>31;return new s(S,v.h)}function O(v,E){const S=E>>5;E%=32;const P=v.g.length-S,k=[];for(let D=0;D<P;D++)k[D]=E>0?v.i(D+S)>>>E|v.i(D+S+1)<<32-E:v.i(D+S);return new s(k,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,DT=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=h,sr=s}).apply(typeof Ig<"u"?Ig:typeof self<"u"?self:typeof window<"u"?window:{});var Tl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VT,Oo,LT,Ol,Rd,FT,UT,OT;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tl=="object"&&Tl];for(var g=0;g<f.length;++g){var y=f[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(f,g){if(g)e:{var y=r;f=f.split(".");for(var C=0;C<f.length-1;C++){var L=f[C];if(!(L in y))break e;y=y[L]}f=f[f.length-1],C=y[f],g=g(C),g!=C&&g!=null&&e(y,f,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(g){var y=[],C;for(C in g)Object.prototype.hasOwnProperty.call(g,C)&&y.push([C,g[C]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function l(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function u(f,g,y){return f.call.apply(f.bind,arguments)}function c(f,g,y){return c=u,c.apply(null,arguments)}function h(f,g){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),f.apply(this,C)}}function p(f,g){function y(){}y.prototype=g.prototype,f.Z=g.prototype,f.prototype=new y,f.prototype.constructor=f,f.Ob=function(C,L,U){for(var H=Array(arguments.length-2),te=2;te<arguments.length;te++)H[te-2]=arguments[te];return g.prototype[L].apply(C,H)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function _(f){const g=f.length;if(g>0){const y=Array(g);for(let C=0;C<g;C++)y[C]=f[C];return y}return[]}function R(f,g){for(let C=1;C<arguments.length;C++){const L=arguments[C];var y=typeof L;if(y=y!="object"?y:L?Array.isArray(L)?"array":y:"null",y=="array"||y=="object"&&typeof L.length=="number"){y=f.length||0;const U=L.length||0;f.length=y+U;for(let H=0;H<U;H++)f[y+H]=L[H]}else f.push(L)}}class x{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function M(f){s.setTimeout(()=>{throw f},0)}function w(){var f=v;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class I{constructor(){this.h=this.g=null}add(g,y){const C=A.get();C.set(g,y),this.h?this.h.next=C:this.g=C,this.h=C}}var A=new x(()=>new V,f=>f.reset());class V{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let F,O=!1,v=new I,E=()=>{const f=Promise.resolve(void 0);F=()=>{f.then(S)}};function S(){for(var f;f=w();){try{f.h.call(f.g)}catch(y){M(y)}var g=A;g.j(f),g.h<100&&(g.h++,f.next=g.g,g.g=f)}O=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const y=()=>{};s.addEventListener("test",y,g),s.removeEventListener("test",y,g)}catch{}return f}();function N(f){return/^[\s\xa0]*$/.test(f)}function we(f,g){k.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,g)}p(we,k),we.prototype.init=function(f,g){const y=this.type=f.type,C=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget,g||(y=="mouseover"?g=f.fromElement:y=="mouseout"&&(g=f.toElement)),this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),at=0;function hn(f,g,y,C,L){this.listener=f,this.proxy=null,this.src=g,this.type=y,this.capture=!!C,this.ha=L,this.key=++at,this.da=this.fa=!1}function W(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function X(f,g,y){for(const C in f)g.call(y,f[C],C,f)}function ee(f,g){for(const y in f)g.call(void 0,f[y],y,f)}function ve(f){const g={};for(const y in f)g[y]=f[y];return g}const Pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sr(f,g){let y,C;for(let L=1;L<arguments.length;L++){C=arguments[L];for(y in C)f[y]=C[y];for(let U=0;U<Pe.length;U++)y=Pe[U],Object.prototype.hasOwnProperty.call(C,y)&&(f[y]=C[y])}}function kt(f){this.src=f,this.g={},this.h=0}kt.prototype.add=function(f,g,y,C,L){const U=f.toString();f=this.g[U],f||(f=this.g[U]=[],this.h++);const H=Bt(f,g,C,L);return H>-1?(g=f[H],y||(g.fa=!1)):(g=new hn(g,this.src,U,!!C,L),g.fa=y,f.push(g)),g};function wr(f,g){const y=g.type;if(y in f.g){var C=f.g[y],L=Array.prototype.indexOf.call(C,g,void 0),U;(U=L>=0)&&Array.prototype.splice.call(C,L,1),U&&(W(g),f.g[y].length==0&&(delete f.g[y],f.h--))}}function Bt(f,g,y,C){for(let L=0;L<f.length;++L){const U=f[L];if(!U.da&&U.listener==g&&U.capture==!!y&&U.ha==C)return L}return-1}var Mn="closure_lm_"+(Math.random()*1e6|0),Iu={};function Yh(f,g,y,C,L){if(Array.isArray(g)){for(let U=0;U<g.length;U++)Yh(f,g[U],y,C,L);return null}return y=jh(y),f&&f[mt]?f.J(g,y,l(C)?!!C.capture:!1,L):JI(f,g,y,!1,C,L)}function JI(f,g,y,C,L,U){if(!g)throw Error("Invalid event type");const H=l(L)?!!L.capture:!!L;let te=wu(f);if(te||(f[Mn]=te=new kt(f)),y=te.add(g,y,C,H,U),y.proxy)return y;if(C=KI(),y.proxy=C,C.src=f,C.listener=y,f.addEventListener)D||(L=H),L===void 0&&(L=!1),f.addEventListener(g.toString(),C,L);else if(f.attachEvent)f.attachEvent(Zh(g.toString()),C);else if(f.addListener&&f.removeListener)f.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function KI(){function f(y){return g.call(f.src,f.listener,y)}const g=QI;return f}function Xh(f,g,y,C,L){if(Array.isArray(g))for(var U=0;U<g.length;U++)Xh(f,g[U],y,C,L);else C=l(C)?!!C.capture:!!C,y=jh(y),f&&f[mt]?(f=f.i,U=String(g).toString(),U in f.g&&(g=f.g[U],y=Bt(g,y,C,L),y>-1&&(W(g[y]),Array.prototype.splice.call(g,y,1),g.length==0&&(delete f.g[U],f.h--)))):f&&(f=wu(f))&&(g=f.g[g.toString()],f=-1,g&&(f=Bt(g,y,C,L)),(y=f>-1?g[f]:null)&&Su(y))}function Su(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[mt])wr(g.i,f);else{var y=f.type,C=f.proxy;g.removeEventListener?g.removeEventListener(y,C,f.capture):g.detachEvent?g.detachEvent(Zh(y),C):g.addListener&&g.removeListener&&g.removeListener(C),(y=wu(g))?(wr(y,f),y.h==0&&(y.src=null,g[Mn]=null)):W(f)}}}function Zh(f){return f in Iu?Iu[f]:Iu[f]="on"+f}function QI(f,g){if(f.da)f=!0;else{g=new we(g,this);const y=f.listener,C=f.ha||f.src;f.fa&&Su(f),f=y.call(C,g)}return f}function wu(f){return f=f[Mn],f instanceof kt?f:null}var Au="__closure_events_fn_"+(Math.random()*1e9>>>0);function jh(f){return typeof f=="function"?f:(f[Au]||(f[Au]=function(g){return f.handleEvent(g)}),f[Au])}function Ze(){P.call(this),this.i=new kt(this),this.M=this,this.G=null}p(Ze,P),Ze.prototype[mt]=!0,Ze.prototype.removeEventListener=function(f,g,y,C){Xh(this,f,g,y,C)};function ut(f,g){var y,C=f.G;if(C)for(y=[];C;C=C.G)y.push(C);if(f=f.M,C=g.type||g,typeof g=="string")g=new k(g,f);else if(g instanceof k)g.target=g.target||f;else{var L=g;g=new k(C,f),Sr(g,L)}L=!0;let U,H;if(y)for(H=y.length-1;H>=0;H--)U=g.g=y[H],L=Ws(U,C,!0,g)&&L;if(U=g.g=f,L=Ws(U,C,!0,g)&&L,L=Ws(U,C,!1,g)&&L,y)for(H=0;H<y.length;H++)U=g.g=y[H],L=Ws(U,C,!1,g)&&L}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var f=this.i;for(const g in f.g){const y=f.g[g];for(let C=0;C<y.length;C++)W(y[C]);delete f.g[g],f.h--}}this.G=null},Ze.prototype.J=function(f,g,y,C){return this.i.add(String(f),g,!1,y,C)},Ze.prototype.K=function(f,g,y,C){return this.i.add(String(f),g,!0,y,C)};function Ws(f,g,y,C){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let U=0;U<g.length;++U){const H=g[U];if(H&&!H.da&&H.capture==y){const te=H.listener,Ue=H.ha||H.src;H.fa&&wr(f.i,H),L=te.call(Ue,C)!==!1&&L}}return L&&!C.defaultPrevented}function YI(f,g){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=c(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:s.setTimeout(f,g||0)}function ep(f){f.g=YI(()=>{f.g=null,f.i&&(f.i=!1,ep(f))},f.l);const g=f.h;f.h=null,f.m.apply(null,g)}class XI extends P{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ep(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ao(f){P.call(this),this.h=f,this.g={}}p(ao,P);var tp=[];function np(f){X(f.g,function(g,y){this.g.hasOwnProperty(y)&&Su(g)},f),f.g={}}ao.prototype.N=function(){ao.Z.N.call(this),np(this)},ao.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ru=s.JSON.stringify,ZI=s.JSON.parse,jI=class{stringify(f){return s.JSON.stringify(f,void 0)}parse(f){return s.JSON.parse(f,void 0)}};function rp(){}function ip(){}var uo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pu(){k.call(this,"d")}p(Pu,k);function Nu(){k.call(this,"c")}p(Nu,k);var Ar={},op=null;function Js(){return op=op||new Ze}Ar.Ia="serverreachability";function sp(f){k.call(this,Ar.Ia,f)}p(sp,k);function co(f){const g=Js();ut(g,new sp(g))}Ar.STAT_EVENT="statevent";function lp(f,g){k.call(this,Ar.STAT_EVENT,f),this.stat=g}p(lp,k);function ct(f){const g=Js();ut(g,new lp(g,f))}Ar.Ja="timingevent";function ap(f,g){k.call(this,Ar.Ja,f),this.size=g}p(ap,k);function fo(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){f()},g)}function ho(){this.g=!0}ho.prototype.ua=function(){this.g=!1};function eS(f,g,y,C,L,U){f.info(function(){if(f.g)if(U){var H="",te=U.split("&");for(let de=0;de<te.length;de++){var Ue=te[de].split("=");if(Ue.length>1){const qe=Ue[0];Ue=Ue[1];const Zt=qe.split("_");H=Zt.length>=2&&Zt[1]=="type"?H+(qe+"="+Ue+"&"):H+(qe+"=redacted&")}}}else H=null;else H=U;return"XMLHTTP REQ ("+C+") [attempt "+L+"]: "+g+`
`+y+`
`+H})}function tS(f,g,y,C,L,U,H){f.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+L+"]: "+g+`
`+y+`
`+U+" "+H})}function ii(f,g,y,C){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+rS(f,y)+(C?" "+C:"")})}function nS(f,g){f.info(function(){return"TIMEOUT: "+g})}ho.prototype.info=function(){};function rS(f,g){if(!f.g)return g;if(!g)return null;try{const U=JSON.parse(g);if(U){for(f=0;f<U.length;f++)if(Array.isArray(U[f])){var y=U[f];if(!(y.length<2)){var C=y[1];if(Array.isArray(C)&&!(C.length<1)){var L=C[0];if(L!="noop"&&L!="stop"&&L!="close")for(let H=1;H<C.length;H++)C[H]=""}}}}return Ru(U)}catch{return g}}var Ks={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},up={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cp;function xu(){}p(xu,rp),xu.prototype.g=function(){return new XMLHttpRequest},cp=new xu;function po(f){return encodeURIComponent(String(f))}function iS(f){var g=1;f=f.split(":");const y=[];for(;g>0&&f.length;)y.push(f.shift()),g--;return f.length&&y.push(f.join(":")),y}function Dn(f,g,y,C){this.j=f,this.i=g,this.l=y,this.S=C||1,this.V=new ao(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new dp}function dp(){this.i=null,this.g="",this.h=!1}var fp={},ku={};function Mu(f,g,y){f.M=1,f.A=Ys(Xt(g)),f.u=y,f.R=!0,hp(f,null)}function hp(f,g){f.F=Date.now(),Qs(f),f.B=Xt(f.A);var y=f.B,C=f.S;Array.isArray(C)||(C=[String(C)]),Ap(y.i,"t",C),f.C=0,y=f.j.L,f.h=new dp,f.g=zp(f.j,y?g:null,!f.u),f.P>0&&(f.O=new XI(c(f.Y,f,f.g),f.P)),g=f.V,y=f.g,C=f.ba;var L="readystatechange";Array.isArray(L)||(L&&(tp[0]=L.toString()),L=tp);for(let U=0;U<L.length;U++){const H=Yh(y,L[U],C||g.handleEvent,!1,g.h||g);if(!H)break;g.g[H.key]=H}g=f.J?ve(f.J):{},f.u?(f.v||(f.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,g)):(f.v="GET",f.g.ea(f.B,f.v,null,g)),co(),eS(f.i,f.v,f.B,f.l,f.S,f.u)}Dn.prototype.ba=function(f){f=f.target;const g=this.O;g&&Fn(f)==3?g.j():this.Y(f)},Dn.prototype.Y=function(f){try{if(f==this.g)e:{const te=Fn(this.g),Ue=this.g.ya(),de=this.g.ca();if(!(te<3)&&(te!=3||this.g&&(this.h.h||this.g.la()||Dp(this.g)))){this.K||te!=4||Ue==7||(Ue==8||de<=0?co(3):co(2)),Du(this);var g=this.g.ca();this.X=g;var y=oS(this);if(this.o=g==200,tS(this.i,this.v,this.B,this.l,this.S,te,g),this.o){if(this.U&&!this.L){t:{if(this.g){var C,L=this.g;if((C=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(C)){var U=C;break t}}U=null}if(f=U)ii(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vu(this,f);else{this.o=!1,this.m=3,ct(12),Rr(this),mo(this);break e}}if(this.R){f=!0;let qe;for(;!this.K&&this.C<y.length;)if(qe=sS(this,y),qe==ku){te==4&&(this.m=4,ct(14),f=!1),ii(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==fp){this.m=4,ct(15),ii(this.i,this.l,y,"[Invalid Chunk]"),f=!1;break}else ii(this.i,this.l,qe,null),Vu(this,qe);if(pp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||y.length!=0||this.h.h||(this.m=1,ct(16),f=!1),this.o=this.o&&f,!f)ii(this.i,this.l,y,"[Invalid Chunked Response]"),Rr(this),mo(this);else if(y.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Gu(H),H.P=!0,ct(11))}}else ii(this.i,this.l,y,null),Vu(this,y);te==4&&Rr(this),this.o&&!this.K&&(te==4?Bp(this.j,this):(this.o=!1,Qs(this)))}else ES(this.g),g==400&&y.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),Rr(this),mo(this)}}}catch{}finally{}};function oS(f){if(!pp(f))return f.g.la();const g=Dp(f.g);if(g==="")return"";let y="";const C=g.length,L=Fn(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Rr(f),mo(f),"";f.h.i=new s.TextDecoder}for(let U=0;U<C;U++)f.h.h=!0,y+=f.h.i.decode(g[U],{stream:!(L&&U==C-1)});return g.length=0,f.h.g+=y,f.C=0,f.h.g}function pp(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function sS(f,g){var y=f.C,C=g.indexOf(`
`,y);return C==-1?ku:(y=Number(g.substring(y,C)),isNaN(y)?fp:(C+=1,C+y>g.length?ku:(g=g.slice(C,C+y),f.C=C+y,g)))}Dn.prototype.cancel=function(){this.K=!0,Rr(this)};function Qs(f){f.T=Date.now()+f.H,mp(f,f.H)}function mp(f,g){if(f.D!=null)throw Error("WatchDog timer not null");f.D=fo(c(f.aa,f),g)}function Du(f){f.D&&(s.clearTimeout(f.D),f.D=null)}Dn.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(nS(this.i,this.B),this.M!=2&&(co(),ct(17)),Rr(this),this.m=2,mo(this)):mp(this,this.T-f)};function mo(f){f.j.I==0||f.K||Bp(f.j,f)}function Rr(f){Du(f);var g=f.O;g&&typeof g.dispose=="function"&&g.dispose(),f.O=null,np(f.V),f.g&&(g=f.g,f.g=null,g.abort(),g.dispose())}function Vu(f,g){try{var y=f.j;if(y.I!=0&&(y.g==f||Lu(y.h,f))){if(!f.L&&Lu(y.h,f)&&y.I==3){try{var C=y.Ba.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var L=C;if(L[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<f.F)tl(y),js(y);else break e;qu(y),ct(18)}}else y.xa=L[1],0<y.xa-y.K&&L[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=fo(c(y.Va,y),6e3));_p(y.h)<=1&&y.ta&&(y.ta=void 0)}else Nr(y,11)}else if((f.L||y.g==f)&&tl(y),!N(g))for(L=y.Ba.g.parse(g),g=0;g<L.length;g++){let de=L[g];const qe=de[0];if(!(qe<=y.K))if(y.K=qe,de=de[1],y.I==2)if(de[0]=="c"){y.M=de[1],y.ba=de[2];const Zt=de[3];Zt!=null&&(y.ka=Zt,y.j.info("VER="+y.ka));const xr=de[4];xr!=null&&(y.za=xr,y.j.info("SVER="+y.za));const Un=de[5];Un!=null&&typeof Un=="number"&&Un>0&&(C=1.5*Un,y.O=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;const On=f.g;if(On){const rl=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var U=C.h;U.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Fu(U,U.h),U.h=null))}if(C.G){const Hu=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;Hu&&(C.wa=Hu,pe(C.J,C.G,Hu))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-f.F,y.j.info("Handshake RTT: "+y.T+"ms")),C=y;var H=f;if(C.na=Hp(C,C.L?C.ba:null,C.W),H.L){vp(C.h,H);var te=H,Ue=C.O;Ue&&(te.H=Ue),te.D&&(Du(te),Qs(te)),C.g=H}else Op(C);y.i.length>0&&el(y)}else de[0]!="stop"&&de[0]!="close"||Nr(y,7);else y.I==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Nr(y,7):Bu(y):de[0]!="noop"&&y.l&&y.l.qa(de),y.A=0)}}co(4)}catch{}}var lS=class{constructor(f,g){this.g=f,this.map=g}};function gp(f){this.l=f||10,s.PerformanceNavigationTiming?(f=s.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yp(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function _p(f){return f.h?1:f.g?f.g.size:0}function Lu(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function Fu(f,g){f.g?f.g.add(g):f.h=g}function vp(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}gp.prototype.cancel=function(){if(this.i=Ep(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ep(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let g=f.i;for(const y of f.g.values())g=g.concat(y.G);return g}return _(f.i)}var Tp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aS(f,g){if(f){f=f.split("&");for(let y=0;y<f.length;y++){const C=f[y].indexOf("=");let L,U=null;C>=0?(L=f[y].substring(0,C),U=f[y].substring(C+1)):L=f[y],g(L,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Vn(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;f instanceof Vn?(this.l=f.l,go(this,f.j),this.o=f.o,this.g=f.g,yo(this,f.u),this.h=f.h,Uu(this,Rp(f.i)),this.m=f.m):f&&(g=String(f).match(Tp))?(this.l=!1,go(this,g[1]||"",!0),this.o=_o(g[2]||""),this.g=_o(g[3]||"",!0),yo(this,g[4]),this.h=_o(g[5]||"",!0),Uu(this,g[6]||"",!0),this.m=_o(g[7]||"")):(this.l=!1,this.i=new Eo(null,this.l))}Vn.prototype.toString=function(){const f=[];var g=this.j;g&&f.push(vo(g,Cp,!0),":");var y=this.g;return(y||g=="file")&&(f.push("//"),(g=this.o)&&f.push(vo(g,Cp,!0),"@"),f.push(po(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&f.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&f.push("/"),f.push(vo(y,y.charAt(0)=="/"?dS:cS,!0))),(y=this.i.toString())&&f.push("?",y),(y=this.m)&&f.push("#",vo(y,hS)),f.join("")},Vn.prototype.resolve=function(f){const g=Xt(this);let y=!!f.j;y?go(g,f.j):y=!!f.o,y?g.o=f.o:y=!!f.g,y?g.g=f.g:y=f.u!=null;var C=f.h;if(y)yo(g,f.u);else if(y=!!f.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var L=g.h.lastIndexOf("/");L!=-1&&(C=g.h.slice(0,L+1)+C)}if(L=C,L==".."||L==".")C="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){C=L.lastIndexOf("/",0)==0,L=L.split("/");const U=[];for(let H=0;H<L.length;){const te=L[H++];te=="."?C&&H==L.length&&U.push(""):te==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),C&&H==L.length&&U.push("")):(U.push(te),C=!0)}C=U.join("/")}else C=L}return y?g.h=C:y=f.i.toString()!=="",y?Uu(g,Rp(f.i)):y=!!f.m,y&&(g.m=f.m),g};function Xt(f){return new Vn(f)}function go(f,g,y){f.j=y?_o(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function yo(f,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);f.u=g}else f.u=null}function Uu(f,g,y){g instanceof Eo?(f.i=g,pS(f.i,f.l)):(y||(g=vo(g,fS)),f.i=new Eo(g,f.l))}function pe(f,g,y){f.i.set(g,y)}function Ys(f){return pe(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function _o(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function vo(f,g,y){return typeof f=="string"?(f=encodeURI(f).replace(g,uS),y&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function uS(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Cp=/[#\/\?@]/g,cS=/[#\?:]/g,dS=/[#\?]/g,fS=/[#\?@]/g,hS=/#/g;function Eo(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function Pr(f){f.g||(f.g=new Map,f.h=0,f.i&&aS(f.i,function(g,y){f.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Eo.prototype,t.add=function(f,g){Pr(this),this.i=null,f=oi(this,f);let y=this.g.get(f);return y||this.g.set(f,y=[]),y.push(g),this.h+=1,this};function Ip(f,g){Pr(f),g=oi(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function Sp(f,g){return Pr(f),g=oi(f,g),f.g.has(g)}t.forEach=function(f,g){Pr(this),this.g.forEach(function(y,C){y.forEach(function(L){f.call(g,L,C,this)},this)},this)};function wp(f,g){Pr(f);let y=[];if(typeof g=="string")Sp(f,g)&&(y=y.concat(f.g.get(oi(f,g))));else for(f=Array.from(f.g.values()),g=0;g<f.length;g++)y=y.concat(f[g]);return y}t.set=function(f,g){return Pr(this),this.i=null,f=oi(this,f),Sp(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},t.get=function(f,g){return f?(f=wp(this,f),f.length>0?String(f[0]):g):g};function Ap(f,g,y){Ip(f,g),y.length>0&&(f.i=null,f.g.set(oi(f,g),_(y)),f.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],g=Array.from(this.g.keys());for(let C=0;C<g.length;C++){var y=g[C];const L=po(y);y=wp(this,y);for(let U=0;U<y.length;U++){let H=L;y[U]!==""&&(H+="="+po(y[U])),f.push(H)}}return this.i=f.join("&")};function Rp(f){const g=new Eo;return g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),g}function oi(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function pS(f,g){g&&!f.j&&(Pr(f),f.i=null,f.g.forEach(function(y,C){const L=C.toLowerCase();C!=L&&(Ip(this,C),Ap(this,L,y))},f)),f.j=g}function mS(f,g){const y=new ho;if(s.Image){const C=new Image;C.onload=h(Ln,y,"TestLoadImage: loaded",!0,g,C),C.onerror=h(Ln,y,"TestLoadImage: error",!1,g,C),C.onabort=h(Ln,y,"TestLoadImage: abort",!1,g,C),C.ontimeout=h(Ln,y,"TestLoadImage: timeout",!1,g,C),s.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=f}else g(!1)}function gS(f,g){const y=new ho,C=new AbortController,L=setTimeout(()=>{C.abort(),Ln(y,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:C.signal}).then(U=>{clearTimeout(L),U.ok?Ln(y,"TestPingServer: ok",!0,g):Ln(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Ln(y,"TestPingServer: error",!1,g)})}function Ln(f,g,y,C,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),C(y)}catch{}}function yS(){this.g=new jI}function Ou(f){this.i=f.Sb||null,this.h=f.ab||!1}p(Ou,rp),Ou.prototype.g=function(){return new Xs(this.i,this.h)};function Xs(f,g){Ze.call(this),this.H=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Xs,Ze),t=Xs.prototype,t.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=g,this.readyState=1,Co(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(g.body=f),(this.H||s).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,To(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Co(this)),this.g&&(this.readyState=3,Co(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pp(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pp(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?To(this):Co(this),this.readyState==3&&Pp(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,To(this))},t.Na=function(f){this.g&&(this.response=f,To(this))},t.ga=function(){this.g&&To(this)};function To(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Co(f)}t.setRequestHeader=function(f,g){this.A.append(f,g)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,f.push(y[0]+": "+y[1]),y=g.next();return f.join(`\r
`)};function Co(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Np(f){let g="";return X(f,function(y,C){g+=C,g+=":",g+=y,g+=`\r
`}),g}function bu(f,g,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=Np(y),typeof f=="string"?y!=null&&po(y):pe(f,g,y))}function Ae(f){Ze.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ae,Ze);var _S=/^https?$/i,vS=["POST","PUT"];t=Ae.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,g,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cp.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(U){xp(this,U);return}if(f=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var L in C)y.set(L,C[L]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const U of C.keys())y.set(U,C.get(U));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),L=s.FormData&&f instanceof s.FormData,!(Array.prototype.indexOf.call(vS,g,void 0)>=0)||C||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,H]of y)this.g.setRequestHeader(U,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(U){xp(this,U)}};function xp(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.o=5,kp(f),Zs(f)}function kp(f){f.A||(f.A=!0,ut(f,"complete"),ut(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,ut(this,"complete"),ut(this,"abort"),Zs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zs(this,!0)),Ae.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Mp(this):this.Xa())},t.Xa=function(){Mp(this)};function Mp(f){if(f.h&&typeof o<"u"){if(f.v&&Fn(f)==4)setTimeout(f.Ca.bind(f),0);else if(ut(f,"readystatechange"),Fn(f)==4){f.h=!1;try{const U=f.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var C;if(C=U===0){let H=String(f.D).match(Tp)[1]||null;!H&&s.self&&s.self.location&&(H=s.self.location.protocol.slice(0,-1)),C=!_S.test(H?H.toLowerCase():"")}y=C}if(y)ut(f,"complete"),ut(f,"success");else{f.o=6;try{var L=Fn(f)>2?f.g.statusText:""}catch{L=""}f.l=L+" ["+f.ca()+"]",kp(f)}}finally{Zs(f)}}}}function Zs(f,g){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const y=f.g;f.g=null,g||ut(f,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Fn(f){return f.g?f.g.readyState:0}t.ca=function(){try{return Fn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),ZI(g)}};function Dp(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ES(f){const g={};f=(f.g&&Fn(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<f.length;C++){if(N(f[C]))continue;var y=iS(f[C]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=g[L]||[];g[L]=U,U.push(y)}ee(g,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Io(f,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[f]||g}function Vp(f){this.za=0,this.i=[],this.j=new ho,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Io("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Io("baseRetryDelayMs",5e3,f),this.Za=Io("retryDelaySeedMs",1e4,f),this.Ta=Io("forwardChannelMaxRetries",2,f),this.va=Io("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new gp(f&&f.concurrentRequestLimit),this.Ba=new yS,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Vp.prototype,t.ka=8,t.I=1,t.connect=function(f,g,y,C){ct(0),this.W=f,this.H=g||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.J=Hp(this,null,this.W),el(this)};function Bu(f){if(Lp(f),f.I==3){var g=f.V++,y=Xt(f.J);if(pe(y,"SID",f.M),pe(y,"RID",g),pe(y,"TYPE","terminate"),So(f,y),g=new Dn(f,f.j,g),g.M=2,g.A=Ys(Xt(y)),y=!1,s.navigator&&s.navigator.sendBeacon)try{y=s.navigator.sendBeacon(g.A.toString(),"")}catch{}!y&&s.Image&&(new Image().src=g.A,y=!0),y||(g.g=zp(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Qs(g)}Gp(f)}function js(f){f.g&&(Gu(f),f.g.cancel(),f.g=null)}function Lp(f){js(f),f.v&&(s.clearTimeout(f.v),f.v=null),tl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&s.clearTimeout(f.m),f.m=null)}function el(f){if(!yp(f.h)&&!f.m){f.m=!0;var g=f.Ea;F||E(),O||(F(),O=!0),v.add(g,f),f.D=0}}function TS(f,g){return _p(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=g.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=fo(c(f.Ea,f,g),qp(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const L=new Dn(this,this.j,f);let U=this.o;if(this.U&&(U?(U=ve(U),Sr(U,this.U)):U=this.U),this.u!==null||this.R||(L.J=U,U=null),this.S)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,g>4096){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Up(this,L,g),y=Xt(this.J),pe(y,"RID",f),pe(y,"CVER",22),this.G&&pe(y,"X-HTTP-Session-Id",this.G),So(this,y),U&&(this.R?g="headers="+po(Np(U))+"&"+g:this.u&&bu(y,this.u,U)),Fu(this.h,L),this.Ra&&pe(y,"TYPE","init"),this.S?(pe(y,"$req",g),pe(y,"SID","null"),L.U=!0,Mu(L,y,null)):Mu(L,y,g),this.I=2}}else this.I==3&&(f?Fp(this,f):this.i.length==0||yp(this.h)||Fp(this))};function Fp(f,g){var y;g?y=g.l:y=f.V++;const C=Xt(f.J);pe(C,"SID",f.M),pe(C,"RID",y),pe(C,"AID",f.K),So(f,C),f.u&&f.o&&bu(C,f.u,f.o),y=new Dn(f,f.j,y,f.D+1),f.u===null&&(y.J=f.o),g&&(f.i=g.G.concat(f.i)),g=Up(f,y,1e3),y.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Fu(f.h,y),Mu(y,C,g)}function So(f,g){f.H&&X(f.H,function(y,C){pe(g,C,y)}),f.l&&X({},function(y,C){pe(g,C,y)})}function Up(f,g,y){y=Math.min(f.i.length,y);const C=f.l?c(f.l.Ka,f.l,f):null;e:{var L=f.i;let te=-1;for(;;){const Ue=["count="+y];te==-1?y>0?(te=L[0].g,Ue.push("ofs="+te)):te=0:Ue.push("ofs="+te);let de=!0;for(let qe=0;qe<y;qe++){var U=L[qe].g;const Zt=L[qe].map;if(U-=te,U<0)te=Math.max(0,L[qe].g-100),de=!1;else try{U="req"+U+"_"||"";try{var H=Zt instanceof Map?Zt:Object.entries(Zt);for(const[xr,Un]of H){let On=Un;l(Un)&&(On=Ru(Un)),Ue.push(U+xr+"="+encodeURIComponent(On))}}catch(xr){throw Ue.push(U+"type="+encodeURIComponent("_badmap")),xr}}catch{C&&C(Zt)}}if(de){H=Ue.join("&");break e}}H=void 0}return f=f.i.splice(0,y),g.G=f,H}function Op(f){if(!f.g&&!f.v){f.Y=1;var g=f.Da;F||E(),O||(F(),O=!0),v.add(g,f),f.A=0}}function qu(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=fo(c(f.Da,f),qp(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,bp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=fo(c(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),js(this),bp(this))};function Gu(f){f.B!=null&&(s.clearTimeout(f.B),f.B=null)}function bp(f){f.g=new Dn(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var g=Xt(f.na);pe(g,"RID","rpc"),pe(g,"SID",f.M),pe(g,"AID",f.K),pe(g,"CI",f.F?"0":"1"),!f.F&&f.ia&&pe(g,"TO",f.ia),pe(g,"TYPE","xmlhttp"),So(f,g),f.u&&f.o&&bu(g,f.u,f.o),f.O&&(f.g.H=f.O);var y=f.g;f=f.ba,y.M=1,y.A=Ys(Xt(g)),y.u=null,y.R=!0,hp(y,f)}t.Va=function(){this.C!=null&&(this.C=null,js(this),qu(this),ct(19))};function tl(f){f.C!=null&&(s.clearTimeout(f.C),f.C=null)}function Bp(f,g){var y=null;if(f.g==g){tl(f),Gu(f),f.g=null;var C=2}else if(Lu(f.h,g))y=g.G,vp(f.h,g),C=1;else return;if(f.I!=0){if(g.o)if(C==1){y=g.u?g.u.length:0,g=Date.now()-g.F;var L=f.D;C=Js(),ut(C,new ap(C,y)),el(f)}else Op(f);else if(L=g.m,L==3||L==0&&g.X>0||!(C==1&&TS(f,g)||C==2&&qu(f)))switch(y&&y.length>0&&(g=f.h,g.i=g.i.concat(y)),L){case 1:Nr(f,5);break;case 4:Nr(f,10);break;case 3:Nr(f,6);break;default:Nr(f,2)}}}function qp(f,g){let y=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(y*=2),y*g}function Nr(f,g){if(f.j.info("Error code "+g),g==2){var y=c(f.bb,f),C=f.Ua;const L=!C;C=new Vn(C||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||go(C,"https"),Ys(C),L?mS(C.toString(),y):gS(C.toString(),y)}else ct(2);f.I=0,f.l&&f.l.pa(g),Gp(f),Lp(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Gp(f){if(f.I=0,f.ja=[],f.l){const g=Ep(f.h);(g.length!=0||f.i.length!=0)&&(R(f.ja,g),R(f.ja,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.oa()}}function Hp(f,g,y){var C=y instanceof Vn?Xt(y):new Vn(y);if(C.g!="")g&&(C.g=g+"."+C.g),yo(C,C.u);else{var L=s.location;C=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const U=new Vn(null);C&&go(U,C),g&&(U.g=g),L&&yo(U,L),y&&(U.h=y),C=U}return y=f.G,g=f.wa,y&&g&&pe(C,y,g),pe(C,"VER",f.ka),So(f,C),C}function zp(f,g,y){if(g&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Aa&&!f.ma?new Ae(new Ou({ab:y})):new Ae(f.ma),g.Fa(f.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $p(){}t=$p.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function nl(){}nl.prototype.g=function(f,g){return new It(f,g)};function It(f,g){Ze.call(this),this.g=new Vp(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(f?f["X-WebChannel-Client-Profile"]=g.sa:f={"X-WebChannel-Client-Profile":g.sa}),this.g.U=f,(f=g&&g.Qb)&&!N(f)&&(this.g.u=f),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new si(this)}p(It,Ze),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){Bu(this.g)},It.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var y={};y.__data__=f,f=y}else this.v&&(y={},y.__data__=Ru(f),f=y);g.i.push(new lS(g.Ya++,f)),g.I==3&&el(g)},It.prototype.N=function(){this.g.l=null,delete this.j,Bu(this.g),delete this.g,It.Z.N.call(this)};function Wp(f){Pu.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){e:{for(const y in g){f=y;break e}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}p(Wp,Pu);function Jp(){Nu.call(this),this.status=1}p(Jp,Nu);function si(f){this.g=f}p(si,$p),si.prototype.ra=function(){ut(this.g,"a")},si.prototype.qa=function(f){ut(this.g,new Wp(f))},si.prototype.pa=function(f){ut(this.g,new Jp)},si.prototype.oa=function(){ut(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,OT=function(){return new nl},UT=function(){return Js()},FT=Ar,Rd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ks.NO_ERROR=0,Ks.TIMEOUT=8,Ks.HTTP_ERROR=6,Ol=Ks,up.COMPLETE="complete",LT=up,ip.EventType=uo,uo.OPEN="a",uo.CLOSE="b",uo.ERROR="c",uo.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,Oo=ip,Ae.prototype.listenOnce=Ae.prototype.K,Ae.prototype.getLastError=Ae.prototype.Ha,Ae.prototype.getLastErrorCode=Ae.prototype.ya,Ae.prototype.getStatus=Ae.prototype.ca,Ae.prototype.getResponseJson=Ae.prototype.La,Ae.prototype.getResponseText=Ae.prototype.la,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Fa,VT=Ae}).apply(typeof Tl<"u"?Tl:typeof self<"u"?self:typeof window<"u"?window:{});const Sg="@firebase/firestore",wg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nt.UNAUTHENTICATED=new nt(null),nt.GOOGLE_CREDENTIALS=new nt("google-credentials-uid"),nt.FIRST_PARTY=new nt("first-party-uid"),nt.MOCK_USER=new nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new AT("@firebase/firestore");function ai(){return Jr.logLevel}function J(t,...e){if(Jr.logLevel<=se.DEBUG){const n=e.map(ih);Jr.debug(`Firestore (${eo}): ${t}`,...n)}}function An(t,...e){if(Jr.logLevel<=se.ERROR){const n=e.map(ih);Jr.error(`Firestore (${eo}): ${t}`,...n)}}function zi(t,...e){if(Jr.logLevel<=se.WARN){const n=e.map(ih);Jr.warn(`Firestore (${eo}): ${t}`,...n)}}function ih(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,bT(t,r,n)}function bT(t,e,n){let r=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw An(r),new Error(r)}function ue(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||bT(e,i,r)}function j(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nt.UNAUTHENTICATED))}shutdown(){}}class $P{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class WP{constructor(e){this.t=e,this.currentUser=nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ue(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new lr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new lr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string",31837,{l:r}),new BT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string",2055,{h:e}),new nt(e)}}class JP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new JP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ag{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,RP(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ue(this.o===void 0,3512);const r=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,J("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ag(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ag(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=YP(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function Pd(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return Tc(i)===Tc(o)?re(i,o):Tc(i)?1:-1}return re(t.length,e.length)}const XP=55296,ZP=57343;function Tc(t){const e=t.charCodeAt(0);return e>=XP&&e<=ZP}function $i(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="__name__";class tn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=tn.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return re(e.length,n.length)}static compareSegments(e,n){const r=tn.isNumericId(e),i=tn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?tn.extractNumericId(e).compare(tn.extractNumericId(n)):Pd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sr.fromString(e.substring(4,e.length-2))}}class fe extends tn{construct(e,n,r){return new fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new fe(n)}static emptyPath(){return new fe([])}}const jP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends tn{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return jP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rg}static keyField(){return new Ke([Rg])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new $(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new $(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new $(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(fe.fromString(e))}static fromName(e){return new Q(fe.fromString(e).popFirst(5))}static empty(){return new Q(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t,e,n){if(!n)throw new $(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eN(t,e,n,r){if(e===!0&&r===!0)throw new $(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pg(t){if(!Q.isDocumentKey(t))throw new $(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ng(t){if(Q.isDocumentKey(t))throw new $(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function GT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function tu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function sn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tu(t);throw new $(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e){const n={typeString:t};return e&&(n.value=e),n}function bs(t,e){if(!GT(t))throw new $(b.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new $(b.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=-62135596800,kg=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*kg);return new ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xg)throw new $(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kg}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bs(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:Ve("string",ye._jsonSchemaVersion),seconds:Ve("number"),nanoseconds:Ve("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new ye(0,0))}static max(){return new Z(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=-1;function tN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new ye(n+1,0):new ye(n,r));return new dr(i,Q.empty(),e)}function nN(t){return new dr(t.readTime,t.key,ws)}class dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new dr(Z.min(),Q.empty(),ws)}static max(){return new dr(Z.max(),Q.empty(),ws)}}function rN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==iN)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let u=0;u<o;u++){const c=u;n(e[c]).next(h=>{s[c]=h,++l,l===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function sN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function no(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=-1;function ru(t){return t==null}function Ta(t){return t===0&&1/t==-1/0}function lN(t){return typeof t=="number"&&Number.isInteger(t)&&!Ta(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="";function aN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Mg(e)),e=uN(t.get(n),e);return Mg(e)}function uN(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case HT:n+="";break;default:n+=o}}return n}function Mg(t){return t+HT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Er(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.comparator=e,this.root=n||We.EMPTY}insert(e,n){return new Se(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,We.BLACK,null,null))}remove(e){return new Se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,We.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cl(this.root,e,this.comparator,!0)}}class Cl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class We{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??We.RED,this.left=i??We.EMPTY,this.right=o??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new We(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return We.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new We(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vg(this.data.getIterator())}getIteratorFrom(e){return new Vg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Be(this.comparator);return n.data=e,n}}class Vg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new At([])}unionWith(e){let n=new Be(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new At(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $i(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $T("Invalid base64 string: "+o):o}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const cN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(t){if(ue(!!t,39018),typeof t=="string"){let e=0;const n=cN.exec(t);if(ue(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hr(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="server_timestamp",JT="__type__",KT="__previous_value__",QT="__local_write_time__";function lh(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[JT])==null?void 0:r.stringValue)===WT}function iu(t){const e=t.mapValue.fields[KT];return lh(e)?iu(e):e}function As(t){const e=fr(t.mapValue.fields[QT].timestampValue);return new ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,r,i,o,s,l,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const Ca="(default)";class Rs{constructor(e,n){this.projectId=e,this.database=n||Ca}static empty(){return new Rs("","")}get isDefaultDatabase(){return this.database===Ca}isEqual(e){return e instanceof Rs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="__type__",fN="__max__",Il={mapValue:{}},XT="__vector__",Ia="value";function pr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lh(t)?4:pN(t)?9007199254740991:hN(t)?10:11:Y(28295,{value:t})}function fn(t,e){if(t===e)return!0;const n=pr(t);if(n!==pr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return As(t).isEqual(As(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=fr(i.timestampValue),l=fr(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return hr(i.bytesValue).isEqual(hr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Ne(i.doubleValue),l=Ne(o.doubleValue);return s===l?Ta(s)===Ta(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return $i(t.arrayValue.values||[],e.arrayValue.values||[],fn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(Dg(s)!==Dg(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!fn(s[u],l[u])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function Ps(t,e){return(t.values||[]).find(n=>fn(n,e))!==void 0}function Wi(t,e){if(t===e)return 0;const n=pr(t),r=pr(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Lg(t.timestampValue,e.timestampValue);case 4:return Lg(As(t),As(e));case 5:return Pd(t.stringValue,e.stringValue);case 6:return function(o,s){const l=hr(o),u=hr(s);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),u=s.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=re(l[c],u[c]);if(h!==0)return h}return re(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=re(Ne(o.latitude),Ne(s.latitude));return l!==0?l:re(Ne(o.longitude),Ne(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fg(t.arrayValue,e.arrayValue);case 10:return function(o,s){var m,_,R,x;const l=o.fields||{},u=s.fields||{},c=(m=l[Ia])==null?void 0:m.arrayValue,h=(_=u[Ia])==null?void 0:_.arrayValue,p=re(((R=c==null?void 0:c.values)==null?void 0:R.length)||0,((x=h==null?void 0:h.values)==null?void 0:x.length)||0);return p!==0?p:Fg(c,h)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Il.mapValue&&s===Il.mapValue)return 0;if(o===Il.mapValue)return 1;if(s===Il.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),c=s.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=Pd(u[p],h[p]);if(m!==0)return m;const _=Wi(l[u[p]],c[h[p]]);if(_!==0)return _}return re(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:n})}}function Lg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=fr(t),r=fr(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function Fg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Wi(n[i],r[i]);if(o)return o}return re(n.length,r.length)}function Ji(t){return Nd(t)}function Nd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Nd(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Nd(n.fields[s])}`;return i+"}"}(t.mapValue):Y(61005,{value:t})}function bl(t){switch(pr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=iu(t);return e?16+bl(e):16;case 5:return 2*t.stringValue.length;case 6:return hr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+bl(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Er(r.fields,(o,s)=>{i+=o.length+bl(s)}),i}(t.mapValue);default:throw Y(13486,{value:t})}}function Ug(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xd(t){return!!t&&"integerValue"in t}function ah(t){return!!t&&"arrayValue"in t}function Og(t){return!!t&&"nullValue"in t}function bg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bl(t){return!!t&&"mapValue"in t}function hN(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[YT])==null?void 0:r.stringValue)===XT}function Zo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Er(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zo(t.arrayValue.values[n]);return e}return{...t}}function pN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.value=e}static empty(){return new _t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zo(n)}setAll(e){let n=Ke.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Zo(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Bl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Bl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Er(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new _t(Zo(this.value))}}function ZT(t){const e=[];return Er(t.fields,(n,r)=>{const i=new Ke([n]);if(Bl(r)){const o=ZT(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new At(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new ot(e,0,Z.min(),Z.min(),Z.min(),_t.empty(),0)}static newFoundDocument(e,n,r,i){return new ot(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new ot(e,2,n,Z.min(),Z.min(),_t.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,Z.min(),Z.min(),_t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this.position=e,this.inclusive=n}}function Bg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),n.key):r=Wi(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function qg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n="asc"){this.field=e,this.dir=n}}function mN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{}class De extends jT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yN(e,n,r):n==="array-contains"?new EN(e,r):n==="in"?new TN(e,r):n==="not-in"?new CN(e,r):n==="array-contains-any"?new IN(e,r):new De(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _N(e,r):new vN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wi(n,this.value)):n!==null&&pr(this.value)===pr(n)&&this.matchesComparison(Wi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qt extends jT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Qt(e,n)}matches(e){return eC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eC(t){return t.op==="and"}function tC(t){return gN(t)&&eC(t)}function gN(t){for(const e of t.filters)if(e instanceof Qt)return!1;return!0}function kd(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+Ji(t.value);if(tC(t))return t.filters.map(e=>kd(e)).join(",");{const e=t.filters.map(n=>kd(n)).join(",");return`${t.op}(${e})`}}function nC(t,e){return t instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.field.isEqual(i.field)&&fn(r.value,i.value)}(t,e):t instanceof Qt?function(r,i){return i instanceof Qt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&nC(s,i.filters[l]),!0):!1}(t,e):void Y(19439)}function rC(t){return t instanceof De?function(n){return`${n.field.canonicalString()} ${n.op} ${Ji(n.value)}`}(t):t instanceof Qt?function(n){return n.op.toString()+" {"+n.getFilters().map(rC).join(" ,")+"}"}(t):"Filter"}class yN extends De{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class _N extends De{constructor(e,n){super(e,"in",n),this.keys=iC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vN extends De{constructor(e,n){super(e,"not-in",n),this.keys=iC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function iC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class EN extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ah(n)&&Ps(n.arrayValue,this.value)}}class TN extends De{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ps(this.value.arrayValue,n)}}class CN extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ps(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ps(this.value.arrayValue,n)}}class IN extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ah(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ps(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.Te=null}}function Gg(t,e=null,n=[],r=[],i=null,o=null,s=null){return new SN(t,e,n,r,i,o,s)}function uh(t){const e=j(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ru(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ji(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ji(r)).join(",")),e.Te=n}return e.Te}function ch(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qg(t.startAt,e.startAt)&&qg(t.endAt,e.endAt)}function Md(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wN(t,e,n,r,i,o,s,l){return new ro(t,e,n,r,i,o,s,l)}function dh(t){return new ro(t)}function Hg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oC(t){return t.collectionGroup!==null}function jo(t){const e=j(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Be(Ke.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ns(o,r))}),n.has(Ke.keyField().canonicalString())||e.Ie.push(new Ns(Ke.keyField(),r))}return e.Ie}function ln(t){const e=j(t);return e.Ee||(e.Ee=AN(e,jo(t))),e.Ee}function AN(t,e){if(t.limitType==="F")return Gg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ns(i.field,o)});const n=t.endAt?new Sa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sa(t.startAt.position,t.startAt.inclusive):null;return Gg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dd(t,e){const n=t.filters.concat([e]);return new ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vd(t,e,n){return new ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ou(t,e){return ch(ln(t),ln(e))&&t.limitType===e.limitType}function sC(t){return`${uh(ln(t))}|lt:${t.limitType}`}function ui(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>rC(i)).join(", ")}]`),ru(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ji(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ji(i)).join(",")),`Target(${r})`}(ln(t))}; limitType=${t.limitType})`}function su(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of jo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,u){const c=Bg(s,l,u);return s.inclusive?c<=0:c<0}(r.startAt,jo(r),i)||r.endAt&&!function(s,l,u){const c=Bg(s,l,u);return s.inclusive?c>=0:c>0}(r.endAt,jo(r),i))}(t,e)}function RN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lC(t){return(e,n)=>{let r=!1;for(const i of jo(t)){const o=PN(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function PN(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(o,s,l){const u=s.data.field(o),c=l.data.field(o);return u!==null&&c!==null?Wi(u,c):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return zT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new Se(Q.comparator);function Rn(){return NN}const aC=new Se(Q.comparator);function bo(...t){let e=aC;for(const n of t)e=e.insert(n.key,n);return e}function uC(t){let e=aC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ur(){return es()}function cC(){return es()}function es(){return new ti(t=>t.toString(),(t,e)=>t.isEqual(e))}const xN=new Se(Q.comparator),kN=new Be(Q.comparator);function ie(...t){let e=kN;for(const n of t)e=e.add(n);return e}const MN=new Be(re);function DN(){return MN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ta(e)?"-0":e}}function dC(t){return{integerValue:""+t}}function VN(t,e){return lN(e)?dC(e):fh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(){this._=void 0}}function LN(t,e,n){return t instanceof xs?function(i,o){const s={fields:{[JT]:{stringValue:WT},[QT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&lh(o)&&(o=iu(o)),o&&(s.fields[KT]=o),{mapValue:s}}(n,e):t instanceof ks?hC(t,e):t instanceof Ms?pC(t,e):function(i,o){const s=fC(i,o),l=zg(s)+zg(i.Ae);return xd(s)&&xd(i.Ae)?dC(l):fh(i.serializer,l)}(t,e)}function FN(t,e,n){return t instanceof ks?hC(t,e):t instanceof Ms?pC(t,e):n}function fC(t,e){return t instanceof wa?function(r){return xd(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class xs extends lu{}class ks extends lu{constructor(e){super(),this.elements=e}}function hC(t,e){const n=mC(e);for(const r of t.elements)n.some(i=>fn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ms extends lu{constructor(e){super(),this.elements=e}}function pC(t,e){let n=mC(e);for(const r of t.elements)n=n.filter(i=>!fn(i,r));return{arrayValue:{values:n}}}class wa extends lu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function zg(t){return Ne(t.integerValue||t.doubleValue)}function mC(t){return ah(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n){this.field=e,this.transform=n}}function ON(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ks&&i instanceof ks||r instanceof Ms&&i instanceof Ms?$i(r.elements,i.elements,fn):r instanceof wa&&i instanceof wa?fn(r.Ae,i.Ae):r instanceof xs&&i instanceof xs}(t.transform,e.transform)}class bN{constructor(e,n){this.version=e,this.transformResults=n}}class Jt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ql(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class au{}function gC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hh(t.key,Jt.none()):new Bs(t.key,t.data,Jt.none());{const n=t.data,r=_t.empty();let i=new Be(Ke.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Tr(t.key,r,new At(i.toArray()),Jt.none())}}function BN(t,e,n){t instanceof Bs?function(i,o,s){const l=i.value.clone(),u=Wg(i.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Tr?function(i,o,s){if(!ql(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=Wg(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(yC(i)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ts(t,e,n,r){return t instanceof Bs?function(o,s,l,u){if(!ql(o.precondition,s))return l;const c=o.value.clone(),h=Jg(o.fieldTransforms,u,s);return c.setAll(h),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Tr?function(o,s,l,u){if(!ql(o.precondition,s))return l;const c=Jg(o.fieldTransforms,u,s),h=s.data;return h.setAll(yC(o)),h.setAll(c),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,l){return ql(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function qN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=fC(r.transform,i||null);o!=null&&(n===null&&(n=_t.empty()),n.set(r.field,o))}return n||null}function $g(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$i(r,i,(o,s)=>ON(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bs extends au{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Tr extends au{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function yC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Wg(t,e,n){const r=new Map;ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,FN(s,l,n[i]))}return r}function Jg(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,LN(o,s,e))}return r}class hh extends au{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GN extends au{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&BN(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ts(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ts(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=cC();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const u=gC(s,l);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&$i(this.mutations,e.mutations,(n,r)=>$g(n,r))&&$i(this.baseMutations,e.baseMutations,(n,r)=>$g(n,r))}}class ph{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return xN}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new ph(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke,oe;function WN(t){switch(t){case b.OK:return Y(64938);case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function _C(t){if(t===void 0)return An("GRPC error has no .code"),b.UNKNOWN;switch(t){case ke.OK:return b.OK;case ke.CANCELLED:return b.CANCELLED;case ke.UNKNOWN:return b.UNKNOWN;case ke.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case ke.INTERNAL:return b.INTERNAL;case ke.UNAVAILABLE:return b.UNAVAILABLE;case ke.UNAUTHENTICATED:return b.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case ke.NOT_FOUND:return b.NOT_FOUND;case ke.ALREADY_EXISTS:return b.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return b.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case ke.ABORTED:return b.ABORTED;case ke.OUT_OF_RANGE:return b.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return b.UNIMPLEMENTED;case ke.DATA_LOSS:return b.DATA_LOSS;default:return Y(39323,{code:t})}}(oe=ke||(ke={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=new sr([4294967295,4294967295],0);function Kg(t){const e=JN().encode(t),n=new DT;return n.update(e),new Uint8Array(n.digest())}function Qg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new sr([n,r],0),new sr([i,o],0)]}class mh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bo(`Invalid padding: ${n}`);if(r<0)throw new Bo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=sr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(sr.fromNumber(r)));return i.compare(KN)===1&&(i=new sr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Kg(e),[r,i]=Qg(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new mh(o,i,n);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.ge===0)return;const n=Kg(e),[r,i]=Qg(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,qs.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new uu(Z.min(),i,new Se(re),Rn(),ie())}}class qs{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new qs(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class vC{constructor(e,n){this.targetId=e,this.Ce=n}}class EC{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Yg{constructor(){this.ve=0,this.Fe=Xg(),this.Me=Xe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ie(),n=ie(),r=ie();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y(38017,{changeType:o})}}),new qs(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Xg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rn(),this.Je=Sl(),this.He=Sl(),this.Ye=new Se(re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(Md(o))if(r===0){const s=new Q(o.path);this.et(n,s,ot.newNoDocument(s,Z.min()))}else ue(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const l=this.ut(e),u=l?this.ct(l,e,s):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=hr(r).toUint8Array()}catch(u){if(u instanceof $T)return zi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new mh(s,i,o)}catch(u){return zi(u instanceof Bo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,s)=>{const l=this.ot(s);if(l){if(o.current&&Md(l.target)){const u=new Q(l.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,ot.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=ie();this.He.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));const i=new uu(e,n,this.Ye,this.je,r);return this.je=Rn(),this.Je=Sl(),this.He=Sl(),this.Ye=new Se(re),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Yg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Be(re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Be(re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Sl(){return new Se(Q.comparator)}function Xg(){return new Se(Q.comparator)}const YN={asc:"ASCENDING",desc:"DESCENDING"},XN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZN={and:"AND",or:"OR"};class jN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ld(t,e){return t.useProto3Json||ru(e)?e:{value:e}}function Aa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ex(t,e){return Aa(t,e.toTimestamp())}function an(t){return ue(!!t,49232),Z.fromTimestamp(function(n){const r=fr(n);return new ye(r.seconds,r.nanos)}(t))}function gh(t,e){return Fd(t,e).canonicalString()}function Fd(t,e){const n=function(i){return new fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function CC(t){const e=fe.fromString(t);return ue(RC(e),10190,{key:e.toString()}),e}function Ud(t,e){return gh(t.databaseId,e.path)}function Cc(t,e){const n=CC(e);if(n.get(1)!==t.databaseId.projectId)throw new $(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(SC(n))}function IC(t,e){return gh(t.databaseId,e)}function tx(t){const e=CC(t);return e.length===4?fe.emptyPath():SC(e)}function Od(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SC(t){return ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Zg(t,e,n){return{name:Ud(t,e),fields:n.value.mapValue.fields}}function nx(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(ue(h===void 0||typeof h=="string",58123),Xe.fromBase64String(h||"")):(ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Xe.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(c){const h=c.code===void 0?b.UNKNOWN:_C(c.code);return new $(h,c.message||"")}(s);n=new EC(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cc(t,r.document.name),o=an(r.document.updateTime),s=r.document.createTime?an(r.document.createTime):Z.min(),l=new _t({mapValue:{fields:r.document.fields}}),u=ot.newFoundDocument(i,o,s,l),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Gl(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Cc(t,r.document),o=r.readTime?an(r.readTime):Z.min(),s=ot.newNoDocument(i,o),l=r.removedTargetIds||[];n=new Gl([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Cc(t,r.document),o=r.removedTargetIds||[];n=new Gl([],o,i,null)}else{if(!("filter"in e))return Y(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new $N(i,o),l=r.targetId;n=new vC(l,s)}}return n}function rx(t,e){let n;if(e instanceof Bs)n={update:Zg(t,e.key,e.value)};else if(e instanceof hh)n={delete:Ud(t,e.key)};else if(e instanceof Tr)n={update:Zg(t,e.key,e.data),updateMask:fx(e.fieldMask)};else{if(!(e instanceof GN))return Y(16599,{Vt:e.type});n={verify:Ud(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof xs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ks)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ms)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wa)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:ex(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Y(27497)}(t,e.precondition)),n}function ix(t,e){return t&&t.length>0?(ue(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?an(i.updateTime):an(o);return s.isEqual(Z.min())&&(s=an(o)),new bN(s,i.transformResults||[])}(n,e))):[]}function ox(t,e){return{documents:[IC(t,e.path)]}}function sx(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IC(t,i);const o=function(c){if(c.length!==0)return AC(Qt.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:ci(m.field),direction:ux(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=Ld(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function lx(t){let e=tx(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ue(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const m=wC(p);return m instanceof Qt&&tC(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(R){return new Ns(di(R.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,ru(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,_=p.values||[];return new Sa(_,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,_=p.values||[];return new Sa(_,m)}(n.endAt)),wN(e,i,s,o,l,"F",u,c)}function ax(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=di(n.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=di(n.unaryFilter.field);return De.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=di(n.unaryFilter.field);return De.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=di(n.unaryFilter.field);return De.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return De.create(di(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qt.create(n.compositeFilter.filters.map(r=>wC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function ux(t){return YN[t]}function cx(t){return XN[t]}function dx(t){return ZN[t]}function ci(t){return{fieldPath:t.canonicalString()}}function di(t){return Ke.fromServerFormat(t.fieldPath)}function AC(t){return t instanceof De?function(n){if(n.op==="=="){if(bg(n.value))return{unaryFilter:{field:ci(n.field),op:"IS_NAN"}};if(Og(n.value))return{unaryFilter:{field:ci(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bg(n.value))return{unaryFilter:{field:ci(n.field),op:"IS_NOT_NAN"}};if(Og(n.value))return{unaryFilter:{field:ci(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ci(n.field),op:cx(n.op),value:n.value}}}(t):t instanceof Qt?function(n){const r=n.getFilters().map(i=>AC(i));return r.length===1?r[0]:{compositeFilter:{op:dx(n.op),filters:r}}}(t):Y(54877,{filter:t})}function fx(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n,r,i,o=Z.min(),s=Z.min(),l=Xe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Jn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.yt=e}}function px(t){const e=lx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.Cn=new gx}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(dr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class gx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Be(fe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Be(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PC=41943040;class gt{static withCacheSize(e){return new gt(e,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gt.DEFAULT_COLLECTION_PERCENTILE=10,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gt.DEFAULT=new gt(PC,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gt.DISABLED=new gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ki(0)}static cr(){return new Ki(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="LruGarbageCollector",yx=1048576;function ty([t,e],[n,r]){const i=re(t,n);return i===0?re(e,r):i}class _x{constructor(e){this.Ir=e,this.buffer=new Be(ty),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ty(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vx{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(ey,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){no(n)?J(ey,"Ignoring IndexedDB error during garbage collection: ",n):await to(n)}await this.Vr(3e5)})}}class Ex{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(nu.ce);const r=new _x(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(jg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,l,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),ai()<=se.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}function Tx(t,e){return new Ex(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.changes=new ti(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ts(r.mutation,i,At.empty(),ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const i=Ur();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=bo();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Ur();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=Rn();const s=es(),l=function(){return es()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Tr)?o=o.insert(c.key,c):h!==void 0?(s.set(c.key,h.mutation.getFieldMask()),ts(h.mutation,c,h.mutation.getFieldMask(),ye.now())):s.set(c.key,At.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,h)=>s.set(c,h)),n.forEach((c,h)=>l.set(c,new Ix(h,s.get(c)??null))),l))}recalculateAndSaveOverlays(e,n){const r=es();let i=new Se((s,l)=>s-l),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||At.empty();h=l.applyToLocalView(c,h),r.set(u,h);const p=(i.get(l.batchId)||ie()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,p=cC();h.forEach(m=>{if(!o.has(m)){const _=gC(n.get(m),r.get(m));_!==null&&p.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,p))}return B.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):B.resolve(Ur());let l=ws,u=o;return s.next(c=>B.forEach(c,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),o.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,ie())).next(h=>({batchId:l,changes:uC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=bo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=bo();return this.indexManager.getCollectionParents(e,o).next(l=>B.forEach(l,u=>{const c=function(p,m){return new ro(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,c)=>{const h=c.getKey();s.get(h)===null&&(s=s.insert(h,ot.newInvalidDocument(h)))});let l=bo();return s.forEach((u,c)=>{const h=o.get(u);h!==void 0&&ts(h.mutation,c,At.empty(),ye.now()),su(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:an(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:px(i.bundledQuery),readTime:an(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.overlays=new Se(Q.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ur();return B.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Ur(),o=n.length+1,s=new Q(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Se((c,h)=>c-h);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=o.get(c.largestBatchId);h===null&&(h=Ur(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=Ur(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=i)););return B.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new zN(n,r));let o=this.qr.get(n);o===void 0&&(o=ie(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this.Qr=new Be(Ge.$r),this.Ur=new Be(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ge(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Q(new fe([])),r=new Ge(n,e),i=new Ge(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Q(new fe([])),r=new Ge(n,e),i=new Ge(n,e+1);let o=ie();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Ge(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Q.comparator(e.key,n.key)||re(e.Yr,n.Yr)}static Kr(e,n){return re(e.Yr,n.Yr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Be(Ge.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new HN(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.Zr=this.Zr.add(new Ge(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(s)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?sh:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),i=new Ge(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{const l=this.Xr(s.Yr);o.push(l)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(re);return n.forEach(i=>{const o=new Ge(i,0),s=new Ge(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],l=>{r=r.add(l.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Q.isDocumentKey(o)||(o=o.child(""));const s=new Ge(new Q(o),0);let l=new Be(re);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.Yr)),!0)},s),B.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,i=>{const o=new Ge(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ge(n,0),i=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.ri=e,this.docs=function(){return new Se(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ot.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Rn();const s=n.path,l=new Q(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||rN(nN(h),r)<=0||(i.has(h.key)||su(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Y(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xx(this)}getSize(e){return B.resolve(this.size)}}class xx extends Cx{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.persistence=e,this.si=new ti(n=>uh(n),ch),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new yh,this.targetCount=0,this.ai=Ki.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ki(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.ui={},this.overlays={},this.ci=new nu(0),this.li=!1,this.li=!0,this.hi=new Rx,this.referenceDelegate=e(this),this.Pi=new kx(this),this.indexManager=new mx,this.remoteDocumentCache=function(i){return new Nx(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new hx(n),this.Ii=new wx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ax,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Px(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new Mx(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Mx extends oN{constructor(e){super(),this.currentSequenceNumber=e}}class _h{constructor(e){this.persistence=e,this.Ri=new yh,this.Vi=null}static mi(e){return new _h(e)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const i=Q.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,Z.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ra{constructor(e,n){this.persistence=e,this.pi=new ti(r=>aN(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Tx(this,n)}static mi(e,n){return new Ra(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?B.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(l=>{l||(r++,o.removeEntry(s,Z.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bl(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ie(),i=ie();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new vh(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return SR()?8:sN(CR())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Dx;return this.Ss(e,n,s).next(l=>{if(o.result=l,this.Vs)return this.bs(e,n,s,l.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ai()<=se.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",ui(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(ai()<=se.DEBUG&&J("QueryEngine","Query:",ui(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ai()<=se.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",ui(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ln(n))):B.resolve())}ys(e,n){if(Hg(n))return B.resolve(null);let r=ln(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Vd(n,null,"F"),r=ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ie(...o);return this.ps.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Ds(n,l);return this.Cs(n,c,s,u.readTime)?this.ys(e,Vd(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,r,i){return Hg(n)||i.isEqual(Z.min())?B.resolve(null):this.ps.getDocuments(e,r).next(o=>{const s=this.Ds(n,o);return this.Cs(n,s,r,i)?B.resolve(null):(ai()<=se.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ui(n)),this.vs(e,s,n,tN(i,ws)).next(l=>l))})}Ds(e,n){let r=new Be(lC(e));return n.forEach((i,o)=>{su(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return ai()<=se.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",ui(n)),this.ps.getDocumentsMatchingQuery(e,n,dr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="LocalStore",Lx=3e8;class Fx{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Se(re),this.xs=new ti(o=>uh(o),ch),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Ux(t,e,n,r){return new Fx(t,e,n,r)}async function xC(t,e){const n=j(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let u=ie();for(const c of i){s.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of o){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ls:c,removedBatchIds:s,addedBatchIds:l}))})})}function Ox(t,e){const n=j(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const p=c.batch,m=p.keys();let _=B.resolve();return m.forEach(R=>{_=_.next(()=>h.getEntry(u,R)).next(x=>{const M=c.docVersions.get(R);ue(M!==null,48541),x.version.compareTo(M)<0&&(p.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function kC(t){const e=j(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function bx(t,e){const n=j(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,p)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Xe.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(x,M,w){return x.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Lx?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,_,h)&&l.push(n.Pi.updateTargetData(o,_))});let u=Rn(),c=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(Bx(o,s,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!r.isEqual(Z.min())){const h=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(h)}return B.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.Ms=i,o))}function Bx(t,e,n){let r=ie(),i=ie();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Rn();return n.forEach((l,u)=>{const c=o.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):J(Eh,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{ks:s,qs:i}})}function qx(t,e){const n=j(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=sh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gx(t,e){const n=j(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,B.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Jn(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function bd(t,e,n){const r=j(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!no(s))throw s;J(Eh,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function ny(t,e,n){const r=j(t);let i=Z.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,h){const p=j(u),m=p.xs.get(h);return m!==void 0?B.resolve(p.Ms.get(m)):p.Pi.getTargetData(c,h)}(r,s,ln(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Z.min(),n?o:ie())).next(l=>(Hx(r,RN(e),l),{documents:l,Qs:o})))}function Hx(t,e,n){let r=t.Os.get(e)||Z.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class ry{constructor(){this.activeTargetIds=DN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zx{constructor(){this.Mo=new ry,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ry,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="ConnectivityMonitor";class oy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(iy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(iy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl=null;function Bd(){return wl===null?wl=function(){return 268435456+Math.round(2147483648*Math.random())}():wl++,"0x"+wl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="RestConnection",Wx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jx{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ca?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const s=Bd(),l=this.zo(e,n.toUriEncodedString());J(Ic,`Sending RPC '${e}' ${s}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);const{host:c}=new URL(l),h=nh(c);return this.Jo(e,l,u,r,h).then(p=>(J(Ic,`Received RPC '${e}' ${s}: `,p),p),p=>{throw zi(Ic,`RPC '${e}' ${s} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){const r=Wx[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tt="WebChannelConnection";class Qx extends Jx{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=Bd();return new Promise((l,u)=>{const c=new VT;c.setWithCredentials(!0),c.listenOnce(LT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ol.NO_ERROR:const p=c.getResponseJson();J(tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),l(p);break;case Ol.TIMEOUT:J(tt,`RPC '${e}' ${s} timed out`),u(new $(b.DEADLINE_EXCEEDED,"Request time out"));break;case Ol.HTTP_ERROR:const m=c.getStatus();if(J(tt,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const R=_==null?void 0:_.error;if(R&&R.status&&R.message){const x=function(w){const I=w.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(I)>=0?I:b.UNKNOWN}(R.status);u(new $(x,R.message))}else u(new $(b.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new $(b.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:s,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{J(tt,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);J(tt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",h,r,15)})}T_(e,n,r){const i=Bd(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=OT(),l=UT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=o.join("");J(tt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=s.createWebChannel(h,u);this.I_(p);let m=!1,_=!1;const R=new Kx({Yo:M=>{_?J(tt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(J(tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),J(tt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Zo:()=>p.close()}),x=(M,w,I)=>{M.listen(w,A=>{try{I(A)}catch(V){setTimeout(()=>{throw V},0)}})};return x(p,Oo.EventType.OPEN,()=>{_||(J(tt,`RPC '${e}' stream ${i} transport opened.`),R.o_())}),x(p,Oo.EventType.CLOSE,()=>{_||(_=!0,J(tt,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(p))}),x(p,Oo.EventType.ERROR,M=>{_||(_=!0,zi(tt,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),R.a_(new $(b.UNAVAILABLE,"The operation could not be completed")))}),x(p,Oo.EventType.MESSAGE,M=>{var w;if(!_){const I=M.data[0];ue(!!I,16349);const A=I,V=(A==null?void 0:A.error)||((w=A[0])==null?void 0:w.error);if(V){J(tt,`RPC '${e}' stream ${i} received error:`,V);const F=V.status;let O=function(S){const P=ke[S];if(P!==void 0)return _C(P)}(F),v=V.message;O===void 0&&(O=b.INTERNAL,v="Unknown error status: "+F+" with message "+V.message),_=!0,R.a_(new $(O,v)),p.close()}else J(tt,`RPC '${e}' stream ${i} received:`,I),R.u_(I)}}),x(l,FT.STAT_EVENT,M=>{M.stat===Rd.PROXY?J(tt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Rd.NOPROXY&&J(tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Sc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){return new jN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="PersistentStream";class DC{constructor(e,n,r,i,o,s,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new $(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(sy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(sy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yx extends DC{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=nx(this.serializer,e),r=function(o){if(!("targetChange"in o))return Z.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?an(s.readTime):Z.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Od(this.serializer),n.addTarget=function(o,s){let l;const u=s.target;if(l=Md(u)?{documents:ox(o,u)}:{query:sx(o,u).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=TC(o,s.resumeToken);const c=Ld(o,s.expectedCount);c!==null&&(l.expectedCount=c)}else if(s.snapshotVersion.compareTo(Z.min())>0){l.readTime=Aa(o,s.snapshotVersion.toTimestamp());const c=Ld(o,s.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=ax(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Od(this.serializer),n.removeTarget=e,this.q_(n)}}class Xx extends DC{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ix(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Od(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rx(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{}class jx extends Zx{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new $(b.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Fd(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(b.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Ho(e,Fd(n,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(b.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class e1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(An(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="RemoteStore";class t1{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{ni(this)&&(J(Kr,"Restarting streams for network reachability change."),await async function(u){const c=j(u);c.Ea.add(4),await Gs(c),c.Ra.set("Unknown"),c.Ea.delete(4),await du(c)}(this))})}),this.Ra=new e1(r,i)}}async function du(t){if(ni(t))for(const e of t.da)await e(!0)}async function Gs(t){for(const e of t.da)await e(!1)}function VC(t,e){const n=j(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Sh(n)?Ih(n):io(n).O_()&&Ch(n,e))}function Th(t,e){const n=j(t),r=io(n);n.Ia.delete(e),r.O_()&&LC(n,e),n.Ia.size===0&&(r.O_()?r.L_():ni(n)&&n.Ra.set("Unknown"))}function Ch(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}io(t).Y_(e)}function LC(t,e){t.Va.Ue(e),io(t).Z_(e)}function Ih(t){t.Va=new QN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),io(t).start(),t.Ra.ua()}function Sh(t){return ni(t)&&!io(t).x_()&&t.Ia.size>0}function ni(t){return j(t).Ea.size===0}function FC(t){t.Va=void 0}async function n1(t){t.Ra.set("Online")}async function r1(t){t.Ia.forEach((e,n)=>{Ch(t,e)})}async function i1(t,e){FC(t),Sh(t)?(t.Ra.ha(e),Ih(t)):t.Ra.set("Unknown")}async function o1(t,e,n){if(t.Ra.set("Online"),e instanceof EC&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){J(Kr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pa(t,r)}else if(e instanceof Gl?t.Va.Ze(e):e instanceof vC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Z.min()))try{const r=await kC(t.localStore);n.compareTo(r)>=0&&await function(o,s){const l=o.Va.Tt(s);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.Ia.get(c);h&&o.Ia.set(c,h.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,c)=>{const h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(Xe.EMPTY_BYTE_STRING,h.snapshotVersion)),LC(o,u);const p=new Jn(h.target,u,c,h.sequenceNumber);Ch(o,p)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){J(Kr,"Failed to raise snapshot:",r),await Pa(t,r)}}async function Pa(t,e,n){if(!no(e))throw e;t.Ea.add(1),await Gs(t),t.Ra.set("Offline"),n||(n=()=>kC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(Kr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await du(t)})}function UC(t,e){return e().catch(n=>Pa(t,n,e))}async function fu(t){const e=j(t),n=mr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sh;for(;s1(e);)try{const i=await qx(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,l1(e,i)}catch(i){await Pa(e,i)}OC(e)&&bC(e)}function s1(t){return ni(t)&&t.Ta.length<10}function l1(t,e){t.Ta.push(e);const n=mr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function OC(t){return ni(t)&&!mr(t).x_()&&t.Ta.length>0}function bC(t){mr(t).start()}async function a1(t){mr(t).ra()}async function u1(t){const e=mr(t);for(const n of t.Ta)e.ea(n.mutations)}async function c1(t,e,n){const r=t.Ta.shift(),i=ph.from(r,e,n);await UC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await fu(t)}async function d1(t,e){e&&mr(t).X_&&await async function(r,i){if(function(s){return WN(s)&&s!==b.ABORTED}(i.code)){const o=r.Ta.shift();mr(r).B_(),await UC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await fu(r)}}(t,e),OC(t)&&bC(t)}async function ly(t,e){const n=j(t);n.asyncQueue.verifyOperationInProgress(),J(Kr,"RemoteStore received new credentials");const r=ni(n);n.Ea.add(3),await Gs(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await du(n)}async function f1(t,e){const n=j(t);e?(n.Ea.delete(2),await du(n)):e||(n.Ea.add(2),await Gs(n),n.Ra.set("Unknown"))}function io(t){return t.ma||(t.ma=function(n,r,i){const o=j(n);return o.sa(),new Yx(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:n1.bind(null,t),t_:r1.bind(null,t),r_:i1.bind(null,t),H_:o1.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Sh(t)?Ih(t):t.Ra.set("Unknown")):(await t.ma.stop(),FC(t))})),t.ma}function mr(t){return t.fa||(t.fa=function(n,r,i){const o=j(n);return o.sa(),new Xx(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:a1.bind(null,t),r_:d1.bind(null,t),ta:u1.bind(null,t),na:c1.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await fu(t)):(await t.fa.stop(),t.Ta.length>0&&(J(Kr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new wh(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ah(t,e){if(An("AsyncQueue",`${e}: ${t}`),no(t))return new $(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{static emptySet(e){return new Mi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=bo(),this.sortedSet=new Se(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Mi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.ga=new Se(Q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Y(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qi{constructor(e,n,r,i,o,s,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new Qi(e,n,Mi.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class p1{constructor(){this.queries=uy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=j(n),o=i.queries;i.queries=uy(),o.forEach((s,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new $(b.ABORTED,"Firestore shutting down"))}}function uy(){return new ti(t=>sC(t),ou)}async function BC(t,e){const n=j(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new h1,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=Ah(s,`Initialization of query '${ui(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Rh(n)}async function qC(t,e){const n=j(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function m1(t,e){const n=j(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.Sa)l.Fa(i)&&(r=!0);s.wa=i}}r&&Rh(n)}function g1(t,e,n){const r=j(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function Rh(t){t.Ca.forEach(e=>{e.next()})}var qd,cy;(cy=qd||(qd={})).Ma="default",cy.Cache="cache";class GC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Qi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Qi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.key=e}}class zC{constructor(e){this.key=e}}class y1{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ie(),this.mutatedKeys=ie(),this.eu=lC(e),this.tu=new Mi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new ay,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),_=su(this.query,p)?p:null,R=!!m&&this.mutatedKeys.has(m.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let M=!1;m&&_?m.data.isEqual(_.data)?R!==x&&(r.track({type:3,doc:_}),M=!0):this.su(m,_)||(r.track({type:2,doc:_}),M=!0,(u&&this.eu(_,u)>0||c&&this.eu(_,c)<0)&&(l=!0)):!m&&_?(r.track({type:0,doc:_}),M=!0):m&&!_&&(r.track({type:1,doc:m}),M=!0,(u||c)&&(l=!0)),M&&(_?(s=s.add(_),o=x?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:l,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((h,p)=>function(_,R){const x=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:M})}};return x(_)-x(R)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,c=u!==this.Za;return this.Za=u,s.length!==0||c?{snapshot:new Qi(this.query,e.tu,o,s,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ay,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new zC(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new HC(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Qi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ph="SyncEngine";class _1{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class v1{constructor(e){this.key=e,this.hu=!1}}class E1{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ti(l=>sC(l),ou),this.Iu=new Map,this.Eu=new Set,this.du=new Se(Q.comparator),this.Au=new Map,this.Ru=new yh,this.Vu={},this.mu=new Map,this.fu=Ki.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function T1(t,e,n=!0){const r=YC(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await $C(r,e,n,!0),i}async function C1(t,e){const n=YC(t);await $C(n,e,!0,!1)}async function $C(t,e,n,r){const i=await Gx(t.localStore,ln(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await I1(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&VC(t.remoteStore,i),l}async function I1(t,e,n,r,i){t.pu=(p,m,_)=>async function(x,M,w,I){let A=M.view.ru(w);A.Cs&&(A=await ny(x.localStore,M.query,!1).then(({documents:v})=>M.view.ru(v,A)));const V=I&&I.targetChanges.get(M.targetId),F=I&&I.targetMismatches.get(M.targetId)!=null,O=M.view.applyChanges(A,x.isPrimaryClient,V,F);return fy(x,M.targetId,O.au),O.snapshot}(t,p,m,_);const o=await ny(t.localStore,e,!0),s=new y1(e,o.Qs),l=s.ru(o.documents),u=qs.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(l,t.isPrimaryClient,u);fy(t,n,c.au);const h=new _1(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function S1(t,e,n){const r=j(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!ou(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Th(r.remoteStore,i.targetId),Gd(r,i.targetId)}).catch(to)):(Gd(r,i.targetId),await bd(r.localStore,i.targetId,!0))}async function w1(t,e){const n=j(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Th(n.remoteStore,r.targetId))}async function A1(t,e,n){const r=D1(t);try{const i=await function(s,l){const u=j(s),c=ye.now(),h=l.reduce((_,R)=>_.add(R.key),ie());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let R=Rn(),x=ie();return u.Ns.getEntries(_,h).next(M=>{R=M,R.forEach((w,I)=>{I.isValidDocument()||(x=x.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,R)).next(M=>{p=M;const w=[];for(const I of l){const A=qN(I,p.get(I.key).overlayedDocument);A!=null&&w.push(new Tr(I.key,A,ZT(A.value.mapValue),Jt.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,w,l)}).next(M=>{m=M;const w=M.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(_,M.batchId,w)})}).then(()=>({batchId:m.batchId,changes:uC(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,u){let c=s.Vu[s.currentUser.toKey()];c||(c=new Se(re)),c=c.insert(l,u),s.Vu[s.currentUser.toKey()]=c}(r,i.batchId,n),await Hs(r,i.changes),await fu(r.remoteStore)}catch(i){const o=Ah(i,"Failed to persist write");n.reject(o)}}async function WC(t,e){const n=j(t);try{const r=await bx(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Au.get(o);s&&(ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ue(s.hu,14607):i.removedDocuments.size>0&&(ue(s.hu,42227),s.hu=!1))}),await Hs(n,r,e)}catch(r){await to(r)}}function dy(t,e,n){const r=j(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,s)=>{const l=s.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const u=j(s);u.onlineState=l;let c=!1;u.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(l)&&(c=!0)}),c&&Rh(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function R1(t,e,n){const r=j(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Se(Q.comparator);s=s.insert(o,ot.newNoDocument(o,Z.min()));const l=ie().add(o),u=new uu(Z.min(),new Map,new Se(re),s,l);await WC(r,u),r.du=r.du.remove(o),r.Au.delete(e),Nh(r)}else await bd(r.localStore,e,!1).then(()=>Gd(r,e,n)).catch(to)}async function P1(t,e){const n=j(t),r=e.batch.batchId;try{const i=await Ox(n.localStore,e);KC(n,r,null),JC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hs(n,i)}catch(i){await to(i)}}async function N1(t,e,n){const r=j(t);try{const i=await function(s,l){const u=j(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(p=>(ue(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);KC(r,e,n),JC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hs(r,i)}catch(i){await to(i)}}function JC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function KC(t,e,n){const r=j(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Gd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||QC(t,r)})}function QC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Th(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Nh(t))}function fy(t,e,n){for(const r of n)r instanceof HC?(t.Ru.addReference(r.key,e),x1(t,r)):r instanceof zC?(J(Ph,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||QC(t,r.key)):Y(19791,{wu:r})}function x1(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(J(Ph,"New document in limbo: "+n),t.Eu.add(r),Nh(t))}function Nh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Q(fe.fromString(e)),r=t.fu.next();t.Au.set(r,new v1(n)),t.du=t.du.insert(n,r),VC(t.remoteStore,new Jn(ln(dh(n.path)),r,"TargetPurposeLimboResolution",nu.ce))}}async function Hs(t,e,n){const r=j(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{s.push(r.pu(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){i.push(c);const p=vh.As(u.targetId,c);o.push(p)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(u,c){const h=j(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(c,m=>B.forEach(m.Es,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>B.forEach(m.ds,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!no(p))throw p;J(Eh,"Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const _=h.Ms.get(m),R=_.snapshotVersion,x=_.withLastLimboFreeSnapshotVersion(R);h.Ms=h.Ms.insert(m,x)}}}(r.localStore,o))}async function k1(t,e){const n=j(t);if(!n.currentUser.isEqual(e)){J(Ph,"User change. New user:",e.toKey());const r=await xC(n.localStore,e);n.currentUser=e,function(o,s){o.mu.forEach(l=>{l.forEach(u=>{u.reject(new $(b.CANCELLED,s))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hs(n,r.Ls)}}function M1(t,e){const n=j(t),r=n.Au.get(e);if(r&&r.hu)return ie().add(r.key);{let i=ie();const o=n.Iu.get(e);if(!o)return i;for(const s of o){const l=n.Tu.get(s);i=i.unionWith(l.view.nu)}return i}}function YC(t){const e=j(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R1.bind(null,e),e.Pu.H_=m1.bind(null,e.eventManager),e.Pu.yu=g1.bind(null,e.eventManager),e}function D1(t){const e=j(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N1.bind(null,e),e}class Na{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ux(this.persistence,new Vx,e.initialUser,this.serializer)}Cu(e){return new NC(_h.mi,this.serializer)}Du(e){return new zx}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Na.provider={build:()=>new Na};class V1 extends Na{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ue(this.persistence.referenceDelegate instanceof Ra,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vx(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gt.withCacheSize(this.cacheSizeBytes):gt.DEFAULT;return new NC(r=>Ra.mi(r,n),this.serializer)}}class Hd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=k1.bind(null,this.syncEngine),await f1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new p1}()}createDatastore(e){const n=cu(e.databaseInfo.databaseId),r=function(o){return new Qx(o)}(e.databaseInfo);return function(o,s,l,u){return new jx(o,s,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new t1(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>dy(this.syncEngine,n,0),function(){return oy.v()?new oy:new $x}())}createSyncEngine(e,n){return function(i,o,s,l,u,c,h){const p=new E1(i,o,s,l,u,c);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=j(i);J(Kr,"RemoteStore shutting down."),o.Ea.add(5),await Gs(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hd.provider={build:()=>new Hd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="FirestoreClient";class L1{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nt.UNAUTHENTICATED,this.clientId=oh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{J(gr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(J(gr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ah(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wc(t,e){t.asyncQueue.verifyOperationInProgress(),J(gr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function hy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await F1(t);J(gr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ly(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ly(e.remoteStore,i)),t._onlineComponents=e}async function F1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(gr,"Using user provided OfflineComponentProvider");try{await wc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===b.FAILED_PRECONDITION||i.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;zi("Error using user provided cache. Falling back to memory cache: "+n),await wc(t,new Na)}}else J(gr,"Using default OfflineComponentProvider"),await wc(t,new V1(void 0));return t._offlineComponents}async function ZC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(gr,"Using user provided OnlineComponentProvider"),await hy(t,t._uninitializedComponentsProvider._online)):(J(gr,"Using default OnlineComponentProvider"),await hy(t,new Hd))),t._onlineComponents}function U1(t){return ZC(t).then(e=>e.syncEngine)}async function zd(t){const e=await ZC(t),n=e.eventManager;return n.onListen=T1.bind(null,e.syncEngine),n.onUnlisten=S1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=C1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=w1.bind(null,e.syncEngine),n}function O1(t,e,n={}){const r=new lr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,l,u,c){const h=new XC({next:m=>{h.Nu(),s.enqueueAndForget(()=>qC(o,p)),m.fromCache&&u.source==="server"?c.reject(new $(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new GC(l,h,{includeMetadataChanges:!0,qa:!0});return BC(o,p)}(await zd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="firestore.googleapis.com",my=!0;class gy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eI,this.ssl=my}else this.host=e.host,this.ssl=e.ssl??my;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yx)throw new $(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zP;switch(r.type){case"firstParty":return new KP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=py.get(n);r&&(J("ComponentProvider","Removing Datastore"),py.delete(n),r.terminate())}(this),Promise.resolve()}}function b1(t,e,n,r={}){var c;t=sn(t,hu);const i=nh(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(yR(`https://${l}`),TR("Firestore",!0)),o.host!==eI&&o.host!==l&&zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:l,ssl:i,emulatorOptions:r};if(!va(u,s)&&(t._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=nt.MOCK_USER;else{h=_R(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new $(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new nt(m)}t._authCredentials=new $P(new BT(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cr(this.firestore,e,this._query)}}class Le{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Le(this.firestore,e,this._key)}toJSON(){return{type:Le._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(bs(n,Le._jsonSchema))return new Le(e,r||null,new Q(fe.fromString(n.referencePath)))}}Le._jsonSchemaVersion="firestore/documentReference/1.0",Le._jsonSchema={type:Ve("string",Le._jsonSchemaVersion),referencePath:Ve("string")};class ar extends Cr{constructor(e,n,r){super(e,n,dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new Q(e))}withConverter(e){return new ar(this.firestore,e,this._path)}}function Di(t,e,...n){if(t=dn(t),qT("collection","path",e),t instanceof hu){const r=fe.fromString(e,...n);return Ng(r),new ar(t,null,r)}{if(!(t instanceof Le||t instanceof ar))throw new $(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return Ng(r),new ar(t.firestore,null,r)}}function Hl(t,e,...n){if(t=dn(t),arguments.length===1&&(e=oh.newId()),qT("doc","path",e),t instanceof hu){const r=fe.fromString(e,...n);return Pg(r),new Le(t,null,new Q(r))}{if(!(t instanceof Le||t instanceof ar))throw new $(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return Pg(r),new Le(t.firestore,t instanceof ar?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="AsyncQueue";class _y{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MC(this,"async_queue_retry"),this._c=()=>{const r=Sc();r&&J(yy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Sc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new lr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!no(e))throw e;J(yy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,An("INTERNAL UNHANDLED ERROR: ",vy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=wh.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Y(47125,{Pc:vy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function vy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Qr extends hu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new _y,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _y(e),this._firestoreClient=void 0,await e}}}function B1(t,e){const n=typeof t=="object"?t:xT(),r=typeof t=="string"?t:Ca,i=AP(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=mR("firestore");o&&b1(i,...o)}return i}function xh(t){if(t._terminated)throw new $(b.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||q1(t),t._firestoreClient}function q1(t){var r,i,o;const e=t._freezeSettings(),n=function(l,u,c,h){return new dN(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,jC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new L1(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vt(Xe.fromBase64String(e))}catch(n){throw new $(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vt(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bs(e,Vt._jsonSchema))return Vt.fromBase64String(e.bytes)}}Vt._jsonSchemaVersion="firestore/bytes/1.0",Vt._jsonSchema={type:Ve("string",Vt._jsonSchemaVersion),bytes:Ve("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:un._jsonSchemaVersion}}static fromJSON(e){if(bs(e,un._jsonSchema))return new un(e.latitude,e.longitude)}}un._jsonSchemaVersion="firestore/geoPoint/1.0",un._jsonSchema={type:Ve("string",un._jsonSchemaVersion),latitude:Ve("number"),longitude:Ve("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:cn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bs(e,cn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new cn(e.vectorValues);throw new $(b.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cn._jsonSchemaVersion="firestore/vectorValue/1.0",cn._jsonSchema={type:Ve("string",cn._jsonSchemaVersion),vectorValues:Ve("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=/^__.*__$/;class H1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bs(e,this.data,n,this.fieldTransforms)}}class tI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:t})}}class kh{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new kh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nI(this.Ac)&&G1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class z1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cu(e)}Cc(e,n,r,i=!1){return new kh({Ac:e,methodName:n,Dc:r,path:Ke.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mh(t){const e=t._freezeSettings(),n=cu(t._databaseId);return new z1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $1(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);Vh("Data must be an object, but it was:",s,r);const l=rI(r,s);let u,c;if(o.merge)u=new At(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const m=$d(e,p,n);if(!s.contains(m))throw new $(b.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);oI(h,m)||h.push(m)}u=new At(h),c=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=s.fieldTransforms;return new H1(new _t(l),u,c)}class gu extends mu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gu}}class Dh extends mu{_toFieldTransform(e){return new UN(e.path,new xs)}isEqual(e){return e instanceof Dh}}function W1(t,e,n,r){const i=t.Cc(1,e,n);Vh("Data must be an object, but it was:",i,r);const o=[],s=_t.empty();Er(r,(u,c)=>{const h=Lh(e,u,n);c=dn(c);const p=i.yc(h);if(c instanceof gu)o.push(h);else{const m=zs(c,p);m!=null&&(o.push(h),s.set(h,m))}});const l=new At(o);return new tI(s,l,i.fieldTransforms)}function J1(t,e,n,r,i,o){const s=t.Cc(1,e,n),l=[$d(e,r,n)],u=[i];if(o.length%2!=0)throw new $(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)l.push($d(e,o[m])),u.push(o[m+1]);const c=[],h=_t.empty();for(let m=l.length-1;m>=0;--m)if(!oI(c,l[m])){const _=l[m];let R=u[m];R=dn(R);const x=s.yc(_);if(R instanceof gu)c.push(_);else{const M=zs(R,x);M!=null&&(c.push(_),h.set(_,M))}}const p=new At(c);return new tI(h,p,s.fieldTransforms)}function K1(t,e,n,r=!1){return zs(n,t.Cc(r?4:3,e))}function zs(t,e){if(iI(t=dn(t)))return Vh("Unsupported field value:",e,t),rI(t,e);if(t instanceof mu)return function(r,i){if(!nI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let u=zs(l,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ye.fromDate(r);return{timestampValue:Aa(i.serializer,o)}}if(r instanceof ye){const o=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Aa(i.serializer,o)}}if(r instanceof un)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vt)return{bytesValue:TC(i.serializer,r._byteString)};if(r instanceof Le){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cn)return function(s,l){return{mapValue:{fields:{[YT]:{stringValue:XT},[Ia]:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw l.Sc("VectorValues must only contain numeric values.");return fh(l.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${tu(r)}`)}(t,e)}function rI(t,e){const n={};return zT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(t,(r,i)=>{const o=zs(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function iI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ye||t instanceof un||t instanceof Vt||t instanceof Le||t instanceof mu||t instanceof cn)}function Vh(t,e,n){if(!iI(n)||!GT(n)){const r=tu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function $d(t,e,n){if((e=dn(e))instanceof pu)return e._internalPath;if(typeof e=="string")return Lh(t,e);throw xa("Field path arguments must be of type string or ",t,!1,void 0,n)}const Q1=new RegExp("[~\\*/\\[\\]]");function Lh(t,e,n){if(e.search(Q1)>=0)throw xa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pu(...e.split("."))._internalPath}catch{throw xa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xa(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(b.INVALID_ARGUMENT,l+t+u)}function oI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Y1 extends sI{data(){return super.data()}}function yu(t,e){return typeof e=="string"?Lh(t,e):e instanceof pu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fh{}class aI extends Fh{}function ka(t,e,...n){let r=[];e instanceof Fh&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof Uh).length,l=o.filter(u=>u instanceof _u).length;if(s>1||s>0&&l>0)throw new $(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class _u extends aI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _u(e,n,r)}_apply(e){const n=this._parse(e);return uI(e._query,n),new Cr(e.firestore,e.converter,Dd(e._query,n))}_parse(e){const n=Mh(e.firestore);return function(o,s,l,u,c,h,p){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Cy(p,h);const R=[];for(const x of p)R.push(Ty(u,o,x));m={arrayValue:{values:R}}}else m=Ty(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Cy(p,h),m=K1(l,s,p,h==="in"||h==="not-in");return De.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function X1(t,e,n){const r=e,i=yu("where",t);return _u._create(i,r,n)}class Uh extends Fh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Uh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const l=o.getFlattenedFilters();for(const u of l)uI(s,u),s=Dd(s,u)}(e._query,n),new Cr(e.firestore,e.converter,Dd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Oh extends aI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Oh(e,n)}_apply(e){const n=function(i,o,s){if(i.startAt!==null)throw new $(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ns(o,s)}(e._query,this._field,this._direction);return new Cr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new ro(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Wd(t,e="asc"){const n=e,r=yu("orderBy",t);return Oh._create(r,n)}function Ty(t,e,n){if(typeof(n=dn(n))=="string"){if(n==="")throw new $(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oC(e)&&n.indexOf("/")!==-1)throw new $(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fe.fromString(n));if(!Q.isDocumentKey(r))throw new $(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ug(t,new Q(r))}if(n instanceof Le)return Ug(t,n._key);throw new $(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tu(n)}.`)}function Cy(t,e){if(!Array.isArray(t)||t.length===0)throw new $(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uI(t,e){const n=function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Z1{convertValue(e,n="none"){switch(pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Er(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[Ia].arrayValue)==null?void 0:i.values)==null?void 0:o.map(s=>Ne(s.doubleValue));return new cn(n)}convertGeoPoint(e){return new un(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=iu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(As(e));default:return null}}convertTimestamp(e){const n=fr(e);return new ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fe.fromString(e);ue(RC(r),9688,{name:e});const i=new Rs(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(n)||An(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class qo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Br extends sI{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(b.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Br._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Br._jsonSchemaVersion="firestore/documentSnapshot/1.0",Br._jsonSchema={type:Ve("string",Br._jsonSchemaVersion),bundleSource:Ve("string","DocumentSnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class zl extends Br{data(e={}){return super.data(e)}}class qr{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new qo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zl(this._firestore,this._userDataWriter,r.key,r,new qo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const u=new zl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new qo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new zl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new qo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return l.type!==0&&(c=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),h=s.indexOf(l.doc.key)),{type:ek(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(b.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=oh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ek(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}qr._jsonSchemaVersion="firestore/querySnapshot/1.0",qr._jsonSchema={type:Ve("string",qr._jsonSchemaVersion),bundleSource:Ve("string","QuerySnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class bh extends Z1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}function tk(t){t=sn(t,Cr);const e=sn(t.firestore,Qr),n=xh(e),r=new bh(e);return lI(t._query),O1(n,t._query).then(i=>new qr(e,r,t,i))}function nk(t,e,n,...r){t=sn(t,Le);const i=sn(t.firestore,Qr),o=Mh(i);let s;return s=typeof(e=dn(e))=="string"||e instanceof pu?J1(o,"updateDoc",t._key,e,n,r):W1(o,"updateDoc",t._key,e),Bh(i,[s.toMutation(t._key,Jt.exists(!0))])}function Iy(t){return Bh(sn(t.firestore,Qr),[new hh(t._key,Jt.none())])}function cI(t,e){const n=sn(t.firestore,Qr),r=Hl(t),i=j1(t.converter,e);return Bh(n,[$1(Mh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Jt.exists(!1))]).then(()=>r)}function Jd(t,...e){var u,c,h;t=dn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Ey(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ey(e[r])){const p=e[r];e[r]=(u=p.next)==null?void 0:u.bind(p),e[r+1]=(c=p.error)==null?void 0:c.bind(p),e[r+2]=(h=p.complete)==null?void 0:h.bind(p)}let o,s,l;if(t instanceof Le)s=sn(t.firestore,Qr),l=dh(t._key.path),o={next:p=>{e[r]&&e[r](rk(s,t,p))},error:e[r+1],complete:e[r+2]};else{const p=sn(t,Cr);s=sn(p.firestore,Qr),l=p._query;const m=new bh(s);o={next:_=>{e[r]&&e[r](new qr(s,m,p,_))},error:e[r+1],complete:e[r+2]},lI(t._query)}return function(m,_,R,x){const M=new XC(x),w=new GC(_,M,R);return m.asyncQueue.enqueueAndForget(async()=>BC(await zd(m),w)),()=>{M.Nu(),m.asyncQueue.enqueueAndForget(async()=>qC(await zd(m),w))}}(xh(s),l,i,o)}function Bh(t,e){return function(r,i){const o=new lr;return r.asyncQueue.enqueueAndForget(async()=>A1(await U1(r),i,o)),o.promise}(xh(t),e)}function rk(t,e,n){const r=n.docs.get(e._key),i=new bh(t);return new Br(t,i,e._key,r,new qo(n.hasPendingWrites,n.fromCache),e.converter)}function dI(){return new Dh("serverTimestamp")}(function(e,n=!0){(function(i){eo=i})(xP),Ea(new Cs("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new Qr(new WP(r.getProvider("auth-internal")),new QP(s,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rs(c.options.projectId,h)}(s,i),s);return o={useFetchStreams:n,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),ki(Sg,wg,e),ki(Sg,wg,"esm2020")})();const ik={apiKey:"AIzaSyDK5-evOKoAevaFDMjsoZ2lqJI6hkkDZHg",authDomain:"myportfolio-8dae6.firebaseapp.com",projectId:"myportfolio-8dae6",storageBucket:"myportfolio-8dae6.firebasestorage.app",messagingSenderId:"301685183802",appId:"1:301685183802:web:0337b0a7baa10267f5ec03"},ok=kP().length?xT():NT(ik),yn=B1(ok);function sk(){const[t,e]=q.useState([]),[n,r]=q.useState(!1),[i,o]=q.useState(""),[s,l]=q.useState(""),[u,c]=q.useState(!1),[h,p]=q.useState(""),[m,_]=q.useState(!1),[R,x]=q.useState({name:"",role:"",text:""}),[M,w]=q.useState(!1),I=[{id:"js-es6",name:"Modern JavaScript (ES6+)"},{id:"react-ctx",name:"React & Redux/Context API"},{id:"html-css",name:"Responsive HTML & CSS (Sass, Tailwind)"},{id:"git-hub",name:"Git & GitHub Version Control"}];q.useEffect(()=>{const F=window.location.hostname;(F==="localhost"||F==="127.0.0.1")&&w(!0);const O=ka(Di(yn,"reviews"),Wd("timestamp","desc")),v=Jd(O,E=>{const S=E.docs.map(P=>({id:P.id,...P.data()}));e(S)},E=>{console.error("Error fetching reviews:",E)});return()=>v()},[]);const A=async()=>{p(""),_(!0);try{if(!i||!s){p(" Please enter both Mobile Number and Access Code."),_(!1);return}const F=Di(yn,"clients"),O=ka(F,X1("mobile","==",i)),v=await tk(O);if(v.empty){p(" Mobile number not found in our records."),_(!1);return}let E=!1,S=null;v.forEach(P=>{const k=P.data(),D=k.company||"",N=k.mobile||"";if(N.length>=4){const we=N.slice(-4),mt=`${D}@${we}`;s.trim()===mt.trim()&&(E=!0,S=k)}}),E?(c(!0),x({name:S.name||"",role:S.company||"",text:""})):p(" Incorrect Access Code. Format: CompanyName@Last4Digits")}catch(F){console.error("Verification Error:",F),p(" System error. Please try again later.")}_(!1)},V=async F=>{if(F.preventDefault(),!(!R.name||!R.text))try{await cI(Di(yn,"reviews"),{name:R.name,role:R.role||"Client",text:R.text,timestamp:dI()}),x({name:"",role:"",text:""}),r(!1),c(!1),l(""),o(""),alert("Thank you! Your review has been added.")}catch(O){console.error("Error adding review: ",O),alert("Error submitting review. Please try again.")}};return T.jsxs("section",{id:"about",className:"about-section","aria-labelledby":"about-title",children:[T.jsxs("h2",{id:"about-title",className:"section-title",children:[T.jsx("span",{className:"number"})," About Me"]}),T.jsxs("div",{className:"about-content",children:[T.jsxs("div",{className:"about-text-column",children:[T.jsxs("p",{children:["Hello! I'm ",T.jsx("strong",{children:"Pankaj Ray"}),", a results-driven ",T.jsx("strong",{children:"Frontend Web Developer"})," specializing in creating high-performance, ",T.jsx("strong",{children:"accessible digital experiences"}),". Based in ",T.jsx("strong",{children:"Noida, India"}),", I thrive on turning complex UI/UX designs into pixel-perfect, seamless web applications."]}),T.jsxs("p",{children:["My core focus is on ",T.jsx("strong",{children:"React development"}),", specializing in dynamic Single Page Applications (SPAs) and integrating them with robust ",T.jsx("strong",{children:"RESTful APIs"}),". My priority is ensuring ",T.jsx("strong",{children:"fast loading speeds"})," and ",T.jsx("strong",{children:"cross-browser compatibility"})," across all my projects."]}),T.jsxs("p",{children:["I'm actively seeking challenging roles where I can leverage ",T.jsx("strong",{children:"modern JavaScript frameworks"})," and contribute to an innovative team. Let's build something scalable!"]}),T.jsx("h3",{className:"skills-heading",children:"My Current Tech Stack:"}),T.jsx("ul",{className:"skills-list",children:I.map(F=>T.jsxs("li",{className:"skill-item",children:[T.jsx("span",{className:"skill-icon",children:""})," ",F.name]},F.id))}),T.jsx("div",{className:"about-cta-buttons",children:T.jsx(rt,{to:"/contact",className:"contact-button cta-button secondary",children:"Get In Touch"})})]}),T.jsx("div",{className:"about-image-column",children:T.jsx("div",{className:"profile-image-wrapper",children:T.jsx("img",{src:TT,alt:"Pankaj Ray professional profile",className:"profile-image"})})})]}),T.jsxs("div",{className:"reviews-container",children:[T.jsxs("div",{className:"reviews-header-group",children:[T.jsx("h3",{className:"reviews-heading",children:"What People Say"}),!n&&T.jsx("button",{className:"add-review-btn",onClick:()=>r(!0),children:"+ Write a Review"})]}),n&&T.jsx("div",{className:"review-form-wrapper",children:T.jsxs("div",{className:"review-form-card",children:[T.jsx("button",{className:"close-form-btn",onClick:()=>r(!1),children:""}),u?T.jsxs("form",{onSubmit:V,className:"review-input-step",children:[T.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:T.jsx("h4",{style:{margin:0},children:"Share your experience"})}),T.jsx("input",{type:"text",placeholder:"Your Name",className:"form-input",required:!0,value:R.name,onChange:F=>x({...R,name:F.target.value})}),T.jsx("input",{type:"text",placeholder:"Your Role / Company",className:"form-input",value:R.role,onChange:F=>x({...R,role:F.target.value})}),T.jsx("textarea",{placeholder:"Write your review here...",className:"form-input form-textarea",required:!0,value:R.text,onChange:F=>x({...R,text:F.target.value})}),T.jsx("button",{type:"submit",className:"cta-button",children:"Submit Review"})]}):T.jsxs("div",{className:"verification-step",children:[T.jsx("h4",{children:"Client Verification"}),T.jsx("p",{children:"Please enter your registered details to write a review."}),T.jsx("input",{type:"tel",placeholder:"Registered Mobile Number",value:i,onChange:F=>o(F.target.value),className:"form-input",style:{marginBottom:"10px"}}),T.jsx("input",{type:"password",placeholder:"Access Code (Company@Last4)",value:s,onChange:F=>l(F.target.value),className:"form-input"}),h&&T.jsx("p",{className:"error-msg",children:h}),T.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginTop:"15px"},children:[T.jsx("button",{onClick:A,className:"cta-button",disabled:m,children:m?"Verifying...":"Verify Identity"}),M&&T.jsx("button",{type:"button",onClick:()=>c(!0),style:{background:"none",border:"none",color:"#8892b0",cursor:"pointer",fontSize:"0.8rem",textDecoration:"underline"},children:"Bypass (Dev)"})]})]})]})}),T.jsx("div",{className:"reviews-grid",children:t.map(F=>T.jsxs("div",{className:"review-card",children:[T.jsx("div",{className:"review-icon",children:""}),T.jsx("p",{className:"review-text",children:F.text}),T.jsxs("div",{className:"reviewer-info",children:[T.jsx("h4",{className:"reviewer-name",children:F.name}),T.jsx("span",{className:"reviewer-role",children:F.role})]})]},F.id))})]})]})}class $s{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const lk=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},Je={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:lk()},qh=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},ak=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=qh(t);Je.publicKey=n.publicKey,Je.blockHeadless=n.blockHeadless,Je.storageProvider=n.storageProvider,Je.blockList=n.blockList,Je.limitRate=n.limitRate,Je.origin=n.origin||e},fI=async(t,e,n={})=>{const r=await fetch(Je.origin+t,{method:"POST",headers:n,body:e}),i=await r.text(),o=new $s(r.status,i);if(r.ok)return o;throw o},hI=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},uk=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},pI=t=>t.webdriver||!t.languages||t.languages.length===0,mI=()=>new $s(451,"Unavailable For Headless Browser"),ck=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},dk=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},fk=(t,e)=>t instanceof FormData?t.get(e):t[e],gI=(t,e)=>{if(dk(t))return!1;ck(t.list,t.watchVariable);const n=fk(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},yI=()=>new $s(403,"Forbidden"),hk=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},pk=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},_I=async(t,e,n)=>{if(!e.throttle||!n)return!1;hk(e.throttle,e.id);const r=e.id||t;return await pk(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},vI=()=>new $s(429,"Too Many Requests"),mk=async(t,e,n,r)=>{const i=qh(r),o=i.publicKey||Je.publicKey,s=i.blockHeadless||Je.blockHeadless,l=i.storageProvider||Je.storageProvider,u={...Je.blockList,...i.blockList},c={...Je.limitRate,...i.limitRate};return s&&pI(navigator)?Promise.reject(mI()):(hI(o,t,e),uk(n),n&&gI(u,n)?Promise.reject(yI()):await _I(location.pathname,c,l)?Promise.reject(vI()):fI("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},gk=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},yk=t=>typeof t=="string"?document.querySelector(t):t,_k=async(t,e,n,r)=>{const i=qh(r),o=i.publicKey||Je.publicKey,s=i.blockHeadless||Je.blockHeadless,l=Je.storageProvider||i.storageProvider,u={...Je.blockList,...i.blockList},c={...Je.limitRate,...i.limitRate};if(s&&pI(navigator))return Promise.reject(mI());const h=yk(n);hI(o,t,e),gk(h);const p=new FormData(h);return gI(u,p)?Promise.reject(yI()):await _I(location.pathname,c,l)?Promise.reject(vI()):(p.append("lib_version","4.4.1"),p.append("service_id",t),p.append("template_id",e),p.append("user_id",o),fI("/api/v1.0/email/send-form",p))},vk={init:ak,send:mk,sendForm:_k,EmailJSResponseStatus:$s},Ek=""+new URL("contactUsBgVideo-D7sCpjIG.mp4",import.meta.url).href;function Tk(){const[t,e]=q.useState({name:"",email:"",mobile:"",company:"",message:""}),[n,r]=q.useState(!1),[i,o]=q.useState(""),[s,l]=q.useState(!1),u=p=>{e({...t,[p.target.name]:p.target.value})},c=()=>{if(!t.mobile||!t.name){alert("Please enter your Name and Mobile Number first.");return}r(!0)},h=async(p,m=!1)=>{p&&p.preventDefault(),l(!0);try{let _=t.message,R="New Contact Inquiry";m&&(_=` CALLBACK REQUESTED
Time: ${i}

Original Message: ${t.message}`,R="URGENT: Callback Request"),await cI(Di(yn,"clients"),{...t,message:_,type:m?"callback_request":"general_inquiry",callbackTime:m?i:null,timestamp:dI()});const x="service_w1c5e88",M="template_wdp3bfa",w="umJm7pwl1z8ap8buR",I={from_name:t.name,from_email:t.email,mobile:t.mobile,company:t.company,message:_,subject:R};await vk.send(x,M,I,w),alert(m?"Callback scheduled successfully!":"Message sent successfully!"),e({name:"",email:"",mobile:"",company:"",message:""}),o(""),r(!1)}catch(_){console.error("Error:",_),alert("Something went wrong. Please try again.")}l(!1)};return T.jsxs("section",{className:"contact-container",children:[T.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"video-bg",children:T.jsx("source",{src:Ek,type:"video/mp4"})}),T.jsx("div",{className:"video-overlay"}),T.jsxs("div",{className:"contact-content",children:[T.jsx("h2",{className:"contact-title",children:"Let's Connect"}),T.jsx("p",{className:"contact-subtitle",children:"Fill out the form or schedule a call."}),T.jsx("div",{className:"contact-form-card",children:T.jsxs("form",{onSubmit:p=>h(p,!1),className:"contact-form",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Name"}),T.jsx("input",{type:"text",name:"name",required:!0,className:"contact-input",placeholder:"Enter your name",value:t.name,onChange:u})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Email"}),T.jsx("input",{type:"email",name:"email",required:!0,className:"contact-input",placeholder:"Enter your email",value:t.email,onChange:u})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Mobile Number"}),T.jsx("input",{type:"tel",name:"mobile",required:!0,className:"contact-input",placeholder:"Enter your mobile",value:t.mobile,onChange:u})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Company Name (Optional)"}),T.jsx("input",{type:"text",name:"company",className:"contact-input",placeholder:"Enter company name",value:t.company,onChange:u})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Message"}),T.jsx("textarea",{name:"message",rows:"5",className:"contact-input contact-textarea",placeholder:"How can I help you?",value:t.message,onChange:u})]}),T.jsxs("div",{className:"button-group",style:{display:"flex",gap:"15px",marginTop:"20px"},children:[T.jsx("button",{type:"submit",className:"contact-btn",disabled:s,style:{flex:1},children:s?"Sending...":"Send Message"}),T.jsx("button",{type:"button",onClick:c,className:"call-btn",style:{flex:1,backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"3vw",fontWeight:"bold",cursor:"pointer"},children:" Schedule Call"})]})]})})]}),n&&T.jsx("div",{className:"modal-overlay",children:T.jsxs("div",{className:"modal-content",children:[T.jsx("h3",{className:"modal-title",children:"Select Best Time to Call"}),T.jsxs("p",{style:{marginBottom:"15px",color:"#666"},children:["When should we call you on ",t.mobile,"?"]}),T.jsx("input",{type:"datetime-local",className:"date-input",value:i,onChange:p=>o(p.target.value)}),T.jsxs("div",{className:"modal-actions",children:[T.jsx("button",{className:"cancel-btn",onClick:()=>r(!1),children:"Cancel"}),T.jsx("button",{className:"confirm-btn",onClick:()=>h(null,!0),disabled:!i||s,children:s?"Booking...":"Confirm Call"})]})]})})]})}function Ck(){const t={frontend:["React (Core)","JavaScript (ES6+)","TypeScript","HTML5 & CSS3 / SASS","Tailwind CSS / Styled Components","Framer Motion (Advanced Animation)","Three.js (3D Graphics)","Web Performance & Accessibility (A11y)"],backend:["Node.js & Express.js","RESTful API Development","MongoDB (Mongoose)","Firebase/Firestore","Authentication (JWT)","API Integration (Third-party services)"],tools:["Git & GitHub","VS Code & WebStorm","Vite & Webpack Bundlers","NPM/Yarn/PNPM","Figma & Adobe XD","Linux/Bash (Deployment)","Postman/Insomnia (API Testing)"]},e=(n,r)=>T.jsxs("div",{className:"skill-category",children:[T.jsx("h3",{className:"category-title",children:n}),T.jsx("ul",{className:"skill-list",children:r.map((i,o)=>T.jsxs("li",{className:"skill-item",children:[T.jsx("span",{className:"skill-icon",children:""})," ",i]},o))})]});return T.jsxs("section",{id:"skills",className:"skill-section","aria-labelledby":"skills-title",children:[T.jsxs("h2",{id:"skills-title",className:"section-title",children:[T.jsx("span",{className:"number"})," My Core Skillset"]}),T.jsxs("div",{className:"skill-content-wrapper",children:[T.jsx("p",{className:"skill-pitch",children:"I focus on **modern JavaScript frameworks** and robust tools to build **highly performant**, accessible, and visually appealing web applications, specializing in the **MERN stack** and advanced frontend animation."}),T.jsxs("div",{className:"skill-grid",children:[e("Frontend Development",t.frontend),e("Backend & Database",t.backend),e("Tools & Workflow",t.tools)]}),T.jsxs("div",{className:"skills-cta-footer",children:[T.jsx("p",{children:"Interested in my process? Let's connect!"}),T.jsx(rt,{to:"/contact",className:"cta-button secondary",children:"Discuss A Project"})]})]})]})}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ik,Sk;function wk(){return{geminiUrl:Ik,vertexUrl:Sk}}function Ak(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=wk();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xn{}function z(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function d(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let c=0;c<u.length;c++){const h=u[c];d(h,e.slice(o+1),n[c])}else for(const c of u)d(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];d(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(l=>a(l,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Rk(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let l=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){l=u;break}if(l!==-1&&o.length>l)for(let u=l;u<o.length;u++){const c=o[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}Kd(t,i,o,0,s)}}function Kd(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const u of l[s])Kd(u,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(c=>!c.startsWith("_")&&!i.has(c)),u={};for(const c of l)u[c]=s[c];for(const[c,h]of Object.entries(u)){const p=[];for(const m of n.slice(r))m==="*"?p.push(c):p.push(m);d(s,p,h)}for(const c of l)delete s[c]}}else{const s=t;o in s&&Kd(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gh(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pk(t){const e={},n=a(t,["operationName"]);n!=null&&d(e,["operationName"],n);const r=a(t,["resourceName"]);return r!=null&&d(e,["_url","resourceName"],r),e}function Nk(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],kk(s)),e}function xk(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],Mk(s)),e}function kk(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Dk(s))),d(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function Mk(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Vk(s))),d(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function Dk(t){const e={},n=a(t,["video"]);return n!=null&&d(e,["video"],Bk(n)),e}function Vk(t){const e={},n=a(t,["_self"]);return n!=null&&d(e,["video"],qk(n)),e}function Lk(t){const e={},n=a(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function Fk(t){const e={},n=a(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function Uk(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],Ok(s)),e}function Ok(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&d(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function EI(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],bk(s)),e}function bk(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&d(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function Bk(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],Gh(r));const i=a(t,["encoding"]);return i!=null&&d(e,["mimeType"],i),e}function qk(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],Gh(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Sy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Sy||(Sy={}));var wy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(wy||(wy={}));var Ay;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Ay||(Ay={}));var Kn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Kn||(Kn={}));var Ry;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ry||(Ry={}));var Py;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Py||(Py={}));var Ny;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ny||(Ny={}));var xy;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(xy||(xy={}));var ky;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ky||(ky={}));var My;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(My||(My={}));var Dy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Dy||(Dy={}));var Vy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Vy||(Vy={}));var Ly;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Ly||(Ly={}));var Fy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Fy||(Fy={}));var Uy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Uy||(Uy={}));var Oy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Oy||(Oy={}));var by;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(by||(by={}));var By;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(By||(By={}));var qy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(qy||(qy={}));var Ma;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ma||(Ma={}));var Gy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Gy||(Gy={}));var Hy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Hy||(Hy={}));var zy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(zy||(zy={}));var Qd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Qd||(Qd={}));var $y;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})($y||($y={}));var Wy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Wy||(Wy={}));var Jy;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Jy||(Jy={}));var Ky;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ky||(Ky={}));var Qy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Qy||(Qy={}));var Yy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Yy||(Yy={}));var Xy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Xy||(Xy={}));var Zy;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Zy||(Zy={}));var jy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(jy||(jy={}));var e_;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(e_||(e_={}));var t_;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(t_||(t_={}));var n_;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(n_||(n_={}));var r_;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(r_||(r_={}));var i_;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(i_||(i_={}));var o_;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(o_||(o_={}));var s_;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(s_||(s_={}));var l_;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(l_||(l_={}));var a_;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(a_||(a_={}));var u_;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(u_||(u_={}));var c_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(c_||(c_={}));var d_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(d_||(d_={}));var f_;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(f_||(f_={}));var h_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(h_||(h_={}));var p_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(p_||(p_={}));var m_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(m_||(m_={}));var g_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(g_||(g_={}));var y_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(y_||(y_={}));var __;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(__||(__={}));var v_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(v_||(v_={}));var E_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(E_||(E_={}));var Si;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Si||(Si={}));class Yd{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Do{get text(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1;const p=[];for(const m of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[_,R]of Object.entries(m))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(R!==null||R!==void 0)&&p.push(_);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const h=[];for(const p of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[m,_]of Object.entries(p))m!=="inlineData"&&(_!==null||_!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,o,s,l,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,o,s,l,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.output}}class T_{}class C_{}class Gk{}class Hk{}class zk{}class $k{}class I_{}class S_{}class w_{}class Wk{}class Da{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Da;let i;const o=e;return n?i=xk(o):i=Nk(o),Object.assign(r,i),r}}class A_{}class R_{}class P_{}class Jk{}class Kk{}class Qk{}class Hh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Hh,o=Uk(e);return Object.assign(r,o),r}}class Yk{}class Xk{}class Zk{}class N_{}class jk{get text(){var e,n,r;let i="",o=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(l))u!=="text"&&u!=="thought"&&c!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,i+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class eM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class zh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new zh,o=EI(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ae(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function TI(t,e){const n=ae(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function CI(t){return Array.isArray(t)?t.map(e=>Va(e)):[Va(t)]}function Va(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function II(t){const e=Va(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function SI(t){const e=Va(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function x_(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function wI(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>x_(e)):[x_(t)]}function Xd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function k_(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function M_(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function st(t){if(t==null)throw new Error("ContentUnion is required");return Xd(t)?t:{role:"user",parts:wI(t)}}function $h(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=st(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=st(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>st(n)):[st(e)]}function Ut(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(k_(t)||M_(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[st(t)]}const e=[],n=[],r=Xd(t[0]);for(const i of t){const o=Xd(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(k_(i)||M_(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:wI(n)}),e}function tM(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Kn).includes(n[0].toUpperCase())?n[0].toUpperCase():Kn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Kn).includes(r.toUpperCase())?r.toUpperCase():Kn.TYPE_UNSPECIFIED})}}function Vi(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&tM(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Kn).includes(l.toUpperCase())?l.toUpperCase():Kn.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Vi(l);else if(r.includes(s)){const u=[];for(const c of l){if(c.type=="null"){e.nullable=!0;continue}u.push(Vi(c))}e[s]=u}else if(i.includes(s)){const u={};for(const[c,h]of Object.entries(l))u[c]=Vi(h);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=l}return e}function Wh(t){return Vi(t)}function Jh(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Kh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function oo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Vi(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Vi(e.response));return t}function so(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function nM(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function kn(t,e){if(typeof e!="string")throw new Error("name must be a string");return nM(t,e,"cachedContents")}function AI(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ir(t){return Gh(t)}function rM(t){return t!=null&&typeof t=="object"&&"name"in t}function iM(t){return t!=null&&typeof t=="object"&&"video"in t}function oM(t){return t!=null&&typeof t=="object"&&"uri"in t}function RI(t){var e;let n;if(rM(t)&&(n=t.name),!(oM(t)&&(n=t.uri,n===void 0))&&!(iM(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function PI(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function NI(t){for(const e of["models","tunedModels","publisherModels"])if(sM(t,e))return t[e];return[]}function sM(t,e){return t!==null&&typeof t=="object"&&e in t}function lM(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function aM(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=lM(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function xI(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function uM(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function kI(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function lo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function MI(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cM(t){const e={},n=a(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const r=a(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>zM(s))),d(e,["inlinedResponses"],o)}const i=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["inlinedEmbedContentResponses"],o)}return e}function dM(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const r=a(t,["gcsDestination","outputUriPrefix"]);r!=null&&d(e,["gcsUri"],r);const i=a(t,["bigqueryDestination","outputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function fM(t){const e={},n=a(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const r=a(t,["gcsUri"]);r!=null&&d(e,["gcsDestination","outputUriPrefix"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&d(e,["bigqueryDestination","outputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function $l(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata","displayName"]);r!=null&&d(e,["displayName"],r);const i=a(t,["metadata","state"]);i!=null&&d(e,["state"],MI(i));const o=a(t,["metadata","createTime"]);o!=null&&d(e,["createTime"],o);const s=a(t,["metadata","endTime"]);s!=null&&d(e,["endTime"],s);const l=a(t,["metadata","updateTime"]);l!=null&&d(e,["updateTime"],l);const u=a(t,["metadata","model"]);u!=null&&d(e,["model"],u);const c=a(t,["metadata","output"]);return c!=null&&d(e,["dest"],cM(kI(c))),e}function Zd(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["displayName"]);r!=null&&d(e,["displayName"],r);const i=a(t,["state"]);i!=null&&d(e,["state"],MI(i));const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["createTime"]);s!=null&&d(e,["createTime"],s);const l=a(t,["startTime"]);l!=null&&d(e,["startTime"],l);const u=a(t,["endTime"]);u!=null&&d(e,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&d(e,["updateTime"],c);const h=a(t,["model"]);h!=null&&d(e,["model"],h);const p=a(t,["inputConfig"]);p!=null&&d(e,["src"],hM(p));const m=a(t,["outputConfig"]);m!=null&&d(e,["dest"],dM(kI(m)));const _=a(t,["completionStats"]);return _!=null&&d(e,["completionStats"],_),e}function hM(t){const e={},n=a(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const r=a(t,["gcsSource","uris"]);r!=null&&d(e,["gcsUri"],r);const i=a(t,["bigquerySource","inputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function pM(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(e,["fileName"]);r!=null&&d(n,["fileName"],r);const i=a(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>HM(t,s))),d(n,["requests","requests"],o)}return n}function mM(t){const e={},n=a(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const r=a(t,["gcsUri"]);r!=null&&d(e,["gcsSource","uris"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&d(e,["bigquerySource","inputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function gM(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function yM(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],lo(t,r)),n}function _M(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],lo(t,r)),n}function vM(t){const e={},n=a(t,["content"]);n!=null&&d(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],EM(r));const i=a(t,["tokenCount"]);i!=null&&d(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&d(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&d(e,["index"],u);const c=a(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);const h=a(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>_)),d(e,["safetyRatings"],m)}const p=a(t,["urlContextMetadata"]);return p!=null&&d(e,["urlContextMetadata"],p),e}function EM(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["citations"],r)}return e}function DI(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>XM(o))),d(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&d(e,["role"],r),e}function TM(t,e){const n={},r=a(t,["displayName"]);if(e!==void 0&&r!=null&&d(e,["batch","displayName"],r),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function CM(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const i=a(t,["dest"]);return e!==void 0&&i!=null&&d(e,["outputConfig"],fM(uM(i))),n}function D_(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["src"]);i!=null&&d(n,["batch","inputConfig"],pM(t,xI(t,i)));const o=a(e,["config"]);return o!=null&&TM(o,n),n}function IM(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["model"],ae(t,r));const i=a(e,["src"]);i!=null&&d(n,["inputConfig"],mM(xI(t,i)));const o=a(e,["config"]);return o!=null&&CM(o,n),n}function SM(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["batch","displayName"],r),n}function wM(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["src"]);i!=null&&d(n,["batch","inputConfig"],MM(t,i));const o=a(e,["config"]);return o!=null&&SM(o,n),n}function AM(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],lo(t,r)),n}function RM(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],lo(t,r)),n}function PM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);return o!=null&&d(e,["error"],o),e}function NM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);return o!=null&&d(e,["error"],o),e}function xM(t,e){const n={},r=a(e,["contents"]);if(r!=null){let o=$h(t,r);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["requests[]","request","content"],o)}const i=a(e,["config"]);return i!=null&&(d(n,["_self"],kM(i,n)),Rk(n,{"requests[].*":"requests[].request.*"})),n}function kM(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&d(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function MM(t,e){const n={},r=a(e,["fileName"]);r!=null&&d(n,["file_name"],r);const i=a(e,["inlinedRequests"]);return i!=null&&d(n,["requests"],xM(t,i)),n}function DM(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function VM(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const r=a(t,["args"]);r!=null&&d(e,["args"],r);const i=a(t,["name"]);if(i!=null&&d(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LM(t){const e={},n=a(t,["mode"]);n!=null&&d(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&d(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function FM(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],DI(st(i)));const o=a(e,["temperature"]);o!=null&&d(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(r,["topP"],s);const l=a(e,["topK"]);l!=null&&d(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&d(r,["candidateCount"],u);const c=a(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const h=a(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&d(r,["logprobs"],m);const _=a(e,["presencePenalty"]);_!=null&&d(r,["presencePenalty"],_);const R=a(e,["frequencyPenalty"]);R!=null&&d(r,["frequencyPenalty"],R);const x=a(e,["seed"]);x!=null&&d(r,["seed"],x);const M=a(e,["responseMimeType"]);M!=null&&d(r,["responseMimeType"],M);const w=a(e,["responseSchema"]);w!=null&&d(r,["responseSchema"],Wh(w));const I=a(e,["responseJsonSchema"]);if(I!=null&&d(r,["responseJsonSchema"],I),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=a(e,["safetySettings"]);if(n!==void 0&&A!=null){let D=A;Array.isArray(D)&&(D=D.map(N=>ZM(N))),d(n,["safetySettings"],D)}const V=a(e,["tools"]);if(n!==void 0&&V!=null){let D=so(V);Array.isArray(D)&&(D=D.map(N=>eD(oo(N)))),d(n,["tools"],D)}const F=a(e,["toolConfig"]);if(n!==void 0&&F!=null&&d(n,["toolConfig"],jM(F)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=a(e,["cachedContent"]);n!==void 0&&O!=null&&d(n,["cachedContent"],kn(t,O));const v=a(e,["responseModalities"]);v!=null&&d(r,["responseModalities"],v);const E=a(e,["mediaResolution"]);E!=null&&d(r,["mediaResolution"],E);const S=a(e,["speechConfig"]);if(S!=null&&d(r,["speechConfig"],Jh(S)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=a(e,["thinkingConfig"]);P!=null&&d(r,["thinkingConfig"],P);const k=a(e,["imageConfig"]);return k!=null&&d(r,["imageConfig"],GM(k)),r}function UM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>vM(c))),d(e,["candidates"],u)}const i=a(t,["modelVersion"]);i!=null&&d(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&d(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&d(e,["usageMetadata"],l),e}function OM(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],lo(t,r)),n}function bM(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],lo(t,r)),n}function BM(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function qM(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function GM(t){const e={},n=a(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function HM(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["request","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let l=Ut(i);Array.isArray(l)&&(l=l.map(u=>DI(u))),d(n,["request","contents"],l)}const o=a(e,["metadata"]);o!=null&&d(n,["metadata"],o);const s=a(e,["config"]);return s!=null&&d(n,["request","generationConfig"],FM(t,s,a(n,["request"],{}))),n}function zM(t){const e={},n=a(t,["response"]);n!=null&&d(e,["response"],UM(n));const r=a(t,["error"]);return r!=null&&d(e,["error"],r),e}function $M(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);if(e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function WM(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),n}function JM(t){const e={},n=a(t,["config"]);return n!=null&&$M(n,e),e}function KM(t){const e={},n=a(t,["config"]);return n!=null&&WM(n,e),e}function QM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>$l(s))),d(e,["batchJobs"],o)}return e}function YM(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Zd(s))),d(e,["batchJobs"],o)}return e}function XM(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],DM(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],VM(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],gM(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const h=a(t,["thought"]);h!=null&&d(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function ZM(t){const e={},n=a(t,["category"]);if(n!=null&&d(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function jM(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],LM(n));const r=a(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],r),e}function eD(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],BM(l));const u=a(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],qM(u));const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Pn||(Pn={}));class ri{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tD extends xn{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new ri(Pn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=D_(this.apiClient,e),r=n._url,i=z("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,u=l.requests,c=[];for(const h of u){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const _=p.request;_.systemInstruction=m,p.request=_}c.push(p)}return l.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=IM(this.apiClient,e);return l=z("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Zd(h))}else{const c=D_(this.apiClient,e);return l=z("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>$l(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=wM(this.apiClient,e);return o=z("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>$l(u))}}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=bM(this.apiClient,e);return l=z("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Zd(h))}else{const c=OM(this.apiClient,e);return l=z("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>$l(h))}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const u=_M(this.apiClient,e);s=z("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=yM(this.apiClient,e);s=z("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=KM(e);return l=z("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=YM(h),m=new N_;return Object.assign(m,p),m})}else{const c=JM(e);return l=z("batches",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=QM(h),m=new N_;return Object.assign(m,p),m})}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=RM(this.apiClient,e);return l=z("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>NM(h))}else{const c=AM(this.apiClient,e);return l=z("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>PM(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nD(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function V_(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>wD(o))),d(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&d(e,["role"],r),e}function rD(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let h=Ut(s);Array.isArray(h)&&(h=h.map(p=>V_(p))),d(e,["contents"],h)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&d(e,["systemInstruction"],V_(st(l)));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>RD(p))),d(e,["tools"],h)}const c=a(t,["toolConfig"]);if(e!==void 0&&c!=null&&d(e,["toolConfig"],AD(c)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function iD(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=Ut(s);Array.isArray(p)&&(p=p.map(m=>m)),d(e,["contents"],p)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&d(e,["systemInstruction"],st(l));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>PD(m))),d(e,["tools"],p)}const c=a(t,["toolConfig"]);e!==void 0&&c!=null&&d(e,["toolConfig"],c);const h=a(t,["kmsKeyName"]);return e!==void 0&&h!=null&&d(e,["encryption_spec","kmsKeyName"],h),n}function oD(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["model"],TI(t,r));const i=a(e,["config"]);return i!=null&&rD(i,n),n}function sD(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["model"],TI(t,r));const i=a(e,["config"]);return i!=null&&iD(i,n),n}function lD(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],kn(t,r)),n}function aD(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],kn(t,r)),n}function uD(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function cD(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function dD(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function fD(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const r=a(t,["args"]);r!=null&&d(e,["args"],r);const i=a(t,["name"]);if(i!=null&&d(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hD(t){const e={},n=a(t,["mode"]);n!=null&&d(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&d(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function pD(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&d(e,["description"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["parameters"]);i!=null&&d(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&d(e,["responseJsonSchema"],l),e}function mD(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],kn(t,r)),n}function gD(t,e){const n={},r=a(e,["name"]);return r!=null&&d(n,["_url","name"],kn(t,r)),n}function yD(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function _D(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function vD(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function ED(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function TD(t){const e={},n=a(t,["config"]);return n!=null&&vD(n,e),e}function CD(t){const e={},n=a(t,["config"]);return n!=null&&ED(n,e),e}function ID(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function SD(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function wD(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],dD(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],fD(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],nD(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const h=a(t,["thought"]);h!=null&&d(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function AD(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],hD(n));const r=a(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],r),e}function RD(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],yD(l));const u=a(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],_D(u));const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function PD(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>pD(m))),d(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const i=a(t,["googleSearchRetrieval"]);i!=null&&d(e,["googleSearchRetrieval"],i);const o=a(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&d(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&d(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&d(e,["googleMaps"],u);const c=a(t,["googleSearch"]);c!=null&&d(e,["googleSearch"],c);const h=a(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function ND(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),n}function xD(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),n}function kD(t,e){const n={},r=a(e,["name"]);r!=null&&d(n,["_url","name"],kn(t,r));const i=a(e,["config"]);return i!=null&&ND(i,n),n}function MD(t,e){const n={},r=a(e,["name"]);r!=null&&d(n,["_url","name"],kn(t,r));const i=a(e,["config"]);return i!=null&&xD(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DD extends xn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ri(Pn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=sD(this.apiClient,e);return l=z("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const c=oD(this.apiClient,e);return l=z("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=gD(this.apiClient,e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const c=mD(this.apiClient,e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=aD(this.apiClient,e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=cD(h),m=new R_;return Object.assign(m,p),m})}else{const c=lD(this.apiClient,e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=uD(h),m=new R_;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=MD(this.apiClient,e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const c=kD(this.apiClient,e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=CD(e);return l=z("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=SD(h),m=new P_;return Object.assign(m,p),m})}else{const c=TD(e);return l=z("cachedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=ID(h),m=new P_;return Object.assign(m,p),m})}}}function L_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ge(t){return this instanceof ge?(this.v=t,this):new ge(t)}function Li(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(R){return Promise.resolve(R).then(_,p)}}function l(_,R){r[_]&&(i[_]=function(x){return new Promise(function(M,w){o.push([_,x,M,w])>1||u(_,x)})},R&&(i[_]=R(i[_])))}function u(_,R){try{c(r[_](R))}catch(x){m(o[0][3],x)}}function c(_){_.value instanceof ge?Promise.resolve(_.value.v).then(h,p):m(o[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function m(_,R){_(R),o.shift(),o.length&&u(o[0][0],o[0][1])}}function ns(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof L_=="function"?L_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(l,u){s=t[o](s),i(l,u,s.done,s.value)})}}function i(o,s,l,u){Promise.resolve(u).then(function(c){o({value:c,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VD(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:VI(n)}function VI(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function LD(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function F_(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!VI(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class FD{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new UD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class UD{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),LD(o)}async sendMessage(e){var n;await this.sendPromise;const r=st(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const u=await i,c=(s=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(l=h.slice(p))!==null&&l!==void 0?l:[]);const _=c?[c]:[];this.recordHistory(r,_,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=st(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?F_(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Li(this,arguments,function*(){var s,l,u,c;const h=[];try{for(var p=!0,m=ns(e),_;_=yield ge(m.next()),s=_.done,!s;p=!0){c=_.value,p=!1;const R=c;if(VD(R)){const x=(i=(r=R.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;x!==void 0&&h.push(x)}yield yield ge(R)}}catch(R){l={error:R}}finally{try{!p&&!s&&(u=m.return)&&(yield ge(u.call(m)))}finally{if(l)throw l.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...F_(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,vu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OD(t){const e={},n=a(t,["file"]);return n!=null&&d(e,["file"],n),e}function bD(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function BD(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","file"],RI(n)),e}function qD(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function GD(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","file"],RI(n)),e}function HD(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function zD(t){const e={},n=a(t,["config"]);return n!=null&&HD(n,e),e}function $D(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WD extends xn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ri(Pn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=zD(e);return o=z("files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const c=$D(u),h=new Yk;return Object.assign(h,c),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=OD(e);return o=z("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=bD(u),h=new Xk;return Object.assign(h,c),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=GD(e);return o=z("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=BD(e);return o=z("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const c=qD(u),h=new Zk;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wl(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function JD(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>uV(o))),d(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&d(e,["role"],r),e}function KD(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function QD(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const r=a(t,["args"]);r!=null&&d(e,["args"],r);const i=a(t,["name"]);if(i!=null&&d(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function YD(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&d(e,["description"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["parameters"]);i!=null&&d(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&d(e,["responseJsonSchema"],l),e}function XD(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);const i=a(t,["audioTimestamp"]);i!=null&&d(e,["audioTimestamp"],i);const o=a(t,["candidateCount"]);o!=null&&d(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&d(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&d(e,["logprobs"],u);const c=a(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const h=a(t,["mediaResolution"]);h!=null&&d(e,["mediaResolution"],h);const p=a(t,["presencePenalty"]);p!=null&&d(e,["presencePenalty"],p);const m=a(t,["responseLogprobs"]);m!=null&&d(e,["responseLogprobs"],m);const _=a(t,["responseMimeType"]);_!=null&&d(e,["responseMimeType"],_);const R=a(t,["responseModalities"]);R!=null&&d(e,["responseModalities"],R);const x=a(t,["responseSchema"]);x!=null&&d(e,["responseSchema"],x);const M=a(t,["routingConfig"]);M!=null&&d(e,["routingConfig"],M);const w=a(t,["seed"]);w!=null&&d(e,["seed"],w);const I=a(t,["speechConfig"]);I!=null&&d(e,["speechConfig"],LI(I));const A=a(t,["stopSequences"]);A!=null&&d(e,["stopSequences"],A);const V=a(t,["temperature"]);V!=null&&d(e,["temperature"],V);const F=a(t,["thinkingConfig"]);F!=null&&d(e,["thinkingConfig"],F);const O=a(t,["topK"]);O!=null&&d(e,["topK"],O);const v=a(t,["topP"]);if(v!=null&&d(e,["topP"],v),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ZD(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function jD(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function eV(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=a(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const h=a(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],Kh(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);const _=a(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],_);const R=a(t,["systemInstruction"]);e!==void 0&&R!=null&&d(e,["setup","systemInstruction"],JD(st(R)));const x=a(t,["tools"]);if(e!==void 0&&x!=null){let O=so(x);Array.isArray(O)&&(O=O.map(v=>dV(oo(v)))),d(e,["setup","tools"],O)}const M=a(t,["sessionResumption"]);e!==void 0&&M!=null&&d(e,["setup","sessionResumption"],cV(M));const w=a(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&d(e,["setup","inputAudioTranscription"],w);const I=a(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],I);const A=a(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&d(e,["setup","realtimeInputConfig"],A);const V=a(t,["contextWindowCompression"]);e!==void 0&&V!=null&&d(e,["setup","contextWindowCompression"],V);const F=a(t,["proactivity"]);return e!==void 0&&F!=null&&d(e,["setup","proactivity"],F),n}function tV(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],XD(r));const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=a(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const h=a(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],LI(Kh(p)));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);const _=a(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],_);const R=a(t,["systemInstruction"]);e!==void 0&&R!=null&&d(e,["setup","systemInstruction"],st(R));const x=a(t,["tools"]);if(e!==void 0&&x!=null){let O=so(x);Array.isArray(O)&&(O=O.map(v=>fV(oo(v)))),d(e,["setup","tools"],O)}const M=a(t,["sessionResumption"]);e!==void 0&&M!=null&&d(e,["setup","sessionResumption"],M);const w=a(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&d(e,["setup","inputAudioTranscription"],w);const I=a(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],I);const A=a(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&d(e,["setup","realtimeInputConfig"],A);const V=a(t,["contextWindowCompression"]);e!==void 0&&V!=null&&d(e,["setup","contextWindowCompression"],V);const F=a(t,["proactivity"]);return e!==void 0&&F!=null&&d(e,["setup","proactivity"],F),n}function nV(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["setup","model"],ae(t,r));const i=a(e,["config"]);return i!=null&&d(n,["config"],eV(i,n)),n}function rV(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["setup","model"],ae(t,r));const i=a(e,["config"]);return i!=null&&d(n,["config"],tV(i,n)),n}function iV(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function oV(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["weightedPrompts"],r)}return e}function sV(t){const e={},n=a(t,["media"]);if(n!=null){let c=CI(n);Array.isArray(c)&&(c=c.map(h=>Wl(h))),d(e,["mediaChunks"],c)}const r=a(t,["audio"]);r!=null&&d(e,["audio"],Wl(SI(r)));const i=a(t,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&d(e,["video"],Wl(II(o)));const s=a(t,["text"]);s!=null&&d(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&d(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&d(e,["activityEnd"],u),e}function lV(t){const e={},n=a(t,["media"]);if(n!=null){let c=CI(n);Array.isArray(c)&&(c=c.map(h=>h)),d(e,["mediaChunks"],c)}const r=a(t,["audio"]);r!=null&&d(e,["audio"],SI(r));const i=a(t,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&d(e,["video"],II(o));const s=a(t,["text"]);s!=null&&d(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&d(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&d(e,["activityEnd"],u),e}function aV(t){const e={},n=a(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);const r=a(t,["serverContent"]);r!=null&&d(e,["serverContent"],r);const i=a(t,["toolCall"]);i!=null&&d(e,["toolCall"],i);const o=a(t,["toolCallCancellation"]);o!=null&&d(e,["toolCallCancellation"],o);const s=a(t,["usageMetadata"]);s!=null&&d(e,["usageMetadata"],hV(s));const l=a(t,["goAway"]);l!=null&&d(e,["goAway"],l);const u=a(t,["sessionResumptionUpdate"]);return u!=null&&d(e,["sessionResumptionUpdate"],u),e}function uV(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],KD(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],QD(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],Wl(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const h=a(t,["thought"]);h!=null&&d(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function cV(t){const e={},n=a(t,["handle"]);if(n!=null&&d(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function LI(t){const e={},n=a(t,["languageCode"]);n!=null&&d(e,["languageCode"],n);const r=a(t,["voiceConfig"]);if(r!=null&&d(e,["voiceConfig"],r),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function dV(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],ZD(l));const u=a(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],jD(u));const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function fV(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>YD(m))),d(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const i=a(t,["googleSearchRetrieval"]);i!=null&&d(e,["googleSearchRetrieval"],i);const o=a(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&d(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&d(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&d(e,["googleMaps"],u);const c=a(t,["googleSearch"]);c!=null&&d(e,["googleSearch"],c);const h=a(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function hV(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&d(e,["cachedContentTokenCount"],r);const i=a(t,["candidatesTokenCount"]);i!=null&&d(e,["responseTokenCount"],i);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&d(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&d(e,["thoughtsTokenCount"],s);const l=a(t,["totalTokenCount"]);l!=null&&d(e,["totalTokenCount"],l);const u=a(t,["promptTokensDetails"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(R=>R)),d(e,["promptTokensDetails"],_)}const c=a(t,["cacheTokensDetails"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(R=>R)),d(e,["cacheTokensDetails"],_)}const h=a(t,["candidatesTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(R=>R)),d(e,["responseTokensDetails"],_)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(R=>R)),d(e,["toolUsePromptTokensDetails"],_)}const m=a(t,["trafficType"]);return m!=null&&d(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pV(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function mV(t){const e={},n=a(t,["content"]);n!=null&&d(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],gV(r));const i=a(t,["tokenCount"]);i!=null&&d(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&d(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&d(e,["index"],u);const c=a(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);const h=a(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>_)),d(e,["safetyRatings"],m)}const p=a(t,["urlContextMetadata"]);return p!=null&&d(e,["urlContextMetadata"],p),e}function gV(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["citations"],r)}return e}function yV(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let o=Ut(i);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["contents"],o)}return n}function _V(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["tokensInfo"],i)}return e}function vV(t){const e={},n=a(t,["values"]);n!=null&&d(e,["values"],n);const r=a(t,["statistics"]);return r!=null&&d(e,["statistics"],EV(r)),e}function EV(t){const e={},n=a(t,["truncated"]);n!=null&&d(e,["truncated"],n);const r=a(t,["token_count"]);return r!=null&&d(e,["tokenCount"],r),e}function Eu(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>NL(o))),d(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&d(e,["role"],r),e}function TV(t){const e={},n=a(t,["controlType"]);n!=null&&d(e,["controlType"],n);const r=a(t,["enableControlImageComputation"]);return r!=null&&d(e,["computeControl"],r),e}function CV(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function IV(t,e){const n={},r=a(t,["systemInstruction"]);e!==void 0&&r!=null&&d(e,["systemInstruction"],st(r));const i=a(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>BI(l))),d(e,["tools"],s)}const o=a(t,["generationConfig"]);return e!==void 0&&o!=null&&d(e,["generationConfig"],pL(o)),n}function SV(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let s=Ut(i);Array.isArray(s)&&(s=s.map(l=>Eu(l))),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&CV(o),n}function wV(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let s=Ut(i);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&IV(o,n),n}function AV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);r!=null&&d(e,["totalTokens"],r);const i=a(t,["cachedContentTokenCount"]);return i!=null&&d(e,["cachedContentTokenCount"],i),e}function RV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);return r!=null&&d(e,["totalTokens"],r),e}function PV(t,e){const n={},r=a(e,["model"]);return r!=null&&d(n,["_url","name"],ae(t,r)),n}function NV(t,e){const n={},r=a(e,["model"]);return r!=null&&d(n,["_url","name"],ae(t,r)),n}function xV(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function kV(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function MV(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&d(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);const c=a(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&d(e,["parameters","includeSafetyAttributes"],p);const m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);const _=a(t,["language"]);e!==void 0&&_!=null&&d(e,["parameters","language"],_);const R=a(t,["outputMimeType"]);e!==void 0&&R!=null&&d(e,["parameters","outputOptions","mimeType"],R);const x=a(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","compressionQuality"],x);const M=a(t,["addWatermark"]);e!==void 0&&M!=null&&d(e,["parameters","addWatermark"],M);const w=a(t,["labels"]);e!==void 0&&w!=null&&d(e,["labels"],w);const I=a(t,["editMode"]);e!==void 0&&I!=null&&d(e,["parameters","editMode"],I);const A=a(t,["baseSteps"]);return e!==void 0&&A!=null&&d(e,["parameters","editConfig","baseSteps"],A),n}function DV(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);const o=a(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>LL(u))),d(n,["instances[0]","referenceImages"],l)}const s=a(e,["config"]);return s!=null&&MV(s,n),n}function VV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Tu(o))),d(e,["generatedImages"],i)}return e}function LV(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&d(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function FV(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&d(e,["instances[]","task_type"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&d(e,["instances[]","title"],i);const o=a(t,["outputDimensionality"]);e!==void 0&&o!=null&&d(e,["parameters","outputDimensionality"],o);const s=a(t,["mimeType"]);e!==void 0&&s!=null&&d(e,["instances[]","mimeType"],s);const l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&d(e,["parameters","autoTruncate"],l),n}function UV(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let l=$h(t,i);Array.isArray(l)&&(l=l.map(u=>u)),d(n,["requests[]","content"],l)}const o=a(e,["config"]);o!=null&&LV(o,n);const s=a(e,["model"]);return s!==void 0&&d(n,["requests[]","model"],ae(t,s)),n}function OV(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let s=$h(t,i);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["instances[]","content"],s)}const o=a(e,["config"]);return o!=null&&FV(o,n),n}function bV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["embeddings"],o)}const i=a(t,["metadata"]);return i!=null&&d(e,["metadata"],i),e}function BV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>vV(s))),d(e,["embeddings"],o)}const i=a(t,["metadata"]);return i!=null&&d(e,["metadata"],i),e}function qV(t){const e={},n=a(t,["endpoint"]);n!=null&&d(e,["name"],n);const r=a(t,["deployedModelId"]);return r!=null&&d(e,["deployedModelId"],r),e}function GV(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function HV(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const r=a(t,["args"]);r!=null&&d(e,["args"],r);const i=a(t,["name"]);if(i!=null&&d(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zV(t){const e={},n=a(t,["mode"]);n!=null&&d(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&d(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function $V(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&d(e,["description"],n);const r=a(t,["name"]);r!=null&&d(e,["name"],r);const i=a(t,["parameters"]);i!=null&&d(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&d(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&d(e,["responseJsonSchema"],l),e}function WV(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],Eu(st(i)));const o=a(e,["temperature"]);o!=null&&d(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(r,["topP"],s);const l=a(e,["topK"]);l!=null&&d(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&d(r,["candidateCount"],u);const c=a(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const h=a(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&d(r,["logprobs"],m);const _=a(e,["presencePenalty"]);_!=null&&d(r,["presencePenalty"],_);const R=a(e,["frequencyPenalty"]);R!=null&&d(r,["frequencyPenalty"],R);const x=a(e,["seed"]);x!=null&&d(r,["seed"],x);const M=a(e,["responseMimeType"]);M!=null&&d(r,["responseMimeType"],M);const w=a(e,["responseSchema"]);w!=null&&d(r,["responseSchema"],Wh(w));const I=a(e,["responseJsonSchema"]);if(I!=null&&d(r,["responseJsonSchema"],I),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=a(e,["safetySettings"]);if(n!==void 0&&A!=null){let D=A;Array.isArray(D)&&(D=D.map(N=>FL(N))),d(n,["safetySettings"],D)}const V=a(e,["tools"]);if(n!==void 0&&V!=null){let D=so(V);Array.isArray(D)&&(D=D.map(N=>HL(oo(N)))),d(n,["tools"],D)}const F=a(e,["toolConfig"]);if(n!==void 0&&F!=null&&d(n,["toolConfig"],GL(F)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=a(e,["cachedContent"]);n!==void 0&&O!=null&&d(n,["cachedContent"],kn(t,O));const v=a(e,["responseModalities"]);v!=null&&d(r,["responseModalities"],v);const E=a(e,["mediaResolution"]);E!=null&&d(r,["mediaResolution"],E);const S=a(e,["speechConfig"]);if(S!=null&&d(r,["speechConfig"],Jh(S)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=a(e,["thinkingConfig"]);P!=null&&d(r,["thinkingConfig"],P);const k=a(e,["imageConfig"]);return k!=null&&d(r,["imageConfig"],vL(k)),r}function JV(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],st(i));const o=a(e,["temperature"]);o!=null&&d(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&d(r,["topP"],s);const l=a(e,["topK"]);l!=null&&d(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&d(r,["candidateCount"],u);const c=a(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);const h=a(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&d(r,["logprobs"],m);const _=a(e,["presencePenalty"]);_!=null&&d(r,["presencePenalty"],_);const R=a(e,["frequencyPenalty"]);R!=null&&d(r,["frequencyPenalty"],R);const x=a(e,["seed"]);x!=null&&d(r,["seed"],x);const M=a(e,["responseMimeType"]);M!=null&&d(r,["responseMimeType"],M);const w=a(e,["responseSchema"]);w!=null&&d(r,["responseSchema"],Wh(w));const I=a(e,["responseJsonSchema"]);I!=null&&d(r,["responseJsonSchema"],I);const A=a(e,["routingConfig"]);A!=null&&d(r,["routingConfig"],A);const V=a(e,["modelSelectionConfig"]);V!=null&&d(r,["modelConfig"],V);const F=a(e,["safetySettings"]);if(n!==void 0&&F!=null){let at=F;Array.isArray(at)&&(at=at.map(hn=>hn)),d(n,["safetySettings"],at)}const O=a(e,["tools"]);if(n!==void 0&&O!=null){let at=so(O);Array.isArray(at)&&(at=at.map(hn=>BI(oo(hn)))),d(n,["tools"],at)}const v=a(e,["toolConfig"]);n!==void 0&&v!=null&&d(n,["toolConfig"],v);const E=a(e,["labels"]);n!==void 0&&E!=null&&d(n,["labels"],E);const S=a(e,["cachedContent"]);n!==void 0&&S!=null&&d(n,["cachedContent"],kn(t,S));const P=a(e,["responseModalities"]);P!=null&&d(r,["responseModalities"],P);const k=a(e,["mediaResolution"]);k!=null&&d(r,["mediaResolution"],k);const D=a(e,["speechConfig"]);D!=null&&d(r,["speechConfig"],bI(Jh(D)));const N=a(e,["audioTimestamp"]);N!=null&&d(r,["audioTimestamp"],N);const we=a(e,["thinkingConfig"]);we!=null&&d(r,["thinkingConfig"],we);const mt=a(e,["imageConfig"]);return mt!=null&&d(r,["imageConfig"],EL(mt)),r}function U_(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let s=Ut(i);Array.isArray(s)&&(s=s.map(l=>Eu(l))),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&d(n,["generationConfig"],WV(t,o,n)),n}function O_(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["contents"]);if(i!=null){let s=Ut(i);Array.isArray(s)&&(s=s.map(l=>l)),d(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&d(n,["generationConfig"],JV(t,o,n)),n}function b_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>mV(c))),d(e,["candidates"],u)}const i=a(t,["modelVersion"]);i!=null&&d(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&d(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&d(e,["usageMetadata"],l),e}function B_(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),d(e,["candidates"],c)}const i=a(t,["createTime"]);i!=null&&d(e,["createTime"],i);const o=a(t,["modelVersion"]);o!=null&&d(e,["modelVersion"],o);const s=a(t,["promptFeedback"]);s!=null&&d(e,["promptFeedback"],s);const l=a(t,["responseId"]);l!=null&&d(e,["responseId"],l);const u=a(t,["usageMetadata"]);return u!=null&&d(e,["usageMetadata"],u),e}function KV(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const i=a(t,["aspectRatio"]);e!==void 0&&i!=null&&d(e,["parameters","aspectRatio"],i);const o=a(t,["guidanceScale"]);if(e!==void 0&&o!=null&&d(e,["parameters","guidanceScale"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&d(e,["parameters","safetySetting"],s);const l=a(t,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);const u=a(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&d(e,["parameters","includeSafetyAttributes"],u);const c=a(t,["includeRaiReason"]);e!==void 0&&c!=null&&d(e,["parameters","includeRaiReason"],c);const h=a(t,["language"]);e!==void 0&&h!=null&&d(e,["parameters","language"],h);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","mimeType"],p);const m=a(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&d(e,["parameters","outputOptions","compressionQuality"],m),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=a(t,["imageSize"]);if(e!==void 0&&_!=null&&d(e,["parameters","sampleImageSize"],_),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function QV(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&d(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);const c=a(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&d(e,["parameters","includeSafetyAttributes"],p);const m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);const _=a(t,["language"]);e!==void 0&&_!=null&&d(e,["parameters","language"],_);const R=a(t,["outputMimeType"]);e!==void 0&&R!=null&&d(e,["parameters","outputOptions","mimeType"],R);const x=a(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&d(e,["parameters","outputOptions","compressionQuality"],x);const M=a(t,["addWatermark"]);e!==void 0&&M!=null&&d(e,["parameters","addWatermark"],M);const w=a(t,["labels"]);e!==void 0&&w!=null&&d(e,["labels"],w);const I=a(t,["imageSize"]);e!==void 0&&I!=null&&d(e,["parameters","sampleImageSize"],I);const A=a(t,["enhancePrompt"]);return e!==void 0&&A!=null&&d(e,["parameters","enhancePrompt"],A),n}function YV(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&KV(o,n),n}function XV(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&QV(o,n),n}function ZV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>cL(s))),d(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&d(e,["positivePromptSafetyAttributes"],UI(i)),e}function jV(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Tu(s))),d(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&d(e,["positivePromptSafetyAttributes"],OI(i)),e}function eL(t,e){const n={},r=a(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=a(t,["durationSeconds"]);if(e!==void 0&&i!=null&&d(e,["parameters","durationSeconds"],i),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);const s=a(t,["resolution"]);e!==void 0&&s!=null&&d(e,["parameters","resolution"],s);const l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(t,["negativePrompt"]);e!==void 0&&u!=null&&d(e,["parameters","negativePrompt"],u);const c=a(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&d(e,["parameters","enhancePrompt"],c),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=a(t,["lastFrame"]);e!==void 0&&h!=null&&d(e,["instances[0]","lastFrame"],Cu(h));const p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>n2(_))),d(e,["instances[0]","referenceImages"],m)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function tL(t,e){const n={},r=a(t,["numberOfVideos"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);const o=a(t,["fps"]);e!==void 0&&o!=null&&d(e,["parameters","fps"],o);const s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&d(e,["parameters","durationSeconds"],s);const l=a(t,["seed"]);e!==void 0&&l!=null&&d(e,["parameters","seed"],l);const u=a(t,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);const c=a(t,["resolution"]);e!==void 0&&c!=null&&d(e,["parameters","resolution"],c);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&d(e,["parameters","pubsubTopic"],p);const m=a(t,["negativePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","negativePrompt"],m);const _=a(t,["enhancePrompt"]);e!==void 0&&_!=null&&d(e,["parameters","enhancePrompt"],_);const R=a(t,["generateAudio"]);e!==void 0&&R!=null&&d(e,["parameters","generateAudio"],R);const x=a(t,["lastFrame"]);e!==void 0&&x!=null&&d(e,["instances[0]","lastFrame"],Yt(x));const M=a(t,["referenceImages"]);if(e!==void 0&&M!=null){let A=M;Array.isArray(A)&&(A=A.map(V=>r2(V))),d(e,["instances[0]","referenceImages"],A)}const w=a(t,["mask"]);e!==void 0&&w!=null&&d(e,["instances[0]","mask"],t2(w));const I=a(t,["compressionQuality"]);return e!==void 0&&I!=null&&d(e,["parameters","compressionQuality"],I),n}function nL(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],sL(s)),e}function rL(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],lL(s)),e}function iL(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);const o=a(e,["image"]);o!=null&&d(n,["instances[0]","image"],Cu(o));const s=a(e,["video"]);s!=null&&d(n,["instances[0]","video"],qI(s));const l=a(e,["source"]);l!=null&&aL(l,n);const u=a(e,["config"]);return u!=null&&eL(u,n),n}function oL(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);const o=a(e,["image"]);o!=null&&d(n,["instances[0]","image"],Yt(o));const s=a(e,["video"]);s!=null&&d(n,["instances[0]","video"],GI(s));const l=a(e,["source"]);l!=null&&uL(l,n);const u=a(e,["config"]);return u!=null&&tL(u,n),n}function sL(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>fL(s))),d(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function lL(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>hL(s))),d(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function aL(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],Cu(i));const o=a(t,["video"]);return e!==void 0&&o!=null&&d(e,["instances[0]","video"],qI(o)),n}function uL(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],Yt(i));const o=a(t,["video"]);return e!==void 0&&o!=null&&d(e,["instances[0]","video"],GI(o)),n}function cL(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["image"],TL(n));const r=a(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);const i=a(t,["_self"]);return i!=null&&d(e,["safetyAttributes"],UI(i)),e}function Tu(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["image"],FI(n));const r=a(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);const i=a(t,["_self"]);i!=null&&d(e,["safetyAttributes"],OI(i));const o=a(t,["prompt"]);return o!=null&&d(e,["enhancedPrompt"],o),e}function dL(t){const e={},n=a(t,["_self"]);n!=null&&d(e,["mask"],FI(n));const r=a(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["labels"],i)}return e}function fL(t){const e={},n=a(t,["video"]);return n!=null&&d(e,["video"],jL(n)),e}function hL(t){const e={},n=a(t,["_self"]);return n!=null&&d(e,["video"],e2(n)),e}function pL(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);const i=a(t,["audioTimestamp"]);i!=null&&d(e,["audioTimestamp"],i);const o=a(t,["candidateCount"]);o!=null&&d(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&d(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&d(e,["logprobs"],u);const c=a(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);const h=a(t,["mediaResolution"]);h!=null&&d(e,["mediaResolution"],h);const p=a(t,["presencePenalty"]);p!=null&&d(e,["presencePenalty"],p);const m=a(t,["responseLogprobs"]);m!=null&&d(e,["responseLogprobs"],m);const _=a(t,["responseMimeType"]);_!=null&&d(e,["responseMimeType"],_);const R=a(t,["responseModalities"]);R!=null&&d(e,["responseModalities"],R);const x=a(t,["responseSchema"]);x!=null&&d(e,["responseSchema"],x);const M=a(t,["routingConfig"]);M!=null&&d(e,["routingConfig"],M);const w=a(t,["seed"]);w!=null&&d(e,["seed"],w);const I=a(t,["speechConfig"]);I!=null&&d(e,["speechConfig"],bI(I));const A=a(t,["stopSequences"]);A!=null&&d(e,["stopSequences"],A);const V=a(t,["temperature"]);V!=null&&d(e,["temperature"],V);const F=a(t,["thinkingConfig"]);F!=null&&d(e,["thinkingConfig"],F);const O=a(t,["topK"]);O!=null&&d(e,["topK"],O);const v=a(t,["topP"]);if(v!=null&&d(e,["topP"],v),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mL(t,e){const n={},r=a(e,["model"]);return r!=null&&d(n,["_url","name"],ae(t,r)),n}function gL(t,e){const n={},r=a(e,["model"]);return r!=null&&d(n,["_url","name"],ae(t,r)),n}function yL(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function _L(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function vL(t){const e={},n=a(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function EL(t){const e={},n=a(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);const r=a(t,["imageSize"]);r!=null&&d(e,["imageSize"],r);const i=a(t,["outputMimeType"]);i!=null&&d(e,["imageOutputOptions","mimeType"],i);const o=a(t,["outputCompressionQuality"]);return o!=null&&d(e,["imageOutputOptions","compressionQuality"],o),e}function TL(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&d(e,["imageBytes"],Ir(n));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function FI(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&d(e,["imageBytes"],Ir(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function Cu(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&d(e,["bytesBase64Encoded"],Ir(n));const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Yt(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const r=a(t,["imageBytes"]);r!=null&&d(e,["bytesBase64Encoded"],Ir(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function CL(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&d(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],PI(t,l)),r}function IL(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&d(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],PI(t,l)),r}function SL(t,e){const n={},r=a(e,["config"]);return r!=null&&CL(t,r,n),n}function wL(t,e){const n={},r=a(e,["config"]);return r!=null&&IL(t,r,n),n}function AL(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=NI(i);Array.isArray(o)&&(o=o.map(s=>jd(s))),d(e,["models"],o)}return e}function RL(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=NI(i);Array.isArray(o)&&(o=o.map(s=>ef(s))),d(e,["models"],o)}return e}function PL(t){const e={},n=a(t,["maskMode"]);n!=null&&d(e,["maskMode"],n);const r=a(t,["segmentationClasses"]);r!=null&&d(e,["maskClasses"],r);const i=a(t,["maskDilation"]);return i!=null&&d(e,["dilation"],i),e}function jd(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["displayName"]);r!=null&&d(e,["displayName"],r);const i=a(t,["description"]);i!=null&&d(e,["description"],i);const o=a(t,["version"]);o!=null&&d(e,["version"],o);const s=a(t,["_self"]);s!=null&&d(e,["tunedModelInfo"],zL(s));const l=a(t,["inputTokenLimit"]);l!=null&&d(e,["inputTokenLimit"],l);const u=a(t,["outputTokenLimit"]);u!=null&&d(e,["outputTokenLimit"],u);const c=a(t,["supportedGenerationMethods"]);c!=null&&d(e,["supportedActions"],c);const h=a(t,["temperature"]);h!=null&&d(e,["temperature"],h);const p=a(t,["maxTemperature"]);p!=null&&d(e,["maxTemperature"],p);const m=a(t,["topP"]);m!=null&&d(e,["topP"],m);const _=a(t,["topK"]);_!=null&&d(e,["topK"],_);const R=a(t,["thinking"]);return R!=null&&d(e,["thinking"],R),e}function ef(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["displayName"]);r!=null&&d(e,["displayName"],r);const i=a(t,["description"]);i!=null&&d(e,["description"],i);const o=a(t,["versionId"]);o!=null&&d(e,["version"],o);const s=a(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>qV(m))),d(e,["endpoints"],p)}const l=a(t,["labels"]);l!=null&&d(e,["labels"],l);const u=a(t,["_self"]);u!=null&&d(e,["tunedModelInfo"],$L(u));const c=a(t,["defaultCheckpointId"]);c!=null&&d(e,["defaultCheckpointId"],c);const h=a(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),d(e,["checkpoints"],p)}return e}function NL(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],GV(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],HV(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],pV(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const h=a(t,["thought"]);h!=null&&d(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function xL(t){const e={},n=a(t,["productImage"]);return n!=null&&d(e,["image"],Yt(n)),e}function kL(t,e){const n={},r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const i=a(t,["baseSteps"]);e!==void 0&&i!=null&&d(e,["parameters","baseSteps"],i);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const s=a(t,["seed"]);e!==void 0&&s!=null&&d(e,["parameters","seed"],s);const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&d(e,["parameters","safetySetting"],l);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&d(e,["parameters","personGeneration"],u);const c=a(t,["addWatermark"]);e!==void 0&&c!=null&&d(e,["parameters","addWatermark"],c);const h=a(t,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);const p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","compressionQuality"],p);const m=a(t,["enhancePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","enhancePrompt"],m);const _=a(t,["labels"]);return e!==void 0&&_!=null&&d(e,["labels"],_),n}function ML(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["source"]);i!=null&&VL(i,n);const o=a(e,["config"]);return o!=null&&kL(o,n),n}function DL(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Tu(i))),d(e,["generatedImages"],r)}return e}function VL(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const i=a(t,["personImage"]);e!==void 0&&i!=null&&d(e,["instances[0]","personImage","image"],Yt(i));const o=a(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>xL(l))),d(e,["instances[0]","productImages"],s)}return n}function LL(t){const e={},n=a(t,["referenceImage"]);n!=null&&d(e,["referenceImage"],Yt(n));const r=a(t,["referenceId"]);r!=null&&d(e,["referenceId"],r);const i=a(t,["referenceType"]);i!=null&&d(e,["referenceType"],i);const o=a(t,["maskImageConfig"]);o!=null&&d(e,["maskImageConfig"],PL(o));const s=a(t,["controlImageConfig"]);s!=null&&d(e,["controlImageConfig"],TV(s));const l=a(t,["styleImageConfig"]);l!=null&&d(e,["styleImageConfig"],l);const u=a(t,["subjectImageConfig"]);return u!=null&&d(e,["subjectImageConfig"],u),e}function UI(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&d(e,["contentType"],i),e}function OI(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&d(e,["contentType"],i),e}function FL(t){const e={},n=a(t,["category"]);if(n!=null&&d(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function UL(t){const e={},n=a(t,["image"]);return n!=null&&d(e,["image"],Yt(n)),e}function OL(t,e){const n={},r=a(t,["mode"]);e!==void 0&&r!=null&&d(e,["parameters","mode"],r);const i=a(t,["maxPredictions"]);e!==void 0&&i!=null&&d(e,["parameters","maxPredictions"],i);const o=a(t,["confidenceThreshold"]);e!==void 0&&o!=null&&d(e,["parameters","confidenceThreshold"],o);const s=a(t,["maskDilation"]);e!==void 0&&s!=null&&d(e,["parameters","maskDilation"],s);const l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","binaryColorThreshold"],l);const u=a(t,["labels"]);return e!==void 0&&u!=null&&d(e,["labels"],u),n}function bL(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["source"]);i!=null&&qL(i,n);const o=a(e,["config"]);return o!=null&&OL(o,n),n}function BL(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>dL(i))),d(e,["generatedMasks"],r)}return e}function qL(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],Yt(i));const o=a(t,["scribbleImage"]);return e!==void 0&&o!=null&&d(e,["instances[0]","scribble"],UL(o)),n}function bI(t){const e={},n=a(t,["languageCode"]);n!=null&&d(e,["languageCode"],n);const r=a(t,["voiceConfig"]);if(r!=null&&d(e,["voiceConfig"],r),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function GL(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],zV(n));const r=a(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],r),e}function HL(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],yL(l));const u=a(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],_L(u));const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function BI(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>$V(m))),d(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const i=a(t,["googleSearchRetrieval"]);i!=null&&d(e,["googleSearchRetrieval"],i);const o=a(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&d(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&d(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&d(e,["googleMaps"],u);const c=a(t,["googleSearch"]);c!=null&&d(e,["googleSearch"],c);const h=a(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function zL(t){const e={},n=a(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&d(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&d(e,["updateTime"],i),e}function $L(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&d(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&d(e,["updateTime"],i),e}function WL(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&d(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&d(e,["defaultCheckpointId"],o),n}function JL(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&d(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&d(e,["defaultCheckpointId"],o),n}function KL(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","name"],ae(t,r));const i=a(e,["config"]);return i!=null&&WL(i,n),n}function QL(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["config"]);return i!=null&&JL(i,n),n}function YL(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const i=a(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&d(e,["parameters","safetySetting"],i);const o=a(t,["personGeneration"]);e!==void 0&&o!=null&&d(e,["parameters","personGeneration"],o);const s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&d(e,["parameters","includeRaiReason"],s);const l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&d(e,["parameters","outputOptions","mimeType"],l);const u=a(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&d(e,["parameters","outputOptions","compressionQuality"],u);const c=a(t,["enhanceInputImage"]);e!==void 0&&c!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],c);const h=a(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const p=a(t,["labels"]);e!==void 0&&p!=null&&d(e,["labels"],p);const m=a(t,["numberOfImages"]);e!==void 0&&m!=null&&d(e,["parameters","sampleCount"],m);const _=a(t,["mode"]);return e!==void 0&&_!=null&&d(e,["parameters","mode"],_),n}function XL(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["_url","model"],ae(t,r));const i=a(e,["image"]);i!=null&&d(n,["instances[0]","image"],Yt(i));const o=a(e,["upscaleFactor"]);o!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=a(e,["config"]);return s!=null&&YL(s,n),n}function ZL(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Tu(o))),d(e,["generatedImages"],i)}return e}function jL(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],Ir(r));const i=a(t,["encoding"]);return i!=null&&d(e,["mimeType"],i),e}function e2(t){const e={},n=a(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],Ir(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function t2(t){const e={},n=a(t,["image"]);n!=null&&d(e,["_self"],Yt(n));const r=a(t,["maskMode"]);return r!=null&&d(e,["maskMode"],r),e}function n2(t){const e={},n=a(t,["image"]);n!=null&&d(e,["image"],Cu(n));const r=a(t,["referenceType"]);return r!=null&&d(e,["referenceType"],r),e}function r2(t){const e={},n=a(t,["image"]);n!=null&&d(e,["image"],Yt(n));const r=a(t,["referenceType"]);return r!=null&&d(e,["referenceType"],r),e}function qI(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["uri"],n);const r=a(t,["videoBytes"]);r!=null&&d(e,["encodedVideo"],Ir(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["encoding"],i),e}function GI(t){const e={},n=a(t,["uri"]);n!=null&&d(e,["gcsUri"],n);const r=a(t,["videoBytes"]);r!=null&&d(e,["bytesBase64Encoded"],Ir(r));const i=a(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i2="Content-Type",o2="X-Server-Timeout",s2="User-Agent",tf="x-goog-api-client",l2="1.30.0",a2=`google-genai-sdk/${l2}`,u2="v1beta1",c2="v1beta",q_=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class d2{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:u2,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:c2,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))i.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>o.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&f2(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await G_(i),new Yd(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await G_(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Li(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:l,value:u}=yield ge(i.read());if(l){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=o.decode(u,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),_=m.status,R=m.code,x=`got status: ${_}. ${JSON.stringify(p)}`;if(R>=400&&R<600)throw new vu({message:x,status:R})}}catch(p){if(p.name==="ApiError")throw p}s+=c;let h=s.match(q_);for(;h;){const p=h[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ge(new Yd(m)),s=s.slice(h[0].length),h=s.match(q_)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=a2+" "+this.clientOptions.userAgentExtra;return e[s2]=n,e[tf]=n,e[i2]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(o2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const u={file:i},c=this.getFileName(e),h=z("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,c,u,n==null?void 0:n.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),l=String(s.size),u=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),p={};r!=null&&r.customMetadata&&(p.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(p.chunkingConfig=r.chunkingConfig);const m=await this.fetchUploadUrl(c,l,u,h,p,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var l;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:u});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(l=c==null?void 0:c.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function G_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new vu({message:i,status:n}):new Error(i)}}function f2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const l=Object.assign({},o);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const c=s[u],h=l[u];c&&typeof c=="object"&&!Array.isArray(c)&&h&&typeof h=="object"&&!Array.isArray(h)?l[u]=r(h,c):(h&&c&&typeof h!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof h}, New type: ${typeof c}. Overwriting.`),l[u]=c)}return l}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h2="mcp_used/unknown";let p2=!1;function HI(t){for(const e of t)if(m2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return p2}function zI(t){var e;const n=(e=t[tf])!==null&&e!==void 0?e:"";t[tf]=(n+` ${h2}`).trimStart()}function m2(t){return t!==null&&typeof t=="object"&&t instanceof Qh}function g2(t,e=100){return Li(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield ge(t.listTools({cursor:r}));for(const s of o.tools)yield yield ge(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class Qh{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Qh(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var l=!0,u=(n=void 0,ns(g2(h))),c;c=await u.next(),e=c.done,!e;l=!0){i=c.value,l=!1;const p=i;s.push(p);const m=p.name;if(o[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);o[m]=h}}catch(p){n={error:p}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),aM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function y2(t,e,n){const r=new eM;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class _2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=T2(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let c=()=>{};const h=new Promise(A=>{c=A}),p=e.callbacks,m=function(){c({})},_=this.apiClient,R={onopen:m,onmessage:A=>{y2(_,p.onmessage,A)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(A){}},x=this.webSocketFactory.create(u,E2(s),R);x.connect(),await h;const I={setup:{model:ae(this.apiClient,e.model)}};return x.send(JSON.stringify(I)),new v2(x,this.apiClient)}}class v2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=oV(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=iV(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Si.PLAY)}pause(){this.sendPlaybackControl(Si.PAUSE)}stop(){this.sendPlaybackControl(Si.STOP)}resetContext(){this.sendPlaybackControl(Si.RESET_CONTEXT)}close(){this.conn.close()}}function E2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function T2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function I2(t,e,n){const r=new jk;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=aV(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class S2{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new _2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&HI(e.config.tools)&&zI(p);const m=P2(p);if(this.apiClient.isVertexAI())h=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,h);else{const S=this.apiClient.getApiKey();let P="BidiGenerateContent",k="key";S!=null&&S.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",k="access_token"),h=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${P}?${k}=${S}`}let _=()=>{};const R=new Promise(S=>{_=S}),x=e.callbacks,M=function(){var S;(S=x==null?void 0:x.onopen)===null||S===void 0||S.call(x),_({})},w=this.apiClient,I={onopen:M,onmessage:S=>{I2(w,x.onmessage,S)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(S){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(S){}},A=this.webSocketFactory.create(h,R2(m),I);A.connect(),await R;let V=ae(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const S=this.apiClient.getProject(),P=this.apiClient.getLocation();V=`projects/${S}/locations/${P}/`+V}let F={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ma.AUDIO]}:e.config.responseModalities=[Ma.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],v=[];for(const S of O)if(this.isCallableTool(S)){const P=S;v.push(await P.tool())}else v.push(S);v.length>0&&(e.config.tools=v);const E={model:V,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?F=rV(this.apiClient,E):F=nV(this.apiClient,E),delete F.config,A.send(JSON.stringify(F)),new A2(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const w2={turnComplete:!0};class A2{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ut(n.turns),e.isVertexAI()||(r=r.map(i=>Eu(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(C2)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},w2),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:lV(e)}:n={realtimeInput:sV(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function R2(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function P2(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H_=10;function z_(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Fi(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Fi(t){return"callTool"in t&&typeof t.callTool=="function"}function N2(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Fi(i)))!==null&&r!==void 0?r:!1}function $_(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Fi(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function W_(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x2 extends xn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!N2(n)||z_(n.config))return await this.generateContentInternal(u);const c=$_(n);if(c.length>0){const x=c.map(M=>`tools[${M}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let h,p;const m=Ut(u.contents),_=(o=(i=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:H_;let R=0;for(;R<_&&(h=await this.generateContentInternal(u),!(!h.functionCalls||h.functionCalls.length===0));){const x=h.candidates[0].content,M=[];for(const w of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Fi(w)){const A=await w.callTool(h.functionCalls);M.push(...A)}R++,p={role:"user",parts:M},u.contents=Ut(u.contents),u.contents.push(x),u.contents.push(p),W_(u.config)&&(m.push(x),m.push(p))}return W_(u.config)&&(h.automaticFunctionCallingHistory=m),h},this.generateContentStream=async n=>{var r,i,o,s,l;if(this.maybeMoveToResponseJsonSchem(n),z_(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const u=$_(n);if(u.length>0){const p=u.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,h=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(c&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ri(Pn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async u=>Fi(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&HI(e.config.tools)){const u=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),zI(c),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return l}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Fi(s)){const l=s,u=await l.tool();for(const c of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,l)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:H_;let s=!1,l=0;const u=await this.initAfcToolsMap(e);return function(c,h,p){var m,_;return Li(this,arguments,function*(){for(var R,x,M,w;l<o;){s&&(l++,s=!1);const F=yield ge(c.processParamsMaybeAddMcpUsage(p)),O=yield ge(c.generateContentStreamInternal(F)),v=[],E=[];try{for(var I=!0,A=(x=void 0,ns(O)),V;V=yield ge(A.next()),R=V.done,!R;I=!0){w=V.value,I=!1;const S=w;if(yield yield ge(S),S.candidates&&(!((m=S.candidates[0])===null||m===void 0)&&m.content)){E.push(S.candidates[0].content);for(const P of(_=S.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(l<o&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(P.functionCall.name)){const k=yield ge(h.get(P.functionCall.name).callTool([P.functionCall]));v.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(S){x={error:S}}finally{try{!I&&!R&&(M=A.return)&&(yield ge(M.call(A)))}finally{if(x)throw x.error}}if(v.length>0){s=!0;const S=new Do;S.candidates=[{content:{role:"user",parts:v}}],yield yield ge(S);const P=[];P.push(...E),P.push({role:"user",parts:v});const k=Ut(p.contents).concat(P);p.contents=k}else break}})}(this,u,e)}async generateContentInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=O_(this.apiClient,e);return l=z("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=B_(h),m=new Do;return Object.assign(m,p),m})}else{const c=U_(this.apiClient,e);return l=z("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=b_(h),m=new Do;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=O_(this.apiClient,e);return l=z("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Li(this,arguments,function*(){var m,_,R,x;try{for(var M=!0,w=ns(p),I;I=yield ge(w.next()),m=I.done,!m;M=!0){x=I.value,M=!1;const A=x,V=B_(yield ge(A.json()));V.sdkHttpResponse={headers:A.headers};const F=new Do;Object.assign(F,V),yield yield ge(F)}}catch(A){_={error:A}}finally{try{!M&&!m&&(R=w.return)&&(yield ge(R.call(w)))}finally{if(_)throw _.error}}})})}else{const c=U_(this.apiClient,e);return l=z("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Li(this,arguments,function*(){var m,_,R,x;try{for(var M=!0,w=ns(p),I;I=yield ge(w.next()),m=I.done,!m;M=!0){x=I.value,M=!1;const A=x,V=b_(yield ge(A.json()));V.sdkHttpResponse={headers:A.headers};const F=new Do;Object.assign(F,V),yield yield ge(F)}}catch(A){_={error:A}}finally{try{!M&&!m&&(R=w.return)&&(yield ge(R.call(w)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=OV(this.apiClient,e);return l=z("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=BV(h),m=new T_;return Object.assign(m,p),m})}else{const c=UV(this.apiClient,e);return l=z("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=bV(h),m=new T_;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=XV(this.apiClient,e);return l=z("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=jV(h),m=new C_;return Object.assign(m,p),m})}else{const c=YV(this.apiClient,e);return l=z("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=ZV(h),m=new C_;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=DV(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const c=VV(u),h=new Gk;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=XL(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const c=ZL(u),h=new Hk;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=ML(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=DL(u),h=new zk;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=bL(this.apiClient,e);return o=z("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=BL(u),h=new $k;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=gL(this.apiClient,e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>ef(h))}else{const c=mL(this.apiClient,e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>jd(h))}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=wL(this.apiClient,e);return l=z("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=RL(h),m=new I_;return Object.assign(m,p),m})}else{const c=SL(this.apiClient,e);return l=z("{models_url}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=AL(h),m=new I_;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=QL(this.apiClient,e);return l=z("{model}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>ef(h))}else{const c=KL(this.apiClient,e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>jd(h))}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=NV(this.apiClient,e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=kV(h),m=new S_;return Object.assign(m,p),m})}else{const c=PV(this.apiClient,e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=xV(h),m=new S_;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=wV(this.apiClient,e);return l=z("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=RV(h),m=new w_;return Object.assign(m,p),m})}else{const c=SV(this.apiClient,e);return l=z("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=AV(h),m=new w_;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=yV(this.apiClient,e);return o=z("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const c=_V(u),h=new Wk;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=oL(this.apiClient,e);return l=z("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const p=rL(h),m=new Da;return Object.assign(m,p),m})}else{const c=iL(this.apiClient,e);return l=z("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const p=nL(h),m=new Da;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k2 extends xn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=Fk(e);return l=z("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const c=Lk(e);return l=z("{operationName}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=Pk(e);return o=z("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M2(t){const e={},n=a(t,["data"]);if(n!=null&&d(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function D2(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>G2(o))),d(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&d(e,["role"],r),e}function V2(t,e,n){const r={},i=a(e,["expireTime"]);n!==void 0&&i!=null&&d(n,["expireTime"],i);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&d(n,["newSessionExpireTime"],o);const s=a(e,["uses"]);n!==void 0&&s!=null&&d(n,["uses"],s);const l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&d(n,["bidiGenerateContentSetup"],q2(t,l));const u=a(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&d(n,["fieldMask"],u),r}function L2(t,e){const n={},r=a(e,["config"]);return r!=null&&d(n,["config"],V2(t,r,n)),n}function F2(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function U2(t){const e={},n=a(t,["id"]);n!=null&&d(e,["id"],n);const r=a(t,["args"]);r!=null&&d(e,["args"],r);const i=a(t,["name"]);if(i!=null&&d(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function O2(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function b2(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function B2(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","maxOutputTokens"],u);const c=a(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);const h=a(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],Kh(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);const _=a(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],_);const R=a(t,["systemInstruction"]);e!==void 0&&R!=null&&d(e,["setup","systemInstruction"],D2(st(R)));const x=a(t,["tools"]);if(e!==void 0&&x!=null){let O=so(x);Array.isArray(O)&&(O=O.map(v=>z2(oo(v)))),d(e,["setup","tools"],O)}const M=a(t,["sessionResumption"]);e!==void 0&&M!=null&&d(e,["setup","sessionResumption"],H2(M));const w=a(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&d(e,["setup","inputAudioTranscription"],w);const I=a(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],I);const A=a(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&d(e,["setup","realtimeInputConfig"],A);const V=a(t,["contextWindowCompression"]);e!==void 0&&V!=null&&d(e,["setup","contextWindowCompression"],V);const F=a(t,["proactivity"]);return e!==void 0&&F!=null&&d(e,["setup","proactivity"],F),n}function q2(t,e){const n={},r=a(e,["model"]);r!=null&&d(n,["setup","model"],ae(t,r));const i=a(e,["config"]);return i!=null&&d(n,["config"],B2(i,n)),n}function G2(t){const e={},n=a(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&d(e,["fileData"],F2(o));const s=a(t,["functionCall"]);s!=null&&d(e,["functionCall"],U2(s));const l=a(t,["functionResponse"]);l!=null&&d(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&d(e,["inlineData"],M2(u));const c=a(t,["text"]);c!=null&&d(e,["text"],c);const h=a(t,["thought"]);h!=null&&d(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function H2(t){const e={},n=a(t,["handle"]);if(n!=null&&d(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function z2(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],O2(l));const u=a(t,["googleSearch"]);u!=null&&d(e,["googleSearch"],b2(u));const c=a(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $2(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function W2(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=$2(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(c=>s.includes(c)?`generationConfig.${c}`:c));const u=[];o&&u.push(o),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class J2 extends xn{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=L2(this.apiClient,e);o=z("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const u=W2(l,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K2(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["displayName"],r),n}function Q2(t){const e={},n=a(t,["config"]);return n!=null&&K2(n,e),e}function Y2(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function X2(t){const e={},n=a(t,["name"]);n!=null&&d(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&Y2(r,e),e}function Z2(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function j2(t,e){const n={},r=a(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["customMetadata"],o)}const i=a(t,["chunkingConfig"]);return e!==void 0&&i!=null&&d(e,["chunkingConfig"],i),n}function eF(t){const e={},n=a(t,["name"]);n!=null&&d(e,["name"],n);const r=a(t,["metadata"]);r!=null&&d(e,["metadata"],r);const i=a(t,["done"]);i!=null&&d(e,["done"],i);const o=a(t,["error"]);o!=null&&d(e,["error"],o);const s=a(t,["response"]);return s!=null&&d(e,["response"],nF(s)),e}function tF(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const r=a(t,["fileName"]);r!=null&&d(e,["fileName"],r);const i=a(t,["config"]);return i!=null&&j2(i,e),e}function nF(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&d(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function rF(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function iF(t){const e={},n=a(t,["config"]);return n!=null&&rF(n,e),e}function oF(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["fileSearchStores"],o)}return e}function sF(t,e){const n={},r=a(t,["mimeType"]);e!==void 0&&r!=null&&d(e,["mimeType"],r);const i=a(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);const o=a(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),d(e,["customMetadata"],l)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),n}function lF(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);const r=a(t,["config"]);return r!=null&&sF(r,e),e}function aF(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uF(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function cF(t){const e={},n=a(t,["name"]);n!=null&&d(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&uF(r,e),e}function dF(t){const e={},n=a(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function fF(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function hF(t){const e={},n=a(t,["parent"]);n!=null&&d(e,["_url","parent"],n);const r=a(t,["config"]);return r!=null&&fF(r,e),e}function pF(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const i=a(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mF extends xn{constructor(e){super(),this.apiClient=e,this.list=async n=>new ri(Pn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=dF(e);return o=z("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=cF(e);i=z("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hF(e);return o=z("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=pF(u),h=new Jk;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gF extends xn{constructor(e,n=new mF(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new ri(Pn.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Q2(e);return o=z("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Z2(e);return o=z("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=X2(e);i=z("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=iF(e);return o=z("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=oF(u),h=new Kk;return Object.assign(h,c),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=lF(e);return o=z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=aF(u),h=new Qk;return Object.assign(h,c),h})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=tF(e);return o=z("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const c=eF(u),h=new Hh;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yF(t,e){const n={},r=a(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function _F(t,e){const n={},r=a(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function vF(t,e,n){const r={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=a(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&d(e,["displayName"],i),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=a(t,["epochCount"]);e!==void 0&&o!=null&&d(e,["tuningTask","hyperparameters","epochCount"],o);const s=a(t,["learningRateMultiplier"]);if(s!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=a(t,["batchSize"]);e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","batchSize"],l);const u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&d(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function EF(t,e,n){const r={};let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const _=a(t,["validationDataset"]);e!==void 0&&_!=null&&d(e,["supervisedTuningSpec"],J_(_))}else if(i==="PREFERENCE_TUNING"){const _=a(t,["validationDataset"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec"],J_(_))}const o=a(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&d(e,["tunedModelDisplayName"],o);const s=a(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const _=a(t,["epochCount"]);e!==void 0&&_!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(l==="PREFERENCE_TUNING"){const _=a(t,["epochCount"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const _=a(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(u==="PREFERENCE_TUNING"){const _=a(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let c=a(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const _=a(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(c==="PREFERENCE_TUNING"){const _=a(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let h=a(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const _=a(t,["adapterSize"]);e!==void 0&&_!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(h==="PREFERENCE_TUNING"){const _=a(t,["adapterSize"]);e!==void 0&&_!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=a(t,["labels"]);e!==void 0&&p!=null&&d(e,["labels"],p);const m=a(t,["beta"]);return e!==void 0&&m!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function TF(t,e){const n={},r=a(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);const i=a(t,["preTunedModel"]);i!=null&&d(n,["preTunedModel"],i);const o=a(t,["trainingDataset"]);o!=null&&MF(o);const s=a(t,["config"]);return s!=null&&vF(s,n),n}function CF(t,e){const n={},r=a(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);const i=a(t,["preTunedModel"]);i!=null&&d(n,["preTunedModel"],i);const o=a(t,["trainingDataset"]);o!=null&&DF(o,n,e);const s=a(t,["config"]);return s!=null&&EF(s,n,e),n}function IF(t,e){const n={},r=a(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function SF(t,e){const n={},r=a(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function wF(t,e,n){const r={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function AF(t,e,n){const r={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function RF(t,e){const n={},r=a(t,["config"]);return r!=null&&wF(r,n),n}function PF(t,e){const n={},r=a(t,["config"]);return r!=null&&AF(r,n),n}function NF(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);const o=a(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>$I(l))),d(n,["tuningJobs"],s)}return n}function xF(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);const o=a(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>nf(l))),d(n,["tuningJobs"],s)}return n}function kF(t,e){const n={},r=a(t,["name"]);r!=null&&d(n,["model"],r);const i=a(t,["name"]);return i!=null&&d(n,["endpoint"],i),n}function MF(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=a(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(n,["examples","examples"],i)}return n}function DF(t,e,n){const r={};let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function $I(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&d(n,["name"],i);const o=a(t,["state"]);o!=null&&d(n,["state"],AI(o));const s=a(t,["createTime"]);s!=null&&d(n,["createTime"],s);const l=a(t,["tuningTask","startTime"]);l!=null&&d(n,["startTime"],l);const u=a(t,["tuningTask","completeTime"]);u!=null&&d(n,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const h=a(t,["description"]);h!=null&&d(n,["description"],h);const p=a(t,["baseModel"]);p!=null&&d(n,["baseModel"],p);const m=a(t,["_self"]);return m!=null&&d(n,["tunedModel"],kF(m)),n}function nf(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&d(n,["name"],i);const o=a(t,["state"]);o!=null&&d(n,["state"],AI(o));const s=a(t,["createTime"]);s!=null&&d(n,["createTime"],s);const l=a(t,["startTime"]);l!=null&&d(n,["startTime"],l);const u=a(t,["endTime"]);u!=null&&d(n,["endTime"],u);const c=a(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);const h=a(t,["error"]);h!=null&&d(n,["error"],h);const p=a(t,["description"]);p!=null&&d(n,["description"],p);const m=a(t,["baseModel"]);m!=null&&d(n,["baseModel"],m);const _=a(t,["tunedModel"]);_!=null&&d(n,["tunedModel"],_);const R=a(t,["preTunedModel"]);R!=null&&d(n,["preTunedModel"],R);const x=a(t,["supervisedTuningSpec"]);x!=null&&d(n,["supervisedTuningSpec"],x);const M=a(t,["preferenceOptimizationSpec"]);M!=null&&d(n,["preferenceOptimizationSpec"],M);const w=a(t,["tuningDataStats"]);w!=null&&d(n,["tuningDataStats"],w);const I=a(t,["encryptionSpec"]);I!=null&&d(n,["encryptionSpec"],I);const A=a(t,["partnerModelTuningSpec"]);A!=null&&d(n,["partnerModelTuningSpec"],A);const V=a(t,["customBaseModel"]);V!=null&&d(n,["customBaseModel"],V);const F=a(t,["experiment"]);F!=null&&d(n,["experiment"],F);const O=a(t,["labels"]);O!=null&&d(n,["labels"],O);const v=a(t,["outputUri"]);v!=null&&d(n,["outputUri"],v);const E=a(t,["pipelineJob"]);E!=null&&d(n,["pipelineJob"],E);const S=a(t,["serviceAccount"]);S!=null&&d(n,["serviceAccount"],S);const P=a(t,["tunedModelDisplayName"]);P!=null&&d(n,["tunedModelDisplayName"],P);const k=a(t,["veoTuningSpec"]);return k!=null&&d(n,["veoTuningSpec"],k),n}function VF(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&d(n,["name"],i);const o=a(t,["metadata"]);o!=null&&d(n,["metadata"],o);const s=a(t,["done"]);s!=null&&d(n,["done"],s);const l=a(t,["error"]);return l!=null&&d(n,["error"],l),n}function J_(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);const i=a(t,["vertexDatasetResource"]);return i!=null&&d(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LF extends xn{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new ri(Pn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Qd.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=SF(e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>nf(h))}else{const c=IF(e);return l=z("{name}",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>$I(h))}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const c=PF(e);return l=z("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=xF(h),m=new A_;return Object.assign(m,p),m})}else{const c=RF(e);return l=z("tunedModels",c._url),u=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=NF(h),m=new A_;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const u=_F(e);s=z("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=yF(e);s=z("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=CF(e,e);return o=z("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>nf(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=TF(e);return o=z("tunedModels",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>VF(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FF{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const UF=1024*1024*8,OF=3,bF=1e3,BF=2,La="x-goog-upload-status";async function qF(t,e,n){var r;const i=await WI(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[La])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function GF(t,e,n){var r;const i=await WI(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[La])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=EI(o),l=new zh;return Object.assign(l,s),l}async function WI(t,e,n){var r,i;let o=0,s=0,l=new Yd(new Response),u="upload";for(o=t.size;s<o;){const c=Math.min(UF,o-s),h=t.slice(s,s+c);s+c>=o&&(u+=", finalize");let p=0,m=bF;for(;p<OF&&(l=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[La]));)p++,await zF(m),m=m*BF;if(s+=c,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[La])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function HF(t){return{size:t.size,type:t.type}}function zF(t){return new Promise(e=>setTimeout(e,t))}class $F{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qF(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await GF(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await HF(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WF{create(e,n,r){return new JF(e,n,r)}}class JF{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K_="x-goog-api-key";class KF{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(K_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(K_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QF="gl-node/";class YF{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Ak(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new KF(this.apiKey);this.apiClient=new d2({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:QF+"web",uploader:new $F,downloader:new FF}),this.models=new x2(this.apiClient),this.live=new S2(this.apiClient,i,new WF),this.batches=new tD(this.apiClient),this.chats=new FD(this.models,this.apiClient),this.caches=new DD(this.apiClient),this.files=new WD(this.apiClient),this.operations=new k2(this.apiClient),this.authTokens=new J2(this.apiClient),this.tunings=new LF(this.apiClient),this.fileSearchStores=new gF(this.apiClient)}}const XF=new YF({apiKey:"AIzaSyB7psCDQy1fx6JRlkVOF_dez0ngOul724U"}),Q_="gemini-2.5-flash",Y_=3,ZF=()=>{const[t,e]=q.useState(""),[n,r]=q.useState("Ask the AI model about anything."),[i,o]=q.useState(!1),s=async()=>{if(!(!t.trim()||i)){o(!0),r("Thinking...");for(let u=1;u<=Y_;u++)try{const c=await XF.models.generateContentStream({model:Q_,contents:[{role:"user",parts:[{text:t}]}]});let h="";for await(const p of c)h+=p.text,r(h);o(!1);return}catch(c){console.error(`AI API Error (Attempt ${u}):`,c);const h=c.message.includes('"code": 503');if(h&&u<Y_){const p=Math.pow(2,u)*1e3;r(`Service temporarily overloaded. Retrying in ${p/1e3}s...`),await new Promise(m=>setTimeout(m,p))}else{r(h?"Failed after multiple retries. Try again later.":"An unrecoverable API error occurred. Check the console."),o(!1);return}}o(!1)}},l=u=>{u.key==="Enter"&&!i&&s()};return T.jsxs("div",{className:"ai-container",children:[T.jsx("h1",{children:" Generative AI Question Answering"}),T.jsxs("div",{className:"input-area",children:[T.jsx("input",{type:"text",value:t,onChange:u=>e(u.target.value),onKeyPress:l,placeholder:"E.g., What is the difference between React and Vue?",disabled:i,"aria-label":"Enter your question for the AI model"}),T.jsx("button",{onClick:s,disabled:i,className:"ai-button",children:i?"Asking...":"Ask AI"})]}),T.jsx("div",{className:`response-box ${i?"loading":""}`,children:T.jsx("p",{className:"response-text",children:n})}),T.jsxs("p",{className:"note",children:["Note: This feature uses a fast, specialized language model (",Q_,")."]})]})},rf="mrdoob",jF=`https://api.github.com/users/${rf}/repos`,eU=({repo:t})=>{const e=t.language||"Documentation",n=e.toLowerCase().replace(/[#.+]/g,""),r=t.stargazers_count>=5;return T.jsxs("div",{className:`project-card ${r?"featured":""}`,children:[T.jsx("h3",{className:"project-title",children:t.name.replace(/-/g," ")}),T.jsx("p",{className:"project-description",children:t.description||"No description provided."}),T.jsxs("div",{className:"project-meta",children:[T.jsx("span",{className:`language-tag ${n}`,children:e}),T.jsxs("span",{className:"star-count",children:[" ",t.stargazers_count," Stars"]})]}),T.jsxs("div",{className:"project-links",children:[T.jsx("a",{href:t.html_url,target:"_blank",rel:"noopener noreferrer","aria-label":`View code for ${t.name} on GitHub`,children:T.jsx("i",{className:"link-icon",children:"Code"})}),t.homepage&&T.jsx("a",{href:t.homepage,target:"_blank",rel:"noopener noreferrer","aria-label":`View live demo for ${t.name}`,children:T.jsx("i",{className:"link-icon",children:"Demo"})})]})]})};function tU(){const[t,e]=q.useState([]),[n,r]=q.useState(!0),[i,o]=q.useState(null);return q.useEffect(()=>{(async()=>{try{const l=await fetch(jF);if(!l.ok)throw l.status===403?new Error("GitHub API Rate Limit Exceeded. Try again in an hour."):new Error(`GitHub API returned status: ${l.status}`);const c=(await l.json()).filter(h=>!h.fork&&h.stargazers_count>0&&h.description).sort((h,p)=>p.stargazers_count-h.stargazers_count);e(c)}catch(l){console.error("Failed to fetch GitHub projects:",l),o(l.message)}finally{r(!1)}})()},[]),T.jsxs("section",{id:"projects",className:"projects-section","aria-labelledby":"projects-title",children:[T.jsxs("h2",{id:"projects-title",className:"section-title",children:[T.jsx("span",{className:"number"})," Projects & Open Source"]}),T.jsxs("div",{className:"projects-list-container",children:[n&&T.jsx("p",{className:"status-message",children:"Loading projects from GitHub..."}),i&&T.jsxs("div",{className:"error-message",children:[T.jsxs("p",{children:["Error fetching projects: **",i,"**"]}),T.jsx("p",{children:"If this error persists, the GitHub API rate limit may be exceeded. Please try again later."})]}),!n&&t.length===0&&!i&&T.jsxs("div",{className:"status-message",children:[T.jsx("p",{children:"No high-quality, non-forked repositories found. I'm busy coding a new one!"}),T.jsx("a",{href:`https://github.com/${rf}?tab=repositories`,target:"_blank",rel:"noopener noreferrer",className:"cta-button secondary",children:"View All Repositories on GitHub"})]}),T.jsx("div",{className:"project-grid",children:t.map(s=>T.jsx(eU,{repo:s},s.id))})]}),!n&&t.length>0&&T.jsxs("div",{className:"projects-footer-cta",children:[T.jsx("p",{children:"Want to see more of my code?"}),T.jsx("a",{href:`https://github.com/${rf}`,target:"_blank",rel:"noopener noreferrer",className:"cta-button primary",children:"Visit My Full GitHub Profile"})]})]})}function nU(){const[t,e]=q.useState(!1),[n,r]=q.useState(""),[i,o]=q.useState([]),[s,l]=q.useState([]),[u,c]=q.useState(!0),[h,p]=q.useState(null),[m,_]=q.useState("connected"),[R,x]=q.useState(""),[M,w]=q.useState(""),I=v=>{v.preventDefault(),n==="PANKAJ-ADMIN-2025"?e(!0):alert("Access Denied! Incorrect Password.")};q.useEffect(()=>{if(!t)return;const v=ka(Di(yn,"clients"),Wd("timestamp","desc")),E=Jd(v,k=>{const D=k.docs.map(N=>({id:N.id,...N.data()}));o(D)}),S=ka(Di(yn,"reviews"),Wd("timestamp","desc")),P=Jd(S,k=>{const D=k.docs.map(N=>({id:N.id,...N.data()}));l(D),c(!1)});return()=>{E(),P()}},[t]);const A=v=>{p(v),_("connected"),x(""),w("")},V=async()=>{if(h){if(!R){alert("Please write a note or result.");return}try{const v=Hl(yn,"clients",h.id);let E={lastUpdated:new Date},S="";const P=new Date().toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});if(m==="connected")E.status=" Connected",E.conversationNote=R,E.isClosed=!0,E.nextCallTime=null,S=` CONNECTED: ${R} (${P})`;else if(m==="reschedule"){if(!M){alert("Please select a date for the callback.");return}E.status=" Rescheduled",E.conversationNote=`Reschedule Reason: ${R}`,E.nextCallTime=M,S=` RESCHEDULED to ${new Date(M).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}: ${R} (${P})`}else if(m==="no_answer"){const N=(h.callbackAttempts||0)+1;E.callbackAttempts=N,S=` CALL ${N}: ${R} (${P})`,N>=3?E.status=" Max Attempts (3)":E.status=`Attempt ${N} Failed`}const k=h.callHistory||[];E.callHistory=[S,...k],await nk(v,E),p(null),x(""),w("")}catch(v){console.error("Error saving action:",v),alert("Failed to save action.")}}},F=async v=>{window.confirm("Are you sure you want to delete this LEAD?")&&await Iy(Hl(yn,"clients",v))},O=async v=>{window.confirm("Are you sure you want to delete this REVIEW?")&&await Iy(Hl(yn,"reviews",v))};return t?u?T.jsx("div",{className:"admin-loading",children:T.jsx("h2",{style:{color:"#64ffda"},children:"Loading Dashboard..."})}):T.jsxs("div",{className:"admin-dashboard",children:[T.jsxs("div",{className:"admin-header",children:[T.jsx("h2",{children:"Admin Dashboard"}),T.jsx("button",{className:"logout-btn",onClick:()=>e(!1),children:"Logout"})]}),T.jsxs("h3",{className:"section-header",children:[" Leads & Callback Status (",i.length,")"]}),T.jsx("div",{className:"table-responsive",children:T.jsxs("table",{className:"client-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Date"}),T.jsx("th",{children:"Client Details"}),T.jsx("th",{style:{minWidth:"250px"},children:"Interaction History"}),T.jsx("th",{children:"Current Status"}),T.jsx("th",{children:"Action"})]})}),T.jsx("tbody",{children:i.map(v=>{var E,S,P;return T.jsxs("tr",{className:v.isClosed?"row-done":"",children:[T.jsx("td",{children:(E=v.timestamp)!=null&&E.seconds?new Date(v.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),T.jsxs("td",{children:[T.jsx("strong",{children:v.name}),T.jsx("br",{}),v.mobile,T.jsx("br",{})]}),T.jsx("td",{children:T.jsx("div",{className:"history-container",children:v.callHistory&&v.callHistory.length>0?v.callHistory.map((k,D)=>T.jsx("div",{className:"history-entry",children:k},D)):T.jsx("span",{style:{color:"#8892b0",fontStyle:"italic"},children:"No interactions yet"})})}),T.jsxs("td",{children:[T.jsx("span",{className:`status-badge ${(S=v.status)!=null&&S.includes("Connected")?"status-success":(P=v.status)!=null&&P.includes("Max")?"status-fail":"status-new"}`,children:v.status||"New Lead"}),v.nextCallTime&&T.jsxs("div",{className:"time-box",children:[" Next: ",new Date(v.nextCallTime).toLocaleString()]}),v.isClosed&&T.jsxs("div",{className:"note-box",style:{marginTop:"5px"},children:[T.jsx("strong",{children:"Final Note:"})," ",v.conversationNote]})]}),T.jsx("td",{children:T.jsxs("div",{className:"action-buttons",children:[v.isClosed?T.jsx("button",{className:"btn-disabled",disabled:!0,children:" Done"}):T.jsx("button",{className:"btn-process",onClick:()=>A(v),children:" Call / Action"}),T.jsx("button",{className:"delete-btn-icon",onClick:()=>F(v.id),title:"Delete",children:""})]})})]},v.id)})})]})}),T.jsx("hr",{className:"admin-divider",style:{margin:"40px 0",borderColor:"#233554"}}),T.jsxs("h3",{className:"section-header",children:[" Client Reviews (",s.length,")"]}),T.jsx("div",{className:"table-responsive",children:T.jsxs("table",{className:"client-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Date"}),T.jsx("th",{children:"Name"}),T.jsx("th",{children:"Review"}),T.jsx("th",{children:"Action"})]})}),T.jsx("tbody",{children:s.map(v=>{var E;return T.jsxs("tr",{children:[T.jsx("td",{children:(E=v.timestamp)!=null&&E.seconds?new Date(v.timestamp.seconds*1e3).toLocaleDateString():"Just now"}),T.jsx("td",{children:v.name}),T.jsx("td",{style:{maxWidth:"300px"},children:v.text}),T.jsx("td",{children:T.jsx("button",{className:"delete-btn",onClick:()=>O(v.id),children:"Delete"})})]},v.id)})})]})}),h&&T.jsx("div",{className:"modal-overlay",children:T.jsxs("div",{className:"modal-content admin-modal",children:[T.jsxs("h3",{children:[" Call Action: ",h.name]}),T.jsxs("p",{style:{marginBottom:"15px",color:"#8892b0"},children:["Mobile: ",T.jsx("strong",{children:h.mobile})]}),T.jsxs("div",{className:"outcome-selector",children:[T.jsxs("label",{className:`outcome-option ${m==="connected"?"selected":""}`,children:[T.jsx("input",{type:"radio",name:"outcome",checked:m==="connected",onChange:()=>_("connected")})," Connected (Submit & Close)"]}),T.jsxs("label",{className:`outcome-option ${m==="reschedule"?"selected":""}`,children:[T.jsx("input",{type:"radio",name:"outcome",checked:m==="reschedule",onChange:()=>_("reschedule")})," Reschedule (Busy)"]}),T.jsxs("label",{className:`outcome-option ${m==="no_answer"?"selected":""}`,children:[T.jsx("input",{type:"radio",name:"outcome",checked:m==="no_answer",onChange:()=>_("no_answer")})," No Answer (Attempt +1)"]})]}),T.jsxs("div",{className:"outcome-inputs",children:[m==="connected"&&T.jsxs(T.Fragment,{children:[T.jsx("label",{children:"Final Conversation Note:"}),T.jsx("textarea",{className:"admin-textarea",rows:"3",placeholder:"E.g., Project discussed, quotation sent...",value:R,onChange:v=>x(v.target.value)})]}),m==="reschedule"&&T.jsxs(T.Fragment,{children:[T.jsx("label",{children:"Reason / Note:"}),T.jsx("input",{className:"admin-input",placeholder:"E.g., In a meeting, Driving...",value:R,onChange:v=>x(v.target.value)}),T.jsx("label",{children:"Next Callback Time:"}),T.jsx("input",{type:"datetime-local",className:"admin-date-input",value:M,onChange:v=>w(v.target.value)})]}),m==="no_answer"&&T.jsxs(T.Fragment,{children:[T.jsx("label",{children:"Result:"}),T.jsx("input",{className:"admin-input",placeholder:"E.g., Ringing, Switched Off...",value:R,onChange:v=>x(v.target.value)})]})]}),T.jsxs("div",{className:"modal-actions",children:[T.jsx("button",{className:"cancel-btn",onClick:()=>p(null),children:"Cancel"}),T.jsx("button",{className:"confirm-btn",onClick:V,children:"Submit"})]})]})})]}):T.jsx("div",{className:"admin-login-container",children:T.jsxs("div",{className:"admin-login-card",children:[T.jsx("h2",{children:" Owner Access Only"}),T.jsxs("form",{onSubmit:I,children:[T.jsx("input",{type:"password",placeholder:"Enter Admin Password",value:n,onChange:v=>r(v.target.value),className:"admin-input"}),T.jsx("button",{type:"submit",className:"admin-btn",children:"Login"})]})]})})}function rU(){return T.jsxs("div",{className:"App",children:[T.jsx(tR,{}),T.jsx("main",{children:T.jsxs(H0,{children:[T.jsx(pn,{path:"/",element:T.jsx(nR,{})}),T.jsx(pn,{path:"/about",element:T.jsx(sk,{})}),T.jsx(pn,{path:"/skill",element:T.jsx(Ck,{})}),T.jsx(pn,{path:"/projects",element:T.jsx(tU,{})}),T.jsx(pn,{path:"/contact",element:T.jsx(Tk,{})}),T.jsx(pn,{path:"*",element:T.jsx("div",{children:"404 Page Not Found"})}),T.jsx(pn,{path:"/ai-answer",element:T.jsx(ZF,{})}),T.jsx(pn,{path:"/admin",element:T.jsx(nU,{})})]})}),T.jsx(iR,{})]})}Ac.createRoot(document.getElementById("root")).render(T.jsx(lv.StrictMode,{children:T.jsx(Y0,{future:{v7_relativeSplatPath:!0,v7_startTransition:!0},children:T.jsx(rU,{})})}));
